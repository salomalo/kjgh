
/*------------------------------------------------------------------------
# Map Object Manager Class
# ------------------------------------------------------------------------
# author:    Dmitry Zhuk
# copyright: Copyright (C) 2013 zhuk.cc. All Rights Reserved.
# license:   http://creativecommons.org/licenses/by-nc-nd/4.0/
#            Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.
# website:   http://zhuk.cc
# Technical Support Forum: http://forum.zhuk.cc/
-------------------------------------------------------------------------*/
function jm(iH,jc,hQ,iw,ij,hK){var iW;var it=ij;if(iH!=0){it=jF(hQ,it.toLowerCase());}else{it=it.toLowerCase();}if(jc==2||jc==3){iW=iK(iw,hK.toLowerCase());}else{iW=hK.toLowerCase();}if(jc==0){return iW.indexOf(it)!== -1;}else if(jc==1){return iW.indexOf(iK(iw,it))!== -1;}else if(jc==2){return iW.indexOf(it)!== -1;}else if(jc==3){return iW.indexOf(iK(iw,it))!== -1;}else{return iW.indexOf(it)!== -1;}};function jF(hQ,ij){var ju="";if((typeof hQ!=='undefined')&&(hQ!=null)){for(var jw=0;jw<ij.length;jw++){var iS=hQ[ij.charAt(jw)];if((typeof iS!=='undefined')&&(iS!=null)){ju+=iS;}else{ju+=ij.charAt(jw);}}}else{ju=ij;}return ju;};function iK(iw,ij){var ju="";if((typeof iw!=='undefined')&&(iw!=null)){for(var jw=0;jw<ij.length;jw++){var iQ=iw[ij.charAt(jw)];if((typeof iQ!=='undefined')&&(iQ!=null)){ju+=iQ;}else{ju+=ij.charAt(jw);}}}else{ju=ij;}return ju;};function iE(iH,gW){var ju="";if(iH!=100){if(iH==1){if(gW=="Accent"){ju="ё:е";}else if(gW=="Mapping"){ju="f:а;,:б;d:в;u:г;l:д;t:е;`:ё;;:ж;p:з;b:и;q:й;r:к;k:л;v:м;y:н;j:о;g:п;h:р;c:с;n:т;e:у;a:ф;[:х;w:ц;x:ч;i:ш;o:щ;m:ь;s:ы;]:ъ;':э;.:ю;z:я;<:Б;~:Ё;::Ж;{:Х;}:Ъ;QQ:Э";}else{ju="";}}else if(iH==2){if(gW=="Accent"){ju="";}else if(gW=="Mapping"){ju="f:ф;d:д;u:у;l:л;t:т;`:ѝ;;:ч;p:п;b:б;q:љ;r:р;k:к;v:в;y:ѕ;j:ј;g:г;h:х;c:с;n:н;e:е;a:а;[:ш;w:љ;x:џ;i:и;o:о;m:м;s:с;]:ѓ;':ќ;z:з;\\:ж;~:Ѝ;::Ч;{:Ш;}:Ѓ;QQ:Ќ;|:Ж";}else{ju="";}}else{ju="";}}return ju;};function zhbdmMapObjectManager(){zhbdmMapObjectManager.ac+=1;this.bQ=zhbdmMapObjectManager.ac;this.G=[];this.eU=[];this.fI=[];this.fX=[];this.gn=[];this.gG=[];this.aY=[];this.bL=[];this.al=[];this.ct=[];this.bE=[];this.fr=[];this.dS=[];this.gy="";this.gZ="";this.hd=[];this.fa;this.iG=0;this.il;this.jf=0;this.ay=false;this.bm=false;this.az=false;this.ie="Independent";this.bI=false;this.aZ=false;this.eB=false;this.iX=0;this.dZ=false;this.et=32;this.eS=35;this.ew=35;this.fg;this.iv=false;this.er=false;this.bz=0;this.bB="";this.bO="";this.bF="";this.hY="";this.aw=0;this.bV="";this.aQ="";this.bq=0;this.aD=0;this.fC=0;this.map=null;this.hm="";this.bG=null;this.dj=null;this.aj=jQuery.noConflict();this.gO=false;this.gj=null;this.bN=[];this.jq=[];this.jE=[];this.R=null;this.C=null;this.J=null;this.h=[];this.bK=null;this.ah=null;this.aH=null;this.parameter_val_placemark_grouplistid=null;this.parameter_val_placemark_categorylistid=null;this.bs=null;this.parameter_val_pathlistid=null;this.parameter_val_expathlistid=null;this.parameter_val_path_grouplistid=null;this.parameter_val_path_categorylistid=null;this.dQ=null;this.cb=null;this.bS="";this.cZ="";this.cA="";this.dw="";this.cp="";this.dA="";this.iL=0;this.jn=0;this.ii=0;this.eV=0;this.jD=0;this.fq="";this.eh="";this.eH=0;this.gz=5;this.hz;this.gh=0;this.fH=0;this.eQ=0;this.eE=0;this.eo="";this.markerlistsearchType=0;this.markerlistsearchMappingType=0;this.markerlistsearchMapping="";this.markerlistsearchAccent="";this.markerlistsearchAccentSide='0';this.grouplistsearchType=0;this.grouplistsearchMappingType=0;this.grouplistsearchMapping="";this.grouplistsearchAccent="";this.grouplistsearchAccentSide='0';zhbdmMapObjectManager.aO[this.bQ]=this;this.fF='a-markergroup_';};zhbdmMapObjectManager.ac=0;zhbdmMapObjectManager.aO=[];zhbdmMapObjectManager.prototype.setPanelHeightDeltaFix=function(t){this.gz=t;};zhbdmMapObjectManager.prototype.setCompatibleMode=function(t){this.jD=t;};zhbdmMapObjectManager.prototype.setAjaxBufferSizePlacemark=function(t){this.iL=t;};zhbdmMapObjectManager.prototype.setAjaxBufferSizePath=function(t){this.jn=t;};zhbdmMapObjectManager.prototype.setAjaxBufferSizeRoute=function(t){this.ii=t;};zhbdmMapObjectManager.prototype.setPlacemarkLoadType=function(t){this.eV=t;};zhbdmMapObjectManager.prototype.setMap=function(t){this.map=t;};zhbdmMapObjectManager.prototype.setObjectGroupManagementType=function(t){this.ie=t;};zhbdmMapObjectManager.prototype.setMapPanorama=function(t){this.gj=t;this.gO=true;};zhbdmMapObjectManager.prototype.setMapLanguageTag=function(t){this.hm=t;};zhbdmMapObjectManager.prototype.addManagedGroup=function(cq,gm,iZ){var hc;hc=new Object();hc.id=cq;hc.title=gm;hc.description=iZ;this.fX.push(hc);};zhbdmMapObjectManager.prototype.setPlacemarkListSearchMapping=function(gW,jc,iw,hQ){this.markerlistsearchMappingType=gW;this.markerlistsearchAccent=iw;this.markerlistsearchAccentSide=jc;this.markerlistsearchMapping=hQ;};zhbdmMapObjectManager.prototype.setGroupListSearchMapping=function(gW,jc,iw,hQ){this.grouplistsearchMappingType=gW;this.grouplistsearchAccent=iw;this.grouplistsearchAccentSide=jc;this.grouplistsearchMapping=hQ;};zhbdmMapObjectManager.prototype.setInfowin=function(t){this.bG=t;};zhbdmMapObjectManager.prototype.setPanelInfowin=function(t){this.eH=t;};zhbdmMapObjectManager.prototype.setCenterPlacemark=function(t){this.gy=t;};zhbdmMapObjectManager.prototype.addActionPlacemarkAction=function(t){this.hd.push(t);};zhbdmMapObjectManager.prototype.iq=function(){var gN=[];for(var i=0;i<this.hd.length;i++){if(this.hd[i]=="bounce"){gN.push(this.hd[i]);break;}}for(var i=0;i<this.hd.length;i++){if(this.hd[i]=="click"){gN.push(this.hd[i]);break;}}for(var i=0;i<this.hd.length;i++){if(this.hd[i]!="bounce"&&this.hd[i]!="click"){gN.push(this.hd[i]);break;}}this.hd=gN;};zhbdmMapObjectManager.prototype.setActionPlacemark=function(t){this.gZ=t;};zhbdmMapObjectManager.prototype.setRequestURL=function(t){this.bV=t;};zhbdmMapObjectManager.prototype.setContactAttrs=function(t){this.aQ=t;};zhbdmMapObjectManager.prototype.setUserContact=function(t){this.bq=t;};zhbdmMapObjectManager.prototype.setUserUser=function(t){this.aD=t;};zhbdmMapObjectManager.prototype.setServiceDirection=function(t){this.bz=t;};zhbdmMapObjectManager.prototype.setIcoIcon=function(t){this.bB=t;};zhbdmMapObjectManager.prototype.setIcoUtils=function(t){this.bO=t;};zhbdmMapObjectManager.prototype.setIcoDir=function(t){this.bF=t;};zhbdmMapObjectManager.prototype.setArticleID=function(t){this.hY=t;this.fF='a-markergroup'+t+"_";};zhbdmMapObjectManager.prototype.setPlacemarkRating=function(t){this.aw=t;};zhbdmMapObjectManager.prototype.setPlacemarkTitleTag=function(t){this.fq=t;};zhbdmMapObjectManager.prototype.setPlacemarkCreationInfo=function(t){this.fC=t;};zhbdmMapObjectManager.prototype.setFeature4Control=function(t){this.eh=t;};zhbdmMapObjectManager.prototype.addOverlayMapType=function(t){this.gn.push(t);};zhbdmMapObjectManager.prototype.addGroundOverlay=function(t){this.gG.push(t);};zhbdmMapObjectManager.prototype.setHoverInfoBubble=function(t){this.J=t;};zhbdmMapObjectManager.prototype.setHoverInfoWindow=function(t){this.C=t;};zhbdmMapObjectManager.prototype.setHoverMarkerType=function(t){this.R=t;};zhbdmMapObjectManager.prototype.setUserMarkersFilter=function(t){this.bs=String(t).replace(/\s+/g,"");};zhbdmMapObjectManager.prototype.setPlacemarkCategotyList=function(t){this.parameter_val_placemark_categorylistid=String(t).replace(/\s+/g,"");};zhbdmMapObjectManager.prototype.setPlacemarkGroupList=function(t){this.parameter_val_placemark_grouplistid=String(t).replace(/\s+/g,"");};zhbdmMapObjectManager.prototype.setExcludePlacemarkList=function(t){this.aH=String(t).replace(/\s+/g,"");};zhbdmMapObjectManager.prototype.setPlacemarkList=function(t){this.ah=String(t).replace(/\s+/g,"");};zhbdmMapObjectManager.prototype.setPathCategotyList=function(t){this.parameter_val_path_categorylistid=String(t).replace(/\s+/g,"");};zhbdmMapObjectManager.prototype.setPathGroupList=function(t){this.parameter_val_path_grouplistid=String(t).replace(/\s+/g,"");};zhbdmMapObjectManager.prototype.setExcludePathList=function(t){this.parameter_val_expathlistid=String(t).replace(/\s+/g,"");};zhbdmMapObjectManager.prototype.setPathList=function(t){this.parameter_val_pathlistid=String(t).replace(/\s+/g,"");};zhbdmMapObjectManager.prototype.setMapID=function(t){this.bK=String(t).replace(/\s+/g,"");};zhbdmMapObjectManager.prototype.enableObjectGroupManagement=function(){this.az=true;};zhbdmMapObjectManager.prototype.enablePlacemarkList=function(){this.er=true;};zhbdmMapObjectManager.prototype.enableOpacityOverlayControl=function(){this.iv=true;};zhbdmMapObjectManager.prototype.enablePlacemarkGroupManagement=function(){this.bI=true;};zhbdmMapObjectManager.prototype.enablePathGroupManagement=function(){this.aZ=true;};zhbdmMapObjectManager.prototype.enablePlacemarkSpiderManagement=function(){this.dZ=true;this.fg=new google.maps.OverlayView();this.fg.draw=function(){};this.fg.setMap(this.map);};zhbdmMapObjectManager.prototype.enablePathXGroupManagement=function(){this.eB=true;};zhbdmMapObjectManager.prototype.enablePlacemarkClusterization=function(){this.ay=true;};zhbdmMapObjectManager.prototype.enablePlacemarkClusterizationByGroup=function(){this.bm=true;};zhbdmMapObjectManager.prototype.setMarkerListPos=function(t){this.fH=t;};zhbdmMapObjectManager.prototype.setMarkerListContent=function(t){this.eQ=t;};zhbdmMapObjectManager.prototype.setMarkerListAction=function(t){this.eE=t;};zhbdmMapObjectManager.prototype.setMarkerListCSSStyle=function(t){this.eo=t;};zhbdmMapObjectManager.prototype.PlacemarkAdd=function(L,co,T,K){zhbdmMapObjectManager.prototype.cE(this,L,co,T,K);};zhbdmMapObjectManager.prototype.cE=function(l,L,co,T,K){var k=l;var bv=L;var bi;k.bN[co]=T;if(typeof k.aY[bv]!=='undefined'){k.aY[bv]=1;bi=k.bL[bv];bi.push(T);k.bL[bv]=bi;}else{k.aY[bv]=1;k.bL[bv]=[T];}};zhbdmMapObjectManager.prototype.hI=function(l,t){var k=l;var hC;var ho;hC=k.gn;for(var i=0;i<hC.length;i++){ho=hC[i];ho.setOpacity(t);}hC=k.gG;for(var i=0;i<hC.length;i++){ho=hC[i];ho.setOpacity(t);}};zhbdmMapObjectManager.prototype.setOverlayOpacity=function(t){zhbdmMapObjectManager.prototype.hI(this,t);};zhbdmMapObjectManager.prototype.PathAdd=function(L,bH){zhbdmMapObjectManager.prototype.dh(this,L,bH);};zhbdmMapObjectManager.prototype.PathXAdd=function(L,bH){zhbdmMapObjectManager.prototype.ep(this,L,bH);};zhbdmMapObjectManager.prototype.dh=function(l,L,bH){var k=l;var bv=L;var bi;if(typeof k.ct[bv]!=='undefined'){k.ct[bv]=1;bi=k.bE[bv];bi.push(bH);k.bE[bv]=bi;}else{k.ct[bv]=1;k.bE[bv]=[bH];}};zhbdmMapObjectManager.prototype.iV=function(l,ao,bH){var k=l;k.map.addOverlay(bH);if(k.iv){if(ao=="1"){k.addGroundOverlay(bH);}}};zhbdmMapObjectManager.prototype.allObjectsAddPlacemark=function(cq,T){zhbdmMapObjectManager.prototype.eL(this,cq,T);};zhbdmMapObjectManager.prototype.eL=function(l,eW,T){var k=l;var bv=eW;var bi;if(typeof k.eU[bv]!=='undefined'){bi=k.eU[bv];bi.push(T);k.eU[bv]=bi;}else{k.eU[bv]=[T];}};zhbdmMapObjectManager.prototype.ec=function(l,ll){var k=l;var dc=k.fg;return dc.getProjection().fromLatLngToDivPixel(ll);};zhbdmMapObjectManager.prototype.eY=function(l,pt){var k=l;var dc=k.fg;return dc.getProjection().fromDivPixelToLatLng(pt);};zhbdmMapObjectManager.prototype.RestoreSpidered=function(){var k=this;k.fw();};zhbdmMapObjectManager.prototype.fw=function(){var k=this;var bJ;var bd;var fm;if(k.dZ){fm=k.fI;for(var i=0;i<fm.length;i++){bd=fm[i];if((typeof bd!=='undefined')&&(bd!=null)){if((typeof bd!=='undefined')&&(bd!=null)){bd.setPosition(bd.zhbdmOriginalPosition);}}}k.fI=[];}};zhbdmMapObjectManager.prototype.canDoClick=function(cq){var k=this;var es;var fm;var bd;var dN,df,ds;var eO,fE,ea;es=k.fI[cq];if((typeof es!=='undefined')&&(es!=null)){return 0;}k.fw();k.fI=[];dN=zhbdmMapObjectManager.prototype.fG(k,cq);if(dN==1){es=k.fI[cq];fs=es.getPosition();eO=zhbdmMapObjectManager.prototype.ec(k,fs);var fe=k.eS*10,fi=10;var eg=2*Math.PI;var cD,cG;var el=fi*2*Math.PI;var fD=fe/el;var cu=k.ew;var dp=cu/fD;fm=k.fI;for(var i=0;i<fm.length;i++){bd=k.fI[i];if((typeof bd!=='undefined')&&(bd!=null)){cD=fD*dp;cG=dp+eg;df=eO.x+Math.cos(cG)*cD;ds=eO.y+Math.sin(cG)*cD;fE=new google.maps.Point(df,ds);ea=zhbdmMapObjectManager.prototype.eY(k,fE);bd.setPosition(ea);bd.setZIndex(google.maps.Marker.MAX_ZINDEX);dp+=cu/cD;}}}else{k.fI=[];}return dN;};zhbdmMapObjectManager.prototype.fG=function(l,cq){var k=l;var fm;var es;var bJ;var bd;var fs;var eO;var ei,bP;var ey,fN;var dX;var ak=k.map;var cC;var bv,dN,df,ds,aM,bC,bk,ap;if(k.dZ){if(k.eU[cq]===undefined){alert("Unable to find placemark with ID = "+cq);}else{cC=0;es=k.fI[cq];if((typeof es!=='undefined')&&(es!=null)){return 0;}else{fm=k.eU[cq];es=fm[0];k.fI[cq]=es;fs=es.getPosition();eO=zhbdmMapObjectManager.prototype.ec(k,fs);aM=eO.x+k.et/2;bC=eO.y+k.et/2;bk=eO.x-k.et/2;ap=eO.y-k.et/2;if(aM<bk){df=aM;aM=bk;bk=df;}if(bC<ap){ds=bC;bC=ap;ap=ds;}ei=new google.maps.Point(bk,ap);ey=new google.maps.Point(aM,bC);bP=zhbdmMapObjectManager.prototype.eY(k,ei);fN=zhbdmMapObjectManager.prototype.eY(k,ey);aM=fN.lng();bC=fN.lat();bk=bP.lng();ap=bP.lat();if(aM<bk){df=aM;aM=bk;bk=df;}if(bC<ap){ds=bC;bC=ap;ap=ds;}bP=new google.maps.LatLng(ap,bk);fN=new google.maps.LatLng(bC,aM);dX=new google.maps.LatLngBounds(bP,fN);fm=k.eU;for(var i=0;i<fm.length;i++){bJ=fm[i];if((typeof bJ!=='undefined')&&(bJ!=null)){bd=bJ[0];if((typeof bd!=='undefined')&&(bd!=null)){if(bd.zhbdmPlacemarkID!=es.zhbdmPlacemarkID){if(bd.getVisible()&&(bd.getMap()!=null)){if(dX.contains(bd.getPosition())){zhbdmMapObjectManager.prototype.fG(k,bd.zhbdmPlacemarkID);cC=1;}}}}}}return cC;}}}else{return 0;}};zhbdmMapObjectManager.prototype.ep=function(l,L,bH){var k=l;var bv=L;var bi;if(typeof k.fr[bv]!=='undefined'){k.fr[bv]=1;bi=k.dS[bv];bi.push(bH);k.dS[bv]=bi;}else{k.fr[bv]=1;k.dS[bv]=[bH];}};zhbdmMapObjectManager.prototype.PlacemarkCount=function(){return this.bL.length;};zhbdmMapObjectManager.prototype.au=function(ee,dn){var F;var aG=ee;for(var i=0;i<aG.length;i++){F=aG[i];if((typeof F!=='undefined')&&(F!=null)){if(F!=0){this.aI(i,dn);}}}};zhbdmMapObjectManager.prototype.io=function(fn,hw){var F;var ht=fn;for(var i=0;i<ht.length;i++){F=ht[i];if((typeof F!=='undefined')&&(F!=null)){if(F!=0){this.hM(i,hw);}}}};zhbdmMapObjectManager.prototype.hN=function(fn,hw){var F;var ht=fn;for(var i=0;i<ht.length;i++){F=ht[i];if((typeof F!=='undefined')&&(F!=null)){if(F!=0){this.ji(i,hw);}}}};zhbdmMapObjectManager.prototype.ab=function(L,aB){var ai=aB;var bg;var bu;var bv;var eu;var ak=this.map;if((typeof ai!=='undefined')&&(ai!=null)){if(this.az&&this.bI){var aU=this.G[L];if((typeof aU!=='undefined')&&(aU==1)){if(this.ay){if(this.bm){bg=this.al[L];bg.addMarkers(ai);}else{bg=this.al[0];bg.addMarkers(ai);}}else{for(var ag=0;ag<ai.length;ag++){bu=ai[ag];ak.addOverlay(bu);}}if(this.er){for(var ag=0;ag<ai.length;ag++){bu=ai[ag];bv="zhbdm_pmlist_item_"+this.hY+"_"+bu.zhbdmPlacemarkID;eu=document.getElementById(bv);if(eu!=null){eu.style.display='block';}}}}}else{if(this.ay){if(this.bm){bg=this.al[L];bg.addMarkers(ai);}else{bg=this.al[0];bg.addMarkers(ai);}}else{for(var ag=0;ag<ai.length;ag++){bu=ai[ag];ak.addOverlay(bu);}}if(this.er){for(var ag=0;ag<ai.length;ag++){bu=ai[ag];bv="zhbdm_pmlist_item_"+this.hY+"_"+bu.zhbdmPlacemarkID;eu=document.getElementById(bv);if(eu!=null){eu.style.display='block';}}}}}};zhbdmMapObjectManager.prototype.aN=function(L,aB){var ai=aB;var bg;var bu;var bv;var eu;var ak=this.map;if((typeof ai!=='undefined')&&(ai!=null)){if(this.az&&this.bI){var aU=this.G[L];if((typeof aU==='undefined')||(aU==0)){if(this.ay){if(this.bm){bg=this.al[L];bg.removeMarkers(ai);}else{bg=this.al[0];bg.removeMarkers(ai);}}else{for(var ag=0;ag<ai.length;ag++){bu=ai[ag];ak.removeOverlay(bu);}}if(this.er){for(var ag=0;ag<ai.length;ag++){bu=ai[ag];bv="zhbdm_pmlist_item_"+this.hY+"_"+bu.zhbdmPlacemarkID;eu=document.getElementById(bv);if(eu!=null){eu.style.display='none';}}}}}else{if(this.ay){if(this.bm){bg=this.al[L];bg.removeMarkers(ai);}else{bg=this.al[0];bg.removeMarkers(ai);}}else{for(var ag=0;ag<ai.length;ag++){bu=ai[ag];ak.removeOverlay(bu);}}if(this.er){for(var ag=0;ag<ai.length;ag++){bu=ai[ag];bv="zhbdm_pmlist_item_"+this.hY+"_"+bu.zhbdmPlacemarkID;eu=document.getElementById(bv);if(eu!=null){eu.style.display='none';}}}}}};zhbdmMapObjectManager.prototype.aI=function(L,dn){var ai=dn[L];this.ab(L,ai);};zhbdmMapObjectManager.prototype.hM=function(L,hw){var ai=hw[L];this.eb(L,ai);};zhbdmMapObjectManager.prototype.ji=function(L,hw){var ai=hw[L];this.dE(L,ai);};zhbdmMapObjectManager.prototype.ClusterAdd=function(L,ar){this.al[L]=ar;};zhbdmMapObjectManager.prototype.aq=function(l,v,bD){if(v.dataexists==1){var k=l;var ak=k.map;var aR=parseInt(v.actionbyclick);var bM=parseInt(v.zoombyclick);var ad=k.bG;bD.zhbdmPlacemark_actionbyclick=aR;bD.zhbdmPlacemark_zoombyclick=bM;if(k.dZ){if(k.canDoClick(bD.zhbdmPlacemarkID)==1){return;}}if(aR==0){if(bM!=100){ak.setCenter(bD.getPosition());ak.setZoom(bM);}}else if(aR==1){if(bM!=100){ak.setCenter(bD.getPosition());ak.setZoom(bM);}ad.close();for(var i=0;i<k.h.length;i++){k.h[i].close();}if(k.R!="0"){if(k.R=="1"){k.C.close();}else if(k.R=="2"){k.J.close();}}var ha=eval(v.contentstring);ad.zhbdmPlacemarkTitle=v.titleplacemark;ad.zhbdmPlacemarkOriginalPosition=bD.zhbdmOriginalPosition;ad.zhbdmInfowinContent=ha;bD.zhbdmPlacemark_contentstring=ha;bD.zhbdmPlacemark_titleplacemark=v.titleplacemark;if(k.fH!=0){Map_Animate_Marker_Hide(ak,bD);}if(k.eH==1){k.panelShowPlacemarkContent(ha);}else{ad.setContent(ha);ad.setPosition(bD.getPosition());ak.openInfoWindow(ad,bD.getPosition());}}else if(aR==2){if(bM!=100){ak.setCenter(bD.getPosition());ak.setZoom(bM);}var cI=v.hrefsite;bD.zhbdmPlacemark_sitelocation=cI;window.open(cI);}else if(aR==3){if(bM!=100){ak.setCenter(bD.getPosition());ak.setZoom(bM);}var cI=v.hrefsite;bD.zhbdmPlacemark_sitelocation=cI;window.location=cI;}else if(aR==4){if(bM!=100){ak.setCenter(bD.getPosition());ak.setZoom(bM);}ad.close();for(var i=0;i<k.h.length;i++){k.h[i].close();}if(k.R!="0"){if(k.R=="1"){k.C.close();}else if(k.R=="2"){k.J.close();}}ad.zhbdmPlacemarkTitle=v.titleplacemark;ad.zhbdmPlacemarkOriginalPosition=bD.zhbdmOriginalPosition;if(k.fH!=0){Map_Animate_Marker_Hide(ak,bD);}if(k.eH==1){var ha=eval(v.contentstring);bD.zhbdmPlacemark_contentstring=ha;k.panelShowPlacemarkContentTabs(ha);}else{var cw;if(v.infobubblestyle!=""){cw=eval("("+v.infobubblestyle+")");}else{cw="";}bD.zhbdmPlacemark_infobubblestyle=cw;var O=new InfoBubble(cw);k.h.push(O);bD.zhbdmPlacemark_tab_info=v.tab_info;if(v.tab_info!="0"){var ha=eval(v.contentstring);bD.zhbdmPlacemark_contentstring=ha;}if(v.tab_info=="1"){O.addTab(v.tab_info_title,ha);bD.zhbdmPlacemark_tab_info_title=v.tab_info_title;}if(v.tab_info=="9"){O.setContent(ha);}else{if(v.tab1!=""){O.addTab(v.tab1title,v.tab1);bD.zhbdmPlacemark_tab1=v.tab1;bD.zhbdmPlacemark_tab1title=v.tab1title;}else{bD.zhbdmPlacemark_tab1="";}if(v.tab2!=""){O.addTab(v.tab2title,v.tab2);bD.zhbdmPlacemark_tab2=v.tab2;bD.zhbdmPlacemark_tab2title=v.tab2title;}else{bD.zhbdmPlacemark_tab2="";}if(v.tab3!=""){O.addTab(v.tab3title,v.tab3);bD.zhbdmPlacemark_tab3=v.tab3;bD.zhbdmPlacemark_tab3title=v.tab3title;}else{bD.zhbdmPlacemark_tab3="";}if(v.tab4!=""){O.addTab(v.tab4title,v.tab4);bD.zhbdmPlacemark_tab4=v.tab4;bD.zhbdmPlacemark_tab4title=v.tab4title;}else{bD.zhbdmPlacemark_tab4="";}if(v.tab5!=""){O.addTab(v.tab5title,v.tab5);bD.zhbdmPlacemark_tab5=v.tab5;bD.zhbdmPlacemark_tab5title=v.tab5title;}else{bD.zhbdmPlacemark_tab5="";}if(v.tab6!=""){O.addTab(v.tab6title,v.tab6);bD.zhbdmPlacemark_tab6=v.tab6;bD.zhbdmPlacemark_tab6title=v.tab6title;}else{bD.zhbdmPlacemark_tab6="";}if(v.tab7!=""){O.addTab(v.tab7title,v.tab7);bD.zhbdmPlacemark_tab7=v.tab7;bD.zhbdmPlacemark_tab7title=v.tab7title;}else{bD.zhbdmPlacemark_tab7="";}if(v.tab8!=""){O.addTab(v.tab8title,v.tab8);bD.zhbdmPlacemark_tab8=v.tab8;bD.zhbdmPlacemark_tab8title=v.tab8title;}else{bD.zhbdmPlacemark_tab8="";}if(v.tab9!=""){O.addTab(v.tab9title,v.tab9);bD.zhbdmPlacemark_tab9=v.tab9;bD.zhbdmPlacemark_tab9title=v.tab9title;}else{bD.zhbdmPlacemark_tab9="";}if(v.tab10!=""){O.addTab(v.tab10title,v.tab10);bD.zhbdmPlacemark_tab10=v.tab10;bD.zhbdmPlacemark_tab10title=v.tab10title;}else{bD.zhbdmPlacemark_tab10="";}if(v.tab11!=""){O.addTab(v.tab11title,v.tab11);bD.zhbdmPlacemark_tab11=v.tab11;bD.zhbdmPlacemark_tab11title=v.tab11title;}else{bD.zhbdmPlacemark_tab11="";}if(v.tab12!=""){O.addTab(v.tab12title,v.tab12);bD.zhbdmPlacemark_tab12=v.tab12;bD.zhbdmPlacemark_tab12title=v.tab12title;}else{bD.zhbdmPlacemark_tab12="";}if(v.tab13!=""){O.addTab(v.tab13title,v.tab13);bD.zhbdmPlacemark_tab13=v.tab13;bD.zhbdmPlacemark_tab13title=v.tab13titl;}else{bD.zhbdmPlacemark_tab13="";}if(v.tab14!=""){O.addTab(v.tab14title,v.tab14);bD.zhbdmPlacemark_tab14=v.tab14;bD.zhbdmPlacemark_tab14title=v.tab14title;}else{bD.zhbdmPlacemark_tab14="";}if(v.tab15!=""){O.addTab(v.tab15title,v.tab15);bD.zhbdmPlacemark_tab15=v.tab15;bD.zhbdmPlacemark_tab15title=v.tab15title;}else{bD.zhbdmPlacemark_tab15="";}if(v.tab16!=""){O.addTab(v.tab16title,v.tab16);bD.zhbdmPlacemark_tab16=v.tab16;bD.zhbdmPlacemark_tab16title=v.tab16title;}else{bD.zhbdmPlacemark_tab16="";}if(v.tab17!=""){O.addTab(v.tab17title,v.tab17);bD.zhbdmPlacemark_tab17=v.tab17;bD.zhbdmPlacemark_tab17title=v.tab17title;}else{bD.zhbdmPlacemark_tab17="";}if(v.tab18!=""){O.addTab(v.tab18title,v.tab18);bD.zhbdmPlacemark_tab18=v.tab18;bD.zhbdmPlacemark_tab18title=v.tab18title;}else{bD.zhbdmPlacemark_tab18="";}if(v.tab19!=""){O.addTab(v.tab19title,v.tab19);bD.zhbdmPlacemark_tab19=v.tab19;bD.zhbdmPlacemark_tab19title=v.tab19title;}else{bD.zhbdmPlacemark_tab19="";}}if(v.tab_info=="2"){O.addTab(v.tab_info_title,ha);bD.zhbdmPlacemark_tab_info_title=v.tab_info_title;}if(!O.isOpen()){O.open(ak,bD);}}}else if(aR==5){var aE=v.streetviewinfowinmapsv;var aC=parseInt(v.streetviewinfowinw);var bb=parseInt(v.streetviewinfowinh);bD.zhbdmPlacemark_streetviewinfowinmapsv=aE;bD.zhbdmPlacemark_streetviewinfowinw=aC;bD.zhbdmPlacemark_streetviewinfowinh=bb;if(bM!=100){ak.setCenter(bD.getPosition());ak.setZoom(bM);}if(k.gO){var hH=k.gj;hH.setPosition(bD.getPosition());if(aE!=""){hH.setPov(aE);}}else{ad.close();for(var i=0;i<k.h.length;i++){k.h[i].close();}if(k.R!="0"){if(k.R=="1"){k.C.close();}else if(k.R=="2"){k.J.close();}}ad.setPosition(bD.getPosition());ad.zhbdmPlacemarkOriginalPosition=bD.zhbdmOriginalPosition;if(k.fH!=0){Map_Animate_Marker_Hide(ak,bD);}if(k.eH==1){k.panelPlacemarkShowPanorama(aC,bb,aE);}else{if(aE==""){PlacemarkShowPanorama(ak,ad,aC,bb,'',k.hY);}else{PlacemarkShowPanorama(ak,ad,aC,bb,aE,k.hY);}}}}else{alert("Unexpected action by click: "+aR);}bD.zhbdmPlacemarkConfigLoaded=1;}else{}};zhbdmMapObjectManager.prototype.hF=function(l,bD){var k=l;var ak=k.map;var aR=parseInt(bD.zhbdmPlacemark_actionbyclick);var bM=parseInt(bD.zhbdmPlacemark_zoombyclick);var ad=k.bG;if(k.dZ){if(k.canDoClick(bD.zhbdmPlacemarkID)==1){return;}}if(aR==0){if(bM!=100){ak.setCenter(bD.getPosition());ak.setZoom(bM);}}else if(aR==1){if(bM!=100){ak.setCenter(bD.getPosition());ak.setZoom(bM);}ad.close();for(var i=0;i<k.h.length;i++){k.h[i].close();}if(k.R!="0"){if(k.R=="1"){k.C.close();}else if(k.R=="2"){k.J.close();}}var ha=bD.zhbdmPlacemark_contentstring;ad.zhbdmPlacemarkTitle=bD.zhbdmPlacemark_titleplacemark;ad.zhbdmPlacemarkOriginalPosition=bD.zhbdmOriginalPosition;ad.zhbdmInfowinContent=ha;if(k.fH!=0){Map_Animate_Marker_Hide(ak,bD);}if(k.eH==1){k.panelShowPlacemarkContent(ha);}else{ad.setContent(ha);ad.setPosition(bD.getPosition());ak.openInfoWindow(ad,bD.getPosition());}}else if(aR==2){if(bM!=100){ak.setCenter(bD.getPosition());ak.setZoom(bM);}var cI=bD.zhbdmPlacemark_sitelocation;window.open(cI);}else if(aR==3){if(bM!=100){ak.setCenter(bD.getPosition());ak.setZoom(bM);}var cI=bD.zhbdmPlacemark_sitelocation;window.location=cI;}else if(aR==4){if(bM!=100){ak.setCenter(bD.getPosition());ak.setZoom(bM);}ad.close();for(var i=0;i<k.h.length;i++){k.h[i].close();}if(k.R!="0"){if(k.R=="1"){k.C.close();}else if(k.R=="2"){k.J.close();}}ad.zhbdmPlacemarkTitle=bD.zhbdmPlacemark_titleplacemark;ad.zhbdmPlacemarkOriginalPosition=bD.zhbdmOriginalPosition;if(k.fH!=0){Map_Animate_Marker_Hide(ak,bD);}if(k.eH==1){var ha=bD.zhbdmPlacemark_contentstring;k.panelShowPlacemarkContentTabs(ha);}else{var cw;if(bD.zhbdmPlacemark_infobubblestyle!=""){cw=eval("("+bD.zhbdmPlacemark_infobubblestyle+")");}else{cw="";}var O=new InfoBubble(cw);k.h.push(O);if(bD.zhbdmPlacemark_tab_info!="0"){var ha=bD.zhbdmPlacemark_contentstring;}if(bD.zhbdmPlacemark_tab_info=="1"){O.addTab(bD.zhbdmPlacemark_tab_info_title,ha);}if(bD.zhbdmPlacemark_tab_info=="9"){O.setContent(ha);}else{if(bD.zhbdmPlacemark_tab1!=""){O.addTab(bD.zhbdmPlacemark_tab1title,bD.zhbdmPlacemark_tab1);}if(bD.zhbdmPlacemark_tab2!=""){O.addTab(bD.zhbdmPlacemark_tab2title,bD.zhbdmPlacemark_tab2);}if(bD.zhbdmPlacemark_tab3!=""){O.addTab(bD.zhbdmPlacemark_tab3title,bD.zhbdmPlacemark_tab3);}if(bD.zhbdmPlacemark_tab4!=""){O.addTab(bD.zhbdmPlacemark_tab4title,bD.zhbdmPlacemark_tab4);}if(bD.zhbdmPlacemark_tab5!=""){O.addTab(bD.zhbdmPlacemark_tab5title,bD.zhbdmPlacemark_tab5);}if(bD.zhbdmPlacemark_tab6!=""){O.addTab(bD.zhbdmPlacemark_tab6title,bD.zhbdmPlacemark_tab6);}if(bD.zhbdmPlacemark_tab7!=""){O.addTab(bD.zhbdmPlacemark_tab7title,bD.zhbdmPlacemark_tab7);}if(bD.zhbdmPlacemark_tab8!=""){O.addTab(bD.zhbdmPlacemark_tab8title,bD.zhbdmPlacemark_tab8);}if(bD.zhbdmPlacemark_tab9!=""){O.addTab(bD.zhbdmPlacemark_tab9title,bD.zhbdmPlacemark_tab9);}if(bD.zhbdmPlacemark_tab10!=""){O.addTab(bD.zhbdmPlacemark_tab10title,bD.zhbdmPlacemark_tab10);}if(bD.zhbdmPlacemark_tab11!=""){O.addTab(bD.zhbdmPlacemark_tab11title,bD.zhbdmPlacemark_tab11);}if(bD.zhbdmPlacemark_tab12!=""){O.addTab(bD.zhbdmPlacemark_tab12title,bD.zhbdmPlacemark_tab12);}if(bD.zhbdmPlacemark_tab13!=""){O.addTab(bD.zhbdmPlacemark_tab13title,bD.zhbdmPlacemark_tab13);}if(bD.zhbdmPlacemark_tab14!=""){O.addTab(bD.zhbdmPlacemark_tab14title,bD.zhbdmPlacemark_tab14);}if(bD.zhbdmPlacemark_tab15!=""){O.addTab(bD.zhbdmPlacemark_tab15title,bD.zhbdmPlacemark_tab15);}if(bD.zhbdmPlacemark_tab16!=""){O.addTab(bD.zhbdmPlacemark_tab16title,bD.zhbdmPlacemark_tab16);}if(bD.zhbdmPlacemark_tab17!=""){O.addTab(bD.zhbdmPlacemark_tab17title,bD.zhbdmPlacemark_tab17);}if(bD.zhbdmPlacemark_tab18!=""){O.addTab(bD.zhbdmPlacemark_tab18title,bD.zhbdmPlacemark_tab18);}if(bD.zhbdmPlacemark_tab19!=""){O.addTab(bD.zhbdmPlacemark_tab19title,bD.zhbdmPlacemark_tab19);}}if(bD.zhbdmPlacemark_tab_info=="2"){O.addTab(bD.zhbdmPlacemark_tab_info_title,ha);}if(!O.isOpen()){O.open(ak,bD);}}}else if(aR==5){var aE=bD.zhbdmPlacemark_streetviewinfowinmapsv;var aC=parseInt(bD.zhbdmPlacemark_streetviewinfowinw);var bb=parseInt(bD.zhbdmPlacemark_streetviewinfowinh);if(bM!=100){ak.setCenter(bD.getPosition());ak.setZoom(bM);}if(k.gO){var hH=k.gj;hH.setPosition(bD.getPosition());if(aE!=""){hH.setPov(aE);}}else{ad.close();for(var i=0;i<k.h.length;i++){k.h[i].close();}if(k.R!="0"){if(k.R=="1"){k.C.close();}else if(k.R=="2"){k.J.close();}}ad.setPosition(bD.getPosition());ad.zhbdmPlacemarkOriginalPosition=bD.zhbdmOriginalPosition;if(k.fH!=0){Map_Animate_Marker_Hide(ak,bD);}if(k.eH==1){k.panelPlacemarkShowPanorama(aC,bb,aE);}else{if(aE==""){PlacemarkShowPanorama(ak,ad,aC,bb,'',k.hY);}else{PlacemarkShowPanorama(ak,ad,aC,bb,aE,k.hY);}}}}else{alert("Unexpected action by click: "+aR);}};zhbdmMapObjectManager.prototype.hx=function(l,v,hA,gS){if(v.dataexists==1){var k=l;var ak=k.map;var aR=parseInt(v.actionbyclick);var ad=k.bG;hA.zhbdmPath_actionbyclick=aR;if(aR==0){}else if(aR==1){ad.close();for(var i=0;i<k.h.length;i++){k.h[i].close();}if(k.R!="0"){if(k.R=="1"){k.C.close();}else if(k.R=="2"){k.J.close();}}var ha=eval(v.contentstring);hA.zhbdmPath_contentstring=ha;hA.zhbdmPath_titlepath=v.titlepath;ad.zhbdmTitle=v.titlepath;ad.zhbdmInfowinContent=ha;if(k.fH!=0){Map_Animate_Marker_Hide(ak,hA);}if(k.eH==1){k.panelShowPlacemarkContent(ha);}else{ad.setContent(ha);ad.setPosition(gS);ak.openInfoWindow(ad,gS);}}else if(aR==2){var cI=v.hrefsite;hA.zhbdmPath_sitelocation=cI;window.open(cI);}else if(aR==3){var cI=v.hrefsite;hA.zhbdmPath_sitelocation=cI;window.location=cI;}else{alert("Unexpected action by click: "+aR);}hA.zhbdmPathConfigLoaded=1;}else{}};zhbdmMapObjectManager.prototype.gJ=function(l,hA,gS){var k=l;var ak=k.map;var aR=hA.zhbdmPath_actionbyclick;var ad=k.bG;if(aR==0){}else if(aR==1){ad.close();for(var i=0;i<k.h.length;i++){k.h[i].close();}if(k.R!="0"){if(k.R=="1"){k.C.close();}else if(k.R=="2"){k.J.close();}}var ha=hA.zhbdmPath_contentstring;ad.zhbdmTitle=hA.zhbdmPath_titlepath;ad.zhbdmInfowinContent=ha;if(k.fH!=0){Map_Animate_Marker_Hide(ak,hA);}if(k.eH==1){k.panelShowPlacemarkContent(ha);}else{ad.setContent(ha);ad.setPosition(gS);ak.openInfoWindow(ad,gS);}}else if(aR==2){var cI=hA.zhbdmPath_sitelocation;window.open(cI);}else if(aR==3){var cI=hA.zhbdmPath_sitelocation;window.location=cI;}else{alert("Unexpected action by click: "+aR);}};zhbdmMapObjectManager.prototype.GetPlacemarkAJAX=function(V){var bw=this.bV+'index.php?option=com_zhbaidumap&no_html=1&format=raw&task=getAJAXPlacemarkList';var ak=this.map;var fl=this.bK;var ff=this.ah;var ej=this.aH;var eD=this.parameter_val_placemark_grouplistid;var aW=this.parameter_val_placemark_categorylistid;var bo=this.bs;var k=this;var en=this.eV;var av={mapid:fl,placemarklistid:ff,explacemarklistid:ej,grouplistid:eD,categorylistid:aW,usermarkersfilter:bo,placemarkloadtype:en,x1:ak.getBounds().getSouthWest().lng,y1:ak.getBounds().getSouthWest().lat,x2:ak.getBounds().getNorthEast().lng,y2:ak.getBounds().getNorthEast().lat};if(V=='mootools'){var dr=new Request({url:bw,method:'post',data:av,async:true,onSuccess:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=JSON.decode(responseText);zhbdmMapObjectManager.prototype.aA(V,k,bc);},onRequest:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},onFailure:function(xhr){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert(xhr.status+','+xhr.statusText+','+xhr.responseText);}}).send();}else if(V=='jquery'){var ae=k.aj;ae.ajax({url:bw,type:'post',data:av,dataType:'json',async:true,success:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=responseText;zhbdmMapObjectManager.prototype.aA(V,k,bc);},beforeSend:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},fail:function(xhr,textStatus){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert("Error"+textStatus);}});}};zhbdmMapObjectManager.prototype.eZ=function(V,l,ed){var k=l;var bf=ed;var bv;var bw=k.bV+'index.php?option=com_zhbaidumap&no_html=1&format=raw&task=getAJAXPlacemarks';var av={ajaxarray:bf,mapmarkerlistpos:k.fH,mapmarkerlistcontent:k.eQ,mapmarkerlistaction:k.eE,mapmarkerlistcssstyle:k.eo,maparticleid:k.hY,iconicon:k.bB};if(V=='mootools'){var dr=new Request({url:bw,method:'post',data:av,async:true,onSuccess:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=JSON.decode(responseText);zhbdmMapObjectManager.prototype.da(V,k,bc);},onRequest:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},onFailure:function(xhr){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert(xhr.status+','+xhr.statusText+','+xhr.responseText);}}).send();}else if(V=='jquery'){var ae=k.aj;ae.ajax({url:bw,type:'post',data:av,dataType:'json',async:true,success:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=responseText;zhbdmMapObjectManager.prototype.da(V,k,bc);},beforeSend:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},fail:function(xhr,textStatus){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert("Error"+textStatus);}});}};zhbdmMapObjectManager.prototype.aA=function(V,l,aK){if(aK.dataexists==1){var bJ=aK.markers;var k=l;var bf=[];var bv;var fv=k.iL;var cN;cN=0;for(var i=0;i<bJ.length;i++){bv=bJ[i].id;if(typeof k.bN[bv]!=='undefined'){}else{bf.push(bv);if(fv!=0){cN+=1;if(cN>=fv){cN=0;var ba=bf.slice(0);zhbdmMapObjectManager.prototype.eZ(V,k,ba);bf=[];}}}}var ba=bf.slice(0);if(ba.length!=0){zhbdmMapObjectManager.prototype.eZ(V,k,ba);}bf=[];}else{}};zhbdmMapObjectManager.prototype.da=function(V,l,v){var aG=[];var cv=[];var bi;var dP;var bJ=v.markers;var k=l;var bv;var aV;if(v.dataexists==1){for(var i=0;i<bJ.length;i++){bv=bJ[i].id;aV=bJ[i].markergroup;if(typeof k.bN[bv]!=='undefined'){}else{dP=k.dC(V,k,bJ[i]);if(k.fH!=0){var fo;if(k.eQ<100){fo='var markerUL = document.getElementById("BDMapsMarkerUL'+k.hY+'");';}else{fo='var markerUL = document.getElementById("BDMapsMarkerTABLEBODY'+k.hY+'");';}if(bJ[i].placemarklistcontent!=""){eval(fo+bJ[i].placemarklistcontent);}}if((typeof aG[aV]!=='undefined')&&(aG[aV]!=null)){aG[aV]+=1;bi=cv[aV];bi.push(dP);cv[aV]=bi;}else{aG[aV]=1;cv[aV]=[dP];}}}k.au(aG,cv);k.refreshPlacemarkListSearch();k.iB();k.iz();}else{}};zhbdmMapObjectManager.prototype.dC=function(V,l,an){var k=l;var aX=new BMap.Point(an.longitude,an.latitude);var aF;var bj;aF=new BMap.Marker(aX);if(an.markercontent=="0"||an.markercontent=="1"||an.markercontent=="9"){aF.setTitle(an.title);}if(an.baloon==21||an.baloon==22||an.baloon==23){if(an.labelcontent!=""){an.labelcontent=an.labelcontent.replace("\r","");an.labelcontent=an.labelcontent.replace("\r\n","");an.labelcontent=an.labelcontent.replace("\n","");an.labelcontent=an.labelcontent.replace('\\','/');an.labelcontent=an.labelcontent.replace('"','\'\'');bj=new BMap.Label(an.labelcontent);if(parseInt(an.labelanchorx)!=0||(parseInt(an.labelanchory)!=0)){bj.setOffset(new BMap.Size(parseInt(an.labelanchorx),parseInt(an.labelanchory)));}aF.setLabel(bj);}}if(an.openbaloon==1){k.il=aF;k.jf=1;}if(an.overridemarkericon=="1"){var ev=new Image();ev.onload=function(){var dW=this.width/2;var fJ=parseInt(an.groupiconofsetx)+dW;var ef=parseInt(an.groupiconofsety)+this.height;var dK=new BMap.Icon(k.bB+an.groupicontype.replace("#","%23")+".png",new BMap.Size(this.width,this.height),{anchor:new BMap.Size(fJ,ef)});aF.setIcon(dK);};ev.src=k.bB+an.groupicontype.replace("#","%23")+".png";}else{var ev=new Image();ev.onload=function(){var dW=this.width/2;var fJ=parseInt(an.iconofsetx)+dW;var ef=parseInt(an.iconofsety)+this.height;var dK=new BMap.Icon(k.bB+an.icontype.replace("#","%23")+".png",new BMap.Size(this.width,this.height),{anchor:new BMap.Size(fJ,ef)});aF.setIcon(dK);};ev.src=k.bB+an.icontype.replace("#","%23")+".png";}if(an.baloon=="1"){aF.setAnimation(BMAP_ANIMATION_DROP);}else if(an.baloon=="2"){aF.setAnimation(BMAP_ANIMATION_BOUNCE);}else if(an.baloon=="21"){aF.setAnimation(BMAP_ANIMATION_DROP);}else if(an.baloon=="22"){aF.setAnimation(BMAP_ANIMATION_BOUNCE);}zhbdmMapObjectManager.prototype.cE(k,an.markergroup,an.id,aF,an);aF.zhbdmRating=an.rating_value;aF.zhbdmPlacemarkID=an.id;aF.zhbdmPlacemarkDescription=an.description;aF.zhbdmContactAttrs=k.aQ;aF.zhbdmUserContact=k.bq;aF.zhbdmUserUser=k.aD;aF.zhbdmOriginalPosition=aF.getPosition();aF.zhbdmTitle=an.title;aF.zhbdmIncludeInList=an.includeinlist;k.allObjectsAddPlacemark(an.id,aF);zhbdmMapObjectManager.prototype.as(V,k,aF);if(k.R){if(an.hoverhtml!=""){zhbdmMapObjectManager.prototype.aS(V,k,aF);}}if(k.gy==an.id){k.map.setCenter(aX);}if(k.gZ==an.id){k.fa=aF;k.iG=1;}return aF;};zhbdmMapObjectManager.prototype.iB=function(){var k=this;var aF;if(k.iG==1){k.iq();aF=k.fa;for(var i=0;i<k.hd.length;i++){if(k.hd[i]=="click"){aF.dispatchEvent("click");}else if(k.hd[i]=="bounce"){aF.setAnimation(BMAP_ANIMATION_BOUNCE);}else{var eK=new Image();var hV=k.hd[i];eK.onload=function(){var dW=this.width/2;var fJ=0+dW;var ef=0+this.height;var dK=new BMap.Icon(k.bB+hV.replace("#","%23")+".png",new BMap.Size(this.width,this.height),{anchor:new BMap.Size(fJ,ef)});aF.setIcon(dK);};eK.src=k.bB+hV.replace("#","%23")+".png";}}}};zhbdmMapObjectManager.prototype.iz=function(){var k=this;var aF;if(k.jf==1){aF=k.il;aF.dispatchEvent("click");}};zhbdmMapObjectManager.prototype.PlacemarkListAction=function(cq){var k=this;var ak=k.map;if(typeof k.eU[cq]!=='undefined'){var fm=k.eU[cq];var es=fm[0];var fs=es.getPosition();if(k.eE==0){ak.setCenter(fs);}else if(k.eE==1){google.maps.event.trigger(es,"click");}else if(k.eE==11){ak.setCenter(fs);google.maps.event.trigger(es,"click");}else if(k.eE==2){ak.setCenter(fs);Map_Animate_Marker(ak,es);}else if(k.eE==3){Map_Animate_Marker(ak,es);google.maps.event.trigger(es,"click");}else if(k.eE==12){Map_Animate_Marker(ak,es);ak.setCenter(fs);google.maps.event.trigger(es,"click");}else{ak.setCenter(fs);}}};zhbdmMapObjectManager.prototype.PlacemarkAddListeners=function(V,an){var k=this;k.as(V,k,an);};zhbdmMapObjectManager.prototype.as=function(V,l,am){am.zhbdmPlacemarkConfigLoaded=0;am.addEventListener('click',function(event){var k=l;var bw=k.bV+'index.php?option=com_zhbaidumap&no_html=1&format=raw&task=getPlacemarkDetails';var av={id:this.zhbdmPlacemarkID,contactattrs:this.zhbdmContactAttrs,usercontact:this.zhbdmUserContact,useruser:this.zhbdmUserUser,servicedirection:k.bz,iconicon:k.bB,iconutil:k.bO,icondir:k.bF,articleid:k.hY,placemarkrating:k.aw,placemarktitletag:k.fq,language:k.hm,showcreateinfo:k.fC,panelinfowin:k.eH};var aL=this;if(am.zhbdmPlacemarkConfigLoaded=="1"){zhbdmMapObjectManager.prototype.hF(k,am,event);}else{if(V=='mootools'){var dr=new Request({url:bw,method:'post',data:av,async:true,onSuccess:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=JSON.decode(responseText);zhbdmMapObjectManager.prototype.aq(k,bc,am);},onRequest:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},onFailure:function(xhr){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert(xhr.status+','+xhr.statusText+','+xhr.responseText);}}).send();}else if(V=='jquery'){var ae=k.aj;ae.ajax({url:bw,type:'post',data:av,dataType:'json',async:true,success:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=responseText;zhbdmMapObjectManager.prototype.aq(k,bc,am);},beforeSend:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},fail:function(xhr,textStatus){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert("Error"+textStatus);}});}}});};zhbdmMapObjectManager.prototype.PlacemarkAddHoverListeners=function(V,an){var k=this;zhbdmMapObjectManager.prototype.aS(V,k,an);};zhbdmMapObjectManager.prototype.aS=function(V,l,am){am.zhbdmPlacemarkHoverConfigLoaded=0;google.maps.event.addListener(am,'mouseover',function(event){var k=l;var bw=k.bV+'index.php?option=com_zhbaidumap&no_html=1&format=raw&task=getPlacemarkHoverText';var av={id:this.zhbdmPlacemarkID};var aL=this;if(am.zhbdmPlacemarkHoverConfigLoaded=="1"){zhbdmMapObjectManager.prototype.gF(k,am,event);}else{if(V=='mootools'){var dr=new Request({url:bw,method:'post',data:av,async:true,onSuccess:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=JSON.decode(responseText);zhbdmMapObjectManager.prototype.bh(k,bc,am);},onRequest:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},onFailure:function(xhr){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert(xhr.status+','+xhr.statusText+','+xhr.responseText);}}).send();}else if(V=='jquery'){var ae=k.aj;ae.ajax({url:bw,type:'post',data:av,dataType:'json',async:true,success:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=responseText;zhbdmMapObjectManager.prototype.bh(k,bc,am);},beforeSend:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},fail:function(xhr,textStatus){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert("Error"+textStatus);}});}}});google.maps.event.addListener(am,'mouseout',function(event){var k=l;if(k.R!="0"){if(k.R=="1"){k.C.close();}else if(k.R=="2"){k.J.close();}}});};zhbdmMapObjectManager.prototype.GetPathAJAX=function(V){var bw=this.bV+'index.php?option=com_zhbaidumap&no_html=1&format=raw&task=getAJAXPathList';var ak=this.map;var fl=this.bK;var hu=this.parameter_val_pathlistid;var gu=this.parameter_val_expathlistid;var eD=this.parameter_val_path_grouplistid;var aW=this.parameter_val_path_categorylistid;var k=this;var av={mapid:fl,pathlistid:hu,expathlistid:gu,grouplistid:eD,categorylistid:aW};if(V=='mootools'){var dr=new Request({url:bw,method:'post',data:av,async:true,onSuccess:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=JSON.decode(responseText);zhbdmMapObjectManager.prototype.jy(V,k,bc);},onRequest:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},onFailure:function(xhr){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert(xhr.status+','+xhr.statusText+','+xhr.responseText);}}).send();}else if(V=='jquery'){var ae=k.aj;ae.ajax({url:bw,type:'post',data:av,dataType:'json',async:true,success:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=responseText;zhbdmMapObjectManager.prototype.jy(V,k,bc);},beforeSend:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},fail:function(xhr,textStatus){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert("Error"+textStatus);}});}};zhbdmMapObjectManager.prototype.jy=function(V,l,aK){if(aK.dataexists==1){var hk=aK.paths;var k=l;var ib=[];var bv;var fv=k.jn;var cN;cN=0;for(var i=0;i<hk.length;i++){bv=hk[i].id;if(typeof k.jq[bv]!=='undefined'){}else{ib.push(bv);if(fv!=0){cN+=1;if(cN>=fv){cN=0;var jk=ib.slice(0);zhbdmMapObjectManager.prototype.ic(V,k,jk);ib=[];}}}}var jk=ib.slice(0);if(jk.length!=0){zhbdmMapObjectManager.prototype.ic(V,k,jk);}ib=[];}else{}};zhbdmMapObjectManager.prototype.ic=function(V,l,by){var k=l;var ib=by;var bv;var bw=k.bV+'index.php?option=com_zhbaidumap&no_html=1&format=raw&task=getAJAXPaths';var av={ajaxarray:ib,maparticleid:k.hY};if(V=='mootools'){var dr=new Request({url:bw,method:'post',data:av,async:true,onSuccess:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=JSON.decode(responseText);zhbdmMapObjectManager.prototype.iP(V,k,bc);},onRequest:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},onFailure:function(xhr){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert(xhr.status+','+xhr.statusText+','+xhr.responseText);}}).send();}else if(V=='jquery'){var ae=k.aj;ae.ajax({url:bw,type:'post',data:av,dataType:'json',async:true,success:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=responseText;zhbdmMapObjectManager.prototype.iP(V,k,bc);},beforeSend:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},fail:function(xhr,textStatus){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert("Error"+textStatus);}});}};zhbdmMapObjectManager.prototype.iP=function(V,l,v){var bi;var fS=[];var gR=[];var gU;var hq=[];var ht=[];var hf=[];var hJ;var gs=[];var hn;var gC=[];var hk=v.paths;var k=l;var bv;var aV;if(v.dataexists==1){for(var i=0;i<hk.length;i++){bv=hk[i].id;aV=hk[i].markergroup;if(typeof k.jq[bv]!=='undefined'){}else{k.jq[bv]=hk[i];hq=k.iT(V,k,hk[i]);for(var ag=0;ag<hq.length;ag++){gU=hq[ag];if((typeof fS[aV]!=='undefined')&&(fS[aV]!=null)){fS[aV]+=1;bi=gR[aV];bi.push(gU);gR[aV]=bi;}else{fS[aV]=1;gR[aV]=[gU];}}gs=k.ip(V,k,hk[i]);for(var ag=0;ag<gs.length;ag++){hJ=gs[ag];if((typeof ht[aV]!=='undefined')&&(ht[aV]!=null)){ht[aV]+=1;bi=hf[aV];bi.push(hJ);hf[aV]=bi;}else{ht[aV]=1;hf[aV]=[hJ];}}gC=k.iO(V,k,hk[i]);}}k.io(fS,gR);k.hN(ht,hf);}else{}};zhbdmMapObjectManager.prototype.iT=function(V,l,gM){var k=l;var fZ;var hs=[];var gb;var hg=[];var gD=[];var gA=[];var gK;if(gM.path!=""){if(gM.objecttype=="0"){gb=gM.path;hg=gb.split(";");for(var i=0;i<hg.length;i++){gD=hg[i].split(",");gA.push(new BMap.Point(gD[0],gD[1]));}gK=new Object();gK.strokeColor=gM.color;gK.strokeOpacity=parseFloat(gM.opacity);gK.strokeWeight=parseFloat(gM.weight);fZ=new BMap.Polyline(gA,gK);fZ.zhbdmPathID=gM.id;fZ.zhbdmObjectType=gM.objecttype;fZ.zhbdmInfowinContent="";fZ.zhbdmTitle=gM.title;if(gM.hover_color!=""){fZ.zhbdmHoverChangeColor=1;fZ.zhbdmStrokeColor=gM.color;}else{fZ.zhbdmHoverChangeColor=0;}zhbdmMapObjectManager.prototype.ep(k,gM.markergroup,fZ);hs.push(fZ);zhbdmMapObjectManager.prototype.addPathListeners(V,k,fZ);if(k.R||gM.hoverhtml!=""||gM.hover_color!=""){zhbdmMapObjectManager.prototype.addPathHoverListeners(V,k,fZ);}}else if(gM.objecttype=="1"){gb=gM.path;hg=gb.split(";");for(var i=0;i<hg.length;i++){gD=hg[i].split(",");gA.push(new BMap.Point(gD[0],gD[1]));}gK=new Object();gK.strokeColor=gM.color;gK.strokeOpacity=parseFloat(gM.opacity);gK.strokeWeight=parseFloat(gM.weight);if(gM.fillcolor!=""){gK.fillColor=gM.fillcolor;}if(gM.fillopacity!=""){gK.fillOpacity=gM.fillopacity;}fZ=new BMap.Polygon(gA,gK);fZ.zhbdmPathID=gM.id;fZ.zhbdmObjectType=gM.objecttype;fZ.zhbdmInfowinContent="";fZ.zhbdmTitle=gM.title;if(gM.hover_color!=""||gM.hover_fillcolor!=""){fZ.zhbdmHoverChangeColor=1;fZ.zhbdmStrokeColor=gM.color;fZ.zhbdmFillColor=gM.fillcolor;}else{fZ.zhbdmHoverChangeColor=0;}zhbdmMapObjectManager.prototype.ep(k,gM.markergroup,fZ);hs.push(fZ);zhbdmMapObjectManager.prototype.addPathListeners(V,k,fZ);if(k.R||gM.hoverhtml!=""||gM.hover_color!=""){zhbdmMapObjectManager.prototype.addPathHoverListeners(V,k,fZ);}}else if(gM.objecttype=="2"){gb=gM.path;hg=gb.split(";");for(var i=0;i<hg.length;i++){gD=hg[i].split(",");gK=new Object();gK.strokeColor=gM.color;gK.strokeOpacity=parseFloat(gM.opacity);gK.strokeWeight=parseFloat(gM.weight);if(gM.fillcolor!=""){gK.fillColor=gM.fillcolor;}if(gM.fillopacity!=""){gK.fillOpacity=gM.fillopacity;}fZ=new BMap.Circle(new BMap.Point(gD[0],gD[1]),parseFloat(gM.radius),gK);fZ.zhbdmPathID=gM.id;fZ.zhbdmObjectType=gM.objecttype;fZ.zhbdmInfowinContent="";fZ.zhbdmTitle=gM.title;if(gM.hover_color!=""||gM.hover_fillcolor!=""){fZ.zhbdmHoverChangeColor=1;fZ.zhbdmStrokeColor=gM.color;fZ.zhbdmFillColor=gM.fillcolor;}else{fZ.zhbdmHoverChangeColor=0;}zhbdmMapObjectManager.prototype.ep(k,gM.markergroup,fZ);hs.push(fZ);zhbdmMapObjectManager.prototype.addPathListeners(V,k,fZ);if(k.R||gM.hoverhtml!=""||gM.hover_color!=""){zhbdmMapObjectManager.prototype.addPathHoverListeners(V,k,fZ);}}}else{}}return hs;};zhbdmMapObjectManager.prototype.ip=function(V,l,gM){var k=l;var fZ;var hs=[];var gK;if(gM.kmllayer!=""){gK=new Object();if(gM.showtype=="0"){gK.preserveViewport=false;}else if(gM.showtype=="1"){gK.preserveViewport=true;}else{gK.preserveViewport=false;}if(gM.suppressinfowindows=="1"){gK.suppressInfoWindows=true;}else{gK.suppressInfoWindows=false;}fZ=new google.maps.KmlLayer(gM.kmllayer,gK);zhbdmMapObjectManager.prototype.dh(k,gM.markergroup,fZ);hs.push(fZ);}return hs;};zhbdmMapObjectManager.prototype.iO=function(V,l,gM){var k=l;var fZ;var hs=[];var gK;var hj;var gD=[];if(gM.imgurl!=""&&gM.imgbounds!=""){gD=gM.imgbounds.split(";");if(gD.length==4){hj=new BMap.Bounds(new BMap.Point(gD[0],gD[1]),new BMap.Point(gD[2],gD[3]));gK=new Object();if(gM.imgopacity!=""){gK.opacity=parseFloat(gM.imgopacity);}else{gK.opacity=1;}if(gM.imgclickable=="1"){gK.clickable=true;}else{gK.clickable=false;}if(parseFloat(gM.minzoom)!=0){gK.displayOnMinLevel=parseFloat(gM.minzoom);}if(parseFloat(gM.maxzoom)!=0){gK.displayOnMaxLevel=parseFloat(gM.maxzoom);}fZ=new BMap.GroundOverlay(hj,gK);fZ.setImageURL(gM.imgurl);fZ.zhbdmPathID=gM.id;fZ.zhbdmInfowinContent="";fZ.zhbdmTitle=gM.title;zhbdmMapObjectManager.prototype.iV(k,gM.imgopacitymanage,fZ);zhbdmMapObjectManager.prototype.addPathListeners(V,k,fZ);hs.push(fZ);}}return hs;};zhbdmMapObjectManager.prototype.PathAddListeners=function(V,gM){var k=this;k.addPathListeners(V,k,gM);};zhbdmMapObjectManager.prototype.addPathListeners=function(V,l,hD){hD.zhbdmPathConfigLoaded=0;hD.addEventListener('click',function(event){var k=l;var bw=k.bV+'index.php?option=com_zhbaidumap&no_html=1&format=raw&task=getPathDetails';var av={id:this.zhbdmPathID,iconicon:k.bB,iconutil:k.bO,icondir:k.bF,articleid:k.hY,placemarktitletag:k.fq,language:k.hm,panelinfowin:k.eH};var hE=this;if(hD.zhbdmPathConfigLoaded=="1"){zhbdmMapObjectManager.prototype.gJ(k,hD,event.point);}else{if(V=='mootools'){var dr=new Request({url:bw,method:'post',data:av,async:true,onSuccess:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=JSON.decode(responseText);zhbdmMapObjectManager.prototype.hx(k,bc,hD,event.point);},onRequest:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},onFailure:function(xhr){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert(xhr.status+','+xhr.statusText+','+xhr.responseText);}}).send();}else if(V=='jquery'){var ae=k.aj;ae.ajax({url:bw,type:'post',data:av,dataType:'json',async:true,success:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=responseText;zhbdmMapObjectManager.prototype.hx(k,bc,hD,event.point);},beforeSend:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},fail:function(xhr,textStatus){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert("Error"+textStatus);}});}}});};zhbdmMapObjectManager.prototype.PathAddHoverListeners=function(V,gM){var k=this;zhbdmMapObjectManager.prototype.addPathHoverListeners(V,k,gM);};zhbdmMapObjectManager.prototype.addPathHoverListeners=function(V,l,hD){hD.zhbdmPathHoverConfigLoaded=0;hD.addEventListener('mouseover',function(event){var k=l;var bw=k.bV+'index.php?option=com_zhbaidumap&no_html=1&format=raw&task=getPathHoverText';var av={id:this.zhbdmPathID};var hE=this;if(hD.zhbdmPathHoverConfigLoaded=="1"){zhbdmMapObjectManager.prototype.gB(k,hD,event);}else{if(V=='mootools'){var dr=new Request({url:bw,method:'post',data:av,async:true,onSuccess:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=JSON.decode(responseText);zhbdmMapObjectManager.prototype.hB(k,bc,hD,event);},onRequest:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},onFailure:function(xhr){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert(xhr.status+','+xhr.statusText+','+xhr.responseText);}}).send();}else if(V=='jquery'){var ae=k.aj;ae.ajax({url:bw,type:'post',data:av,dataType:'json',async:true,success:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=responseText;zhbdmMapObjectManager.prototype.hB(k,bc,hD,event);},beforeSend:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},fail:function(xhr,textStatus){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert("Error"+textStatus);}});}}});hD.addEventListener('mouseout',function(event){var k=l;if(k.R!="0"){if(k.R=="1"){k.C.close();}else if(k.R=="2"){k.J.close();}}if(hD.zhbdmHoverChangeColor=="1"){if(hD.zhbdmObjectType=="0"){if(hD.zhbdmStrokeColor!=""){hD.setStrokeColor(hD.zhbdmStrokeColor);}}else if(hD.zhbdmObjectType=="1"||hD.zhbdmObjectType=="2"){if(hD.zhbdmStrokeColor!=""){hD.setStrokeColor(hD.zhbdmStrokeColor);}if(hD.zhbdmFillColor!=""){hD.setFillColor(hD.zhbdmFillColor);}}}});};zhbdmMapObjectManager.prototype.bh=function(l,v,bD){if(v.dataexists==1){var k=l;var ad=k.bG;var ak=k.map;ad.close();for(var i=0;i<k.h.length;i++){k.h[i].close();}var fB="";bD.zhbdmPlacemark_hoverstring=fB;if(k.R!="0"){fB=eval(v.hoverstring);bD.zhbdmPlacemark_hoverstring=fB;if(k.R=="1"){k.C.close();k.C.setContent(fB);k.C.setPosition(bD.getPosition());var fM=new Hover_Anchor("placemark",bD,null);k.C.open(ak,fM);}else if(k.R=="2"){k.J.close();k.J.setContent(fB);k.J.setPosition(bD.getPosition());var fM=new Hover_Anchor("placemark",bD,null);k.J.open(ak,fM);}}bD.zhbdmPlacemarkHoverConfigLoaded=1;}else{}};zhbdmMapObjectManager.prototype.gF=function(l,bD){var k=l;var ad=k.bG;var ak=k.map;ad.close();for(var i=0;i<k.h.length;i++){k.h[i].close();}var fB="";if(k.R!="0"){fB=bD.zhbdmPlacemark_hoverstring;if(fB!=""){if(k.R=="1"){k.C.close();k.C.setContent(fB);k.C.setPosition(bD.getPosition());var fM=new Hover_Anchor("placemark",bD,null);k.C.open(ak,fM);}else if(k.R=="2"){k.J.close();k.J.setContent(fB);k.J.setPosition(bD.getPosition());var fM=new Hover_Anchor("placemark",bD,null);k.J.open(ak,fM);}}}};zhbdmMapObjectManager.prototype.hB=function(l,v,hA,ce){if(v.dataexists==1){var k=l;var ad=k.bG;var ak=k.map;ad.close();for(var i=0;i<k.h.length;i++){k.h[i].close();}var fB="";hA.zhbdmPath_hoverstring=fB;if(k.R!="0"){if(v.hoverstring!=""){fB=eval(v.hoverstring);hA.zhbdmPath_hoverstring=fB;if(k.R=="1"){k.C.close();k.C.setContent(fB);k.C.setPosition(ce.point);var fM=new Hover_Anchor("path",hA,ce);k.C.open(ak,fM);}else if(k.R=="2"){k.J.close();k.J.setContent(fB);k.J.setPosition(ce.point);var fM=new Hover_Anchor("path",hA,ce);k.J.open(ak,fM);}}}hA.zhbdmPath_objecttype=v.objecttype;hA.zhbdmPath_hover_color="";hA.zhbdmPath_hover_fillcolor="";if(v.objecttype=="0"){if(v.hover_color!=""){hA.setStrokeColor(v.hover_color);hA.zhbdmPath_hover_color=v.hover_color;}}else if(v.objecttype=="1"||v.objecttype=="2"){if(v.hover_color!=""){hA.setStrokeColor(v.hover_color);hA.zhbdmPath_hover_color=v.hover_color;}if(v.hover_fillcolor!=""){hA.setFillColor(v.hover_fillcolor);hA.zhbdmPath_hover_fillcolor=v.hover_fillcolor;}}hA.zhbdmPathHoverConfigLoaded=1;}else{}};zhbdmMapObjectManager.prototype.gB=function(l,hA,ce){var k=l;var ad=k.bG;var ak=k.map;ad.close();for(var i=0;i<k.h.length;i++){k.h[i].close();}var fB="";if(k.R!="0"){fB=hA.zhbdmPath_hoverstring;if(fB!=""){if(k.R=="1"){k.C.close();k.C.setContent(fB);k.C.setPosition(ce.point);var fM=new Hover_Anchor("path",hA,ce);k.C.open(ak,fM);}else if(k.R=="2"){k.J.close();k.J.setContent(fB);k.J.setPosition(ce.point);var fM=new Hover_Anchor("path",hA,ce);k.J.open(ak,fM);}}}if(hA.zhbdmPath_objecttype=="0"){if(hA.zhbdmPath_hover_color!=""){hA.setStrokeColor(hA.zhbdmPath_hover_color);}}else if(hA.zhbdmPath_objecttype=="1"||hA.zhbdmPath_objecttype=="2"){if(hA.zhbdmPath_hover_color!=""){hA.setStrokeColor(hA.zhbdmPath_hover_color);}if(hA.zhbdmPath_hover_fillcolor!=""){hA.setFillColor(hA.zhbdmPath_hover_fillcolor);}}};zhbdmMapObjectManager.prototype.GroupStateDefine=function(L,bn){this.G[L]=bn;};zhbdmMapObjectManager.prototype.dE=function(L,ax){var ai=ax;var bx;var aU;if((typeof ai!=='undefined')&&(ai!=null)){if(this.az&&this.aZ){aU=this.G[L];if((typeof aU!=='undefined')&&(aU==1)){for(var ag=0;ag<ai.length;ag++){bx=ai[ag];bx.setMap(this.map);}}}else{for(var ag=0;ag<ai.length;ag++){bx=ai[ag];bx.setMap(this.map);}}}};zhbdmMapObjectManager.prototype.cn=function(L,ax){var ai=ax;var bx;var aU;var ak=this.map;if((typeof ai!=='undefined')&&(ai!=null)){if(this.az&&this.aZ){aU=this.G[L];if((typeof aU==='undefined')||(aU==0)){for(var ag=0;ag<ai.length;ag++){bx=ai[ag];ak.removeOverlay(bx);}}}else{for(var ag=0;ag<ai.length;ag++){bx=ai[ag];ak.removeOverlay(bx);}}}};zhbdmMapObjectManager.prototype.eb=function(L,ax){var ai=ax;var bx;var aU;var ak=this.map;if((typeof ai!=='undefined')&&(ai!=null)){if(this.az&&this.eB){aU=this.G[L];if((typeof aU!=='undefined')&&(aU==1)){for(var ag=0;ag<ai.length;ag++){bx=ai[ag];ak.addOverlay(bx);}}}else{for(var ag=0;ag<ai.length;ag++){bx=ai[ag];ak.addOverlay(bx);}}}};zhbdmMapObjectManager.prototype.fh=function(L,ax){var ai=ax;var bx;var aU;var ak=this.map;if((typeof ai!=='undefined')&&(ai!=null)){if(this.az&&this.eB){aU=this.G[L];if((typeof aU==='undefined')||(aU==0)){for(var ag=0;ag<ai.length;ag++){bx=ai[ag];ak.removeOverlay(bx);}}}else{for(var ag=0;ag<ai.length;ag++){bx=ai[ag];ak.removeOverlay(bx);}}}};zhbdmMapObjectManager.prototype.GroupStateToggle=function(L){if(this.az){if(this.ie=="OnlyOneActive"){this.GroupStateHideAll();var aU=this.G[L];if((typeof aU==='undefined')||(aU==0)){this.GroupStateShow(L);}else{this.GroupStateHide(L);}}else{var aU=this.G[L];if((typeof aU==='undefined')||(aU==0)){this.GroupStateShow(L);}else{this.GroupStateHide(L);}}}};zhbdmMapObjectManager.prototype.GroupStateShow=function(L){var F;if(this.az){var aU=this.G[L];if((typeof aU==='undefined')||(aU==0)){this.G[L]=1;if(this.bI){F=this.bL[L];if(typeof F!=='undefined'){this.ab(L,F);}}if(this.aZ){F=this.bE[L];if(typeof F!=='undefined'){this.dE(L,F);}}if(this.eB){F=this.dS[L];if(typeof F!=='undefined'){this.eb(L,F);}}if(this.jD==1){var fM=this.fF+L;var af=document.getElementById(fM);ez(af,"active");}else if(this.jD==2){var ae=this.aj;var fM="#"+this.fF+L;var gN=ae(fM).hasClass("active");if(!gN){ae(fM).addClass("active");}}else{var fM=this.fF+L;var af=document.getElementById(fM);af.addClass("active");}}}};zhbdmMapObjectManager.prototype.GroupStateHide=function(L){var F;if(this.az){var aU=this.G[L];if((typeof aU!=='undefined')&&(aU==1)){this.G[L]=0;if(this.bI){F=this.bL[L];if(typeof F!=='undefined'){this.aN(L,F);}}if(this.aZ){F=this.bE[L];if(typeof F!=='undefined'){this.cn(L,F);}}if(this.eB){F=this.dS[L];if(typeof F!=='undefined'){this.fh(L,F);}}if(this.jD==1){var fM=this.fF+L;var af=document.getElementById(fM);eI(af,"active");}else if(this.jD==2){var ae=this.aj;var fM="#"+this.fF+L;var gN=ae(fM).hasClass("active");if(gN){ae(fM).removeClass("active");}}else{var fM=this.fF+L;var af=document.getElementById(fM);af.removeClass("active");}}}};zhbdmMapObjectManager.prototype.GroupStateShowAll=function(){var bv;if(this.az){for(var i=1;i<this.G.length;i++){bv=this.G[i];if(typeof bv!=='undefined'){this.GroupStateShow(i);}}}};zhbdmMapObjectManager.prototype.GroupStateHideAll=function(){var bv;if(this.az){for(var i=1;i<this.G.length;i++){bv=this.G[i];if(typeof bv!=='undefined'){this.GroupStateHide(i);}}}};zhbdmMapObjectManager.prototype.InitializeByGroupState=function(){var bv;var F;for(var i=0;i<this.G.length;i++){bv=this.G[i];if(typeof bv!=='undefined'){if(this.az){if(this.bI){if(bv==1){F=this.bL[i];if(typeof F!=='undefined'){this.ab(i,F);}}else{F=this.bL[i];if(typeof F!=='undefined'){this.aN(i,F);}}}else{F=this.bL[i];if(typeof F!=='undefined'){this.ab(i,F);}}}else{F=this.bL[i];if(typeof F!=='undefined'){this.ab(i,F);}}if(this.az){if(this.aZ){if(bv==1){F=this.bE[i];if(typeof F!=='undefined'){this.dE(i,F);}}else{F=this.bE[i];if(typeof F!=='undefined'){this.cn(i,F);}}}else{F=this.bE[i];if(typeof F!=='undefined'){this.dE(i,F);}}}else{F=this.bE[i];if(typeof F!=='undefined'){this.dE(i,F);}}if(this.az){if(this.eB){if(bv==1){F=this.dS[i];if(typeof F!=='undefined'){this.eb(i,F);}}else{F=this.dS[i];if(typeof F!=='undefined'){this.fh(i,F);}}}else{F=this.dS[i];if(typeof F!=='undefined'){this.eb(i,F);}}}else{F=this.dS[i];if(typeof F!=='undefined'){this.eb(i,F);}}}}};zhbdmMapObjectManager.prototype.PlacemarkRateMouseOver=function(cq,cU,dv){var k=this;var aJ;for(var i=1;i<=cU;i++){aJ=document.getElementById("placemarkRateImage"+cq+"_"+i);aJ.src=k.bO+"star1_10.png";}for(var i=cU+1;i<=dv;i++){aJ=document.getElementById("placemarkRateImage"+cq+"_"+i);aJ.src=k.bO+"star1_00.png";}};zhbdmMapObjectManager.prototype.PlacemarkRateMouseOut=function(cq,cU,dv){var k=this;var aJ;for(var i=1;i<=dv;i++){aJ=document.getElementById("placemarkRateImage"+cq+"_"+i);aJ.src=k.bO+"star1_00.png";}};zhbdmMapObjectManager.prototype.PlacemarkRateDivMouseOut=function(cq,dv){var k=this;zhbdmMapObjectManager.prototype.PlacemarkRateDivShowRate(k,cq,dv);};zhbdmMapObjectManager.prototype.PlacemarkRateDivShowRate=function(l,cq,dv){var k=l;var dk=dv;if(k.bN[cq]===undefined){alert("Unable to find placemark with ID = "+cq);}else{var cP=k.bN[cq];var cJ=cP.zhbdmRating;var dF=Math.floor(cJ);var cd;var aJ;if(cJ>dk){cJ=dk;dF=dk;}cd=0;if(cJ==0){cd++;aJ=document.getElementById("placemarkRateImage"+cq+"_"+cd);aJ.src=k.bO+"star0_00.png";}else if(dF==0&&cJ>0){cd++;aJ=document.getElementById("placemarkRateImage"+cq+"_"+cd);aJ.src=k.bO+"star0_05.png";}else{for(var i=0;i<dF;i++){cd++;aJ=document.getElementById("placemarkRateImage"+cq+"_"+cd);aJ.src=k.bO+"star0_10.png";}if(Math.ceil((cJ-dF)*10)>4){cd++;aJ=document.getElementById("placemarkRateImage"+cq+"_"+cd);aJ.src=k.bO+"star0_05.png";}}for(var i=cd;i<dk;i++){aJ=document.getElementById("placemarkRateImage"+cq+"_"+(i+1));aJ.src=k.bO+"star0_00.png";}}};zhbdmMapObjectManager.prototype.PlacemarkRateDivText=function(l,cq,cf){var k=l;if(k.bN[cq]===undefined){alert("Unable to find placemark with ID = "+cq);}else{var dg=document.getElementById("rateContentResult"+cq);dg.innerHTML=cf;}};zhbdmMapObjectManager.prototype.PlacemarkRateUpdate=function(V,cq,cL,dv,eF){var k=this;if(k.bN[cq]===undefined){alert("Unable to find placemark with ID = "+cq);}else{var bw=k.bV+'index.php?option=com_zhbaidumap&no_html=1&format=raw&task=setPlacemarkRating';var av={id:cq,rating:cL,language:eF};if(V=='mootools'){var dr=new Request({url:bw,method:'post',data:av,async:true,onSuccess:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=JSON.decode(responseText);zhbdmMapObjectManager.prototype.be(k,bc,cq,dv);},onRequest:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},onFailure:function(xhr){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert(xhr.status+','+xhr.statusText+','+xhr.responseText);}}).send();}else if(V=='jquery'){var ae=k.aj;ae.ajax({url:bw,type:'post',data:av,dataType:'json',async:true,success:function(responseText){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';var bc=responseText;zhbdmMapObjectManager.prototype.be(k,bc,cq,dv);},beforeSend:function(){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='block';},fail:function(xhr,textStatus){var H=document.getElementById("BDMapsLoading"+k.hY);H.style.display='none';alert("Error"+textStatus);}});}}};zhbdmMapObjectManager.prototype.be=function(l,v,cq,dv){var k=l;if(v.dataexists==1){if(k.bN[cq]===undefined){alert("Unable to find placemark with ID = "+cq);}else{var cP=k.bN[cq];cP.zhbdmRating=v.averagerating;zhbdmMapObjectManager.prototype.PlacemarkRateDivShowRate(k,cq,dv);zhbdmMapObjectManager.prototype.PlacemarkRateDivText(k,cq,v.errortext);}}else{zhbdmMapObjectManager.prototype.PlacemarkRateDivText(k,cq,v.errortext);}};zhbdmMapObjectManager.prototype.setMapBounds=function(db,bZ,dI,cj){var k=this;var ak=k.map;var cz=new BMap.Bounds(new BMap.Point(db,bZ),new BMap.Point(dI,cj));k.dj=cz;try{BMapLib.AreaRestriction.setBounds(ak,cz);}catch(e){alert(e);}};zhbdmMapObjectManager.prototype.enableElevation=function(dM,ck,cW,dB,cS,dH){this.dQ=new google.maps.ElevationService();this.bS=dM;this.cZ=ck;this.cA=cW;this.dw=dB;this.cp=cS;this.dA=dH;};zhbdmMapObjectManager.prototype.enablePlaceElevation=function(){var k=this;var ak=k.map;google.maps.event.addListener(ak,'click',function(event){k.cO(k,event);});};zhbdmMapObjectManager.prototype.ElevationShowDiagram=function(dm,cs,cX,de,du,cR,dR,cY,cK,bY,cT,cc,bX,dJ,cl,cr,di){var k=this;if(cs==0){var dG={'path':dm,'samples':cX};}else{var dG={'path':dm,'samples':cs};}k.dQ.getElevationAlongPath(dG,cQ);function cQ(results,status){var dq;if(status==google.maps.ElevationStatus.OK){bp=results;if(cR==1){var dq=new google.visualization.AreaChart(document.getElementById('BDMapsPathPanel'+k.hY));}else if(cR==2){var dq=new google.visualization.LineChart(document.getElementById('BDMapsPathPanel'+k.hY));}else if(cR==3){var dq=new google.visualization.ColumnChart(document.getElementById('BDMapsPathPanel'+k.hY));}else{var dq=new google.visualization.AreaChart(document.getElementById('BDMapsPathPanel'+k.hY));}var av=new google.visualization.DataTable();av.addColumn('string','Sample');av.addColumn('number',k.cZ+' ('+k.dw+')');av.addColumn('number','Lat');av.addColumn('number','Lng');for(var i=0;i<bp.length;i++){av.addRow(['',bp[i].elevation,bp[i].location.lat,bp[i].location.lng]);}var eN=new google.visualization.NumberFormat({fractionDigits:2,decimalSymbol:'.',groupingSymbol:''});eN.format(av,1);var dO=new google.visualization.DataView(av);dO.setColumns([0,1]);document.getElementById('BDMapsPathPanel'+k.hY).style.display='block';var cV={width:cX,height:de,legend:'none',backgroundColor:{stroke:bX,strokeWidth:dJ,fill:cl},vAxis:{baseline:dR,baselineColor:cY,gridlines:{color:cK,count:bY},minorGridlines:{color:cT,count:cc},maxValue:cr,minValue:di,title:k.bS}};dq.draw(dO,cV);google.visualization.events.addListener(dq,'select',function(){var ad=k.bG;var ak=k.map;var cF=dq.getSelection()[0];if(cF){var jp=av.getValue(cF.row,1);var im=av.getValue(cF.row,2);var iI=av.getValue(cF.row,3);ad.close();ad.setContent(k.cZ+' '+k.cA+' '+jp.toFixed(1)+' '+k.dw);ad.setPosition(new BMap.Point(iI,im));ak.openInfoWindow(ad,BMap.Point(iI,im));}});google.visualization.events.addListener(dq,'onmouseover',function(e){var ak=k.map;var aa=k.cb;if((aa==null)||(aa=='undefined')){aa=new BMap.Marker({position:bp[e.row].location,map:ak,icon:k.bB+du});k.cb=aa;}else{aa.setPosition(bp[e.row].location);aa.setMap(ak);}});google.visualization.events.addListener(dq,'onmouseout',function(e){var aa=k.cb;if(aa!=null){ak.removeOverlay(aa);}});}}};zhbdmMapObjectManager.prototype.cO=function(l,ce){var k=l;var ad=k.bG;var ak=k.map;var fz=k.dQ;var ca=[];var cB=ce.point;ca.push(cB);var dY={'locations':ca};fz.getElevationForLocations(dY,function(results,status){if(status==google.maps.ElevationStatus.OK){if(results[0]){ad.close();ad.setContent(k.cZ+' '+k.cA+' '+results[0].elevation.toFixed(1)+' '+k.dw);ad.setPosition(cB);ak.openInfoWindow(ad,cB);}else{alert(k.cp);}}else{alert(k.dA+' '+status);}});};zhbdmMapObjectManager.prototype.enablePlacemarkListSearch=function(iM){var k=this;k.gh=1;k.markerlistsearchType=iM;zhbdmMapObjectManager.prototype.hG(k);};zhbdmMapObjectManager.prototype.refreshPlacemarkListSearch=function(){var k=this;zhbdmMapObjectManager.prototype.hG(k);};zhbdmMapObjectManager.prototype.hG=function(l){var k=l;var ae=k.aj;var fm,bJ,bd;var av=[];var eA;var iM;if(k.gh==1){fm=k.eU;iM=k.markerlistsearchType;for(var i=0;i<fm.length;i++){bJ=fm[i];if((typeof bJ!=='undefined')&&(bJ!=null)){bd=bJ[0];if((typeof bd!=='undefined')&&(bd!=null)){if(bd.zhbdmIncludeInList==1){eA=new Object();eA.label=bd.zhbdmTitle;eA.value=bd.zhbdmPlacemarkID;eA.description=bd.zhbdmPlacemarkDescription;av.push(eA);}else{}}}}var jo;var ja;var je;var hO=[];var iu=[];var jA;var iA;var iU;var jg=[];var jl=[];jA=k.markerlistsearchMappingType;iA=k.markerlistsearchAccentSide;if(jA!=0){if(jA!=100){if(jA==1){k.markerlistsearchAccent=iE(jA,"Accent");k.markerlistsearchMapping=iE(jA,"Mapping");;}else if(jA==2){iA=0;k.markerlistsearchAccent=iE(jA,"Accent");k.markerlistsearchMapping=iE(jA,"Mapping");;}}if(k.markerlistsearchAccent!=""){iU=k.markerlistsearchAccent;iU=iU.replace(/;;/g,";\n");iU=iU.replace(/QQ/g,"\"");jg=iU.split(";");for(var jw=0;jw<jg.length;jw++){if((typeof jg[jw]!=='undefined')&&jg[jw]!=null&&jg[jw]!=""){iU=jg[jw];iU=iU.replace("\n",";");iU=iU.replace("::","\n:");jl=iU.split(":");if((typeof jl[0]!=='undefined')&&(jl[0]!=null)&&(jl[0]!="")&&(typeof jl[1]!=='undefined')&&(jl[1]!=null)&&(jl[1]!="")){jl[0]=jl[0].replace("\n",":");if(typeof jo==='undefined'){jo=new Object();}jo[jl[0]]=jl[1];}else{alert("Wrong synonym definition \""+jg[jw]+"\" at pair position "+(jw+1));}}else{alert("Empty synonym definition at pair position "+(jw+1));}}}if(k.markerlistsearchMapping!=""){je=k.markerlistsearchMapping;je=je.replace(/;;/g,";\n");je=je.replace(/QQ/g,"\"");hO=je.split(";");for(var jw=0;jw<hO.length;jw++){if((typeof hO[jw]!=='undefined')&&hO[jw]!=null&&hO[jw]!=""){je=hO[jw];je=je.replace("\n",";");je=je.replace("::","\n:");iu=je.split(":");if((typeof iu[0]!=='undefined')&&(iu[0]!=null)&&(iu[0]!="")&&(typeof iu[1]!=='undefined')&&(iu[1]!=null)&&(iu[1]!="")){iu[0]=iu[0].replace("\n",":");if(typeof ja==='undefined'){ja=new Object();}ja[iu[0]]=iu[1];}else{alert("Wrong mapping definition \""+hO[jw]+"\" at pair position "+(jw+1));}}else{alert("Empty mapping definition at pair position "+(jw+1));}}}}function ZhBDMLightwellPlacemarkList(request,response){var jw,hT,cP,hL=[];if(request.term===""){response([]);return;}for(jw=0,hT=av.length;jw<hT;jw++){cP=av[jw];if(iM==0){if(jm(jA,iA,ja,jo,request.term,cP.label)){hL.push(cP);}}else if(iM==1){if(jm(jA,iA,ja,jo,request.term,cP.label)||jm(jA,iA,ja,jo,request.term,cP.description)){hL.push(cP);}}else{if(jm(jA,iA,ja,jo,request.term,cP.label)){hL.push(cP);}}}response(hL);};ae("#BDMapsMarkerListSearchAutocomplete"+k.hY).autocomplete({source:ZhBDMLightwellPlacemarkList,focus:function(event,ui){if((typeof ui.item!=='undefined')&&(ui.item!=null)){ae("#BDMapsMarkerListSearchAutocomplete"+k.hY).val(ui.item.label);}return false;},select:function(event,ui){if((typeof ui.item!=='undefined')&&(ui.item!=null)){var fu="zhbdm_pmlist_"+k.hY+"_"+ui.item.value;var eG=document.getElementById(fu);if(typeof eG.onclick=="function"){eG.onclick.apply(eG);}else{}ae("#BDMapsMarkerListSearchAutocomplete"+k.hY).val(ui.item.label);}return false;}});}};zhbdmMapObjectManager.prototype.enableGroupListSearch=function(iM){var k=this;k.iX=1;k.grouplistsearchType=iM;zhbdmMapObjectManager.prototype.gc(k);};zhbdmMapObjectManager.prototype.gc=function(l){var k=l;var ae=k.aj;var hv,gI;var av=[];var gY;var iM;if(k.iX==1){hv=k.fX;iM=k.grouplistsearchType;for(var i=0;i<hv.length;i++){gI=hv[i];if((typeof gI!=='undefined')&&(gI!=null)){gY=new Object();gY.label=gI.title;gY.value=gI.id;gY.description=gI.description;av.push(gY);}}var jo;var ja;var je;var hO=[];var iu=[];var jA;var iA;var iU;var jg=[];var jl=[];jA=k.grouplistsearchMappingType;iA=k.grouplistsearchAccentSide;if(jA!=0){if(jA!=100){if(jA==1){k.grouplistsearchAccent=iE(jA,"Accent");k.grouplistsearchMapping=iE(jA,"Mapping");;}else if(jA==2){iA=0;k.grouplistsearchAccent=iE(jA,"Accent");k.grouplistsearchMapping=iE(jA,"Mapping");;}}if(k.grouplistsearchAccent!=""){iU=k.grouplistsearchAccent;iU=iU.replace(/;;/g,";\n");iU=iU.replace(/QQ/g,"\"");jg=iU.split(";");for(var jw=0;jw<jg.length;jw++){if((typeof jg[jw]!=='undefined')&&jg[jw]!=null&&jg[jw]!=""){iU=jg[jw];iU=iU.replace("\n",";");iU=iU.replace("::","\n:");jl=iU.split(":");if((typeof jl[0]!=='undefined')&&(jl[0]!=null)&&(jl[0]!="")&&(typeof jl[1]!=='undefined')&&(jl[1]!=null)&&(jl[1]!="")){jl[0]=jl[0].replace("\n",":");if(typeof jo==='undefined'){jo=new Object();}jo[jl[0]]=jl[1];}else{alert("Wrong synonym definition \""+jg[jw]+"\" at pair position "+(jw+1));}}else{alert("Empty synonym definition at pair position "+(jw+1));}}}if(k.grouplistsearchMapping!=""){je=k.grouplistsearchMapping;je=je.replace(/;;/g,";\n");je=je.replace(/QQ/g,"\"");hO=je.split(";");for(var jw=0;jw<hO.length;jw++){if((typeof hO[jw]!=='undefined')&&hO[jw]!=null&&hO[jw]!=""){je=hO[jw];je=je.replace("\n",";");je=je.replace("::","\n:");iu=je.split(":");if((typeof iu[0]!=='undefined')&&(iu[0]!=null)&&(iu[0]!="")&&(typeof iu[1]!=='undefined')&&(iu[1]!=null)&&(iu[1]!="")){iu[0]=iu[0].replace("\n",":");if(typeof ja==='undefined'){ja=new Object();}ja[iu[0]]=iu[1];}else{alert("Wrong mapping definition \""+hO[jw]+"\" at pair position "+(jw+1));}}else{alert("Empty mapping definition at pair position "+(jw+1));}}}}function ZhBDMLightwellGroupList(request,response){var jw,hT,cP,hL=[];if(request.term===""){response([]);return;}for(jw=0,hT=av.length;jw<hT;jw++){cP=av[jw];if(iM==0){if(jm(jA,iA,ja,jo,request.term,cP.label)){hL.push(cP);}}else if(iM==1){if(jm(jA,iA,ja,jo,request.term,cP.label)||jm(jA,iA,ja,jo,request.term,cP.description)){hL.push(cP);}}else{if(jm(jA,iA,ja,jo,request.term,cP.label)){hL.push(cP);}}}response(hL);};ae("#BDMapsGroupListSearchAutocomplete"+k.hY).autocomplete({source:ZhBDMLightwellGroupList,focus:function(event,ui){if((typeof ui.item!=='undefined')&&(ui.item!=null)){ae("#BDMapsGroupListSearchAutocomplete"+k.hY).val(ui.item.label);}return false;},select:function(event,ui){if((typeof ui.item!=='undefined')&&(ui.item!=null)){var fu="a-markergroup"+k.hY+"_"+ui.item.value;var eG=document.getElementById(fu);if(typeof eG.onclick=="function"){eG.onclick.apply(eG);}else{}ae("#BDMapsGroupListSearchAutocomplete"+k.hY).val(ui.item.label);}return false;}});}};zhbdmMapObjectManager.prototype.enablePanel=function(){var k=this;var ae=k.aj;ae(function(){var fL=ae("#BDMapsPanel"+k.hY).tabs();fL.find(".ui-tabs-nav").sortable({axis:"x",stop:function(){fL.tabs("refresh");}});ae("#BDMapsPanel"+k.hY).height(function(){return ae("#BDMapsMainPanel"+k.hY).height()-ae("#BDMapsMainPanel"+k.hY+" #BDMapsPanel"+k.hY+" ul.ui-tabs-nav").outerHeight(true)-(ae("#BDMapsPanel"+k.hY).outerHeight(true)-ae("#BDMapsPanel"+k.hY).height())-k.gz});var fo=ae("#BDMapsPanel"+k.hY+" div.ui-tabs-panel").outerHeight(true);ae("#BDMapsPanel"+k.hY+" div.ui-tabs-panel").height(function(){return ae("#BDMapsPanel"+k.hY).height()-ae("#BDMapsMainPanel"+k.hY+" #BDMapsPanel"+k.hY+" ul.ui-tabs-nav").outerHeight(true)-(fo*2.2)});});};zhbdmMapObjectManager.prototype.panelShowPlacemarkContent=function(t){var k=this;var ae=k.aj;ae(function(){var fL=ae("#BDMapsPanel"+k.hY+"tabs-1").html(t);var bv=ae("#BDMapsPanel"+k.hY+' a[href="#BDMapsPanel'+k.hY+'tabs-1"]').parent().index();fL=ae("#BDMapsPanel"+k.hY).tabs("option","active",bv);var gN=ae("#BDMapsID"+k.hY+' div.zhbdm-panel-button'+k.eh+'-star').hasClass("active");if(!gN){ae("#BDMapsID"+k.hY+' div.zhbdm-panel-button-ui'+k.eh+'-star').trigger("click");}});};zhbdmMapObjectManager.prototype.panelShowPathContent=function(t){var k=this;var ae=k.aj;ae(function(){var fL=ae("#BDMapsPanel"+k.hY+"tabs-1").html(t);var bv=ae("#BDMapsPanel"+k.hY+' a[href="#BDMapsPanel'+k.hY+'tabs-1"]').parent().index();fL=ae("#BDMapsPanel"+k.hY).tabs("option","active",bv);var gN=ae("#BDMapsID"+k.hY+' div.zhbdm-panel-button'+k.eh+'-star').hasClass("active");if(!gN){ae("#BDMapsID"+k.hY+' div.zhbdm-panel-button-ui'+k.eh+'-star').trigger("click");}});};zhbdmMapObjectManager.prototype.panelShowPlacemarkContentTabs=function(t){var k=this;var ae=k.aj;ae(function(){var fL=ae("#BDMapsPanel"+k.hY+"tabs-1").html(t);ae(function(){ae("#BDMapsPanelAccordion"+k.hY).accordion({collapsible:true});});var bv=ae("#BDMapsPanel"+k.hY+' a[href="#BDMapsPanel'+k.hY+'tabs-1"]').parent().index();fL=ae("#BDMapsPanel"+k.hY).tabs("option","active",bv);var gN=ae("#BDMapsID"+k.hY+' div.zhbdm-panel-button'+k.eh+'-star').hasClass("active");if(!gN){ae("#BDMapsID"+k.hY+' div.zhbdm-panel-button-ui'+k.eh+'-star').trigger("click");}});};zhbdmMapObjectManager.prototype.panelPlacemarkShowPanorama=function(aT,aP,dz){var k=this;var ae=k.aj;var ad=k.bG;var fb=ad.zhbdmPlacemarkOriginalPosition;var bA="";if(aT=="0"){bA+='<div id="contentStringStreetView'+k.hY+'" class="placemarkContentPanorama" style="height:'+aP+'px;">';}else{bA+='<div id="contentStringStreetView'+k.hY+'" class="placemarkContentPanorama" style="width:'+aT+'px;height:'+aP+'px;">';}bA+='</div>';ad.close();var fL=ae("#BDMapsPanel"+k.hY+"tabs-1").html(bA);k.hz=new google.maps.StreetViewPanorama(document.getElementById("contentStringStreetView"+k.hY),{navigationControl:true,enableCloseButton:false,addressControl:false,linksControl:false});k.hz.setPosition(fb);if(dz!=""){k.hz.setPov(dz);}var bv=ae("#BDMapsPanel"+k.hY+' a[href="#BDMapsPanel'+k.hY+'tabs-1"]').parent().index();fL=ae("#BDMapsPanel"+k.hY).tabs("option","active",bv);google.maps.event.trigger(k.hz,'resize');var gN=ae("#BDMapsID"+k.hY+' div.zhbdm-panel-button'+k.eh+'-star').hasClass("active");if(!gN){ae("#BDMapsID"+k.hY+' div.zhbdm-panel-button-ui'+k.eh+'-star').trigger("click");}};zhbdmLayerButtonControl.prototype.controlState=0;zhbdmLayerButtonControl.prototype.fQ=function(){if(this.controlState==1){this.controlState=0;this.gV.setMap(null);}else{this.controlState=1;this.gV.setMap(this.ga);}};zhbdmLayerButtonControl.prototype.fW=function(){if(this.controlState==1){this.gV.setMap(this.ga);}else{this.gV.setMap(null);}};function zhbdmLayerButtonControl(bU,ge,gp,gW,gS,gi,gm,aT,aP,hl){this.gV=ge;this.ga=bU;var control=this;var gl;var bW;if(gp==1){gl='';}else{gl='2';}if(gW==1){gl=gl+'';bW=1;this.controlState=1;}else if(gW==2){gl=gl+'-star';bW=2;this.controlState=0;}else if(gW==3){gl=gl+'';bW=3;this.controlState=0;}else if(gW==12){gl=gl+'-star';bW=2;this.controlState=1;}else if(gW==13){gl=gl+'';bW=3;this.controlState=1;}else{gl=gl+'';bW=1;this.controlState=0;}var gv=document.createElement('DIV');gv.className="zhbdm-"+gi+"-button"+gl;gv.style.padding='5px';gv.index=1;this.gL=gv;var gg=document.createElement('DIV');gg.className="zhbdm-"+gi+"-button-ui"+gl;gg.title=gm;gv.appendChild(gg);var gH=document.createElement('DIV');gH.className="zhbdm-"+gi+"-button-text"+gl;if(bW==1){gH.innerHTML="";}else if(bW==2){gH.innerHTML='<img style="border: 0px none; padding: 0px; margin: 0px; width: '+aT+'px; height: '+aP+'px;" src="'+hl+'">';}else if(bW==3){gH.innerHTML=gm;}else{gH.innerHTML="";}gg.appendChild(gH);google.maps.event.addDomListener(gg,'click',function(){control.fQ();});control.fW();var fO="";if(gS){switch(gS){case 0:break;case 1:fO=google.maps.ControlPosition.TOP_CENTER;break;case 2:fO=google.maps.ControlPosition.TOP_LEFT;break;case 3:fO=google.maps.ControlPosition.TOP_RIGHT;break;case 4:fO=google.maps.ControlPosition.LEFT_TOP;break;case 5:fO=google.maps.ControlPosition.RIGHT_TOP;break;case 6:fO=google.maps.ControlPosition.LEFT_CENTER;break;case 7:fO=google.maps.ControlPosition.RIGHT_CENTER;break;case 8:fO=google.maps.ControlPosition.LEFT_BOTTOM;break;case 9:fO=google.maps.ControlPosition.RIGHT_BOTTOM;break;case 10:fO=google.maps.ControlPosition.BOTTOM_CENTER;break;case 11:fO=google.maps.ControlPosition.BOTTOM_LEFT;break;case 12:fO=google.maps.ControlPosition.BOTTOM_RIGHT;break;default:fO="";break;}}if(fO!=""){bU.controls[fO].push(gv);}};function zhbdmOverlayOpacityControl(gE,bU,gr,gp,gW,gS,ir,iR,gi,gm){this.gw=gE;this.ga=bU;this.hi=jQuery.noConflict();this.hy=gr;this.ia=gi;this.hW=gm;var jr=this.hi;var fO="";if(gS){switch(gS){case 0:break;case 1:fO=BMAP_ANCHOR_TOP_LEFT;break;case 2:fO=BMAP_ANCHOR_TOP_RIGHT;break;case 3:fO=BMAP_ANCHOR_BOTTOM_LEFT;break;case 4:fO=BMAP_ANCHOR_BOTTOM_RIGHT;break;default:fO="";break;}}if(fO!=""){this.defaultAnchor=fO;if(ir!=0||iR!=0){this.defaultOffset=new BMap.Size(ir,iR);}else{this.defaultOffset=new BMap.Size(10,10);}}};zhbdmOverlayOpacityControl.prototype=new BMap.Control();zhbdmOverlayOpacityControl.prototype.opacity=100;zhbdmOverlayOpacityControl.prototype.fW=function(){this.opacity=100;};zhbdmOverlayOpacityControl.prototype.changeOpacity=function(){var hX=this.hy;hX.setOverlayOpacity(this.opacity/100);};zhbdmOverlayOpacityControl.prototype.initialize=function(bU){var iJ=this.ia;var iY=this.hW;var control=this;var gv=document.createElement('DIV');gv.className="zhbdm-"+iJ+"-slider";gv.style.padding='5px';gv.index=1;this.gL=gv;var gg=document.createElement('DIV');gg.className="zhbdm-"+iJ+"-slider-ui";gg.title=iY;gv.appendChild(gg);var controlInput=document.createElement('INPUT');controlInput.className="zhbdm-"+iJ+"-slider-input";controlInput.type="range";controlInput.min="0";controlInput.max="100";controlInput.value="100";controlInput.step="1";gg.appendChild(controlInput);controlInput.onchange=function(e){control.opacity=this.value;control.changeOpacity();};control.fW();bU.getContainer().appendChild(gv);return gv;};zhbdmPlacemarkListButtonControl.prototype.controlState=0;zhbdmPlacemarkListButtonControl.prototype.fQ=function(){if(this.controlState==1){this.controlState=0;var toHideDiv=document.getElementById(this.fP);toHideDiv.style.display="none";}else{this.controlState=1;var toShowDiv=document.getElementById(this.fP);toShowDiv.style.display="block";}};zhbdmPlacemarkListButtonControl.prototype.fW=function(){};function zhbdmPlacemarkListButtonControl(gf,bU,gp,gW,gS,gi,gm,aT,aP,hl){this.fP=gf;this.ga=bU;var control=this;var gl;var bW;if(gp==1){gl='';}else{gl='2';}if(gW==1){gl=gl+'-star';bW=2;this.controlState=0;}else if(gW==2){gl=gl+'';bW=3;this.controlState=0;}else if(gW==11){gl=gl+'-star';bW=2;this.controlState=1;}else if(gW==12){gl=gl+'';bW=3;this.controlState=1;}else{gl=gl+'';bW=1;this.controlState=0;}var fO="";if(gS){switch(gS){case 0:break;case 1:fO=BMAP_ANCHOR_TOP_LEFT;break;case 2:fO=BMAP_ANCHOR_TOP_RIGHT;break;case 3:fO=BMAP_ANCHOR_BOTTOM_LEFT;break;case 4:fO=BMAP_ANCHOR_BOTTOM_RIGHT;break;default:fO="";break;}}if(fO!=""){this.defaultAnchor=fO;if(ir!=0||iR!=0){this.defaultOffset=new BMap.Size(ir,iR);}else{this.defaultOffset=new BMap.Size(10,10);}}var gv=document.createElement('DIV');gv.className="zhbdm-"+gi+"-button"+gl;gv.style.padding='5px';gv.index=1;this.gL=gv;var gg=document.createElement('DIV');gg.className="zhbdm-"+gi+"-button-ui"+gl;gg.title=gm;gv.appendChild(gg);var gH=document.createElement('DIV');gH.className="zhbdm-"+gi+"-button-text"+gl;if(bW==1){gH.innerHTML="";}else if(bW==2){gH.innerHTML='<img style="border: 0px none; padding: 0px; margin: 0px; width: '+aT+'px; height: '+aP+'px;" src="'+hl+'">';}else if(bW==3){gH.innerHTML=gm;}else{gH.innerHTML="";}gg.appendChild(gH);google.maps.event.addDomListener(gg,'click',function(){control.fQ();});control.fW();};function zhbdmMapCenterButtonControl(hb,gk,bU,gp,gW,gS,ir,iR,gi,gm,aT,aP,hl){this.hh=hb;this.fV=gk;this.ga=bU;this.ia=gi;this.hW=gm;this.jx=aT;this.ik=aP;this.jd=hl;var gl;var bW;if(gp==1){gl='';}else{gl='2';}if(gW==1){gl=gl+'-star';bW=2;}else if(gW==2){gl=gl+'-star';bW=2;}else if(gW==11){gl=gl+'';bW=3;}else if(gW==12){gl=gl+'';bW=3;}else{gl=gl+'';bW=1;}this.jz=gl;this.iF=bW;var fO="";if(gS){switch(gS){case 0:break;case 1:fO=BMAP_ANCHOR_TOP_LEFT;break;case 2:fO=BMAP_ANCHOR_TOP_RIGHT;break;case 3:fO=BMAP_ANCHOR_BOTTOM_LEFT;break;case 4:fO=BMAP_ANCHOR_BOTTOM_RIGHT;break;default:fO="";break;}}if(fO!=""){this.defaultAnchor=fO;if(ir!=0||iR!=0){this.defaultOffset=new BMap.Size(ir,iR);}else{this.defaultOffset=new BMap.Size(10,10);}}};zhbdmMapCenterButtonControl.prototype=new BMap.Control();zhbdmMapCenterButtonControl.prototype.fQ=function(){this.ga.setCenter(this.hh);if(this.fV!="do not change"){this.ga.setZoom(parseInt(this.fV));}};zhbdmMapCenterButtonControl.prototype.fW=function(){this.ga.setCenter(this.hh);if(this.fV!="do not change"){this.ga.setZoom(parseInt(this.fV));}};zhbdmMapCenterButtonControl.prototype.initialize=function(bU){var iJ=this.ia;var iC=this.jz;var jC=this.iF;var iY=this.hW;var jh=this.jx;var jj=this.ik;var ih=this.jd;var control=this;var gv=document.createElement('DIV');gv.className="zhbdm-"+iJ+"-button"+iC;gv.style.padding='5px';gv.index=1;this.gL=gv;var gg=document.createElement('DIV');gg.className="zhbdm-"+iJ+"-button-ui"+iC;gg.title=iY;gv.appendChild(gg);var gH=document.createElement('DIV');gH.className="zhbdm-"+iJ+"-button-text"+iC;if(jC==1){gH.innerHTML="";}else if(jC==2){gH.innerHTML='<img style="border: 0px none; padding: 0px; margin: 0px; width: '+jh+'px; height: '+jj+'px;" src="'+ih+'">';}else if(jC==3){gH.innerHTML=iY;}else{gH.innerHTML="";}gg.appendChild(gH);gg.onclick=function(e){control.fQ();};control.fW();bU.getContainer().appendChild(gv);return gv;};zhbdmPanelButtonControl.prototype.controlState=0;zhbdmPanelButtonControl.prototype.fQ=function(){var jr=this.hi;var he=document.getElementById(this.fP);var gP=this.ga;var gd=this.fY;var gx=this.gX;if(this.controlState==1){this.gL.classList.remove("active");this.controlState=0;this.panelDiv.style.display="none";jr('#'+this.fU).animate({width:this.initialMapDivWidth},1000,function(){google.maps.event.trigger(gP,'resize');});}else{this.gL.classList.add("active");this.controlState=1;jr('#'+this.fU).animate({width:this.initialMapDivWidth-this.panelDivW},1000,function(){he.style.display="inline";google.maps.event.trigger(gP,'resize');jr('#'+gd).accordion("refresh");if(gx.hz){google.maps.event.trigger(gx.hz,'resize');}});}};zhbdmPanelButtonControl.prototype.fW=function(){var jr=this.hi;this.initialMapDivWidth=jr('#'+this.fU).width();this.panelDiv=document.getElementById(this.fP);this.panelDivW=this.gT;if(this.controlState==0){this.gL.classList.remove("active");this.panelDiv.style.display="none";}else{this.gL.classList.add("active");jr('#'+this.fU).width(this.initialMapDivWidth-this.panelDivW);this.panelDiv.style.display="inline";}};function zhbdmPanelButtonControl(gf,gQ,fT,gq,bU,l,gp,gW,gS,gi,gm,aT,aP,hl){this.fP=gf;this.fU=gQ;this.fY=fT;this.hi=jQuery.noConflict();this.gX=l;this.gT=gq;this.ga=bU;var control=this;var gl;var bW;if(gp==1){gl='';}else{gl='2';}if(gW==1){gl=gl+'-star';bW=1;this.controlState=1;}else if(gW==0){gl=gl+'-star';bW=1;this.controlState=0;}else{gl=gl+'-star';bW=1;this.controlState=0;}var gv=document.createElement('DIV');gv.className="zhbdm-"+gi+"-button"+gl;gv.style.padding='0px';gv.index=1;this.gL=gv;var gg=document.createElement('DIV');gg.className="zhbdm-"+gi+"-button-ui"+gl;gg.title=gm;gv.appendChild(gg);var gH=document.createElement('DIV');gH.className="zhbdm-"+gi+"-button-text"+gl;if(bW==1){gH.innerHTML="";}else if(bW==2){gH.innerHTML='<img style="border: 0px none; padding: 0px; margin: 0px; width: '+aT+'px; height: '+aP+'px;" src="'+hl+'">';}else if(bW==3){gH.innerHTML=gm;}else{gH.innerHTML="";}gg.appendChild(gH);google.maps.event.addDomListener(gg,'click',function(){control.fQ();});control.fW();var fO="";if(gS){switch(gS){case 0:break;case 1:fO=google.maps.ControlPosition.TOP_CENTER;break;case 2:fO=google.maps.ControlPosition.TOP_LEFT;break;case 3:fO=google.maps.ControlPosition.TOP_RIGHT;break;case 4:fO=google.maps.ControlPosition.LEFT_TOP;break;case 5:fO=google.maps.ControlPosition.RIGHT_TOP;break;case 6:fO=google.maps.ControlPosition.LEFT_CENTER;break;case 7:fO=google.maps.ControlPosition.RIGHT_CENTER;break;case 8:fO=google.maps.ControlPosition.LEFT_BOTTOM;break;case 9:fO=google.maps.ControlPosition.RIGHT_BOTTOM;break;case 10:fO=google.maps.ControlPosition.BOTTOM_CENTER;break;case 11:fO=google.maps.ControlPosition.BOTTOM_LEFT;break;case 12:fO=google.maps.ControlPosition.BOTTOM_RIGHT;break;default:fO="";break;}}if(fO!=""){bU.controls[fO].push(gv);}} 