!function(t){function i(t,i,e){Ul.gc(this),this.HA=t,this.Ub=i,this.FF=e}function e(){this.FA=[]}function n(){}function r(t){void 0===t&&(t=42),this.seed=t,this.Pw=48271,this.Ct=2147483647,this.uA=this.Ct/this.Pw,this.hF=this.Ct%this.Pw,this.dF=1/this.Ct,this.random()}function o(){}function s(t){this.key=-1,this.value=t}function a(t){this.xd=t,this.sj=null,this.reset()}function h(t){this.xd=t,this.reset()}function l(t){Ul.gc(this),this.Ca=!1,this.n=[],this.U=0,this.In=this.wd=null,void 0===t||null===t?this.oa=null:"string"==typeof t?"object"===t||"string"===t||"number"===t||"boolean"===t||"function"===t?this.oa=t:Ul.wa(t,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"==typeof t?this.oa=t===Object?"object":t===String?"string":t===Number?"number":t===Boolean?"boolean":t===Function?"function":t:Ul.wa(t,"null, a primitive type name, or a class type","List constructor: type")}function u(t){this.Gk=t,this.reset()}function f(t){Ul.gc(this),this.Ca=!1,void 0===t||null===t?this.oa=null:"string"==typeof t?"object"===t||"string"===t||"number"===t?this.oa=t:Ul.wa(t,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"==typeof t?this.oa=t===Object?"object":t===String?"string":t===Number?"number":t:Ul.wa(t,"null, a primitive type name, or a class type","Set constructor: type"),this.$c={},this.Zc=0,this.wd=null,this.U=0,this.Bh=this.bb=null}function c(t){this.Wa=t,this.reset()}function p(t){Ul.gc(this),this.Ca=!0,this.Wa=t}function d(t){this.Wa=t,this.reset()}function y(t,i){this.key=t,this.value=i,this.Un=this.Sb=null}function v(t){this.Wa=t,this.reset()}function g(t,i){Ul.gc(this),this.Ca=!1,void 0===t||null===t?this.wq=null:"string"==typeof t?"object"===t||"string"===t||"number"===t?this.wq=t:Ul.wa(t,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"==typeof t?this.wq=t===Object?"object":t===String?"string":t===Number?"number":t:Ul.wa(t,"null, a primitive type name, or a class type","Map constructor: keytype"),void 0===i||null===i?this.tv=null:"string"==typeof i?"object"===i||"string"===i||"boolean"===i||"number"===i||"function"===i?this.tv=i:Ul.wa(i,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"==typeof i?this.tv=i===Object?"object":i===String?"string":i===Number?"number":i===Boolean?"boolean":i===Function?"function":i:Ul.wa(i,"null, a primitive type name, or a class type","Map constructor: valtype"),this.$c={},this.Zc=0,this.Jn=this.wd=null,this.U=0,this.Bh=this.bb=null}function m(t,i){void 0===t?this.y=this.x=0:(this.x=t,this.y=i),this.Ca=!1}function b(t,i){if(0===t)return i>0?90:0>i?270:0;if(0===i)return t>0?0:180;if(isNaN(t)||isNaN(i))return 0;var e=180*Math.atan(Math.abs(i/t))/Math.PI;return 0>t?e=0>i?e+180:180-e:0>i&&(e=360-e),e}function x(t,i){return i.Ph(t),t}function w(t,i){void 0===t?this.height=this.width=0:(this.width=t,this.height=i),this.Ca=!1}function k(t,i,e,n){void 0===t?this.height=this.width=this.y=this.x=0:t instanceof m?i instanceof m?(this.x=Math.min(t.x,i.x),this.y=Math.min(t.y,i.y),this.width=Math.abs(t.x-i.x),this.height=Math.abs(t.y-i.y)):i instanceof w?(this.x=t.x,this.y=t.y,this.width=i.width,this.height=i.height):Ul.k("Incorrect arguments supplied to Rect constructor"):(this.x=t,this.y=i,this.width=e,this.height=n),this.Ca=!1}function M(t,i,e){t.width=i,t.height=e}function P(t,i,e,n,r){t.I();var o=t.width;return-o>=e+r?(t.x+=o/2,t.width=0):(t.x-=r,t.width+=e+r),e=t.height,-e>=i+n?(t.y+=e/2,t.height=0):(t.y-=i,t.height+=i+n),t}function T(t,i,e,n,r){t.I();var o=Math.max(t.x,i),s=Math.max(t.y,e);return i=Math.min(t.x+t.width,i+n),e=Math.min(t.y+t.height,e+r),t.x=o,t.y=s,t.width=Math.max(0,i-o),t.height=Math.max(0,e-s),t}function S(t,i){var e=t.width,n=i.width+10+10,r=t.x,o=i.x-10;return r>n+o||o>e+r?!1:(e=t.height,n=i.height+10+10,r=t.y,o=i.y-10,r>n+o||o>e+r?!1:!0)}function C(t,i,e,n,r){var o=Math.min(t.x,i),s=Math.min(t.y,e);return i=Math.max(t.x+t.width,i+n),e=Math.max(t.y+t.height,e+r),t.x=o,t.y=s,t.width=i-o,t.height=e-s,t}function j(t,i,e,n){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===i?this.left=this.bottom=this.right=this.top=t:void 0===e?(n=i,this.top=t,this.right=i,this.bottom=t,this.left=n):void 0!==n?(this.top=t,this.right=i,this.bottom=e,this.left=n):Ul.k("Invalid arguments to Margin constructor"),this.Ca=!1}function N(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}function D(t,i,e,n){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=i,this.offsetX=e,this.offsetY=n),this.Ca=!1}function A(t,i){return t.x=0/0,t.y=0/0,t.offsetX=i,t}function L(){this.$e=[1,0,0,1,0,0]}function F(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.YC=[]}function z(t,i,e){this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.nw=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.document=i||document,this.nD=e,this.kw=null,this.path=[],this.Ei=new L,this.stack=[],this.rf=[],this.HE=this.BD=this.Mv=0,this.Rv=t,this.IH="http://www.w3.org/2000/svg",this.width=this.Rv.width,this.height=this.Rv.height,this.sl=B(this,"svg",{width:this.width+"px",height:this.height+"px",GK:"0 0 "+this.Rv.width+" "+this.Rv.height}),this.sl.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.sl.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),G(this,1,0,0,1,0,0),t=B(this,"clipPath",{id:"mainClip"}),t.appendChild(B(this,"rect",{x:0,y:0,width:this.width,height:this.height})),this.sl.appendChild(t),this.rf[0].setAttributeNS(null,"clip-path","url(#mainClip)")}function B(t,i,e,n){if(t=t.document.createElementNS(t.IH,i),Ul.Sa(e))for(var r in e)t.setAttributeNS("href"===r?"http://www.w3.org/1999/xlink":"",r,e[r]);return void 0!==n&&(t.textContent=n),t}function q(t,i,e,n,r){1!==t.globalAlpha&&(e.opacity=t.globalAlpha),"fill"==i?(/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),e.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",e["fill-opacity"]=t[4]):e.fill=t.fillStyle instanceof F?O(t,t.fillStyle):t.fillStyle,e.stroke="none"):"stroke"==i&&(e.fill="none",/^rgba\(/.test(t.strokeStyle)?(i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),e.stroke="rgb("+i[1]+","+i[2]+","+i[3]+")",e["stroke-opacity"]=i[4]):e.stroke=t.strokeStyle instanceof F?O(t,t.strokeStyle):t.strokeStyle,e["stroke-width"]=t.lineWidth,e["stroke-linecap"]=t.lineCap,e["stroke-linejoin"]=t.lineJoin,e["stroke-miterlimit"]=t.miterLimit),n=n.$e,n="matrix("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")",void 0!==r&&(n+=r),e.transform=n}function O(t,i){var e="GRAD"+t.BD;t.BD++;var n;if("linear"===i.type)n={x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2,id:e,gradientUnits:"userSpaceOnUse"},n=B(t,"linearGradient",n);else{if("radial"!==i.type)throw Error("invalid gradient");n={x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2,r1:i.r1,r2:i.r2,id:e},n=B(t,"radialGradient",n)}for(var r=i.YC,o=r.length,s=[],a=0;o>a;a++){var h=r[a],l=h.color,h={offset:h.offset,"stop-color":l};/^rgba\(/.test(l)&&(l=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(l),h["stop-color"]="rgb("+l[1]+","+l[2]+","+l[3]+")",h["stop-opacity"]=l[4]),s.push(h)}for(s.sort(function(t,i){return t.offset>i.offset?1:-1}),a=0;o>a;a++)n.appendChild(B(t,"stop",s[a]));return t.sl.appendChild(n),"url(#"+e+")"}function E(t,i,e,n){e={x:e[0],y:e[1],width:e[2],height:e[3]},q(t,i,e,n),t.addElement("rect",e)}function I(t,i,e,n){for(var r=[],o=0;o<e.length;o++){var s=Ul.Pk(e[o]),a=[s.shift()];if("A"==a[0])a.push(s.shift()+","+s.shift(),s.shift(),s.shift()+","+s.shift(),s.shift()+","+s.shift());else for(;s.length;)a.push(s.shift()+","+s.shift());r.push(a.join(" "))}e={d:r.join(" ")},q(t,i,e,n),"clipPath"===i?(i="CLIP"+t.Mv,t.Mv++,n=B(t,"clipPath",{id:i}),n.appendChild(B(t,"path",e)),t.sl.appendChild(n),0<t.rf.length&&t.rf[t.rf.length-1].setAttributeNS(null,"clip-path","url(#"+i+")")):t.addElement("path",e)}function R(t,i,e,n,r,o,s){var a=Math.abs(r-o);if(r!=o){var h=i+n*Math.cos(o);o=e+n*Math.sin(o),a>=2*Math.PI?(R(t,i,e,n,r,r+Math.PI,s),R(t,i,e,n,r+Math.PI,r+2*Math.PI,s),t.path.push(["M",h,o])):(i+=n*Math.cos(r),e+=n*Math.sin(r),a=180*a/Math.PI,r=s?0:1,s=a>=180==!!s?0:1,t.path.push(0!==t.path.length?["L",i,e]:["M",i,e]),t.path.push(["A",n,n,a,s,r,h,o]))}}function G(t,i,e,n,r,o,s){var a=new L;a.$e=[i,e,n,r,o,s],i={},q(t,"g",i,a),a=t.addElement("g",i),t.rf.push(a)}function V(t,i){this.ownerDocument=void 0===i?document:i;var e=this.ownerDocument.createElement("canvas");e.tabIndex=0,this.Dd=e,e.getContext&&e.getContext("2d")||Ul.k("Browser does not support HTML Canvas Element"),this.dG=e.getContext("2d"),e.Y=t,Object.seal(this)}function H(t){1<arguments.length&&Ul.k("Geometry constructor can take at most one optional argument, the Geometry type."),Ul.gc(this),this.Ca=!1,void 0===t&&(t=Bu),this.oa=t,this.Bb=this.pb=this.uc=this.nc=0,this.Zi=new l(X),this.ju=this.Zi.U,this.Ut=(new k).freeze(),this.Ta=!0,this.ri=iu,this.si=lu,this.Cn=this.Dn=0/0,this.bi=tc}function K(t,i){if(t.type!==Lu||i.type!==Bu)return!1;if(1===i.ub.count){var e=i.ub.ja(0);if(1===e.Fa.count&&Au.D(t.ua,e.ua)&&Au.D(t.va,e.va)&&(e=e.Fa.ja(0),e.type===Ru&&Au.D(t.F,e.F)&&Au.D(t.G,e.G)))return!0}return!1}function U(t,i){for(var e=t.length,n=Ul.K(),r=0;e>r;r++){var o=t[r];n.x=o[0],n.y=o[1],i.ab(n),o[0]=n.x,o[1]=n.y,n.x=o[2],n.y=o[3],i.ab(n),o[2]=n.x,o[3]=n.y,n.x=o[4],n.y=o[5],i.ab(n),o[4]=n.x,o[5]=n.y,n.x=o[6],n.y=o[7],i.ab(n),o[6]=n.x,o[7]=n.y}Ul.v(n)}function Y(t,i,e){switch(t.type){case Lu:case Fu:case zu:e?i.m(t.nc,t.uc,0,0):C(i,t.nc,t.uc,0,0),C(i,t.pb,t.Bb,0,0);break;case Bu:var n=t.ub;t=n.n;for(var n=n.length,r=0;n>r;r++){var o=t[r];e&&0===r?i.m(o.ua,o.va,0,0):C(i,o.ua,o.va,0,0);for(var s=o.Fa.n,a=s.length,h=o.ua,l=o.va,u=0;a>u;u++){var f=s[u];switch(f.type){case Ru:case Iu:h=f.F,l=f.G,C(i,h,l,0,0);break;case Gu:Au.oo(h,l,f.Rb,f.jc,f.df,f.ef,f.F,f.G,.5,i),h=f.F,l=f.G;break;case Vu:Au.Nz(h,l,f.Rb,f.jc,f.F,f.G,.5,i),h=f.F,l=f.G;break;case Hu:case Ku:for(var f=f.type===Hu?Q(f,o):$(f,o,h,l),c=f.length,p=null,d=0;c>d;d++)p=f[d],Au.oo(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,i);null!==p&&(h=p[6],l=p[7]);break;default:Ul.k("Unknown Segment type: "+f.type)}}}break;default:Ul.k("Unknown Geometry type: "+t.type)}}function J(t,i,e,n,r,o,s,a){if(Au.Hd(r,o,s,a,.05,t,i))return 0/0;var h=(t-e)*(o-a);if(0===h)return 0;var l=((t*n-i*e)*(r-s)-(t-e)*(r*a-o*s))/h;if(i=(t*n-i*e)*(o-a)/h,l>=t)return 0;if((o>a?o-a:a-o)>(r>s?r-s:s-r)){if(r=t=0,a>o?(t=o,r=a):(t=a,r=o),t>i||i>r)return 0}else if(s>r?(t=r,r=s):t=s,t>l||l>r)return 0;return h>0?1:-1}function W(t,i,e,n){t=t.ub.n;for(var r=t.length,o=0;r>o;o++)if(t[o].Aa(i,e,n))return!0;return!1}function X(t,i,e,n){Ul.gc(this),this.Ca=!1,void 0===e&&(e=!0),this.Il=e,void 0===n&&(n=!0),this.En=n,this.nc=void 0!==t?t:0,this.uc=void 0!==i?i:0,this.Yn=new l(Z),this.cv=this.Yn.U,this.Ta=!0}function Z(t,i,e,n,r,o,s,a){Ul.gc(this),this.Ca=!1,void 0===t&&(t=Ru),this.oa=t,this.pb=void 0!==i?i:0,this.Bb=void 0!==e?e:0,t===Ku?(void 0!==o&&(t=o%360,0>t&&(t+=360),this.cd=t),void 0!==n&&(this.dg=Math.max(n,0)),void 0!==r&&(this.eg=Math.max(r,0)),this.Ln=!!s,this.bn=!!a):(void 0!==n&&(this.cd=n),void 0!==r&&(this.xe=r),void 0!==o&&(t===Hu&&(o=Math.max(o,0)),this.dg=o),void 0!==s&&"number"==typeof s&&(t===Hu&&(s=Math.max(s,0)),this.eg=s)),this.Ah=!1,this.Ta=!0,this.Ri=null}function Q(t,i){if(null!==t.Ri&&!1===i.Ta)return t.Ri;var e=t.radiusX,n=t.radiusY;void 0===n&&(n=e);var r=t.cd,o=t.xe,s=Au.fD(0,0,n>e?e:n,t.Je,t.Je+t.Qf,!1);if(e!==n){var a=Ul.jh();a.reset(),n>e?a.scale(1,n/e):a.scale(e/n,1),U(s,a),Ul.Ye(a)}for(e=s.length,n=0;e>n;n++)a=s[n],a[0]+=r,a[1]+=o,a[2]+=r,a[3]+=o,a[4]+=r,a[5]+=o,a[6]+=r,a[7]+=o;return t.Ri=s,t.Ri}function $(t,i,e,n){function r(t,i,e,n){return(i*e>t*n?-1:1)*Math.acos(o(t,i,e,n))}function o(t,i,e,n){return(t*e+i*n)/(Math.sqrt(t*t+i*i)*Math.sqrt(e*e+n*n))}if(null!==t.Ri&&!1===i.Ta)return t.Ri;i=t.dg;var s=t.eg,a=Math.PI/180*t.cd,h=t.Ln,l=t.bn,u=t.pb,f=t.Bb,c=Math.cos(a),p=Math.sin(a),d=c*(e-u)/2+p*(n-f)/2,a=-p*(e-u)/2+c*(n-f)/2,y=d*d/(i*i)+a*a/(s*s);return y>1&&(i*=Math.sqrt(y),s*=Math.sqrt(y)),y=(h===l?-1:1)*Math.sqrt((i*i*s*s-i*i*a*a-s*s*d*d)/(i*i*a*a+s*s*d*d)),isNaN(y)&&(y=0),h=y*i*a/s,y=y*-s*d/i,isNaN(h)&&(h=0),isNaN(y)&&(y=0),e=(e+u)/2+c*h-p*y,n=(n+f)/2+p*h+c*y,f=r(1,0,(d-h)/i,(a-y)/s),c=(d-h)/i,u=(a-y)/s,d=(-d-h)/i,h=(-a-y)/s,a=r(c,u,d,h),d=o(c,u,d,h),-1>=d?a=Math.PI:d>=1&&(a=0),!l&&a>0&&(a-=2*Math.PI),l&&0>a&&(a+=2*Math.PI),l=i>s?1:i/s,d=i>s?s/i:1,i=Au.fD(0,0,i>s?i:s,f,f+a,!0),s=Ul.jh(),s.reset(),s.translate(e,n),s.rotate(t.cd,0,0),s.scale(l,d),U(i,s),Ul.Ye(s),t.Ri=i,t.Ri}function _(){this.Y=null,this.Hy=new m(0,0).freeze(),this.Cx=new m(0,0).freeze(),this.Rt=this.Mu=0,this.Au="",this.rv=this.gu=!1,this.cu=this.Tt=0,this.Si=this.nu=this.wu=!1,this.Vp=null,this.qv=0,this.fg=this.nv=null}function ti(){this.Y=null,this.Ub="",this.Vu=this.iv=null,this.St=!1}function ii(){this.Bp=Yu,this.Xl=this.Lu="",this.Wq=this.Xq=this.ar=this.br=this.$q=this.Y=this.Od=null}function ei(t){1<arguments.length&&Ul.k("Model constructor can only take one optional argument, the Array of node data."),Ul.gc(this),this.wx=this.Ub="",this.vk=!1,this.gy={},this.mf=[],this.tc=new g(null,Object),this.Tl="key",this.Xt=this.Eu=null,this.nx=this.ox=!1,this.Yq="category",this.vh=new g(null,f),this.jj=null,this.qi=!1,this.Gy=null,this.ha=new wi,void 0!==t&&(this.ah=t)}function ni(t,i,n){void 0===n&&(n=!1);var r=Ul.qb(i);if(0>=r)return"[]";var o=new e;o.add("[ "),n&&r>1&&o.add("\n");for(var s=0;r>s;s++){var a=Ul.fb(i,s);void 0!==a&&(s>0&&(o.add(","),n&&o.add("\n")),o.add(t.Bt(a)))}return n&&r>1&&o.add("\n"),o.add(" ]"),o.toString()}function ri(t,i){return void 0===i||"__gohashid"===t||"_"===t[0]||"function"==typeof i?!0:!1}function oi(t){return isNaN(t)?"NaN":1/0===t?"9e9999":-1/0===t?"-9e9999":t}function si(t,i){var e=i;if(e instanceof m){var n=e;i={"class":"go.Point",x:oi(n.x),y:oi(n.y)}}else if(e instanceof w){var r=e;i={"class":"go.Size",width:oi(r.width),height:oi(r.height)}}else if(e instanceof k)i={"class":"go.Rect",x:oi(e.x),y:oi(e.y),width:oi(e.width),height:oi(e.height)};else if(e instanceof j)i={"class":"go.Margin",top:oi(e.top),right:oi(e.right),bottom:oi(e.bottom),left:oi(e.left)};else if(e instanceof D)r=e,i=r.pd()?{"class":"go.Spot",x:oi(r.x),y:oi(r.y),offsetX:oi(r.offsetX),offsetY:oi(r.offsetY)}:{"class":"go.Spot","enum":r.toString()};else if(e instanceof kr){if(i={"class":"go.Brush",type:e.type.name},e.type===Kf?i.color=e.color:(e.type===Uf||e.type===Yf)&&(i.start=e.start,i.end=e.end,e.type===Yf&&(0!==e.ut&&(i.startRadius=oi(e.ut)),isNaN(e.us)||(i.endRadius=oi(e.us)))),null!==e.os){for(var o={},s=e.os.i;s.next();)o[s.key]=s.value;i.colorStops=o}}else if(e instanceof H)i={"class":"go.Geometry",type:e.type.name},0!==e.ua&&(i.startX=oi(e.ua)),0!==e.va&&(i.startY=oi(e.va)),0!==e.F&&(i.endX=oi(e.F)),0!==e.G&&(i.endY=oi(e.G)),e.A.L(iu)||(i.spot1=e.A),e.B.L(lu)||(i.spot2=e.B),e.type===Bu&&(i.path=qu(e));else if(e instanceof Mr||e instanceof Ge||e instanceof Ie||e instanceof ei||e instanceof Ci||e instanceof Mi||e instanceof Sa||e instanceof ja||e instanceof wi||e instanceof xi)return Ul.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+e.toString()),"{}";o="{",e=!0;for(n in i)if(r=Ul.sb(i,n),!ri(n,r))if(e?e=!1:o+=", ",o+='"'+n+'":',"points"===n&&r instanceof l&&r.oa===m){for(s=r,r="[",s=s.i;s.next();){var a=s.value;1<r.length&&(r+=","),r+=t.Bt(a.x),r+=",",r+=t.Bt(a.y)}r+="]",o+=r}else o+=t.Bt(r);return o+"}"}function ai(t){return"number"==typeof t?t:"NaN"===t?0/0:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function hi(t,i,e,n,r,o,s,a,h){void 0===a&&(a=null),void 0===h&&(h=null);var l=new ii;l.ga=t,l.Ad=e,l.Lf=i,l.propertyName=n,l.object=r,l.oldValue=o,l.zg=a,l.newValue=s,l.xg=h,t.Jv(l)}function li(t,i,e){"string"!=typeof t&&"function"!=typeof t&&Ul.Kd(t,"string or function",i,e)}function ui(t){return"number"==typeof t||"string"==typeof t}function fi(t,i,e){if(void 0!==i){var n=t.vh.ta(i);null===n&&(n=new f(Object),t.vh.add(i,n)),n.add(e)}}function ci(t,i,e){if(void 0!==i){var n=t.vh.ta(i);n instanceof f&&(void 0===e||null===e?t.vh.remove(i):(n.remove(e),0===n.count&&t.vh.remove(i)))}}function pi(t,i){if(void 0===i)return null;var e=t.vh.ta(i);return e instanceof f?e:null}function di(t,i,e){if(t.Xy&&Array.isArray(i)){var n=[];for(e=0;e<i.length;e++){var r=di(t,i[e],t.Wy);n.push(r)}return Ul.gc(n),n}if(e&&Ul.Sa(i)){e=(e=i.constructor)?new e:{};for(n in i)if("__gohashid"!==n){var o,r=Ul.sb(i,n);o=r,o instanceof Mr||o instanceof Ge||o instanceof Ie||o instanceof ko||o instanceof Se||o instanceof Ci||o instanceof Mi||o instanceof Sa||o instanceof _||o instanceof ti?("_"!==n[0]&&Ul.trace('Warning: found GraphObject or Diagram reference when copying model data on property "'+n+'" of data object: '+i.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+o.toString()),o=!0):o=o instanceof ei||o instanceof wi||o instanceof xi||o instanceof ii?!0:!1,o||(r=di(t,r,!1)),Ul.Oa(e,n,r)}return Ul.gc(e),e}return i}function yi(t,i){2<arguments.length&&Ul.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data."),ei.call(this),this.Ch=[],this.Rl=new f(Object),this.ik=this.Wt=null,this.fj="from",this.ij="to",this.Dq=this.Cq="",this.zq="category",this.Dh="",this.Ou="isGroup",this.pj="group",this.px=!1,void 0!==t&&(this.ah=t),void 0!==i&&(this.Qj=i)}function vi(t,i){var e=t.$k(i),e=t.Gm(e);null===t.qf(e)&&fi(t,e,i),e=t.cl(i),e=t.Gm(e),null===t.qf(e)&&fi(t,e,i);var n=t.Pj(i);if(Ul.isArray(n))for(var r=Ul.qb(n),o=0;r>o;o++)e=Ul.fb(n,o),null===t.qf(e)&&fi(t,e,i)}function gi(t){1<arguments.length&&Ul.k("TreeModel constructor can only take one optional argument, the Array of node data."),ei.call(this),this.qj="parent",this.qx=!1,this.er="parentLinkCategory",void 0!==t&&(this.ah=t)}function mi(t,i,e){Ul.gc(this),this.Ca=!1,void 0===t?t="":Ul.j(t,"string",mi,"constructor:targetprop"),void 0===i?i=t:Ul.j(i,"string",mi,"constructor:sourceprop"),void 0===e?e=null:null!==e&&Ul.j(e,"function",mi,"constructor:conv"),this.mC=-1,this.fg=null,this.ov=t,this.mv=this.Ay=0,this.hC=null,this.Ey=!1,this.fv=i,this.mx=e,this.ey=Zu,this.gx=null}function bi(t,i,e){t=t.Nm;var n=null;return n=null===t||""===t?i:"."===t?e:".."===t?e.S:i.je(t)}function xi(){this.mF=new l(ii).freeze(),this.Ub="",this.nB=!1}function wi(){this.hy=new f(ei),this.Ne=!1,this.tF=new l(xi).freeze(),this.Ig=-1,this.CB=999,this.fi=!1,this.bu=null,this.Jk=0,this.GA=!1,this.Og=new l("string").freeze(),this.Qn=new l("number"),this.Kx=!0,this.Yx=!1}function ki(t,i,e){if(t.gb)return!1;t.Ry&&1>t.Le&&Ul.trace("Ending transaction without having started a transaction: "+e);var n=1===t.Le;n&&i&&t.isEnabled&&t.Rc("CommittingTransaction",e,t.Di);var r=0;if(0<t.Le&&(t.Jk--,t.isEnabled)){var o=t.Og.count;o>0&&(""===e&&(e=t.Og.ja(0)),t.Og.La(),t.Og.jd(o-1),t.Og.freeze()),o=t.Qn.count,o>0&&(r=t.Qn.ja(o-1),t.Qn.jd(o-1))}if(o=t.Di,n){if(i){if(t.Yx=!1,t.isEnabled&&null!==o){for(i=o,i.Ms=!0,i.name=e,n=t.history,n.La(),r=n.count-1;r>t.Ii;r--)o=n.ja(r),null!==o&&o.clear(),n.jd(r),t.Yx=!0;r=t.VD,0===r&&(r=1),r>0&&n.count>=r&&(o=n.ja(0),null!==o&&o.clear(),n.jd(0),t.Ig--),n.add(i),t.Ig++,n.freeze(),o=i}t.Rc("CommittedTransaction",e,o)}else{t.fi=!0;try{t.isEnabled&&null!==o&&(o.Ms=!0,o.undo())}finally{t.Rc("RolledBackTransaction",e,o),t.fi=!1}null!==o&&o.clear()}return t.bu=null,!0}if(t.isEnabled&&!i&&null!==o){for(t=r,e=o.Ug,i=e.count-1;i>=t;i--)n=e.ja(i),null!==n&&n.undo(),e.La(),e.jd(i);e.freeze()}return!1}function Mi(){0<arguments.length&&Ul.Wc(Mi),Ul.gc(this),this.Y=null,this.JA=!0,this.LA=this.MA=this.XA=this.NA=!1,this.Ak=this.ax=null,this.EC=1.05,this.VA=1,this.Zx=0/0,this.zB=null,this.FC=0/0}function Pi(t,i,e,n,r,o){if(void 0===o&&(o=null),!(t.contains(i)||null!==o&&!o(i)||i instanceof ks))if(t.add(i),i instanceof Ms){if(e&&i instanceof xa)for(var s=i.Mc;s.next();)Pi(t,s.value,e,n,r,o);if(r)for(s=i.oe;s.next();){var a=s.value;if(!t.contains(a)){var h=a.W,l=a.ca;null!==h&&t.contains(h)&&null!==l&&t.contains(l)?Pi(t,a,e,n,r,o):null!==h&&null!==l||Pi(t,a,e,n,r,o)}}if(n>1)for(i=i.tD();i.next();)Pi(t,i.value,e,n-1,r,o)}else if(i instanceof Bs)for(s=i.ug;s.next();)Pi(t,s.value,e,n,r,o)}function Ti(t,i,e,n,r){if(null===i||r&&!i.canCopy())return null;if(n.contains(i))return n.ta(i);var o=null,s=i.data;if(null!==s&&null!==e){var a=e.ga;i instanceof Bs?a instanceof yi&&(s=a.eD(s),Ul.Sa(s)&&(a.xv(s),o=e.ng(s))):(s=a.copyNodeData(s),Ul.Sa(s)&&(a.km(s),o=e.Oh(s)))}else go(i),o=i.copy(),null!==e&&null!==o&&e.add(o);if(!(o instanceof es))return null;if(o.Za=!1,o.Wg=!1,n.add(i,o),i instanceof Ms){for(a=i.oe;a.next();){if(s=a.value,s.W===i){var h=n.ta(s);null!==h&&(h.W=o)}s.ca===i&&(h=n.ta(s),null!==h&&(h.ca=o))}if(i instanceof xa&&o instanceof xa)for(a=o,i=i.Mc;i.next();)s=Ti(t,i.value,e,n,r),s instanceof Bs||null===s||(s.Ra=a)}else if(i instanceof Bs)for(a=i.W,null!==a&&(a=n.ta(a),null!==a&&(o.W=a)),a=i.ca,null!==a&&(a=n.ta(a),null!==a&&(o.ca=a)),i=i.ug;i.next();)a=Ti(t,i.value,e,n,r),null!==a&&(a.ce=o);return o}function Si(t){var i=Ul.eb();for(t=t.i;t.next();){var e=t.value;e instanceof Bs||i.push(e)}t=new f(es);for(var e=i.length,n=0;e>n;n++){for(var r=i[n],o=!0,s=0;e>s;s++)if(r.Qh(i[s])){o=!1;break}o&&t.add(r)}return Ul.ra(i),t}function Ci(){0<arguments.length&&Ul.Wc(Ci),Ul.gc(this),this.Y=null,this.Ub="",this.Ne=!0,this.lB=!1,this.AC=null,this.vv=-1}function ji(t,i,e){var n=0;i.left?n=1===i.Te?1:2===i.Te?2:1:i.right&&1===i.Te&&(n=3);var r="";if(null!==t){switch(n){case 1:r="ObjectSingleClicked";break;case 2:r="ObjectDoubleClicked";break;case 3:r="ObjectContextClicked"}0!==n&&e.za(r,t)}else{switch(n){case 1:r="BackgroundSingleClicked";break;case 2:r="BackgroundDoubleClicked";break;case 3:r="BackgroundContextClicked"}0!==n&&e.za(r)}if(null!==t)for(i.Tc=!1;null!==t;){switch(e=null,n){case 1:e=t.click;break;case 2:e=t.ts?t.ts:t.click;break;case 3:e=t.Uy}if(null!==e&&(e(i,t),i.Tc))break;t=t.S}else{switch(t=null,n){case 1:t=e.click;break;case 2:t=e.ts?e.ts:e.click;break;case 3:t=e.Uy}null!==t&&t(i)}}function Ni(){0<arguments.length&&Ul.Wc(Ni),Ci.call(this),this.name="Dragging",this.KA=this.pB=!0,this.iq=this.cB=!1,this.tB=!0,this.Mx=new w(0/0,0/0).freeze(),this.Nx=iu,this.Ox=new m(0/0,0/0).freeze(),this.bB=!1,this.$A=this.IA=this.aB=this.QA=this.pi=null,this.Rp=this.rB=!1,this.bo=new m(0/0,0/0),this.gv=new m,this.jv=!1,this.ev=this.oB=!0,this.pn=100,this.Yi=[],this.sF=new f(es).freeze()}function Di(t,i){if(t.Gi){var e=t.g;null!==e&&e.mm&&(e.ga instanceof yi&&1===i.count&&i.first()instanceof Bs?(t.Sc=i.first(),t.Sc.canRelinkFrom()&&t.Sc.canRelinkTo()&&t.Sc.ls(),t.pi=e.tb.iE,null===t.pi&&(t.pi=new se,t.pi.Ec(e))):(t.Sc=null,t.pi=null))}}function Ai(t){return new $i(void 0===t?Au.Wj:t.copy())}function Li(t,i,e,n){if(!i.contains(e)&&(!n||e.canMove()||e.canCopy()))if(e instanceof Ms){if(i.add(e,Ai(e.location)),e instanceof xa)for(var r=e.Mc;r.next();)Li(t,i,r.value,n);for(r=e.oe;r.next();){var o=r.value;if(!i.contains(o)){var s=o.W,a=o.ca;null!==s&&i.contains(s)&&null!==a&&i.contains(a)&&Li(t,i,o,n)}}if(t.wG)for(e=e.tD();e.next();)Li(t,i,e.value,n)}else if(e instanceof Bs)for(o=e,i.add(o,Ai()),r=o.ug;r.next();)Li(t,i,r.value,n);else e instanceof ks||i.add(e,Ai(e.location))}function Fi(t){var i=t.g;if(null!==i){var e=i.cb;i.cb=!0,Yi(t,i.N,null),i.cb=e}t.Yi.length=0}function zi(){var t=nf;Ii(t),Hi(t);var i=t.g;null!==i&&t.bo.J()&&(i.position=t.bo),null!==i&&ur(i)}function Bi(t,i){if(null!==i){t.jv=!0;for(var e=i.i;e.next();){var n=e.key;n instanceof Bs&&(n.ip=!0)}}}function qi(t,i){if(null!==i){for(var e=i.i;e.next();){var n=e.key;n instanceof Bs&&(n.ip=!1,n.el&&Ys(n)&&n.Vb())}t.jv=!1}}function Oi(t,i){for(var e=1/0,n=1/0,r=-1/0,o=-1/0,s=t.i;s.next();){var a=s.value;if(a.Fd()&&a.Ea()){var h=a.location,a=h.x,h=h.y;isNaN(a)||isNaN(h)||(e>a&&(e=a),n>h&&(n=h),a>r&&(r=a),h>o&&(o=h))}}1/0===e?i.m(0,0,0,0):i.m(e,n,r-e,o-n)}function Ei(t,i){if(null===t.oc){var e=t.g;if(!(null===e||i&&(e.nb||e.uf))&&null!==t.cc){var n=e.ha;for(n.isEnabled&&n.ND?null!==n.Di&&0<n.Di.Ug.count&&(e.ha.ap(),e.Wb("Drag")):Hi(t),e.cb=!i,e.Vm=!i,t.Tj=e.wc.da,n=t.gG?t.cc.Ni():e.selection,n=e.to(n,e,!0),e=n.i;e.next();)e.value.location=e.key.location;e=Ul.Sf(),Oi(n,e),Ul.ic(e);for(var e=new g(es),r=t.cc.i;r.next();){var o=r.key;o.Fd()&&o.canCopy()&&(o=n.ta(o),null!==o&&(o.pf(),e.add(o,Ai(o.location))))}for(n=n.i;n.next();)r=n.value,r instanceof Bs&&r.canCopy()&&e.add(r,Ai());t.oc=e,Di(t,e.Ni()),null!==t.Sc&&(e=t.Sc,n=e.Mm,e.ll(t.Tj.x-(n.x+n.width/2),t.Tj.y-(n.y+n.height/2)))}}}function Ii(t){var i=t.g;if(null!==i){if(null!==t.oc&&(i.Wz(t.oc.Ni(),!1),t.oc=null,null!==t.cc))for(var e=t.cc.i;e.next();)e.key instanceof Bs&&(e.value.point=new m(0,0));i.cb=!1,i.Vm=!1,t.Tj=i.wc.da}}function Ri(t){if(null!==t.Sc){if(t.Gi&&null!==t.pi){var i=t.pi;i.g.remove(i.qe),i.g.remove(i.re)}t.Sc=null,t.pi=null}}function Gi(t,i,e){var n=t.g;if(null!==n){var r=t.Tj,o=Ul.K();o.assign(n.N.da),t.moveParts(i,o.vt(r),e),Ul.v(o)}}function Vi(t,i,e){if(i=i.Ra,null!==i){if(t=Vi(t,i,e),null!==t)return t;if(t=e.ta(i),null!==t)return t}return null}function Hi(t){if(null!==t.cc){for(var i=t.g,e=t.cc.i;e.next();){var n=e.key;n.Fd()&&(n.location=e.value.point)}for(e=t.cc.i;e.next();)if(n=e.key,n instanceof Bs&&n.ip){var r=e.value.point;t.cc.add(n,Ai()),n.ll(-r.x,-r.y)}i.bf()}}function Ki(t,i){if(null===i)return!0;var e=i.T;return null===e||e instanceof ks||e.layer.Ac||t.cc&&t.cc.contains(e)||t.oc&&t.oc.contains(e)?!0:!1}function Ui(t,i,e,n){var r=t.g;if(null!==r){t.Gi&&(null!==t.Sc&&(t.Sc.W=null,t.Sc.ca=null),Xi(t,!1));var o=!1;!1===t.ev&&(o=r.cb,r.cb=!0);var s=tn(r,i,null,function(i){return!Ki(t,i)}),a=r.N;a.pe=s;var h=r.cb;r.cb=!0;var l=Yi(t,a,s);if(t.na||null!==nf){if(null===s){var u=r.EH;null!==u&&(u(a),l=!0)}(t.na||null!==nf)&&(t.doDragOver(i,s),(t.na||null!==nf)&&(r.cb=h,l&&r.bf(),!1===t.ev&&(r.cb=o),(r.Re||r.Se)&&(e||n)&&hr(r,a.ff)))}}}function Yi(t,i,e){var n=!1,r=t.Yi.length,o=r>0?t.Yi[0]:null;if(e===o)return!1;i.Tc=!1;for(var s=0;r>s;s++){var a=t.Yi[s],h=a.DH;if(null!==h&&(h(i,a,e),n=!0,i.Tc))break}if(t.Yi.length=0,!t.na&&null===nf||null===e)return n;for(i.Tc=!1;null!==e;)t.Yi.push(e),e=Ji(e);for(r=t.Yi.length,s=0;r>s&&(a=t.Yi[s],h=a.CH,null===h||(h(i,a,o),n=!0,!i.Tc));s++);return n}function Ji(t){var i=t.S;return null!==i?i:t instanceof es&&!(t instanceof xa)&&(t=t.Ra,null!==t&&t.OG)?t:null}function Wi(t,i,e){var n=t.pi;if(null===n)return null;var r=t.g.ym(i,n.fE,function(t){return n.findValidLinkablePort(t,e)});t=Ul.K();for(var o=1/0,s=null,r=r.i;r.next();){var a=r.value;if(null!==a.T){var h=a.lb(ou,t),h=i.Lj(h);o>h&&(s=a,o=h)}}return Ul.v(t),s}function Xi(t,i){var e=t.Sc;if(null!==e&&!(2>e.ka)){var n=t.g;if(null!==n&&!n.nb&&(n=t.pi,null!==n)){var r=null,o=null;null===e.W&&(r=Wi(t,e.l(0),!1),null!==r&&(o=r.T));var s=null,a=null;null===e.ca&&(s=Wi(t,e.l(e.ka-1),!0),null!==s&&(a=s.T)),n.isValidLink(o,r,a,s)?i?(e.jn=e.l(0).copy(),e.nn=e.l(e.ka-1).copy(),e.ip=!1,e.W=o,null!==r&&(e.pg=r.Jd),e.ca=a,null!==s&&(e.lh=s.Jd)):ae(n,o,r,a,s):ae(n,null,null,null,null)}}}function Zi(t,i){var e=t.g;if(null!==e){t.Gi&&Xi(t,!0),Fi(t);var n=tn(e,i,null,function(i){return!Ki(t,i)}),r=e.N;if(r.pe=n,null!==n){r.Tc=!1;for(var o=n;null!==o;){var s=o.Cz;if(null!==s&&(s(r,o),r.Tc))break;o=Ji(o)}}else s=e.Cz,null!==s&&s(r);if((t.na||null!==nf)&&(t.doDropOnto(i,n),t.na||null!==nf))for(n=e.selection.i;n.next();)r=n.value,r instanceof Ms&&rr(e,r.ba)}}function Qi(t,i,e){if(null===t.oc){var n=t.g;if(null!==n&&!n.nb&&!n.uf){n.cb=!e,n.Vm=!e,t.Tj=n.N.da,n=n.to(i,n,!0),e=Ul.Sf(),Oi(i,e);var r=e.x+e.width/2,o=e.y+e.height/2;Ul.ic(e);var s=t.gv;e=new g(es);var a=Ul.K();for(i=i.i;i.next();){var h=i.value;if(h.Fd()&&h.canCopy()){var l=h.location,h=n.ta(h);a.m(s.x-(r-l.x),s.y-(o-l.y)),h.location=a,h.pf(),e.add(h,Ai(a))}}for(Ul.v(a),n=n.i;n.next();)r=n.value,r instanceof Bs&&r.canCopy()&&e.add(r,Ai());t.oc=e,Di(t,e.Ni()),null!==t.Sc&&(e=t.Sc,n=e.Mm,e.ll(t.Tj.x-(n.x+n.width/2),t.Tj.y-(n.y+n.height/2)))}}}function $i(t){this.point=t,this.IE=Au.Wj}function _i(t,i,e){this.Cc=t,this.info=i,this.LG=e}function te(){0<arguments.length&&Ul.Wc(te),Ci.call(this),this.XB=100,this.xB=!1;var t=new Bs,i=new Po;i.tg=!0,i.stroke="blue",t.add(i),i=new Po,i.jp="Standard",i.fill="blue",i.stroke="blue",t.add(i),t.wf="Tool",this.tC=t,t=new Ms,i=new Po,i.Jd="",i.Fb="Rectangle",i.fill=null,i.stroke="magenta",i.hb=2,i.xa=Au.Tw,t.add(i),t.pl=!1,t.wf="Tool",this.rC=t,this.sC=i,t=new Ms,i=new Po,i.Jd="",i.Fb="Rectangle",i.fill=null,i.stroke="magenta",i.hb=2,i.xa=Au.Tw,t.add(i),t.pl=!1,t.wf="Tool",this.uC=t,this.vC=i,this.TB=this.SB=this.OB=this.NB=this.PB=null,this.sB=!0,this.EF=new g(Mr,"boolean"),this.YB=this.xk=this.nC=null}function ie(t,i,e,n){if(i===e)return!0;var r=i.W;return null!==r&&r.tf&&(n.add(r),ie(t,r.ce,e,n))?!0:(i=i.ca,null!==i&&i.tf&&(n.add(i),ie(t,i.ce,e,n))?!0:!1)}function ee(t,i,e,n,r){if(i===e)return!0;if(null===i||null===e)return!1;for(var o=i.oe;o.next();){var s=o.value;if(s!==n&&(!r||s.Bc)&&s.ca===i&&(s=s.W,s!==i&&ee(t,s,e,n,r)))return!0}return!1}function ne(t,i,e,n,r){if(e===n)return!0;if(null===e||null===n||i.contains(e))return!1;i.add(e);for(var o=e.oe;o.next();){var s=o.value;if(s!==r&&s.ca===e&&(s=s.W,s!==e&&ne(t,i,s,n,r)))return!0}return!1}function re(t,i,e,n,r){if(e===n)return!0;if(null===e||null===n||i.contains(e))return!1;i.add(e);for(var o=e.oe;o.next();){var s=o.value;if(s!==r){var a=s.W,s=s.ca,a=a===e?s:a;if(a!==e&&re(t,i,a,n,r))return!0}}return!1}function oe(){0<arguments.length&&Ul.Wc(oe),te.call(this),this.name="Linking",this.ex={},this.bx=null,this.la=of,this.yy=this.jC=null}function se(){0<arguments.length&&Ul.Wc(se),te.call(this),this.name="Relinking";var t=new Po;t.Fb="Diamond",t.xa=Au.Qw,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.Pf=0,this.gB=t,t=new Po,t.Fb="Diamond",t.xa=Au.Qw,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.Pf=-1,this.wC=t,this.Yb=null,this.QB=new k}function ae(t,i,e,n,r){null!==i?(t.copyPortProperties(i,e,t.qe,t.Om,!1),t.g.add(t.qe)):t.g.remove(t.qe),null!==n?(t.copyPortProperties(n,r,t.re,t.Pm,!0),t.g.add(t.re)):t.g.remove(t.re)}function he(){0<arguments.length&&Ul.Wc(he),Ci.call(this),this.name="LinkReshaping";var t=new Po;t.Fb="Rectangle",t.xa=Au.mp,t.fill="lightblue",t.stroke="dodgerblue",this.pk=t,t=new Po,t.Fb="Diamond",t.xa=Au.mp,t.fill="lightblue",t.stroke="dodgerblue",this.DB=t,this.ZB=3,this.$w=this.Yb=null,this.RB=new m,this.my=null}function le(t,i,e,n,r,o){return o?Math.abs(i.y-e.y)<t.gh&&Math.abs(e.y-n.y)<t.gh&&Math.abs(n.y-r.y)<t.gh:Math.abs(i.x-e.x)<t.gh&&Math.abs(e.x-n.x)<t.gh&&Math.abs(n.x-r.x)<t.gh}function ue(){0<arguments.length&&Ul.Wc(ue),Ci.call(this),this.name="Resizing",this.nj=new w(1,1).freeze(),this.lj=new w(9999,9999).freeze(),this.Ti=new w(0/0,0/0).freeze(),this.iq=!1,this.Gb=null;var t=new Po;t.Hj=ou,t.Fb="Rectangle",t.xa=Au.mp,t.fill="lightblue",t.stroke="dodgerblue",t.hb=1,t.cursor="pointer",this.pk=t,this.Yb=null,this.Tu=new w,this.ly=new m,this.Jx=new w(0,0),this.Ix=new w(1/0,1/0),this.Hx=new w(1,1),this.KB=!0}function fe(t,i,e){if(null!==i)if(i.alignment.Lc()||""===i.cursor){if(i instanceof to)for(i=i.elements;i.next();)fe(t,i.value,e)}else t:{if(t=i.alignment,t.ne()&&(t=ou),0>=t.x)e=0>=t.y?e+225:1<=t.y?e+135:e+180;else if(1<=t.x)0>=t.y?e+=315:1<=t.y&&(e+=45);else if(0>=t.y)e+=270;else{if(!(1<=t.y))break t;e+=90}0>e?e+=360:e>=360&&(e-=360),i.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"
}}function ce(){0<arguments.length&&Ul.Wc(ce),Ci.call(this),this.name="Rotating",this.gC=45,this.fC=2,this.Gb=null;var t=new Po;t.Fb="Ellipse",t.xa=Au.Qw,t.fill="lightblue",t.stroke="dodgerblue",t.hb=1,t.cursor="pointer",this.pk=t,this.Yb=null,this.Su=0,this.aC=new m}function pe(){0<arguments.length&&Ul.Wc(pe),Ci.call(this),this.name="ClickSelecting"}function de(){0<arguments.length&&Ul.Wc(de),Ci.call(this),this.name="Action",this.Um=null}function ye(){0<arguments.length&&Ul.Wc(ye),Ci.call(this),this.name="ClickCreating",this.ik=null,this.qB=!0,this.fB=new m(0,0)}function ve(t,i,e){this.text=t,this.ZC=i,this.visible=e}function ge(){0<arguments.length&&Ul.Wc(ge),Ci.call(this),this.name="ContextMenu",this.fn=this.OA=null,this.HB=new m,this.xx=this.on=null,me(this)}function me(i){if(i.on=new ks,i.xC=function(){i.stopTool()},!1===Ul.hD){var e=Ul.createElement("div"),n=Ul.createElement("div");e.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";var r=Ul.createElement("style");t.document.getElementsByTagName("head")[0].appendChild(r),r.sheet.insertRule(".defaultCXul { list-style: none; }",0),r.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),r.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),e.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),e.addEventListener("selectstart",function(t){return t.preventDefault(),!1},!1),n.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),t.document.body&&(t.document.body.appendChild(e),t.document.body.appendChild(n)),Ul.ns=e,Ul.ms=n,Ul.hD=!0}}function be(t,i,e){void 0===e&&(e=null),t.na=!0,i&&t.standardMouseSelect(),t.standardMouseClick(),t.fn=null,null===e&&(e=t.findObjectWithContextMenu()),null!==e?(i=e.contextMenu,null!==i?(t.fn=e instanceof Mr?e:null,t.showContextMenu(i,t.fn)):t.showDefaultContextMenu()):t.showDefaultContextMenu()}function xe(){0<arguments.length&&Ul.Wc(xe),Ci.call(this),this.name="DragSelecting",this.pn=175,this.vB=!1;var t=new es;t.wf="Tool",t.pl=!1;var i=new Po;i.name="SHAPE",i.Fb="Rectangle",i.fill=null,i.stroke="magenta",t.add(i),this.zl=t}function we(){0<arguments.length&&Ul.Wc(we),Ci.call(this),this.name="Panning",this.ny=new m,this.Si=!1;var i=this;this.lC=function(){t.document.removeEventListener("scroll",i.lC,!1),i.stopTool()}}function ke(){0<arguments.length&&Ul.Wc(ke),Ci.call(this),this.name="TextEditing",this.pC=null,this.Qx=0,this.RA=this.pv=null,this.kC=vf,this.Hk=null,this.Xa=gf,this.Dk=null,this.EB=1,this.dC=!0;var t=Ul.createElement("textarea");t.AA=!0,this.WA=t,t.addEventListener("input",function(){var t=this.textEditingTool,i=t.pC;i.text=this.value,Nr(i,t.Qx,1/0),this.rows=i.oH},!1),t.addEventListener("keydown",function(t){var i=t.which,e=this.textEditingTool;if(null!==e)if(13===i)!1===e.pv.iw&&t.preventDefault(),e.acceptText(yf);else{if(9===i)return e.acceptText(df),t.preventDefault(),!1;27===i&&(e.doCancel(),null!==e.g&&e.g.focus())}},!1),t.addEventListener("focus",function(){var t=this.textEditingTool;t.Xa===mf?t.Xa=bf:t.Xa===kf?t.Xa=xf:t.Xa===xf&&(t.Xa=bf),"function"==typeof this.select&&t.$z&&this.select()},!1),t.addEventListener("blur",function(){"function"==typeof this.focus&&this.focus();var t=this.textEditingTool;"function"==typeof this.select&&t.$z&&this.select()},!1)}function Me(t){if(null!==t.kh&&null!==t.mg){var i=t.kh,e=t.kh.text,n=t.mg.value,r="",r="function"==typeof n?n():n;if(!t.isValidText(t.kh,e,r))return t.Xa=bf,null!==i.cz&&i.cz(t,e,r),null===t.Dk&&(t.Dk=t.mg.style.border,t.mg.style.border="3px solid red"),void("function"==typeof t.mg.focus&&t.mg.focus());t.Wb(t.name),t.Xa=kf,e!==r&&(t.kh.text=r),t.zf=t.name,i=t.g,null!==i&&i.za("TextEdited",t.kh,e),t.Uj(),t.stopTool(),null!==i&&i.focus()}null!==t.Dk&&(t.mg.style.border=t.Dk,t.Dk=null)}function Pe(){Ci.call(this),this.name="ToolManager",this.uF=new l(Ci),this.vF=new l(Ci),this.wF=new l(Ci),this.jB=this.kB=1e3,this.ZA=new w(2,2).Ka(),this.au=this.vx=null,this.IB=Mf,this.hB=Tf}function Te(t,i,e,n){Ul.j(i,"string",Pe,"replaceStandardTool:name"),Ul.C(n,l,Pe,"replaceStandardTool:list"),null!==e&&(Ul.C(e,Ci,Pe,"replaceStandardTool:newtool"),e.g&&e.g!==t.g&&Ul.k("Cannot share tools between Diagrams: "+e.toString()),e.name=i,e.Ec(t.g)),t.findTool(i)?t.replaceTool(i,e):null!==e&&n.add(e)}function Se(){this.pF=Ce,this.Fl=this.Gl=this.Y=null,this.CA=this.bd=this.Fn=this.dj=!1,this.Ne=!0,this.$t=this.Zt=this.PA=null,this.tx=0,this.Ex=600,this.yF=new m(0,0),this.EA=this.DA=this.BC=!1,this.Sn=new g(Mr,Ee)}function Ce(t,i,e,n){return t/=n/2,1>t?e/2*t*t+i:-e/2*(--t*(t-2)-1)+i}function je(t){t.Ne&&requestAnimationFrame(function(){!1===t.bd||t.dj||(t.Y.im=1,Ye(t.Y),t.bd=!1,t.Y.za("AnimationStarting"),Ae(t))})}function Ne(t,i,e,r,o){if(t.bd&&(!(i instanceof es)||i.JD)){var s=t.Sn;if(s.contains(i)){i=s.ta(i),t=i.start;var a=i.end;void 0===t[e]&&(t[e]=De(r)),a[e]=De(o)}else t=new n,a=new n,t[e]=De(r),a[e]=De(o),s.add(i,new Ee(t,a))}}function De(t){return t instanceof m?t.copy():t instanceof w?t.copy():t}function Ae(t){var i;void 0===i&&(i=new n);var e=t.Y;if(null!==e)if(0===t.Sn.count)t.dj=!1,Ue(e,!1),e.bf();else{t.dj=!0;var r=i.xJ||t.pF,o=i.eK||null,s=i.fK||null,a=i.duration||t.Ex;i=t.yF;for(var h=t.Sn.i;h.next();){var l=h.value.start.position;l instanceof m&&(l.J()||l.assign(i))}t.PA=r,t.Zt=o,t.$t=s,t.tx=a;var u=t.oF=t.Sn;Le(t),ze(t,e,u,r,0,a,null!==t.Gl&&null!==t.Fl),fn(t.Y),Fe(t),requestAnimationFrame(function(i){var n=i||+new Date,o=n+a;!function s(i){if(!1!==t.dj){i=i||+new Date;var h=i>o?a:i-n;Le(t),ze(t,e,u,r,h,a,null!==t.Gl&&null!==t.Fl),t.Zt&&t.Zt(),fn(e),Fe(t),i>o?Be(t):requestAnimationFrame(s)}}(n)})}}function Le(t){if(!t.Fn){var i=t.Y;t.BC=i.cb,t.DA=i.Iw,t.EA=i.tt,i.cb=!0,i.Iw=!0,i.tt=!0,t.Fn=!0}}function Fe(t){var i=t.Y;i.cb=t.BC,i.Iw=t.DA,i.tt=t.EA,t.Fn=!1}function ze(t,i,e,n,r,o,s){for(e=e.i;e.next();){var a,h=e.key,l=e.value,u=l.start,l=l.end;for(a in l)void 0!==jf[a]&&jf[a](h,u[a],l[a],n,r,o)}s&&(s=t.Gl,t=t.Fl,a=t.y-s.y,t=n(r,s.x,t.x-s.x,o),n=n(r,s.y,a,o),r=i.qz,i.qz=!0,i.position=new m(t,n),i.qz=r)}function Be(t){t.dj=!1,t.Gl=null,t.Fl=null,t.Sn=new g(Mr,Ee),Le(t);for(var i=t.Y.links;i.next();){var e=i.value;null!==e.Xn&&(e.points=e.Xn,e.Xn=null)}i=t.Y,Ue(i,!1),i.pc(),i.bf(),ln(i),Fe(t),t.$t&&t.$t(),t.$t=null,t.Zt=null,i.za("AnimationFinished"),i.de()}function qe(t,i,e){var n=i.ba,r=e.ba,o=null;e instanceof xa&&(o=e.placeholder),null!==o?(e=o.lb(iu),e.x+=o.padding.left,e.y+=o.padding.top,Ne(t,i,"position",e,i.position)):Ne(t,i,"position",new m(r.x+r.width/2-n.width/2,r.y+r.height/2-n.height/2),i.position),Ne(t,i,"opacity",.01,i.opacity)}function Oe(t,i,e){t.bd&&(null===t.Gl&&i.J()&&null===t.Fl&&(t.Gl=i.copy()),t.Fl=e.copy())}function Ee(t,i){this.start=t,this.end=i}function Ie(){0<arguments.length&&Ul.Wc(Ie),Ul.gc(this),this.Y=null,this.Db=new l(es),this.Ub="",this.Ic=1,this.Wx=!1,this.Fk=this.Iy=this.fk=this.ek=this.dk=this.ck=this.ak=this.bk=this.$j=this.hk=this.Zj=this.gk=this.Yj=this.Xj=!0,this.Rx=!1,this.Uu=[]}function Re(t,i,e,n){if(t.visible&&0!==t.Ic){1!==t.Ic&&(i.globalAlpha=t.Ic);var r=t.Uu;r.length=0;var o=e.scale;t=t.Db.n;for(var s=t.length,a=n.length,h=0;s>h;h++){var l=t[h];if(vs(l)||wo(l)){if(l instanceof Bs){var u=l;if(u.dc&&r.push(u),!1===u.hg)continue}var f,u=hs(l,l.ba);t:{f=u;for(var c=n,p=a,d=2/o,y=4/o,v=0;p>v;v++){var g=c[v];if(0!==g.width&&0!==g.height&&f.HD(g.x-d,g.y-d,g.width+y,g.height+y)){f=!0;break t}}f=!1}f&&(1<u.width*o||1<u.height*o?l.We(i,e):fs(l,i))}}i.globalAlpha=1}}function Ge(i){function e(){t.document.removeEventListener("DOMContentLoaded",e,!1),He(n)}1<arguments.length&&Ul.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),Ul.gc(this),qc=[],this.sc=!0,this.nh=new Se,this.nh.Ec(this),this.zd=17;var n=this;null!==t.document.body?He(this):t.document.addEventListener("DOMContentLoaded",e,!1),this.wB=!1,this.Zb=new l(Ie),this.zb=this.Ab=0,this.Qg=this.Jb=this.Gg=this.ib=null,this.qE(),this.dq=null,this.pE(),this.Ma=new m(0/0,0/0).freeze(),this.$b=1,this.tu=new m(0/0,0/0).freeze(),this.uu=0/0,this.Ku=1e-4,this.Hu=100,this.Sd=new N,this.wv=new m(0/0,0/0).freeze(),this.ku=new k(0/0,0/0,0/0,0/0).freeze(),this.vy=new j(0,0,0,0).freeze(),this.wy=Ef,this.qy=this.oy=null,this.xl=Nf,this.dn=tu,this.tk=Nf,this.An=tu,this.vu=this.su=iu,this.Xf=new f(Mr),this.Md=!0,this.fq=!1,this.El=new g(Bs,k),this.qn=!0,this.lF=250,this.Zm=-1,this.Qt=new j(16,16,16,16).freeze(),this.du=this.Ef=!1,this.un=!0,this.nk=new _,this.Jc=new _,this.Ob=new _,this.Ui=null,this.lv=-1,this.kv=!1,this.Ax=this.Bx=null,ir(this),this.Rn=new f(Ms),this.Ik=new f(xa),this.Nn=new f(Bs),this.Db=new f(es),this.yu=!0,this.mB=!1,this.sv=Lf,this.gj=10,this.ux=this.yx=this.Fy=null,this.sx="",this.Pp="auto",this.Zh=this.ti=this.ji=this.Nu=this.ki=this.li=this.mi=this.Yh=this.ci=this.Wh=null,this.yn=!0,this.iy=!1,this.WB={},this.hr=0,this.Df=[null,null],this.ix=null,this.zu=this.Vm=this.zx=this.xy=this.eC=this.qi=!1,this.yB=!0,this.Tx=this.vd=!1,this.Od=null;var r=this;this.FB=function(t){if(t.ga===r.ga&&r.Na){r.Na=!1;try{var i=t.Ad;""===t.Lf&&i===Yu&&Dn(r,t.object,t.propertyName)}finally{r.Na=!0}}},this.GB=function(t){Nn(r,t)},this.DC=!0,this.Ig=-2,this.$h=new g(Object,es),this.lk=new g(Object,Bs),this.Ml=new g(Object,Array),this.Tn=new g("string",Array),this.VB=new l(Vo),this.vk=!1,this.Yj=this.Xj=this.Gt=this.Ne=!0,this.It=this.Ht=!1,this.Nt=this.Lt=this.fk=this.ek=this.dk=this.ck=this.ak=this.bk=this.$j=this.Kt=this.hk=this.Zj=this.gk=!0,this.Jl=this.uB=!1,this.Mt=this.Jt=this.qu=this.pu=!0,this.av=this.$u=16,this.sy=this.Zu=!1,this.uy=this.ty=this.vj=this.uj=null,this.Pe=new j(5).freeze(),this.dv=new f(es).freeze(),this.Iu=999999999,this.ru=new f(es).freeze(),this.uk=this.Hl=this.ei=!0,this.rk=this.qk=!1,this.Nd=null,this.Ot=!0,this.lf=!1,this.md=null,this.MB=1,this.Lx=!1,this.iC=0,this.CC=new k(0/0,0/0,0/0,0/0).freeze(),this.eu=new k(0/0,0/0,0/0,0/0).freeze(),this.Ul=new f(gr),We(this),this.Du=this.mu=this.Pu=this.TA=this.SA=this.UA=this.hj=this.ok=this.ni=null,Ve(this),this.ad=null,this.lu=!1,this.en=null,this.tb=new Pe,this.tb.initializeStandardTools(),this.Va=this.$y=this.tb,this.Eb=new Mi,this.ga=new yi,this.qi=!0,this.Qb=new Sa,this.qi=!1,this.dB=this.Dx=null,this.nf=1,this.im=null,this.sk=new pr,void 0!==i&&yr(this,i),this.Ol=1,this.Pl=0,this.AB=new m,this.zC=500,this.Pt=new m,this.Ir=null,this.sc=this.Xx=!1}function Ve(t){t.ni=new g("string",es);var i=new Ms,e=new Fo;e.bind(new mi("text","",$u)),i.add(e),t.UA=i,t.ni.add("",i),i=new Ms,e=new Fo,e.stroke="brown",e.bind(new mi("text","",$u)),i.add(e),t.ni.add("Comment",i),i=new Ms,i.pl=!1,i.TC=!1,e=new Po,e.Fb="Ellipse",e.fill="black",e.stroke=null,e.xa=new w(3,3).Ka(),i.add(e),t.ni.add("LinkLabel",i),t.ok=new g("string",xa),i=new xa,i.Zz="GROUPPANEL",i.type=hc,e=new Fo,e.font="bold 12pt sans-serif",e.bind(new mi("text","",$u)),i.add(e),e=new to(uc),e.name="GROUPPANEL";var n=new Po;n.Fb="Rectangle",n.fill="rgba(128,128,128,0.2)",n.stroke="black",e.add(n),n=new Ta,n.padding=new j(5,5,5,5).Ka(),e.add(n),i.add(e),t.SA=i,t.ok.add("",i),t.hj=new g("string",Bs),i=new Bs,e=new Po,e.tg=!0,i.add(e),e=new Po,e.jp="Standard",e.fill="black",e.stroke=null,e.hb=0,i.add(e),t.TA=i,t.hj.add("",i),i=new Bs,e=new Po,e.tg=!0,e.stroke="brown",i.add(e),t.hj.add("Comment",i),i=new ks,i.type=uc,e=new Po,e.fill=null,e.stroke="dodgerblue",e.hb=3,i.add(e),e=new Ta,e.margin=new j(1.5,1.5,1.5,1.5).Ka(),i.add(e),t.Pu=i,t.mu=i,i=new ks,i.type=dc,e=new Po,e.tg=!0,e.fill=null,e.stroke="dodgerblue",e.hb=3,i.add(e),t.Du=i}function He(i){var e=Ul.createElement("p");e.style.width="100%",e.style.height="200px",e.style.boxSizing="content-box";var n=Ul.createElement("div");n.style.position="absolute",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.style.boxSizing="content-box",n.appendChild(e),t.document.body.appendChild(n);var r=e.offsetWidth;n.style.overflow="scroll",e=e.offsetWidth,r===e&&(e=n.clientWidth),t.document.body.removeChild(n),i.zd=r-e}function Ke(i){var e=i.ib;e.addEventListener("touchstart",i.SE,!1),e.addEventListener("touchmove",i.RE,!1),e.addEventListener("touchend",i.QE,!1),e.addEventListener("mousemove",i.Qo,!1),e.addEventListener("mousedown",i.Po,!1),e.addEventListener("mouseup",i.So,!1),e.addEventListener("mousewheel",i.Zg,!1),e.addEventListener("DOMMouseScroll",i.Zg,!1),e.addEventListener("mouseout",i.Ro,!1),e.addEventListener("keydown",i.kH,!1),e.addEventListener("keyup",i.lH,!1),e.addEventListener("selectstart",function(t){return t.preventDefault(),!1},!1),e.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),e.addEventListener("gesturechange",function(t){i.tb.Bo===Sf&&t.preventDefault()},!1),e.addEventListener("pointerdown",i.KH,!1),e.addEventListener("pointermove",i.MH,!1),e.addEventListener("pointerleave",i.LH,!1),t.addEventListener("resize",i.aF,!1)}function Ue(t,i){t.im=null,i&&t.hE()}function Ye(t){if(null!==t.ib){var i=t.Jb;if(0!==i.clientWidth&&0!==i.clientHeight){var e=t.rk?t.zd:0,n=t.qk?t.zd:0,r=t.nf;t.nf=t.computePixelRatio(),t.nf!==r&&(t.fq=!0,t.de()),(i.clientWidth!==t.Ab+e||i.clientHeight!==t.zb+n)&&(t.Hl=!0,t.Md=!0,i=t.Qb,null!==i&&i.jw&&i.H(),t.vd||t.de())}}}function Je(t,i,e){void 0===i&&(i=t.Gg),void 0===e&&(e=!0),e&&(i.Et=""),i.Tm="",i.Sm=""}function We(t){var i=new Ie;i.name="Background",t.cs(i),i=new Ie,i.name="",t.cs(i),i=new Ie,i.name="Foreground",t.cs(i),i=new Ie,i.name="Adornment",i.Ac=!0,t.cs(i),i=new Ie,i.name="Tool",i.Ac=!0,i.KD=!0,t.cs(i),i=new Ie,i.name="Grid",i.of=!1,i.Ag=!1,i.Ac=!0,t.LF(i,t.ws("Background"))}function Xe(t){t.ad=new to(yc),t.ad.name="GRID";var i=new Po;i.Fb="LineH",i.stroke="lightgray",i.hb=.5,i.interval=1,t.ad.add(i),i=new Po,i.Fb="LineH",i.stroke="gray",i.hb=.5,i.interval=5,t.ad.add(i),i=new Po,i.Fb="LineH",i.stroke="gray",i.hb=1,i.interval=10,t.ad.add(i),i=new Po,i.Fb="LineV",i.stroke="lightgray",i.hb=.5,i.interval=1,t.ad.add(i),i=new Po,i.Fb="LineV",i.stroke="gray",i.hb=.5,i.interval=5,t.ad.add(i),i=new Po,i.Fb="LineV",i.stroke="gray",i.hb=1,i.interval=10,t.ad.add(i),i=new es,i.add(t.ad),i.wf="Grid",i.uz=!1,i.JD=!1,i.Ag=!1,i.zz="GRID",t.add(i),t.Db.remove(i),t.ad.visible=!1}function Ze(t){if(t.uD.J()){var i=t.uD.copy();return i.yv(t.padding),i}for(var e=!0,n=t.Zb.n,r=n.length,o=0;r>o;o++){var s=n[o];if(s.visible&&(!s.Ac||s.KD))for(var s=s.Db.n,a=s.length,h=0;a>h;h++){var l=s[h];l.uz&&l.Ea()&&(l=l.ba,l.J()&&(e?(e=!1,i=l.copy()):i.Th(l)))}}return e&&(i=new k(0,0,0,0)),i.yv(t.padding),i}function Qe(t,i){if((i||t.lf)&&!t.sc&&null!==t.ib&&!t.Lb.Vg&&t.Cd.J()){t.sc=!0;var e=t.xl;i&&t.tk!==Nf&&(e=t.tk);var n=e!==Nf?$e(t,e):t.scale,e=t.ob.copy(),r=t.Ab/n,o=t.zb/n,s=null,a=t.Lb;a.bd&&(s=t.Ma.copy()),t.position.La();var h=t.dn;i&&!h.pd()&&t.An.pd()&&(h=t.An),_e(t,t.Ma,t.Cd,r,o,h,i),t.position.freeze(),null!==s&&Oe(a,s,t.Ma),t.scale=n,t.sc=!1,n=t.ob,n.De(e)||t.dt(e,n)}}function $e(t,i){var e=t.Eb.Pv;if(null===t.ib)return e;t.ei&&Zn(t,t.kg());var n=t.Cd;if(!n.J())return e;var r=n.width,n=n.height,o=t.Ab,s=t.zb,a=o/r,h=s/n;return i===Df?(r=Math.min(h,a),r>e&&(r=e),r<t.Yg&&(r=t.Yg),r>t.Xg&&(r=t.Xg),r):i===Af?(r=h>a?(s-t.zd)/n:(o-t.zd)/r,r>e&&(r=e),r<t.Yg&&(r=t.Yg),r>t.Xg&&(r=t.Xg),r):t.scale}function _e(t,i,e,n,r,o,s){var a=i.x,h=i.y;(s||t.yE===Ef)&&(o.pd()&&(n>e.width&&(a=e.x+(o.x*e.width+o.offsetX)-(o.x*n-o.offsetX)),r>e.height&&(h=e.y+(o.y*e.height+o.offsetY)-(o.y*r-o.offsetY))),o=t.xE,s=n-e.width,n<e.width+o.left+o.right?(a=Math.min(a+n/2,e.right+Math.max(s,o.right)-n/2),a=Math.max(a,e.left-Math.max(s,o.left)+n/2),a-=n/2):a>e.left?a=e.left:a<e.right-n&&(a=e.right-n),n=r-e.height,r<e.height+o.top+o.bottom?(h=Math.min(h+r/2,e.bottom+Math.max(n,o.bottom)-r/2),h=Math.max(h,e.top-Math.max(n,o.top)+r/2),h-=r/2):h>e.top?h=e.top:h<e.bottom-r&&(h=e.bottom-r)),i.x=isFinite(a)?a:-t.padding.left,i.y=isFinite(h)?h:-t.padding.top,null!==t.gE&&(t=t.gE(t,i),i.x=t.x,i.y=t.y)}function tn(t,i,e,n){for(void 0===e&&(e=null),void 0===n&&(n=null),pn(t),t=t.Zb.Fm;t.next();){var r=t.value;if(r.visible&&!r.Ac&&(r=r.ke(i,e,n),null!==r))return r}return null}function en(t){-1!==t.lv&&(Ul.clearTimeout(t.lv),t.lv=-1)}function nn(t,i){var e=i.copy();t.lv=Ul.setTimeout(function(){e.button=2,t.N=e,t.kv=!0,t.doMouseUp()},850)}function rn(t,i,e,n,r){n.g=i,r?hn(t,e,n):(n.ff=i.Ob.ff,n.da=i.Ob.da),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),n.hd=t,n.button=e.button,Ul.Em&&0===e.button&&e.ctrlKey&&(n.button=2),n.Wk=!1,n.up=!1,n.Te=1,n.Uk=0,n.Tc=!1,n.bubbles=!1,n.event=e,n.timestamp=Date.now(),n.Ps=!1,n.Cg=e.target.Y?e.target.Y:null,n.pe=null}function on(t,i,e,n,r){n.g=t,hn(t,e,n),n.hd=0,n.button=0,n.Wk=!0,n.up=!1,n.Te=1,n.Uk=0,n.Tc=!1,n.bubbles=!0,n.event=i,n.timestamp=Date.now(),n.Ps=r,n.Cg=i.target.Y?i.target.Y:null,n.pe=null,t.nk=n.copy(),nf=null}function sn(i,e,n,r,o){var s=null;if(r.g=i,null!==n){var a,s=t.document.elementFromPoint(n.clientX,n.clientY);s&&s.Y?a=s.Y:(n=e.changedTouches[0],a=i),hn(i,n,r)}else null!==i.Jc?(r.da=i.Jc.da,r.ff=i.Jc.ff,r.Cg=i.Jc.Cg):null!==i.nk&&(r.da=i.nk.da,r.ff=i.nk.ff,r.Cg=i.nk.Cg);r.hd=0,r.button=0,r.Wk=!1,r.up=!1,r.Te=1,r.Uk=0,r.Tc=!1,r.bubbles=!1,r.event=e,r.timestamp=Date.now(),r.Ps=o,r.Cg=a,r.pe=null}function an(t,i){return t.bubbles?!0:(void 0!==i.stopPropagation&&i.stopPropagation(),(void 0===i.touches||2>i.touches.length)&&i.preventDefault(),i.cancelBubble=!0,!1)}function hn(t,i,e){var n=t.ib,r=t.Ab,o=t.zb,s=0,a=0;null!==n&&(n=n.getBoundingClientRect(),s=i.clientX-r/n.width*n.left,a=i.clientY-o/n.height*n.top),e.ff.m(s,a),null!==t.Sd?(i=Ul.fc(s,a),t.Sd.Ph(i),e.da.assign(i),Ul.v(i)):e.da.m(s,a)}function ln(t){for(t.vd||pn(t),t.ei&&Zn(t,t.kg()),t=t.Ul.i;t.next();)ln(t.value)}function un(t,i){t.sc||!t.Hl||Mn(t)||(i&&pn(t),Qe(t,!1))}function fn(t){if(!t.vd&&(t.Ef=!1,null!==t.Jb)){t.vd=!0;var i=t.nh,e=t.VB;if(!i.Fn&&0!==e.length){for(var n=e.n,r=n.length,o=0;r>o;o++){var s=n[o];Yr(s,!1),s.R()}e.clear()}n=e=!1,i.Vg&&(n=!0,e=t.cb,t.cb=!0),i.bd||Ye(t),un(t,!1),null!==t.ad&&(t.ad.visible&&!t.lu&&(Sn(t),t.lu=!0),!t.ad.visible&&t.lu&&(t.lu=!1)),pn(t),0!==t.El.count&&(mn(t),pn(t)),r=!1,(!t.lf||t.Ot)&&(t.lf?_n(t,!t.du):(t.Wb("Initial Layout"),!1===i.isEnabled&&i.Mi(),_n(t,!1)),r=!0),t.du=!1,pn(t),t.xy||i.Vg||ln(t),r&&(t.lf||(i=t.Zb.n,t.xf(i,i.length,t),cn(t),Sn(t)),t.za("LayoutCompleted")),un(t,!0),pn(t),r&&!t.lf&&(t.lf=!0,t.Wd("Initial Layout"),t.cb||t.ha.clear(),Ul.setTimeout(function(){t.Rh=!1},1)),t.We(),n&&(t.cb=e),t.vd=!1}}function cn(t){if(t.tk!==Nf)t.scale=$e(t,t.tk);else if(t.xl!==Nf)t.scale=$e(t,t.xl);else{var i=t.UG;isFinite(i)&&i>0&&(t.scale=i)}if(t.ei&&Zn(t,t.kg()),i=t.TG,i.J())t.position=i;else{i=Ul.K(),i.pt(t.Cd,t.SG);var e=t.ob,e=Ul.Vj(0,0,e.width,e.height),n=Ul.K();n.pt(e,t.VG),t.position=new m(i.x-n.x,i.y-n.y),Ul.ic(e),Ul.v(n),Ul.v(i),Qe(t,!0)}t.za("InitialLayoutCompleted")}function pn(t){if((t.vd||!t.Lb.Vg)&&0!==t.Xf.count)for(var i=0;23>i;i++){var e=t.Xf.i;if(null===e||0===t.Xf.count)break;t.Xf=new f(Mr);var n=t,r=t.Xf;for(e.reset();e.next();){var o=e.value;!o.Fd()||o instanceof xa||!o.Ea()||(o.hl()?(Nr(o,1/0,1/0),o.zc()):r.add(o))}for(e.reset();e.next();)o=e.value,o instanceof xa&&o.Ea()&&dn(n,o);for(e.reset();e.next();)o=e.value,o instanceof Bs&&(n=o,n.Ea()&&(n.hl()?(Nr(n,1/0,1/0),n.zc(),n.Xs()):r.add(n)));for(e.reset();e.next();)n=e.value,n instanceof ks&&n.Ea()&&(n.hl()?(Nr(n,1/0,1/0),n.zc()):r.add(n))}}function dn(t,i){for(var e=Ul.eb(),n=Ul.eb(),r=i.Mc;r.next();){var o=r.value;o.Ea()&&(o instanceof xa?(Ur(o)||Jr(o)||ps(o))&&dn(t,o):o instanceof Bs?o.W==i||o.ca==i?n.push(o):e.push(o):(Nr(o,1/0,1/0),o.zc()))}for(var r=e.length,s=0;r>s;s++)o=e[s],Nr(o,1/0,1/0),o.zc();for(Ul.ra(e),Nr(i,1/0,1/0),i.zc(),r=n.length,s=0;r>s;s++)o=n[s],Nr(o,1/0,1/0),o.zc();Ul.ra(n)}function yn(t,i,e,n,r){null===t.Jb&&Ul.k("No div specified");var o=t.ib;null===o&&Ul.k("No canvas specified");var s=t.Gg;if(t.Md){wn(t);var a=t.nf;Ul.Dm?(o.width=o.width,Je(t,s)):(s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.Ab*a,t.zb*a)),s.GD=!1,s.drawImage(t.Dx.Dd,n>0?0:Math.round(-n),r>0?0:Math.round(-r)),r=t.Ma;var o=t.$b,h=Math.round(r.x*o)/o,l=Math.round(r.y*o)/o;for(n=t.Sd,n.reset(),1!==o&&n.scale(o),0===r.x&&0===r.y||n.translate(-h,-l),s.save(),s.beginPath(),r=e.length,o=0;r>o;o++)h=e[o],0!==h.width&&0!==h.height&&s.rect(Math.floor(h.x),Math.floor(h.y),Math.ceil(h.width),Math.ceil(h.height));for(s.clip(),s.setTransform(1,0,0,1,0,0),s.scale(a,a),s.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),e=t.Zb.n,r=e.length,t.xf(e,r,t),gn(t,s),o=0;r>o;o++)Re(e[o],s,t,i);s.restore(),Je(t),t.sk?t.sk.wl(t)&&t.Zw():t.$p=function(){return new m(0,0)},t.uk=!1,t.Md=!1,t.hE()}}function vn(t,i,e,n,r,o,s,a,h,l){null===t.Jb&&Ul.k("No div specified"),null===t.ib&&Ul.k("No canvas specified"),void 0===s&&(s=null),void 0===a&&(a=null),void 0===h&&(h=!1),void 0===l&&(l=!1),wn(t),Je(t),xn(t),t.Tx=!0;var u=new k(o.x,o.y,n.width/r,n.height/r),c=u.copy();c.yv(e),Sn(t,c),pn(t);var c=t.Zb.n,p=c.length;t.xf(c,p,t,u);var d=t.nf;if(i.setTransform(1,0,0,1,0,0),i.scale(d,d),i.clearRect(0,0,n.width,n.height),null!==a&&""!==a&&(i.fillStyle=a,i.fillRect(0,0,n.width,n.height)),n=Ul.jh(),n.reset(),n.translate(e.left,e.top),n.scale(r),0===o.x&&0===o.y||n.translate(-o.x,-o.y),i.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Ul.Ye(n),gn(t,i),null!==s){var y=new f(Mr);for(e=s.i,e.reset();e.next();)r=e.value,!1===l&&"Grid"===r.layer.name||null===r||y.add(r);e=function(e){var n=h;if(e.visible&&0!==e.Ic&&(void 0===n&&(n=!0),n||!e.Ac)){1!==e.Ic&&(i.globalAlpha=e.Ic),n=e.Uu,n.length=0;var r=t.scale;e=e.Db.n;for(var o=e.length,s=0;o>s;s++){var a=e[s];if((vs(a)||wo(a))&&y.contains(a)){if(a instanceof Bs){var l=a;if(l.dc&&n.push(l),!1===l.hg)continue}l=a.ba,1<l.width*r||1<l.height*r?a.We(i,t):fs(a,i)}}i.globalAlpha=1}}}else if(!h&&l){var v=t.Gs.T,g=v.layer;e=function(e){e===g?v.We(i,t):e.We(i,t,u,h,l)}}else e=function(e){e.We(i,t,u,h,l)};for(r=0;p>r;r++)e(c[r]);t.Tx=!1,t.sk?t.sk.wl(t)&&t.Zw():t.$p=function(){return new m(0,0)},Je(t),xn(t),t.xf(c,p,t),Sn(t)}function gn(t,i){var e=t.Qg;if(null!==e){if(void 0!==e.imageSmoothingEnabled){var n=!!e.imageSmoothingEnabled;i.GD=n,i.cK=n}e=e.defaultFont,void 0!==e&&null!==e&&(i.font=e,i.Et=e)}}function mn(t){if(0===t.ha.Le){for(var i=t.El.i;i.next();){var e=i.key,n=i.value;e.le(),ea(e,n)}t.El.clear()}}function bn(t){!1===t.Hl&&(t.Hl=!0)}function xn(t){!1===t.uk&&(t.uk=!0)}function wn(t){!1!==t.fq&&(t.fq=!1,kn(t,t.Ab,t.zb))}function kn(t,i,e){var n=t.ib,r=t.nf,o=i*r,r=e*r;(n.width!==o||n.height!==r)&&(n.width=o,n.height=r,n.style.width=i+"px",n.style.height=e+"px",t.Md=!0,Je(t))}function Mn(t){var i=t.ib;if(null===i)return!0;var e=t.Jb,n=t.Ab,r=t.zb,o=t.CC.copy(),s=!1,a=t.rk?t.zd:0,h=t.qk?t.zd:0,l=e.clientWidth||n+a,e=e.clientHeight||r+h;if((l!==n+a||e!==r+h)&&(t.rk=!1,t.qk=!1,h=a=0,t.Ab=l,t.zb=e,s=t.fq=!0),t.Hl=!1,t.Lb.Vg)return s?(t.Lb.Mi(),t.oG(),!1):!0;var u=t.ob,f=t.Cd,l=f.width,e=f.height,c=u.width,p=u.height,d=f.x,y=u.x,v=f.right,a=u.right+a,g=f.y,b=u.y,f=f.bottom,h=u.bottom+h,x=u="1px",w=t.scale;t.kz&&t.Re&&(u=1,y>d+1&&(u=Math.max((y-d)*w+t.Ab,u)),v>a+1&&(u=Math.max((v-a)*w+t.Ab,u)),l>c+1&&(u=Math.max((l-c)*w+t.Ab,u)),u+="px"),t.lz&&t.Se&&(x=1,b>g+1&&(x=Math.max((b-g)*w+t.zb,x)),f>h+1&&(x=Math.max((f-h)*w+t.zb,x)),e>p+1&&(x=Math.max((e-p)*w+t.zb,x)),x+="px");var k="1px"!==u,M="1px"!==x;return((!k||!M)&&k||M)&&(M&&(a-=t.zd),k&&(h-=t.zd),t.kz&&t.Re&&(u=1,y>d+1&&(u=Math.max((y-d)*w+t.Ab,u)),v>a+1&&(u=Math.max((v-a)*w+t.Ab,u)),l>c+1&&(u=Math.max((l-c)*w+t.Ab,u)),u+="px"),t.lz&&t.Se&&(x=1,b>g+1&&(x=Math.max((b-g)*w+t.zb,x)),f>h+1&&(x=Math.max((f-h)*w+t.zb,x)),e>p+1&&(x=Math.max((e-p)*w+t.zb,x)),x+="px"),k="1px"!==u,M="1px"!==x),t.Zu&&k===t.qk&&M===t.rk?(n===t.Ab&&r===t.zb||t.bf(),!1):(k!==t.qk&&(t.zb="1px"===u?t.zb+t.zd:Math.max(t.zb-t.zd,1),s=!0),t.qk=k,t.ty.style.width=u,M!==t.rk&&(t.Ab="1px"===x?t.Ab+t.zd:Math.max(t.Ab-t.zd,1),s=!0,t.wB&&(M?(i.style.left=t.zd+"px",t.position=new m(t.Ma.x+t.zd/t.scale,t.Ma.y)):(i.style.left="0px",t.position=new m(t.Ma.x-t.zd/t.scale,t.Ma.y)))),t.rk=M,t.uy.style.height=x,t.kz&&t.Re&&(l>c+1?t.uj.scrollLeft=(t.position.x-d)*w:y>d+1?t.uj.scrollLeft=t.uj.scrollWidth-t.uj.clientWidth:v>a+1&&(t.uj.scrollLeft=t.position.x*w)),t.lz&&t.Se&&(e>p+1?t.vj.scrollTop=(t.position.y-g)*w:b>g+1?t.vj.scrollTop=t.vj.scrollHeight-t.vj.clientHeight:f>h+1&&(t.vj.scrollTop=t.position.y*w)),s&&(t.fq=!0),l=t.Ab,e=t.zb,t.vj.style.height=e+"px",t.vj.style.width=l+(t.rk?t.zd:0)+"px",t.uj.style.width=l+"px",t.uj.style.height=e+(t.qk?t.zd:0)+"px",t.sy=!1,n!==l||r!==e||t.Lb.bd?(u=t.ob,t.dt(o,u,s),!1):!0)}function Pn(t,i,e){if(Ul.C(i,Ie,Ge,"addLayer:layer"),null!==i.g&&i.g!==t&&Ul.k("Cannot share a Layer with another Diagram: "+i+" of "+i.g),null===e?null!==i.g&&Ul.k("Cannot add an existing Layer to this Diagram again: "+i):(Ul.C(e,Ie,Ge,"addLayer:existingLayer"),e.g!==t&&Ul.k("Existing Layer must be in this Diagram: "+e+" not in "+e.g),i===e&&Ul.k("Cannot move a Layer before or after itself: "+i)),i.g!==t){i=i.name,t=t.Zb,e=t.count;for(var n=0;e>n;n++)t.ja(n).name===i&&Ul.k("Cannot add Layer with the name '"+i+"'; a Layer with the same name is already present in this Diagram.")}}function Tn(t,i,e){if(t.sc||t.vd)t.$b=e;else if(t.sc=!0,null===t.ib)t.$b=e;else{var n=t.ob.copy(),r=t.Ab,o=t.zb;n.width=t.Ab/i,n.height=t.zb/i;var s=t.Rm.copy();if(isNaN(s.x))switch(t.Ty){case gu:s.x=0;break;case mu:s.x=r-1;break;case ou:s.x=r/2;break;case tu:case Du:s.x=r/2}if(isNaN(s.y))switch(t.Ty){case vu:s.y=0;break;case bu:s.y=o-1;break;case ou:s.y=o/2;break;case tu:case Du:s.y=o/2}null!==t.wE&&(e=t.wE(t,e)),e<t.Yg&&(e=t.Yg),e>t.Xg&&(e=t.Xg),t.position=new m(t.Ma.x+s.x/i-s.x/e,t.Ma.y+s.y/i-s.y/e),t.sc=!1,t.$b=e,t.dt(n,t.ob),Qe(t,!1),t.ma(),bn(t)}}function Sn(t,i){void 0===i&&(i=null);var e=t.ad;if(null!==e&&e.visible){for(var n=Ul.ul(),r=1,o=1,s=e.ya.n,a=s.length,h=0;a>h;h++){var l=s[h],u=l.interval;2>u||(oo(l.Fb)?o=o*u/Au.xD(o,u):r=r*u/Au.xD(r,u))}if(s=e.aw,n.m(o*s.width,r*s.height),s=o=h=a=0,null!==i)a=i.width,h=i.height,o=i.x,s=i.y;else{for(r=Ul.Sf(),o=t.ob,r.m(o.x,o.y,o.width,o.height),s=t.Ul.i;s.next();)o=s.value.ob,o.J()&&C(r,o.x,o.y,o.width,o.height);if(a=r.width,h=r.height,o=r.x,s=r.y,!r.J())return}e.width=a+2*n.width,e.height=h+2*n.height,r=Ul.K(),Au.xs(o,s,0,0,n.width,n.height,r),r.offset(-n.width,-n.height),Ul.Oj(n),e.T.location=r,Ul.v(r)}}function Cn(t){if(t=t.selection,0<t.count){for(var i=t.Ke(),e=i.length,n=0;e>n;n++)i[n].Za=!1;t.La(),t.clear(),t.freeze()}}function jn(t){var i=t.Rh;t.DC!==i&&(t.DC=i,t.za("Modified"))}function Nn(t,i){if(i.ga===t.ga){var e=i.Ad,n=i.propertyName;if(e===Uu&&"S"===n[0])if("StartingFirstTransaction"===n)e=t.tb,e.cf.each(function(i){i.Ec(t)}),e.Mf.each(function(i){i.Ec(t)}),e.Nf.each(function(i){i.Ec(t)}),t.vd||t.lf||(t.du=!0,t.un&&(t.Ef=!0),t.nh.ml());else if("StartingUndo"===n||"StartingRedo"===n){var r=t.Lb;r.Vg&&!t.cb&&r.Mi(),t.za("ChangingSelection")}else"StartedTransaction"===n&&(r=t.Lb,r.Vg&&!t.cb&&r.Mi(),t.zu&&r.ml());else if(t.Na){t.Na=!1;try{var o=i.Lf;if(""!==o)if(e===Yu){if("linkFromKey"===o){var s=i.object,a=t.ng(s);if(null!==a){var h=i.newValue,l=t.Xe(h);a.W=l}}else if("linkToKey"===o)s=i.object,a=t.ng(s),null!==a&&(h=i.newValue,l=t.Xe(h),a.ca=l);else if("linkFromPortId"===o){if(s=i.object,a=t.ng(s),null!==a){var u=i.newValue;"string"==typeof u&&(a.pg=u)}}else if("linkToPortId"===o)s=i.object,a=t.ng(s),null!==a&&(u=i.newValue,"string"==typeof u&&(a.lh=u));else if("nodeGroupKey"===o){var s=i.object,f=t.Oh(s);if(null!==f){var c=i.newValue;if(void 0!==c){var p=t.Xe(c);f.Ra=p instanceof xa?p:null}else f.Ra=null}}else if("linkLabelKeys"===o){if(s=i.object,a=t.ng(s),null!==a){var d=i.oldValue,y=i.newValue;if(Ul.isArray(d))for(var v=Ul.qb(d),g=0;v>g;g++){var m=Ul.fb(d,g),l=t.Xe(m);null!==l&&(l.ce=null)}if(Ul.isArray(y))for(v=Ul.qb(y),g=0;v>g;g++)m=Ul.fb(y,g),l=t.Xe(m),null!==l&&(l.ce=a)}}else if("nodeParentKey"===o){var b=i.object,x=t.Xe(i.newValue),w=t.Xv(b);if(null!==w){var k=w.As();null!==k?null===x?t.remove(k):t.qd?k.W=x:k.ca=x:Vn(t,x,w)}}else if("parentLinkCategory"===o){var b=i.object,w=t.Xv(b),M=i.newValue;null!==w&&"string"==typeof M&&(k=w.As(),null!==k&&(k.Kc=M))}else if("nodeCategory"===o){var s=i.object,P=t.Oh(s),M=i.newValue;null!==P&&"string"==typeof M&&(P.Kc=M)}else if("linkCategory"===o){var s=i.object,T=t.ng(s),M=i.newValue;null!==T&&"string"==typeof M&&(T.Kc=M)}else if("nodeDataArray"===o){var S=i.oldValue;Yn(t,S);var C=i.newValue;En(t,C)}else"linkDataArray"===o&&(S=i.oldValue,Yn(t,S),C=i.newValue,Hn(t,C));t.Rh=!0}else e===Ju?(C=i.newValue,"nodeDataArray"===o&&Ul.Sa(C)?In(t,C):"linkDataArray"===o&&Ul.Sa(C)?Kn(t,C):"linkLabelKeys"===o&&ui(C)&&(a=t.ng(i.object),l=t.Xe(C),null!==a&&null!==l&&(l.ce=a)),t.Rh=!0):e===Wu?(S=i.oldValue,"nodeDataArray"===o&&Ul.Sa(S)?Jn(t,S):"linkDataArray"===o&&Ul.Sa(S)?Jn(t,S):"linkLabelKeys"===o&&ui(S)&&(l=t.Xe(S),null!==l&&(l.ce=null)),t.Rh=!0):e===Uu&&("SourceChanged"===o?Dn(t,i.object,i.propertyName):"ModelDisplaced"===o&&t.nl());else if(e===Yu){var j=i.propertyName,s=i.object;s===t.ga?("nodeKeyProperty"===j||"nodeCategoryProperty"===j||"linkFromKeyProperty"===j||"linkToKeyProperty"===j||"linkFromPortIdProperty"===j||"linkToPortIdProperty"===j||"linkLabelKeysProperty"===j||"nodeIsGroupProperty"===j||"nodeGroupKeyProperty"===j||"nodeParentKeyProperty"===j||"linkCategoryProperty"===j)&&(t.ha.gb||t.nl()):Dn(t,s,j),t.Rh=!0}else e===Ju||e===Wu?(An(t,i),t.Rh=!0):e===Uu&&(("FinishedUndo"===n||"FinishedRedo"===n)&&(t.ha.fi=!0,t.za("ChangedSelection"),pn(t),t.ha.fi=!1),t.du=!0,t.bf(),r=t.nh,r.bd&&0===t.ha.Le&&je(r),"CommittedTransaction"===n&&t.ha.Yx&&(t.Ig=Math.min(t.Ig,t.ha.Ii-1)),jn(t),t.iy||"CommittedTransaction"!==n&&"FinishedUndo"!==n&&"FinishedRedo"!==n||(t.iy=!0,Ul.setTimeout(function(){t.Va.standardMouseOver(),t.iy=!1},10)))}finally{t.Na=!0}}}}function Dn(t,i,e){if("string"==typeof e){var n=t.Oh(i);if(null!==n)n.Nb(e),t.ga instanceof gi&&(n=t.ng(i),null!==n&&n.Nb(e));else{for(var n=null,r=t.Ml.i;r.next();){for(var o=r.value,s=0;s<o.length;s++){var a=o[s];null!==a.Yf&&(a=a.Yf.ta(i),null!==a&&(null===n&&(n=Ul.eb()),n.push(a)))}if(null!==n)break}if(null!==n){for(r=0;r<n.length;r++)n[r].Nb(e);Ul.ra(n)}}i===t.ga.Zs&&t.CI(e)}}function An(t,i){var e=i.Ad===Ju,n=e?i.xg:i.zg,r=e?i.newValue:i.oldValue,o=t.Ml.ta(i.object);if(Array.isArray(o))for(var s=0;s<o.length;s++){var a=o[s];if(e)bo(a,r,n);else{var h=n;if(!(0>h)){var l=h;mo(a)&&l++,a.Fe(l),xo(a,l,h)}}}}function Ln(t,i){var e=i.gi;if(Ul.isArray(e)){var n=t.Ml.ta(e);if(null===n)n=[],n.push(i),t.Ml.add(e,n);else{for(e=0;e<n.length;e++)if(n[e]===i)return;n.push(i)}}}function Fn(t,i){var e=i.gi;if(Ul.isArray(e)){var n=t.Ml.ta(e);if(null!==n)for(var r=0;r<n.length;r++)if(n[r]===i){n.splice(r,1),0===n.length&&t.Ml.remove(e);break}}}function zn(t,i){for(var e=i.ya.n,n=e.length,r=0;n>r;r++){var o=e[r];o instanceof Vo&&Bn(t,o)}}function Bn(t,i){var e=i.element;if(null!==e){var e=e.src,n=t.Tn.ta(e);if(null===n)n=[],n.push(i),t.Tn.add(e,n);else{for(e=0;e<n.length;e++)if(n[e]===i)return;n.push(i)}}}function qn(t,i){for(var e=i.ya.n,n=e.length,r=0;n>r;r++){var o=e[r];o instanceof Vo&&On(t,o)}}function On(t,i){var e=i.element;if(null!==e){var e=e.src,n=t.Tn.ta(e);if(null!==n)for(var r=0;r<n.length;r++)if(n[r]===i){n.splice(r,1),0===n.length&&t.Tn.remove(e);break}}}function En(t,i){if(null!==i){for(var e=t.ga,n=Ul.qb(i),r=0;n>r;r++){var o=Ul.fb(i,r);e.Ue(o)?In(t,o,!1):e instanceof yi&&Kn(t,o)}if(e instanceof yi||e instanceof gi){for(r=0;n>r;r++)o=Ul.fb(i,r),e.Ue(o)&&Gn(t,o);if(e instanceof yi)for(e=t.links;e.next();)qs(e.value)}Qn(t,!1)}}function In(t,i,e){if(void 0!==i&&null!==i&&!t.ha.gb&&!t.$h.contains(i)){void 0===e&&(e=!0);
var n=t.fz(i),r=Rn(t,i,n);null!==r&&(go(r),r=r.copy(),null!==r&&(r.Vh=n,t.Vm&&(r.wk="Tool"),t.add(r),r.data=i,e&&Gn(t,i)))}}function Rn(t,i,e){var n=!1,r=t.ga;return r instanceof yi&&(n=r.sz(i)),n?(i=t.iz.ta(e),null===i&&(i=t.iz.ta(""),null===i&&(Gf||(Gf=!0,Ul.trace('No Group template found for category "'+e+'"'),Ul.trace("  Using default group template")),i=t.SA))):(i=t.Jz.ta(e),null===i&&(i=t.Jz.ta(""),null===i&&(Rf||(Rf=!0,Ul.trace('No Node template found for category "'+e+'"'),Ul.trace("  Using default node template")),i=t.UA))),i}function Gn(t,i){var e=t.ga;if(e instanceof yi||e instanceof gi){var n=e.wb(i);if(void 0!==n){var r=pi(e,n),o=t.Oh(i);if(null!==r&&null!==o){for(r=r.i;r.next();){var s=r.value;if(e instanceof yi){var a=e;if(a.Ue(s)){if(o instanceof xa&&a.Bm(s)===n){var h=o,s=t.Oh(s);null!==s&&(s.Ra=h)}}else{var l=t.ng(s);if(null!==l&&o instanceof Ms&&(h=o,a.$k(s)===n&&(l.W=h),a.cl(s)===n&&(l.ca=h),s=a.Pj(s),Ul.isArray(s)))for(a=0;a<Ul.qb(s);a++)if(Ul.fb(s,a)===n){h.ce=l;break}}}else e instanceof gi&&(l=e,l.Ue(s)&&o instanceof Ms&&(h=o,l.Cm(s)===n&&(s=t.Xv(s),Vn(t,h,s))))}ci(e,n)}e instanceof yi?(e=e.Bm(i),void 0!==e&&(e=t.Xe(e),e instanceof xa&&(o.Ra=e))):e instanceof gi&&(e=e.Cm(i),void 0!==e&&o instanceof Ms&&(h=o,o=t.Xe(e),Vn(t,o,h)))}}}function Vn(t,i,e){if(null!==i&&null!==e){var n=t.tb.TD,r=i,o=e;if(t.qd){for(i=o.oe;i.next();)if(i.value.ca===o)return}else for(r=e,o=i,i=r.oe;i.next();)if(i.value.W===r)return;null!==n&&ee(n,r,o,null,!0)||(n=t.Zv(e.data),i=Un(t,n),null!==i&&(go(i),i=i.copy(),null!==i&&(i.Vh=n,i.W=r,i.ca=o,t.add(i),i.data=e.data)))}}function Hn(t,i){if(null!==i){for(var e=Ul.qb(i),n=0;e>n;n++){var r=Ul.fb(i,n);Kn(t,r)}Qn(t,!1)}}function Kn(t,i){if(void 0!==i&&null!==i&&!t.ha.gb&&!t.lk.contains(i)){var e=t.Zv(i),n=Un(t,e);if(null!==n&&(go(n),n=n.copy(),null!==n)){n.Vh=e;var e=t.ga,r=e.FG(i);if(""!==r&&(n.pg=r),r=e.$k(i),void 0!==r&&(r=t.Xe(r),r instanceof Ms&&(n.W=r)),r=e.IG(i),""!==r&&(n.lh=r),r=e.cl(i),void 0!==r&&(r=t.Xe(r),r instanceof Ms&&(n.ca=r)),e=e.Pj(i),Ul.isArray(e))for(var r=Ul.qb(e),o=0;r>o;o++){var s=Ul.fb(e,o),s=t.Xe(s);null!==s&&(s.ce=n)}t.add(n),n.data=i}}}function Un(t,i){var e=t.xz.ta(i);return null===e&&(e=t.xz.ta(""),null===e&&(Vf||(Vf=!0,Ul.trace('No Link template found for category "'+i+'"'),Ul.trace("  Using default link template")),e=t.TA)),e}function Yn(t,i){for(var e=Ul.qb(i),n=0;e>n;n++){var r=Ul.fb(i,n);Jn(t,r)}}function Jn(t,i){if(void 0!==i&&null!==i){var e=t.Oh(i);if(null!==e){e.Za=!1,e.Wg=!1;var n=e.layer;if(null!==n&&n.g===t){var r=t.ga;if(r instanceof yi&&e instanceof Ms){var o=e,s=r.wb(o.data);if(void 0!==s){for(var a=o.oe;a.next();)fi(r,s,a.value.data);if(o.tf&&(a=o.ce,null!==a&&fi(r,s,a.data)),o instanceof xa)for(o=o.Mc;o.next();)a=o.value.data,r.Ue(a)&&fi(r,s,a)}}else if(r instanceof gi&&e instanceof Ms){if(o=e,a=t.ng(o.data),null!==a){a.Za=!1,a.Wg=!1;var h=a.layer;if(null!==h){var l=h.Fe(-1,a,!1);l>=0&&t.Dc(Wu,"parts",h,a,null,l,null),l=a.Rs,null!==l&&l(a,h,null)}}for(a=t.qd,o=o.oe;o.next();)h=o.value,h=(a?h.ca:h.W).data,r.Ue(h)&&fi(r,s,h)}r=n.Fe(-1,e,!1),r>=0&&t.Dc(Wu,"parts",n,e,null,r,null),r=e.Rs,null!==r&&r(e,n,null)}}}}function Wn(t,i,e){for(var n in e){var r=i[n],o=e[n];if(Ul.isArray(o)){if(!Ul.isArray(r)||r.length>=o.length)return!1;for(var s=0;s<r.length;s++){var a=r[s],h=o[s];if(void 0!==h&&!Xn(t,a,h))return!1}}else if(!Xn(t,r,o))return!1}return!0}function Xn(t,i,e){if("function"==typeof e){if(!e(i))return!1}else if(e instanceof RegExp){if(!i||!e.test(i.toString()))return!1}else if(Ul.Sa(i)&&Ul.Sa(e)){if(!Wn(t,i,e))return!1}else if(i!==e)return!1;return!0}function Zn(t,i){t.ei=!1;var e=t.eu;e.L(i)||(i=i.Z(),t.eu=i,Qe(t,!1),t.za("DocumentBoundsChanged",null,e.copy()),bn(t))}function Qn(t,i){for(var e=t.Ik.i;e.next();)$n(t,e.value,i);null!==t.Qb&&(i?t.Qb.vf=!1:t.Qb.H())}function $n(t,i,e){if(null!==i){for(var n=i.Pn.i;n.next();)$n(t,n.value,e);null!==i.Qb&&(e?i.Qb.vf=!1:i.Qb.H())}}function _n(t,i){if(!t.zx){var e=t.Qb,n=t.zu;t.zu=!0;var r=t.Na;t.Na=!0;try{t.Wb("Layout");for(var o=t.Ik.i;o.next();)tr(t,o.value,i);e.vf||i&&!e.PD||(e.doLayout(t),pn(t),e.vf=!0)}finally{t.Wd("Layout"),t.Ot=!e.vf,t.zu=n,t.Na=r}}}function tr(t,i,e){if(null!==i){for(var n=i.Pn.i;n.next();)tr(t,n.value,e);n=i.Qb,null===n||n.vf||e&&!n.PD||(i.jy=!i.location.J(),n.doLayout(i),i.H(Rc),n.vf=!0,dn(t,i))}}function ir(t){function i(t){var i=t.toLowerCase(),r=new l("function");e.add(t,r),e.add(i,r),n.add(t,t),n.add(i,t)}var e=new g("string",l),n=new g("string","string");i("AnimationStarting"),i("AnimationFinished"),i("BackgroundSingleClicked"),i("BackgroundDoubleClicked"),i("BackgroundContextClicked"),i("ClipboardChanged"),i("ClipboardPasted"),i("DocumentBoundsChanged"),i("ExternalObjectsDropped"),i("InitialLayoutCompleted"),i("LayoutCompleted"),i("LinkDrawn"),i("LinkRelinked"),i("LinkReshaped"),i("Modified"),i("ObjectSingleClicked"),i("ObjectDoubleClicked"),i("ObjectContextClicked"),i("PartCreated"),i("PartResized"),i("PartRotated"),i("SelectionMoved"),i("SelectionCopied"),i("SelectionDeleting"),i("SelectionDeleted"),i("SelectionGrouped"),i("SelectionUngrouped"),i("ChangingSelection"),i("ChangedSelection"),i("SubGraphCollapsed"),i("SubGraphExpanded"),i("TextEdited"),i("TreeCollapsed"),i("TreeExpanded"),i("ViewportBoundsChanged"),t.Bx=e,t.Ax=n}function er(t,i){var e=t.Ax.ta(i);return null!==e?e:t.Ax.ta(i.toLowerCase())}function nr(t,i){var e=t.Bx.ta(i);return null!==e?e:(e=t.Bx.ta(i.toLowerCase()),null!==e?e:(Ul.k("Unknown DiagramEvent name: "+i),null))}function rr(t,i){var e=!1;if(t.ob.Kj(i)&&(e=!0),e=t.dz(i,function(t){return t.T},function(t){return t instanceof Bs},!0,function(t){return t instanceof Bs},e),0!==e.count)for(e=e.i;e.next();){var n=e.value;n.el&&n.Vb()}}function or(t,i,e,n){if(null===t.md&&(t.md=new aa),t.md.Ls||t.md.group!==e||t.md.fA!==n){if(null===e){i=t.ei?Ze(t):t.Cd.copy(),i.Jf(100,100),t.md.initialize(i),i=Ul.Sf();for(var r=t.yg;r.next();){var o=r.value,s=o.layer;null!==s&&s.visible&&!s.Ac&&sr(t,o,n,i)}}else for(e.ba.J()||e.pf(),i=e.ba.copy(),i.Jf(20,20),t.md.initialize(i),i=Ul.Sf(),r=e.Mc;r.next();)o=r.value,o instanceof Ms&&sr(t,o,n,i);Ul.ic(i),t.md.group=e,t.md.fA=n,t.md.Ls=!1}else i&&fa(t.md);return t.md}function sr(t,i,e,n){if(i!==e)if(i.Ea()&&i.canAvoid()){e=i.getAvoidableRect(n),n=t.md.ro,i=t.md.po;for(var r=e.x+e.width,o=e.y+e.height,s=e.x;r>s;s+=n){for(var a=e.y;o>a;a+=i)ua(t.md,s,a);ua(t.md,s,o)}for(a=e.y;o>a;a+=i)ua(t.md,r,a);ua(t.md,r,o)}else if(i instanceof xa)for(i=i.Mc;i.next();)r=i.value,r instanceof Ms&&sr(t,r,e,n)}function ar(t,i){null===t.md||t.md.Ls||null!==i&&!i.canAvoid()||(t.md.Ls=!0)}function hr(t,i){t.Pt.assign(i),fr(t,t.Pt).De(t.position)?ur(t):lr(t)}function lr(t){-1===t.Zm&&(t.Zm=Ul.setInterval(function(){if(-1!==t.Zm){ur(t);var i=t.N.event;if(null!==i){var e=fr(t,t.Pt);e.De(t.position)||(t.position=e,t.N.da=t.XE(t.Pt),t.Hw(i,null,i.target.Y)||t.doMouseMove(),t.ei=!0,Zn(t,t.kg()),t.Md=!0,t.bf(),lr(t))}}},t.lF))}function ur(t){-1!==t.Zm&&(Ul.clearInterval(t.Zm),t.Zm=-1)}function fr(t,i){var e=t.position,n=t.SC;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return e;var r=t.ob,o=t.scale,r=Ul.Vj(0,0,r.width*o,r.height*o),s=Ul.fc(0,0);if(i.x>=r.x&&i.x<r.x+n.left){var a=Math.max(t.lt,1),a=0|a;s.x-=a,i.x<r.x+n.left/2&&(s.x-=a),i.x<r.x+n.left/4&&(s.x-=4*a)}else i.x<=r.x+r.width&&i.x>r.x+r.width-n.right&&(a=Math.max(t.lt,1),a|=0,s.x+=a,i.x>r.x+r.width-n.right/2&&(s.x+=a),i.x>r.x+r.width-n.right/4&&(s.x+=4*a));return i.y>=r.y&&i.y<r.y+n.top?(a=Math.max(t.mt,1),a|=0,s.y-=a,i.y<r.y+n.top/2&&(s.y-=a),i.y<r.y+n.top/4&&(s.y-=4*a)):i.y<=r.y+r.height&&i.y>r.y+r.height-n.bottom&&(a=Math.max(t.mt,1),a|=0,s.y+=a,i.y>r.y+r.height-n.bottom/2&&(s.y+=a),i.y>r.y+r.height-n.bottom/4&&(s.y+=4*a)),s.De(Au.Wj)||(e=new m(e.x+s.x/o,e.y+s.y/o)),Ul.ic(r),Ul.v(s),e}function cr(t,i){if(t.Lb.Mi(),t.bf(),null===t.ib)return null;"object"!=typeof i&&Ul.k("properties argument must be an Object.");var e=!1,n=i.size||null,r=i.scale||null;void 0!==i.scale&&isNaN(i.scale)&&(r="NaN");var o=i.maxSize;void 0===i.maxSize&&(e=!0,o="svg"===i.context?new w(1/0,1/0):new w(2e3,2e3));var s=i.position||null,a=i.parts||null,h=void 0===i.padding?1:i.padding,l=i.background||null,u=i.omitTemporary;void 0===u&&(u=!0);var f=i.document||document,c=i.elementFinished||null,p=i.showTemporary;void 0===p&&(p=!u),u=i.showGrid,void 0===u&&(u=p),null!==n&&isNaN(n.width)&&isNaN(n.height)&&(n=null),"number"==typeof h?h=new j(h):h instanceof j||(h=new j(0)),h.left=Math.max(h.left,0),h.right=Math.max(h.right,0),h.top=Math.max(h.top,0),h.bottom=Math.max(h.bottom,0),t.qn=!1,Je(t);var d=new V(null,f),y=d.getContext("2d"),v=d;if(!(n||r||a||s))return d.width=t.Ab+Math.ceil(h.left+h.right),d.height=t.zb+Math.ceil(h.top+h.bottom),"svg"===i.context&&(y=v=new z(d.Dd,f,c),y instanceof z&&(t.qn=!0)),vn(t,y,h,new w(d.width,d.height),t.$b,t.Ma,a,l,p,u),t.qn=!0,v;var g=t.Eb.Pv,b=new m(0,0),x=t.Cd.copy();if(x.tI(t.padding),p)for(var M=!0,M=t.Zb.n,P=M.length,T=0;P>T;T++){var S=M[T];if(S.visible&&S.Ac)for(var C=S.Db.n,S=C.length,N=0;S>N;N++){var D=C[N];D.uz&&D.Ea()&&(D=D.ba,D.J()&&x.Th(D))}}if(b.x=x.x,b.y=x.y,null!==a){var A,M=!0,C=a.i;for(C.reset();C.next();)P=C.value,P instanceof es&&(D=P,S=D.layer,null!==S&&!S.visible||null!==S&&!p&&S.Ac||!D.Ea()||(D=D.ba,D.J()&&(M?(M=!1,A=D.copy()):A.Th(D))));M&&(A=new k(0,0,0,0)),x.width=A.width,x.height=A.height,b.x=A.x,b.y=A.y}return null!==s&&s.J()&&(b=s,r||(r=g)),M=C=0,null!==h&&(C=h.left+h.right,M=h.top+h.bottom),T=P=0,null!==n&&(P=n.width,T=n.height,isFinite(P)&&(P=Math.max(0,P-C)),isFinite(T)&&(T=Math.max(0,T-M))),A=s=0,null!==n&&null!==r?("NaN"===r&&(r=g),n.J()?(s=P,A=T):isNaN(T)?(s=P,A=x.height*r):(s=x.width*r,A=T)):null!==n?n.J()?(r=Math.min(P/x.width,T/x.height),s=P,A=T):isNaN(T)?(r=P/x.width,s=P,A=x.height*r):(r=T/x.height,s=x.width*r,A=T):null!==r?"NaN"===r&&o.J()?(r=Math.min((o.width-C)/x.width,(o.height-M)/x.height),r>g?(r=g,s=x.width,A=x.height):(s=o.width,A=o.height)):(s=x.width*r,A=x.height*r):(r=g,s=x.width,A=x.height),null!==h?(s+=C,A+=M):h=new j(0),null!==o&&(n=o.width,o=o.height,"svg"!==i.context&&e&&!Hf&&(s>n||A>o)&&(Ul.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(s)+"x"+Math.ceil(A)+" vs 2000x2000) Consider increasing the max size."),Hf=!0),isNaN(n)&&(n=2e3),isNaN(o)&&(o=2e3),isFinite(n)&&(s=Math.min(s,n)),isFinite(o)&&(A=Math.min(A,o))),d.width=Math.ceil(s),d.height=Math.ceil(A),"svg"===i.context&&(y=v=new z(d.Dd,f,c),y instanceof z&&(t.qn=!0)),vn(t,y,h,new w(Math.ceil(s),Math.ceil(A)),r,b,a,l,p,u),t.qn=!0,v}function pr(){this.DF="63ad05bbe23a1786468a4c741b6d2",this.DF===this._tk?this.wh=!0:dr(this,!1)}function dr(i,e){var n="f",r=t[Ul.Da("76a715b2f73f148a")][Ul.Da("72ba13b5")];if(Ul.Da("77bb5bb2f32603de")===t[Ul.Da("76a715b2f73f148a")][Ul.Da("6aba19a7ec351488")])try{if(i.wh=!t[Ul.Da("4da118b7ec2108")]([Ul.Da("5bb806bfea351a904a84515e1b6d38b6")])([Ul.Da("49bc19a1e6")])([Ul.Da("59bd04a1e6380fa5539b")])([Ul.Da("7bb8069ae7")]===Ul.Da(Ul.adym)),!1===i.wh)return;if(i.wh=!t[Ul.Da("4da118b7ec2108")]([Ul.Da("5bb806bfea351a904a84515e1b6d38b6")])([Ul.Da("49bc19a1e6")])([Ul.Da("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([Ul.Da("7bb8069ae7")]===Ul.Da(Ul.adym)),!1===i.wh)return}catch(o){}for(var s=r[Ul.Da("76ad18b4f73e")],a=r[Ul.Da("73a612b6fb191d")](Ul.Da("35e7"))+2;s>a;a++)n+=r[a];r=n[Ul.Da("73a612b6fb191d")](Ul.Da(Ul.adym)),0>r&&Ul.Da(Ul.adym)!==Ul.Da("7da71ca0ad381e90")&&(r=n[Ul.Da("73a612b6fb191d")](Ul.Da("76a715b2ef3e149757"))),i.wh=!(r>=0&&r<n[Ul.Da("73a612b6fb191d")](Ul.Da("35"))),i.wh&&(n=t.document[Ul.Da("79ba13b2f7333e8846865a7d00")]("div"),r=Ul.Da("02cncncn"),"."===r[0]&&(r=r[Ul.Da("69bd14a0f724128a44")](1)),n[Ul.Da("79a417a0f0181a8946")]=r,t.document[Ul.Da("78a712aa")]?(t.document[Ul.Da("78a712aa")][Ul.Da("7bb806b6ed32388c4a875b")](n),r=t[Ul.Da("7dad0290ec3b0b91578e5b40007031bf")](n)[Ul.Da("7dad0283f1390b81519f4645156528bf")](Ul.Da("78a704b7e62456904c9b12701b6532a8")),t.document[Ul.Da("78a712aa")][Ul.Da("68ad1bbcf533388c4a875b")](n),r&&-1!==r.indexOf(Ul.Da(Ul.XF))&&-1!==r.indexOf(Ul.Da(Ul.YF))&&(i.wh=!1)):(i.wh=null,e&&(i.wh=!1)))}function yr(i,e){void 0!==e&&null!==e||Ul.k("Diagram setup requires an argument DIV."),null!==i.Jb&&Ul.k("Diagram has already completed setup."),"string"==typeof e?i.Jb=t.document.getElementById(e):e instanceof HTMLDivElement?i.Jb=e:Ul.k("No DIV or DIV id supplied: "+e),null===i.Jb&&Ul.k("Invalid DIV id; could not get element with id: "+e),void 0!==i.Jb.Y&&Ul.k("Invalid div id; div already has a Diagram associated with it."),"static"===t.getComputedStyle(i.Jb,null).position&&(i.Jb.style.position="relative"),i.Jb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",i.Jb.style["-ms-touch-action"]="none",i.Jb.innerHTML="",i.Jb.Y=i;var n=new V(i);n.Dd.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",void 0!==n.style&&(n.style.position="absolute",n.style.top="0px",n.style.left="0px","rtl"===t.getComputedStyle(i.Jb,null).getPropertyValue("direction")&&(i.wB=!0),n.style.zIndex="2",n.style.FK="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none"),i.Ab=i.Jb.clientWidth||1,i.zb=i.Jb.clientHeight||1,i.ib=n,i.Gg=n.getContext("2d");var r=i.Gg;i.nf=i.computePixelRatio(),kn(i,i.Ab,i.zb),i.Zw=r[Ul.Da("7eba17a4ca3b1a8346")][Ul.Da("78a118b7")](r,Ul.wl,4,4),i.Jb.insertBefore(n.Dd,i.Jb.firstChild),n=new V(null),n.width=1,n.height=1,i.Dx=n,i.dB=n.getContext("2d");var n=Ul.createElement("div"),r=Ul.createElement("div"),o=Ul.createElement("div"),s=Ul.createElement("div");n.style.position="absolute",n.style.overflow="auto",n.style.width=i.Ab+"px",n.style.height=i.zb+"px",n.style.zIndex="1",r.style.position="absolute",r.style.overflow="auto",r.style.width=i.Ab+"px",r.style.height=i.zb+"px",r.style.zIndex="1",o.style.position="absolute",o.style.width="1px",o.style.height="1px",s.style.position="absolute",s.style.width="1px",s.style.height="1px",i.Jb.appendChild(n),i.Jb.appendChild(r),n.appendChild(o),r.appendChild(s),n.onscroll=i.LB,n.onmousedown=i.Ru,n.ontouchstart=i.Ru,n.Y=i,n.bC=!0,r.onscroll=i.LB,r.onmousedown=i.Ru,r.ontouchstart=i.Ru,r.Y=i,r.cC=!0,i.uj=n,i.vj=r,i.ty=o,i.uy=s,i.hE=Ul.gD(function(){i.im=null,i.ma()},300,!1),i.aF=Ul.gD(function(){Ye(i)},250,!1),i.preventDefault=function(t){return t.preventDefault(),!1},i.Qo=function(t){if(i.isEnabled){i.Jl=!0;var e=i.Jc;Ul.Dm&&e.jl?(t.preventDefault(),t.simulated=!0,i.Ir=t):(i.Jc=i.Ob,i.Ob=e,rn(i,i,t,e,!0),i.Hw(t,null,t.target.Y)||(i.doMouseMove(),i.Va.isBeyondDragSize()&&(en(i),i.Ol=0)))}},i.Po=function(t){if(i.isEnabled){i.Jl=!0;var e=i.Jc;if(Ul.Dm&&null!==i.Ir)i.Ir=t,t.preventDefault();else if(Ul.Dm&&400>t.timeStamp-i.Pl)t.preventDefault();else if(i.Jc=i.Ob,i.Ob=e,rn(i,i,t,e,!0),e.Wk=!0,e.Te=t.detail,i.nk=e.copy(),!0===e.Vp.simulated)t.preventDefault(),t.simulated=!0;else if(nf=null,i.doMouseDown(),1===t.button)return t.preventDefault(),!1}},i.So=function(t){if(i.isEnabled){i.Jl=!0;var e=i.Jc;if(Ul.Dm){if(400>t.timeStamp-i.Pl)return void t.preventDefault();i.Pl=t.timeStamp}Ul.Dm&&null!==i.Ir?(i.Ir=null,t.preventDefault()):(i.Jc=i.Ob,i.Ob=e,rn(i,i,t,e,!0),e.up=!0,e.Te=t.detail,(Ul.aH||Ul.bH)&&(t.timeStamp-i.Pl<i.zC&&!i.Va.isBeyondDragSize()?i.Ol++:i.Ol=1,i.Pl=t.timeStamp,e.Te=i.Ol),e.bubbles=t.bubbles,t.target.Y&&(e.Cg=t.target.Y),i.JE(t,null,new m,e.Cg)||(i.doMouseUp(),ur(i),an(e,t)))}},i.Zg=function(t){if(i.isEnabled){var e=i.Jc;i.Jc=i.Ob,i.Ob=e,rn(i,i,t,e,!0),e.bubbles=!0,e.Uk=void 0!==t.wheelDelta?t.wheelDelta:-40*t.detail,i.doMouseWheel(),an(e,t)}},i.Ro=function(){if(i.isEnabled){i.Jl=!1;var t=i.Va;t.cancelWaitAfter(),t instanceof Pe&&t.hideToolTip()}},i.SE=function(t){if(i.isEnabled){i.kv=!1,i.Xx=!0;var e=i.Jc;i.Jc=i.Ob,i.Ob=e,on(i,t,t.targetTouches[0],e,1<t.touches.length),i.doMouseDown(),2>t.touches.length&&nn(i,e),an(e,t)}},i.RE=function(t){if(i.isEnabled){var e=i.Jc;i.Jc=i.Ob,i.Ob=e;var n=null;0<t.changedTouches.length?n=t.changedTouches[0]:0<t.targetTouches.length&&(n=t.targetTouches[0]),sn(i,t,n,e,1<t.touches.length),(i.Va.isBeyondDragSize()||1<t.touches.length)&&en(i),i.Hw(n?n:t,null,e.Cg)||(i.doMouseMove(),an(e,t))}},i.QE=function(e){if(i.isEnabled){if(en(i),i.kv)return e.preventDefault(),!1;var n=i.Jc;if(i.Jc=i.Ob,i.Ob=n,1<e.touches.length)i.yn&&(i.Lx=!1);else{var r=null,o=null;if(0<e.changedTouches.length?o=e.changedTouches[0]:0<e.targetTouches.length&&(o=e.targetTouches[0]),n.g=i,n.Te=1,null!==o){var s,a,r=t.document.elementFromPoint(o.clientX,o.clientY);r&&r.Y?(a=o,s=r.Y):(a=e.changedTouches[0],s=i),hn(s,a,n),s=o.screenX,a=o.screenY;var h=i.AB;e.timeStamp-i.Pl<i.zC&&!(25<Math.abs(h.x-s)||25<Math.abs(h.y-a))?i.Ol++:i.Ol=1,n.Te=i.Ol,i.Pl=e.timeStamp,i.AB.m(s,a)}n.hd=0,n.button=0,n.Wk=!1,n.up=!0,n.Uk=0,n.Tc=!1,n.bubbles=!1,n.event=e,n.timestamp=Date.now(),n.Cg=null===r?e.target.Y:r.Y?r.Y:null,n.pe=null,i.JE(o?o:e,null,new m,n.Cg)||(i.doMouseUp(),an(n,e),i.Xx=!1)}}},i.KH=function(t){if("touch"===t.pointerType){var e=i.WB;void 0===e[t.pointerId]&&(i.hr++,e[t.pointerId]=t),i.Df[0]=null,i.Df[1]=null;for(var n in e)if(null===i.Df[0])i.Df[0]=e[n];else if(null===i.Df[1]){i.Df[1]=e[n];break}i.isEnabled&&(i.kv=!1,e=i.Jc,i.Jc=i.Ob,i.Ob=e,on(i,t,t,e,1<i.hr),i.doMouseDown(),2>i.hr&&nn(i,e),an(e,t))}},i.MH=function(t){if("touch"===t.pointerType&&!(2>i.hr)){var e=i.Df;e[0].pointerId===t.pointerId&&(e[0]=t),e[1].pointerId===t.pointerId&&(e[1]=t),i.isEnabled&&(e=i.Jc,i.Jc=i.Ob,i.Ob=e,sn(i,t,t,e,!0),en(i),i.Hw(t,null,e.Cg)||(i.doMouseMove(),an(e,t)))}},i.LH=function(t){if("touch"===t.pointerType){var e=i.WB;void 0!==e[t.pointerId]&&(i.hr--,delete e[t.pointerId],e=i.Df,null!==e[0]&&e[0].pointerId===t.pointerId&&(e[0]=null),null!==e[1]&&e[1].pointerId===t.pointerId&&(e[1]=null))}},Je(i),Ke(i)}function vr(t){1<arguments.length&&Ul.k("Palette constructor can only take one optional argument, the DIV HTML element or its id."),Ge.call(this,t),this.Av=!0,this.Nk=!1,this.nb=!0,this.Ty=eu,this.Qb=new Ba}function gr(t){1<arguments.length&&Ul.k("Overview constructor can only take one optional argument, the DIV HTML element or its id."),Ge.call(this,t),this.nh.isEnabled=!1,this.sc=!0,this.rj=null,this.rF=this.hu=!0,this.iI("drawShadows",!1);var i=new es,e=new Po;e.stroke="magenta",e.hb=2,e.fill="transparent",e.name="BOXSHAPE",i.pl=!0,i.Zz="BOXSHAPE",i.zz="BOXSHAPE",i.tE="BOXSHAPE",i.cursor="move",i.add(e),this.zl=i,e=new ks,e.type=lc,e.Ze=ou;var n=new Ta;n.tg=!0,e.add(n),n=new Po,n.Hj=ou,n.Fb="Rectangle",n.xa=new w(64,64),n.cursor="se-resize",n.alignment=lu,e.add(n),i.rE=e,this.lm=this.Ij=!1,this.of=this.hs=!0,this.SC=0,this.Cy=Ul.createElement("canvas"),this.CF=this.Cy.getContext("2d"),this.tb.Ed=new xr,this.tb.uE=new wr;var r=this;this.click=function(){var t=r.rj;if(null!==t){var i=t.ob,e=r.N.da;t.position=new m(e.x-i.width/2,e.y-i.height/2)}},this.dE=function(){br(r)},this.cE=function(){null!==r.rj&&(r.pc(),r.ma())},this.no=Df,this.sc=!1}function mr(t){t.sc||t.vd||!1!==t.Ef||(t.Ef=!0,requestAnimationFrame(function(){if(t.Ef&&!t.vd&&(t.Ef=!1,null!==t.Jb)){if(t.vd=!0,pn(t),t.Cd.J()||Zn(t,t.kg()),null===t.Jb&&Ul.k("No div specified"),null===t.ib&&Ul.k("No canvas specified"),t.Md){var i=t.rj;if(null!==i&&!i.Lb.Vg&&!i.Lb.bd){var i=t.Gg,e=t.Cy;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.ib.width,t.ib.height),i.drawImage(e,0,0),e=t.Sd,e.reset(),1!==t.$b&&e.scale(t.scale),0===t.position.x&&0===t.position.y||e.translate(-t.Ma.x,-t.Ma.y),i.setTransform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);for(var e=t.Zb.n,n=e.length,r=0;n>r;r++)e[r].We(i,t);t.uk=!1,t.Md=!1}}t.vd=!1}}))}function br(t){var i=t.Tg;if(null!==i){var e=t.rj;if(null!==e){t.Md=!0;var e=e.ob,n=i.nt,r=Ul.ul();r.m(e.width,e.height),n.xa=r,Ul.Oj(r),t=2/t.scale,n instanceof Po&&(n.hb=t),i.location=new m(e.x-t/2,e.y-t/2)}}}function xr(){Ni.call(this),this.Ck=null}function wr(){ue.call(this)}function kr(t){1<arguments.length&&Ul.k("Brush constructor can take at most one optional argument, the Brush type."),Ul.gc(this),this.Ca=!1,void 0===t?(this.oa=Kf,this.cn="black"):"string"==typeof t?(this.oa=Kf,this.cn=t):(this.oa=t,this.cn="black");var i=this.oa;i===Uf?(this.ao=eu,this.sn=hu):this.sn=this.ao=i===Yf?ou:_l,this.hv=0,this.iu=0/0,this.Fg=this.Wu=this.Eg=null,this.kx=this.lx=0}function Mr(){Ul.gc(this),this.ea=30723,this.Ic=1,this.Pg=null,this.Ub="",this.lc=this.Ib=null,this.Ma=new m(0/0,0/0).freeze(),this.jf=new w(0/0,0/0).freeze(),this.nj=Au.op,this.lj=Au.jF,this.Sd=new N,this.Xm=new N,this.yk=new N,this.$b=this.fu=1,this.Ym=0,this.Ih=Qf,this.Gq=Au.np,this.Pc=new k(0/0,0/0,0/0,0/0).freeze(),this.Xb=new k(0/0,0/0,0/0,0/0).freeze(),this.Hc=new k(0,0,0/0,0/0).freeze(),this.Sr=this.Wp=this.Q=this.ir=this.jr=null,this.Tr=this.Xp=1/0,this.vp=this.se=tu,this.wr=0,this.tj=1,this.Cp=0,this.Wi=1,this.Ar=-1/0,this.zr=0,this.Br=Au.Wj,this.Cr=Zc,this.Jp="",this.Gc=this.P=null,this.$m=-1,this.Wl=this.Xh=this.Bl=this.$n=null}function Pr(t){t.P=new _r}function Tr(t,i,e,n,r,o,s){var a=.001,h=o.length;t.moveTo(i,e),n-=i,a=r-e,0===n&&(n=.001),r=a/n;for(var l=Math.sqrt(n*n+a*a),u=0,f=!0,c=0===s?!1:!0;l>=.1;){if(c){for(a=o[u++%h],a-=s;0>a;)a+=o[u++%h],f=!f;c=!1}else a=o[u++%h];a>l&&(a=l);var p=Math.sqrt(a*a/(1+r*r));0>n&&(p=-p),i+=p,e+=r*p,f?t.lineTo(i,e):t.moveTo(i,e),l-=a,f=!f}}function Sr(t,i,e){var n=t.zo();if(null!==n)for(var r=t.Gc.i;r.next();){var o=r.value,s=null;if(null!==o.Nm){if(s=bi(o,n,t),null===s)continue;o.Mw(t,s,e,null)}else if(o.xt){var a=i.g;null!==a&&o.Mw(t,a.ga.Zs,e,a)}else{var h=n.data;if(null===h)continue;a=i.g,null!==a&&a.Iw||o.Mw(t,h,e,a)}null!==s&&(a=n.Vv(o.tl),null!==a&&o.ZE(a,s,e))}}function Cr(t,i,e,n,r){var o=t.Pc,s=t.yk;s.reset(),qr(t,s,i,e,n,r),t.yk=s,o.x=i,o.y=e,o.width=n,o.height=r,s.Os()||s.WE(o)}function jr(t,i,e,n){return!1===t.Ag?!1:(n.multiply(t.transform),e?t.sg(i,n):t.sm(i,n))}function Nr(t,i,e,n,r){if(!1!==Ur(t)){var o=t.margin,s=o.right+o.left,o=o.top+o.bottom;i=Math.max(i-s,0),e=Math.max(e-o,0),r=r||0,n=Math.max((n||0)-s,0),r=Math.max(r-o,0);var s=t.angle,o=0,o=t.xa,a=0;t.hb&&(a=t.hb),90===s||270===s?(i=isFinite(o.height)?o.height+a:i,e=isFinite(o.width)?o.width+a:e):(i=isFinite(o.width)?o.width+a:i,e=isFinite(o.height)?o.height+a:e);var o=n||0,a=r||0,h=t instanceof to;switch(Er(t,!0)){case Zf:a=o=0,h&&(e=i=1/0);break;case tc:isFinite(i)&&i>n&&(o=i),isFinite(e)&&e>r&&(a=e);break;case _f:isFinite(i)&&i>n&&(o=i),a=0,h&&(e=1/0);break;case $f:isFinite(e)&&e>r&&(a=e),o=0,h&&(i=1/0)}var h=t.af,l=t.vg;o>h.width&&l.width<h.width&&(o=h.width),a>h.height&&l.height<h.height&&(a=h.height),n=Math.max(o/t.scale,l.width),r=Math.max(a/t.scale,l.height),h.width<n&&(n=Math.min(l.width,n)),h.height<r&&(r=Math.min(l.height,r)),i=Math.min(h.width,i),e=Math.min(h.height,e),i=Math.max(n,i),e=Math.max(r,e),(90===s||270===s)&&(o=i,i=e,e=o,o=n,n=r,r=o),t.Pc.La(),t.Oo(i,e,n,r),t.Pc.freeze(),t.Pc.J()||Ul.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.Pc.toString()),Yr(t,!1)}}function Dr(t,i,e,n,r){var o=t.ba;if(o.x=i,o.y=e,o.width=n,o.height=r,!t.xa.J()){o=t.Pc,e=t.margin,i=e.right+e.left;var s=e.top+e.bottom;switch(e=o.width+i,o=o.height+s,n+=i,r+=s,i=Er(t,!0),e===n&&o===r&&(i=Zf),i){case Zf:(e>n||o>r)&&(Yr(t,!0),Nr(t,e>n?n:e,o>r?r:o));break;case tc:Yr(t,!0),Nr(t,n,r,0,0);break;case _f:Yr(t,!0),Nr(t,n,o,0,0);break;case $f:Yr(t,!0),Nr(t,e,r,0,0)}}}function Ar(t,i,e){var n=t.Xb;0===n.width||0===n.height||isNaN(n.x)||isNaN(n.y)||(null!==t.lc&&(zr(t,i,t.lc,!0,!0),t.lc instanceof kr&&t.lc.type===Yf?(i.beginPath(),i.rect(n.x,n.y,n.width,n.height),Lr(i,t.lc)):i.fillRect(n.x,n.y,n.width,n.height)),null!==t.Ib&&(zr(t,i,t.Ib,!0,!1),t.Ib instanceof kr&&t.Ib.type===Yf?(i.beginPath(),i.rect(n.x,n.y,n.width,n.height),Lr(i,t.Ib)):i.fillRect(n.x,n.y,n.width,n.height)),t.Mj(i,e))}function Lr(t,i){if(i instanceof kr&&i.type===Yf&&!(t instanceof z)){var e=i.lx,n=i.kx;n>e?(t.scale(e/n,1),t.translate((n-e)/2,0)):e>n&&(t.scale(1,n/e),t.translate(0,(e-n)/2)),t.Ft?t.clip():t.fill(),n>e?(t.translate(-(n-e)/2,0),t.scale(1/(e/n),1)):e>n&&(t.translate(0,-(e-n)/2),t.scale(1,1/(n/e)))}else t.Ft?t.clip():t.fill()}function Fr(t){t.Ft||t.stroke()}function zr(t,i,e,n,r){if(null!==e){var o=1,s=1;if("string"==typeof e)n?i.Sm!==e&&(i.fillStyle=e,i.Sm=e):i.Tm!==e&&(i.strokeStyle=e,i.Tm=e);else if(e.type===Kf)e=e.color,n?i.Sm!==e&&(i.fillStyle=e,i.Sm=e):i.Tm!==e&&(i.strokeStyle=e,i.Tm=e);else{var a,s=t.Ha,o=s.width,s=s.height;if(r)var h=t.ba,o=h.width,s=h.height;var l=i instanceof CanvasRenderingContext2D;if(l&&(e.Fg&&e.type===Jf||e.lx===o&&e.kx===s))a=e.Fg;else{var u=h=0,f=0,c=0,p=0,d=0,d=p=0;if(r&&(h=t.ba,o=h.width,s=h.height,p=h.x,d=h.y),h=e.start.x*o+e.start.offsetX,u=e.start.y*s+e.start.offsetY,f=e.end.x*o+e.end.offsetX,c=e.end.y*s+e.end.offsetY,h+=p,f+=p,u+=d,c+=d,e.type===Uf?a=i.createLinearGradient(h,u,f,c):e.type===Yf?(d=isNaN(e.us)?Math.max(o,s)/2:e.us,isNaN(e.ut)?(p=0,d=Math.max(o,s)/2):p=e.ut,a=i.createRadialGradient(h,u,p,f,c,d)):e.type===Jf?a=i.createPattern(e.pattern,"repeat"):Ul.Kd(e.type,"Brush type"),e.type!==Jf&&(t=e.os,null!==t))for(t=t.i;t.next();)a.addColorStop(t.key,t.value);l&&(e.Fg=a,e.lx=o,e.kx=s)}n?i.Sm!==a&&(i.fillStyle=a,i.Sm=a):i.Tm!==a&&(i.strokeStyle=a,i.Tm=a)}}}function Br(t){if(0!==(2048&t.ea)==!0){var i=t.Sd;if(i.reset(),!t.Xb.J()||!t.Pc.J())return void Hr(t,!1);i.translate(t.Xb.x,t.Xb.y),i.translate(-t.Ba.x,-t.Ba.y);var e=t.Ha;qr(t,i,e.x,e.y,e.width,e.height),Hr(t,!1),Kr(t,!0)}0!==(4096&t.ea)==!0&&(i=t.S,null===i?(t.Xm.set(t.Sd),t.fu=t.scale,Kr(t,!1)):null!==i.Ff&&(e=t.Xm,e.reset(),i.Tf()?e.multiply(i.Xm):null!==i.S&&e.multiply(i.S.Xm),e.multiply(t.Sd),t.fu=t.scale*i.fu,Kr(t,!1)))}function qr(t,i,e,n,r,o){if(1!==t.scale&&i.scale(t.scale),0!==t.angle){var s=ou;t.Ze&&t.Ze.pd()&&(s=t.Ze);var a=Ul.K();if(t instanceof es&&t.ec!==t)for(e=t.ec,n=e.Ha,a.rt(n.x,n.y,n.width,n.height,s),e.yk.ab(a),a.offset(-e.Ba.x,-e.Ba.y),s=e.S;null!==s&&s!==t;)s.yk.ab(a),a.offset(-s.Ba.x,-s.Ba.y),s=s.S;else a.rt(e,n,r,o,s);i.rotate(t.angle,a.x,a.y),Ul.v(a)}}function Or(t){if(!1===Jr(t)){if(null!==t.S)t.S.R();else{var i=t.g;null!==i&&(i.Xf.add(t),t instanceof Ms&&t.sf(),i.de())}Wr(t,!0)}}function Er(t,i){var e=t.stretch,n=t.S;return null!==n&&n.oa===fc?Ir(t,n.gd(t.rc),n.fd(t.column),i):null!==n&&n.oa===uc&&n.If()===t?Rr(t,tc,i):e===Qf?null!==n?n.oa===lc&&n.If()===t?Rr(t,tc,i):(e=n.Bd,e===Qf?Rr(t,Zf,i):Rr(t,e,i)):Rr(t,Zf,i):Rr(t,e,i)}function Ir(t,i,e,n){var r=t.stretch;if(r!==Qf)return Rr(t,r,n);var o=r=null;switch(i.stretch){case $f:o=!0;break;case tc:o=!0}switch(e.stretch){case _f:r=!0;break;case tc:r=!0}return i=t.S.Bd,null===r&&(r=i===_f||i===tc),null===o&&(o=i===$f||i===tc),!0===r&&!0===o?Rr(t,tc,n):!0===r?Rr(t,_f,n):!0===o?Rr(t,$f,n):Rr(t,Zf,n)}function Rr(t,i,e){if(e)return i;if(i===Zf)return Zf;if(e=t.xa,e.J())return Zf;if(t=t.angle,!isNaN(e.width))if(90!==t&&270!==t){if(i===_f)return Zf;if(i===tc)return $f}else{if(i===$f)return Zf;if(i===tc)return _f}if(!isNaN(e.height))if(90!==t&&270!==t){if(i===$f)return Zf;if(i===tc)return _f}else{if(i===_f)return Zf;if(i===tc)return $f}return i}function Gr(t,i){t.ea=i?512|t.ea:-513&t.ea}function Vr(t,i){t.ea=i?1024|t.ea:-1025&t.ea}function Hr(t,i){t.ea=i?2048|t.ea:-2049&t.ea}function Kr(t,i){t.ea=i?4096|t.ea:-4097&t.ea}function Ur(t){return 0!==(8192&t.ea)}function Yr(t,i){t.ea=i?8192|t.ea:-8193&t.ea}function Jr(t){return 0!==(16384&t.ea)}function Wr(t,i){t.ea=i?16384|t.ea:-16385&t.ea}function Xr(t){var i={value:null};return Zr(t,i),i.value}function Zr(t,i){var e=t.S;return null===e||!Zr(e,i)&&t.visible?(i.value=t,!1):!0}function Qr(t){var i=t.T;i instanceof Ms&&(t=t.g,null===t||t.ha.gb||i.sf())}function $r(t,e){if("string"==typeof e)if(t instanceof Fo)t.text=e;else if(t instanceof Po)t.Fb=e;else if(t instanceof Vo)t.source=e;else if(t instanceof to){var r=Yl(to,e);null!==r?t.type=r:Ul.k("Unknown Panel type as an argument to GraphObject.make: "+e)}else t instanceof kr?(r=Yl(kr,e),null!==r?t.type=r:Ul.k("Unknown Brush type as an argument to GraphObject.make: "+e)):t instanceof H?(r=Yl(H,e),null!==r?t.type=r:Ul.k("Unknown Geometry type as an argument to GraphObject.make: "+e)):t instanceof Z?(r=Yl(Z,e),null!==r?t.type=r:Ul.k("Unknown PathSegment type as an argument to GraphObject.make: "+e)):Ul.k("Unable to use a string as an argument to GraphObject.make: "+e);else if(e instanceof Mr)r=e,t instanceof to||Ul.k("A GraphObject can only be added to a Panel, not to: "+t),t.add(r);else if(e instanceof ko){var o,s=e,r=t;s.ae&&r.gd?o=r.gd(s.index):!s.ae&&r.fd?o=r.fd(s.index):Ul.k("A RowColumnDefinition can only be added to a Panel, not to: "+t),o.qs(s)}else if(e instanceof i)t instanceof Bs&&e.Ae===Bs?2===(2&e.value)?t.zw=e:e===Qc||e===$c||e===_c?t.Ve=e:e===tp||e===ip||e===ep?t.es=e:e!==Wc&&e!==Zc&&Ul.k("Unknown Link enum value for a Link property: "+e):t instanceof to&&e.Ae===to?t.type=e:t instanceof Fo&&e.Ae===Fo?t.bF=e:t instanceof Po&&(e===Zf||e===ic||e===ec||e===Qf)?t.yD=e:t instanceof Vo&&(e===Zf||e===ic||e===ec)?t.RG=e:t instanceof Mr&&e.Ae===Bs?(r=t,0===e.name.indexOf("Orient")?r.Cw=e:Ul.k("Unknown Link enum value for GraphObject.segmentOrientation property: "+e)):t instanceof Mr&&e.Ae===Mr?t.stretch=e:t instanceof ko&&e.Ae===ko?t.st=e:t instanceof Ge&&e.Ae===Ge?t.no=e:t instanceof kr&&e.Ae===kr?t.type=e:t instanceof H&&e.Ae===H?t.type=e:t instanceof Z&&e.Ae===Z?t.type=e:t instanceof mi&&e.Ae===mi?t.mode=e:t instanceof ii&&e.Ae===ii?t.Ad=e:t instanceof Zh&&e.Ae===Zh?0===e.name.indexOf("Alignment")?t.alignment=e:0===e.name.indexOf("Arrangement")?t.Gf=e:0===e.name.indexOf("Compaction")?t.compaction=e:0===e.name.indexOf("Path")?t.path=e:0===e.name.indexOf("Sorting")?t.sorting=e:0===e.name.indexOf("Style")?t.AI=e:Ul.k("Unknown enum value: "+e):t instanceof ph&&e.Ae===ph?0===e.name.indexOf("Aggressive")?t.NF=e:0===e.name.indexOf("Cycle")?t.kG=e:0===e.name.indexOf("Init")?t.WG=e:0===e.name.indexOf("Layer")?t.mH=e:Ul.k("Unknown enum value: "+e):t instanceof Ba&&e.Ae===Ba?e===bp||e===xp||e===gp||e===mp?t.sorting=e:e===yp||e===vp?t.Gf=e:e===dp||e===pp?t.alignment=e:Ul.k("Unknown enum value: "+e):t instanceof qa&&e.Ae===qa?e===Ap||e===Lp||e===Np||e===Dp||e===Fp?t.sorting=e:e===Cp||e===jp||e===Tp||e===Sp?t.direction=e:e===Mp||e===kp||e===wp||e===Pp?t.Gf=e:e===Bp||e===zp?t.qw=e:Ul.k("Unknown enum value: "+e):Ul.k("No property to set for this enum value: "+e);else if(e instanceof mi)t instanceof Mr?t.bind(e):t instanceof ko?t.bind(e):Ul.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof X)t instanceof H?t.ub.add(e):Ul.k("A PathFigure can only be added to a Geometry, not to: "+t);else if(e instanceof Z)t instanceof X?t.Fa.add(e):Ul.k("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Sa)t instanceof Ge?t.Qb=e:t instanceof xa?t.Qb=e:Ul.k("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(r=0;r<e.length;r++)$r(t,e[r]);else if("object"==typeof e&&null!==e)if(t instanceof kr){o=new n;for(r in e)s=parseFloat(r),isNaN(s)?o[r]=e[r]:t.addColorStop(s,e[r]);Ul.ot(t,o)}else if(t instanceof ko){void 0!==e.row?(o=e.row,(void 0===o||null===o||1/0===o||isNaN(o)||0>o)&&Ul.k("Must specify non-negative integer row for RowColumnDefinition "+e),t.ae=!0,t.index=o):void 0!==e.column&&(o=e.column,(void 0===o||null===o||1/0===o||isNaN(o)||0>o)&&Ul.k("Must specify non-negative integer column for RowColumnDefinition "+e),t.ae=!1,t.index=o),o=new n;for(r in e)"row"!==r&&"column"!==r&&(o[r]=e[r]);Ul.ot(t,o)}else Ul.ot(t,e);else Ul.k('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function _r(){this.Zh=this.ti=this.pp=this.sp=this.rp=this.qp=this.ji=this.Qq=this.Pq=this.ki=this.li=this.mi=this.Sq=this.Rq=this.Yh=this.ci=this.Wh=null}function to(t){Mr.call(this),void 0===t?0===arguments.length?this.oa=ac:Ul.k("invalid argument to Panel constructor: undefined"):(Ul.rb(t,to,to,"type"),this.oa=t),this.ya=new l(Mr),this.Pe=Au.np,this.Kg=!1,this.oa===yc&&(this.Kg=!0),this.gq=!1,this.Mp=tu,this.bi=Qf,this.oa===fc&&io(this),this.jo=ic,this.aq=new w(10,10).freeze(),this.bq=Au.Wj,this.yl=this.rh=null,this.uq=0/0,this.Zf=this.gi=null,this.Hn="category",this.Yf=null,this.vi=new k(0/0,0/0,0/0,0/0),this.hm=null,this.yh=!1,this.xr=null
}function io(t){t.Xi=Au.np,t.uh=1,t.ai=null,t.Dl=null,t.th=1,t.sh=null,t.Cl=null,t.yd=[],t.rd=[],t.am=xc,t.Al=xc,t.ui=0,t.hi=0}function eo(t,i,e,n){for(var r=n.length,o=t.ba,s=e?t.gd(0):t.fd(0),a=0;r>a;a++){var h=n[a];if(void 0!==h&&h!==s&&0!==h.Qa){var l=h.ep;isNaN(l)&&(l=e?t.uh:t.th);var u=h.dp;if(null===u&&(u=e?t.ai:t.sh),0!==l&&null!==u){zr(t,i,u,!1,!1);var u=!1,f=!0,c=h.gI;null!==c&&(u=!0,void 0!==i.setLineDash?(i.setLineDash(c),i.lineDashOffset=t.dd):void 0!==i.webkitLineDash?(i.webkitLineDash=c,i.webkitLineDashOffset=t.dd):void 0!==i.mozDash?(i.mozDash=c,i.mozDashOffset=t.dd):f=!1),i.beginPath();var p=h.position+l;e?p>o.height&&(l-=p-o.height):p>o.width&&(l-=p-o.width),h=h.position+l/2,i.lineWidth=l,p=t.padding,e?(h+=p.top,l=p.left,p=o.width-p.right,u&&!f?Tr(i,l,h,p,h,c,0):(i.moveTo(l,h),i.lineTo(p,h))):(h+=p.left,l=p.top,p=o.height-p.bottom,u&&!f?Tr(i,h,l,h,p,c,0):(i.moveTo(h,l),i.lineTo(h,p))),i.stroke(),u&&(void 0!==i.setLineDash?(i.setLineDash(Ul.mh),i.lineDashOffset=0):void 0!==i.webkitLineDash?(i.webkitLineDash=Ul.mh,i.webkitLineDashOffset=0):void 0!==i.mozDash&&(i.mozDash=null,i.mozDashOffset=0))}}}}function no(t,i,e,n,r){for(var o=n.length,s=t.ba,a=0;o>a;a++){var h=n[a];if(void 0!==h&&null!==h.background&&h.Zy!==r&&0!==h.Qa){var l=e?s.height:s.width;if(!(h.position>l)){var u=h.lg(),f=h.ep;isNaN(f)&&(f=e?t.uh:t.th);var c=h.dp;null===c&&(c=e?t.ai:t.sh),null===c&&(f=0),u-=f,f=h.position+f,u+=h.Qa,f+u>l&&(u=l-f),0>=u||(l=t.padding,zr(t,i,h.background,!0,!1),e?i.fillRect(l.left,f+l.top,s.width-(l.left+l.right),u):i.fillRect(f+l.left,l.top,u,s.height-(l.top+l.bottom)))}}}}function ro(t,i,e){if(0!==t%i)return!1;i=e.length;for(var n=0;i>n;n++)if(0===t%e[n])return!1;return!0}function oo(t){return"LineV"===t||"BarV"===t}function so(t,i,e){if(e(t,i),i instanceof to){i=i.ya.n;for(var n=i.length,r=0;n>r;r++)so(t,i[r],e)}}function ao(t,i){ho(t,t,i)}function ho(t,i,e){e(i),i=i.ya.n;for(var n=i.length,r=0;n>r;r++){var o=i[r];o instanceof to&&ho(t,o,e)}}function lo(t,i,e){if(e(i),i instanceof to){i=i.ya.n;for(var n=i.length,r=0;n>r;r++)lo(t,i[r],e)}}function uo(t,i,e){if(e(i))return i;if(i instanceof to){i=i.ya.n;for(var n=i.length,r=0;n>r;r++){var o=uo(t,i[r],e);if(null!==o)return o}}return null}function fo(t){t=t.ya.n;for(var i=t.length,e=0,n=0;i>n;n++){var r=t[n];if(r instanceof to)e=Math.max(e,fo(r));else if(r instanceof Po){t:{if(!r.Rg)switch(r.tn){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":r=0;break t}r=r.Sg/2*r.gm*r.Hi()}e=Math.max(e,r)}}return e}function co(t,i,e,n){for(var r=t.ya.n,o=r.length;o--;){var s=r[o];if(s.visible){var a=s.ba,h=t.Ha;a.x>h.width||a.y>h.height||0>a.x+a.width||0>a.y+a.height||(s instanceof to&&co(s,i,e,n),null!==i&&(s=i(s)),null===s||null!==e&&!e(s)||n.add(s))}}}function po(t){var i=t.A;return(void 0===i||i===tu)&&(i=null),null===i&&t instanceof Po&&(t=t.Pa,null!==t&&(i=t.A)),null===i&&(i=iu),i}function yo(t){var i=t.B;return(void 0===i||i===tu)&&(i=null),null===i&&t instanceof Po&&(t=t.Pa,null!==t&&(i=t.B)),null===i&&(i=lu),i}function vo(t){return t=t.yl,null!==t&&t.Ca}function go(t){var i=t.yl;if(null===i)null!==t.data&&Ul.k("Template cannot have .data be non-null: "+t),t.yl=i=new l(mi);else if(i.Ca)return;var e=new l(Mr);so(t,t,function(t,n){var r=n.Gc;if(null!==r)for(Vr(n,!1),r=r.i;r.next();){var o=r.value;if(o.mode===Qu&&Vr(n,!0),null!==o.Nm){var s=bi(o,t,n);null!==s&&(e.add(s),null===s.$n&&(s.$n=new l(mi)),s.$n.add(o))}i.add(o)}if(n instanceof to&&n.type===fc){if(0<n.yd.length)for(r=n.yd,o=r.length,s=0;o>s;s++){var a=r[s];if(void 0!==a&&null!==a.Gc)for(var h=a.Gc.i;h.next();){var u=h.value;u.fg=a,u.Ay=2,u.mv=a.index,i.add(u)}}if(0<n.rd.length)for(r=n.rd,o=r.length,s=0;o>s;s++)if(a=r[s],void 0!==a&&null!==a.Gc)for(h=a.Gc.i;h.next();)u=h.value,u.fg=a,u.Ay=1,u.mv=a.index,i.add(u)}});for(var n=e.i;n.next();){var r=n.value;if(null!==r.$n){Vr(r,!0);for(var o=r.$n.i;o.next();){var s=o.value;null===r.Gc&&(r.Gc=new l(mi)),r.Gc.add(s)}}r.$n=null}for(n=i.i;n.next();)if(r=n.value,o=r.fg,null!==o){r.fg=null;var a=r.Lw,h=a.indexOf(".");h>0&&o instanceof to&&(s=a.substring(0,h),a=a.substr(h+1),h=o.je(s),null!==h?(o=h,r.Lw=a):Ul.trace('Warning: unable to find GraphObject named "'+s+'" for Binding: '+r.toString())),o instanceof ko?(r.tl=Ul.Uc(o.S),o.S.$m=r.tl):(r.tl=Ul.Uc(o),o.$m=r.tl)}i.freeze(),t instanceof es&&t.Fd()&&(Nr(t,1/0,1/0),t.zc())}function mo(t){return t.type===lc||t.type===uc||t.type===dc||t.type===fc&&0<t.ya.length&&(t=t.ya.ja(0),t.tg&&t instanceof to&&(t.type===cc||t.type===pc))?!0:!1}function bo(t,i,e){if(!(void 0===i||null===i||0>e)){var n=t.getCategoryForItemData(i,e),n=t.findTemplateForItemData(i,e,n);if(null!==n){go(n),n=n.copy(),"object"==typeof i&&(null===t.Yf&&(t.Yf=new g(Object,to)),t.Yf.add(i,n));var r=e;mo(t)&&r++,t.Yd(r,n),xo(t,r,e),n.data=i}}}function xo(t,i,e){for(t=t.ya;i<t.length;){var n=t.ja(i);if(n instanceof to){var r=i,o=e;n.type===cc?n.rc=r:n.type===pc&&(n.column=r),n.iH=o}i++,e++}}function wo(t){t=t.ya.n;for(var i=t.length,e=0;i>e;e++){var n=t[e];if(n instanceof Vl||n instanceof to&&wo(n))return!0}return!1}function ko(){Ul.gc(this),this.Pg=null,this.xu=!0,this.ud=0,this.Qe=0/0,this.oj=0,this.mj=1/0,this.se=tu,this.Ma=this.yb=0,this.Gc=null,this.Jr=mc,this.Ih=Qf,this.Gr=this.wj=null,this.Hr=0/0,this.Ib=this.Eh=null,this.Ip=!1}function Mo(t){if(t.st===mc){var i=t.Pg;return t.ae?i.bI:i.ZF}return t.st}function Po(){Mr.call(this),this.Pa=null,this.tn="None",this.Rg=!1,this.Zp=Qf,this.jk=null,this.yc=this.kd="black",this.Sg=1,this.co="butt",this.eo="miter",this.gm=10,this.fm=null,this.dd=0,this.si=this.ri=tu,this.dr=this.cr=0/0,this.hq=!1,this.nq=!0,this.gr=null,this.wn=this.fo="None",this.eq=1}function To(t,i,e,n){var r=.001,o=n.Ba,s=o.width,o=o.height,a=0,h=0,l=0,u=0,r=e.length;if(!(4>r)){for(var a=e[0],h=e[1],f=0,c=0,p=0,d=l=0,y=c=0,v=Ul.eb(),g=2;r>g;g+=2)l=e[g],u=e[g+1],f=l-a,c=u-h,0===f&&(f=.001),p=c/f,d=Math.atan2(c,f),c=Math.sqrt(f*f+c*c),a=[],a[0]=f,a[1]=d,a[2]=p,a[3]=c,v.push(a),y+=c,a=l,h=u;a=e[0],h=e[1],e=0;for(var r=s,u=s/2,g=0===u?!1:!0,c=0,l=v[c],f=l[0],d=l[1],p=l[2],l=l[3],m=0;y>=.1;){if(0===m&&(g?(r=s,e++,r-=u,y-=u,g=!1):(r=s,e++),0===r&&(r=1)),r>y)return void Ul.ra(v);r>l?(m=r-l,r=l):m=0;var b=Math.sqrt(r*r/(1+p*p));if(0>f&&(b=-b),a+=b,h+=p*b,t.translate(a,h),t.rotate(d),t.translate(-(s/2),-(o/2)),0===m&&n.Mj(t,i),t.translate(s/2,o/2),t.rotate(-d),t.translate(-a,-h),y-=r,l-=r,0!==m){if(c++,c===v.length)return void Ul.ra(v);l=v[c],f=l[0],d=l[1],p=l[2],l=l[3],r=m}}Ul.ra(v)}}function So(t,i,e,n){var r=.001,o=e.length,s=0,a=0,h=0,l=0,r=i.length;if(!(4>r))if(s=i[0],a=i[1],4===r)Tr(t,s,a,i[2],i[3],e,n);else{t.moveTo(s,a);for(var u=0,f=0,c=0,p=f=h=0,d=Ul.eb(),y=2;r>y;y+=2)h=i[y],l=i[y+1],u=h-s,f=l-a,0===u&&(u=.001),c=f/u,f=Math.sqrt(u*u+f*f),s=[],s[0]=u,s[1]=c,s[2]=f,d.push(s),p+=f,s=h,a=l;s=i[0],a=i[1],i=0;for(var l=!0,r=e[i%o],y=0!==n,f=0,h=d[f],u=h[0],c=h[1],h=h[2],v=0;p>=.1;){0===v&&(r=e[i%o],i++,y&&(n%=r,r-=n,y=!1)),r>p&&(r=p),r>h?(v=r-h,r=h):v=0;var g=Math.sqrt(r*r/(1+c*c));if(0>u&&(g=-g),s+=g,a+=c*g,l?t.lineTo(s,a):t.moveTo(s,a),p-=r,h-=r,0!==v){if(f++,f===d.length)return void Ul.ra(d);h=d[f],u=h[0],c=h[1],h=h[2],r=v}else l=!l}Ul.ra(d)}}function Co(t,i,e){if(!1!==Ur(t)){t.Pc.La();var n=t.Sg;if(0===n){var r=t.T;r instanceof ks&&r.type===dc&&r.vc instanceof Po&&(n=r.vc.hb)}n*=t.$b,Cr(t,-(n/2),-(n/2),i+n,e+n),i=t.Pc,e=t.af,n=t.vg,i.width=Math.min(e.width,i.width),i.height=Math.min(e.height,i.height),i.width=Math.max(n.width,i.width),i.height=Math.max(n.height,i.height),t.Pc.freeze(),t.Pc.J()||Ul.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.Pc.toString()),Yr(t,!1)}}function jo(t){var i=t.yD;return t.Rg?i===Qf?tc:i:i===Qf?Au.Uw[t.Fb].Bd:i}function No(t,i,e,n,r){return t=e.x-t,i=e.y-i,i=t*t+i*i,n>i?(r.x=e.x,r.y=e.y,i):n}function Do(t,i,e,n,r,o,s,a,h){var l=!1,u=(r-s)*(i-n)-(o-a)*(t-e);return 0===u?!1:(h.x=((r*a-o*s)*(t-e)-(r-s)*(t*n-i*e))/u,h.y=((r*a-o*s)*(i-n)-(o-a)*(t*n-i*e))/u,(i>n?i-n:n-i)>(t>e?t-e:e-t)?(r=n>i?i:n,t=n>i?n:i,(h.y>r||Au.mb(h.y,r))&&(h.y<t||Au.mb(h.y,t))&&(l=!0)):(r=e>t?t:e,t=e>t?e:t,(h.x>r||Au.mb(h.x,r))&&(h.x<t||Au.mb(h.x,t))&&(l=!0)),l)}function Ao(t,i,e,n){if(!t.bl(i,e,n))return!1;t=i.x,i=i.y;var r=e.x;e=e.y;var o=n.x;if(n=n.y,t===r){var s=0;return t=0,e>i?(s=i,t=e):(s=e,t=i),n>=s&&t>=n}return r>t?(s=t,t=r):s=r,o>=s&&t>=o}function Lo(t){var i=t.g;null!==i&&i.ha.gb||(t.Cw=np,"None"!==t.fo?(t.Pf=-1,t.Hj=cu):"None"!==t.wn&&(t.Pf=0,t.Hj=new D(1-cu.x,cu.y)))}function Fo(){Mr.call(this),this.ie="",this.yc="black",this.Hg="13px sans-serif",this.Rd="start",this.kq=!0,this.Kl=this.Ll=!1,this.Ek=Ac,this.jm=Dc,this.Gu=this.ve=0,this.vn=this.ay=this.by=null,this.ej=new Go,this.Tp=!1,this.kf=this.Hk=this.Rr=null,this.zj=this.yj=0,this.ii=1/0}function zo(t,i){var e=t.Hg;null!==e&&i.Et!==e&&(i.font=e,i.Et=e)}function Bo(t,i,e,n){i=i.replace(/^\s+|\s+$/g,"");var r=0,o=0,s=0,a=t.Hg,o=t.yj+t.zj,h=Math.max(0,Eo(t)+o),s=t.Ek===Lc?Io(a):0;if(t.ve>=t.ii)return new w(0,h);if(t.jm===jc){if(e.wi=1,o=Oo(i,a),0===s||n>=o)return e.Oe=o,e.gf.push(e.Oe),e.te.push(i),new w(o,h);var l=qo(i);i=i.substr(l.length);for(var u=qo(i),o=Oo(l+u,a);0<u.length&&n>=o;)l+=u,i=i.substr(u.length),u=qo(i),o=Oo((l+u).replace(/^\s+|\s+$/g,""),a);for(l+=u.replace(/^\s+|\s+$/g,""),n=Math.max(1,n-s);Oo(l,a)>n&&1<l.length;)l=l.substr(0,l.length-1);return l+=Tc,s=Oo(l,a),e.gf.push(s),e.Oe=s,e.te.push(l),new w(s,h)}var f=0;for(0===i.length&&(f=1,e.gf.push(0),e.te.push(i));0<i.length;){for(l=qo(i),i=i.substr(l.length);Oo(l,a)>n;){for(u=1,o=Oo(l.substr(0,u),a),s=0;n>=o;)u++,s=o,o=Oo(l.substr(0,u),a);if(1===u?(e.gf[t.ve+f]=o,r=Math.max(r,o)):(e.gf[t.ve+f]=s,r=Math.max(r,s)),u--,1>u&&(u=1),e.te[t.ve+f]=l.substr(0,u),f++,l=l.substr(u),t.ve+f>t.ii)break}for(u=qo(i),o=Oo(l+u,a);0<u.length&&n>=o;)l+=u,i=i.substr(u.length),u=qo(i),o=Oo((l+u).replace(/^\s+|\s+$/g,""),a);if(l=l.replace(/^\s+|\s+$/g,""),""!==l&&(0===u.length?(e.gf.push(o),r=Math.max(r,o)):(s=Oo(l,a),e.gf.push(s),r=Math.max(r,s)),e.te.push(l),f++,t.ve+f>t.ii))break}return e.wi=Math.min(t.ii,f),e.Oe=Math.max(e.Oe,r),new w(e.Oe,h*e.wi)}function qo(t){for(var i=t.length,e=0;i>e&&" "!==t.charAt(e);)e++;for(;i>e&&" "===t.charAt(e);)e++;return e>=i?t:t.substr(0,e)}function Oo(t,i){return Sc!==i&&(Sc=Cc.font=i),Cc.measureText(t).width}function Eo(t){if(null!==t.vn)return t.vn;var i=t.Hg;Sc!==i&&(Sc=Cc.font=i);var e=0;return void 0!==wc[i]&&5e3>kc?e=wc[i]:(e=1.3*Cc.measureText("M").width,wc[i]=e,kc++),t.vn=e}function Io(t){Sc!==t&&(Sc=Cc.font=t);var i=0;return void 0!==Mc[t]&&5e3>Pc?i=Mc[t]:(i=Cc.measureText(Tc).width,Mc[t]=i,Pc++),i}function Ro(t,i,e){var n=t.ie.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),r=t.yj+t.zj,r=Math.max(0,Eo(t)+r);if(0===n.length)return e.Oe=0,t.ve=1,r;if(!t.iw){var o=n.indexOf("\n",0);o>=0&&(n=n.substr(0,o))}for(var o=0,s=t.ve=0,a=-1,h=!1;!h;)a=n.indexOf("\n",s),-1===a&&(a=n.length,h=!0),a>=s&&(s=n.substr(s,a-s),t.jm!==jc?(e.wi=0,s=Bo(t,s,e,i),o+=s.height,t.ve+=e.wi):(Bo(t,s,e,i),o+=r,t.ve++),t.ve===t.ii&&(h=!0)),s=a+1;return t.Gu=o}function Go(){this.Oe=this.wi=0,this.gf=[],this.te=[]}function Vo(){Mr.call(this),this.Me=null,this.Lr="",this.xj=new k(0/0,0/0,0/0,0/0).freeze(),this.zn=tc,this.Qr=this.Aj=this.kf=null,this.Sx=!1,this.Zn=null,this.JB=0}function Ho(){var i=qc;if(0===i.length)for(var e=t.document.getElementsByTagName("canvas"),n=e.length,r=0;n>r;r++){var o=e[r];o.parentElement&&o.parentElement.Y&&i.push(o.parentElement.Y)}return i}function Ko(t,i){t.Ux=!0,t.ou=!1;for(var e=null,n=Ho(),r=n.length,o=0;r>o;o++){var s=n[o],a=s.Tn.ta(t.src);if(null!==a){for(r=a.length,o=0;r>o;o++)e=a[o],e.xa.J()||(s.VB.add(e),s.de()),null!==e.Aj&&e.Aj(e,i);s.ma()}}}function Uo(t,i){t.ou=i;for(var e=null,n=Ho(),r=n.length,o=0;r>o;o++)if(e=n[o].Tn.ta(t.src),null!==e){for(var r=e.length,s=Ul.eb(),o=0;r>o;o++)s.push(e[o]);for(o=0;r>o;o++)e=s[o],null!==e.kf&&e.kf(e,i);Ul.ra(s)}}function Yo(t){this.mo=[new Wo(t,1)]}function Jo(t,i,e,n){var r=new V(null),o=r.getContext("2d"),s=1/i;r.width=e/i,r.height=n/i,i=new Wo(r.Dd,i),e=t.mo[t.mo.length-1],o.setTransform(s*e.Yo,0,0,s*e.Yo,0,0),o.drawImage(e.source,0,0),t.mo.push(i)}function Wo(t,i){this.source=t,this.Yo=i}function Xo(){this.o=new H,this.Tb=null}function Zo(t,i,e,n,r,o){null===t.o&&Ul.k("StreamGeometryContext has been closed"),void 0!==r&&!0===r?(null===t.Tb&&Ul.k("Need to call beginFigure first"),n=new Z(Iu),n.F=i,n.G=e,t.Tb.Fa.add(n)):(t.Tb=new X,t.Tb.ua=i,t.Tb.va=e,t.Tb.Ns=n,t.o.ub.add(t.Tb)),void 0!==o&&(t.Tb.En=o)}function Qo(t){null===t.o&&Ul.k("StreamGeometryContext has been closed"),null===t.Tb&&Ul.k("Need to call beginFigure first");var i=t.Tb.Fa.length;i>0&&t.Tb.Fa.ja(i-1).close()}function $o(t){null===t.o&&Ul.k("StreamGeometryContext has been closed"),null===t.Tb&&Ul.k("Need to call beginFigure first"),0<t.Tb.Fa.length&&(t.Tb.Ns=!0)}function _o(t,i,e,n,r,o,s,a){void 0===a&&(a=!1),null===t.o&&Ul.k("StreamGeometryContext has been closed"),null===t.Tb&&Ul.k("Need to call beginFigure first");var h=new Z(Gu);h.Rb=i,h.jc=e,h.df=n,h.ef=r,h.F=o,h.G=s,a&&h.close(),t.Tb.Fa.add(h)}function ts(t,i,e,n,r){var o;void 0===o&&(o=!1),null===t.o&&Ul.k("StreamGeometryContext has been closed"),null===t.Tb&&Ul.k("Need to call beginFigure first");var s=new Z(Vu);s.Rb=i,s.jc=e,s.F=n,s.G=r,o&&s.close(),t.Tb.Fa.add(s)}function is(t,i,e,n,r,o,s,a){var h;void 0===h&&(h=!1),null===t.o&&Ul.k("StreamGeometryContext has been closed"),null===t.Tb&&Ul.k("Need to call beginFigure first"),i=new Z(Ku,s,a,i,e,n,r,o),h&&i.close(),t.Tb.Fa.add(i)}function es(t){0===arguments.length?to.call(this):to.call(this,t),this.O=311807,this.wk=this.Vh="",this.ur=this.rr=this.Dr=this.xq=null,this.Fr="",this.Uh=this.Er=this.bm=null,this.tr="",this.Vn=null,this.sr=new w(0/0,0/0).freeze(),this.vr="",this.Wn=null,this.ie="",this.Bu=this.Gp=this.kk=null,this.Mg=new m(0/0,0/0).freeze(),this.Eq="",this.zk=null,this.Fq=iu,this.Oq=Au.fF,this.Hq=Au.eF,this.Qp=null,this.yq=Gc,this.em=new m(6,6).freeze(),this.dm="gray",this.cm=4,this.BB=-1,this.qF=new k,this.Bk=null,this.kj=0/0}function ns(t,i){i.tb.cf.each(function(i){i.isEnabled&&i.updateAdornments(t)})}function rs(t){0!==(16384&t.O)!=!1&&(t.updateAdornments(),t.O&=-16385,t=t.g,null!==t&&(t.Md=!0))}function os(t,i){if(!1===ps(t)){var e=t.g;null!==e&&(e.Xf.add(t),t instanceof Ms&&!e.ha.gb&&t.sf(),i||e.de()),ds(t,!0)}}function ss(t){if(!1!==ps(t)){var i=t.position,e=t.location;e.J()&&i.J()||(ls(t,i,e),t.Jg());var i=t.Ma,e=t.Xb,n=e.copy();e.La(),e.x=i.x,e.y=i.y,e.freeze(),t.sw(n,e),ds(t,!1)}}function as(t,i,e,n){void 0===n&&(n=new m),e.ne()&&(e=ou);var r=i.Ha;if(n.m(r.width*e.x+e.offsetX,r.height*e.y+e.offsetY),null===i||i===t)return n;for(i.transform.ab(n),i=i.S;null!==i&&i!==t;)i.transform.ab(n),i=i.S;return t.yk.ab(n),n.offset(-t.Pc.x,-t.Pc.y),n}function hs(t,i){var e;e=t.qF;var n;isNaN(t.kj)&&(t.kj=fo(t)),n=t.kj;var r=2*n;if(!t.il)return e.m(i.x-1-n,i.y-1-n,i.width+2+r,i.height+2+r),e;n=i.x;var r=i.y,o=i.width,s=i.height,a=t.shadowBlur,h=t.kI,o=o+a,s=s+a;return n-=a/2,r-=a/2,0<h.x?o+=h.x:(n+=h.x,o-=h.x),0<h.y?s+=h.y:(r+=h.y,s-=h.y),e.m(n-1,r-1,o+2,s+2),e}function ls(t,i,e){var n=0/0,r=0/0,o=Ul.K(),s=t.Ze,a=t.ec;s.ne()&&Ul.k("determineOffset: Part's locationSpot must be real: "+s.toString());var h=a.Ha,n=0;if(a.hb&&(n=a.Sg),o.rt(0,0,h.width+n,h.height+n,s),a!==t)for(a.hb&&o.offset(-n/2,-n/2),a.transform.ab(o),s=a.S;null!==s&&s!==t;)s.transform.ab(o),s=s.S;t.yk.ab(o),o.offset(-t.Pc.x,-t.Pc.y),s=t.g,e.J()?(a=i.x,h=i.y,n=e.x-o.x,r=e.y-o.y,i.m(n,r),e=!1,null!==s&&(n=s.nh,n.dj?e=!0:!n.bd||t instanceof ks||Ne(n,t,"position",new m(a,h),i),e||i.x===a&&i.y===h||(n=s.cb,s.cb=!0,t.h("position",new m(a,h),i),s.cb=n))):i.J()&&(n=i.x,r=i.y,i=e.copy(),e.m(n+o.x,r+o.y),e.L(i)||null===s||(n=s.cb,s.cb=!0,t.h("location",i,e),s.cb=n)),Ul.v(o)}function us(t,i,e){ys(t,!1),t instanceof Ms&&ar(e,t),t.layer.Ac||i||e.pc(),i=t.Xb;var n=e.ob;n.J()?(vs(t)?S(i,n)||t.xf(!1):i.sg(n)&&t.xf(!0),t.updateAdornments()):e.uk=!0}function fs(t,i){var e=t.Xb;if(0!==e.width&&0!==e.height&&!isNaN(e.x)&&!isNaN(e.y)&&t.Ea()){var n=t.transform,r=t.S,o=t.Xm;o.reset(),null!==r&&(r.Tf()?o.multiply(r.Ff):null!==r.S&&o.multiply(r.S.Ff)),o.multiply(t.Sd),null!==t.lc&&(zr(t,i,t.lc,!0,!0),i.fillRect(e.x,e.y,e.width,e.height)),null===t.lc&&null===t.Ib&&(zr(t,i,"rgba(0,0,0,0.4)",!0,!1),i.fillRect(e.x,e.y,e.width,e.height)),null!==t.Ib&&(n.Os()||i.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),r=t.Ha,e=r.width,r=r.height,zr(t,i,t.Ib,!0,!1),i.fillRect(0,0,e+0,r+0),n.Os()||(e=1/(n.m11*n.m22-n.m12*n.m21),i.transform(n.m22*e,-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy))))}}function cs(t,i,e,n){i.constructor===t.constructor||Vc||(Vc=!0,Ul.trace('Should not change the class of the Part when changing category from "'+e+'" to "'+n+'"'),Ul.trace("  Old class: "+Ul.rg(t)+", new class: "+Ul.rg(i)+", part: "+t.toString())),t.ls();var r=t.data;e=t.wf;var o=t.Za,s=t.Wg,a=!0,h=!0,l=!1;if(t instanceof Ms)var u=t,a=u.Ji,h=u.Vc,l=u.kp;i.Nh(t),i.cloneProtected(t),t.Vh=n,t.R(),t.ma(),i=t.g,n=!0,null!==i&&(n=i.cb,i.cb=!0),t.rh=r,null!==r&&t.Nb(),null!==i&&(i.cb=n),r=t.wf,r!==e&&(t.wk=e,t.wf=r),t instanceof Ms&&(u=t,u.Ji=a,u.Vc=h,u.kp=l,u.Fd()&&u.H(64)),t.Za=o,t.Wg=s}function ps(t){return 0!==(32768&t.O)}function ds(t,i){t.O=i?32768|t.O:-32769&t.O}function ys(t,i){t.O=i?65536|t.O:-65537&t.O}function vs(t){return 0!==(131072&t.O)}function gs(t,i){t.O=i?1048576|t.O:-1048577&t.O}function ms(t,i){var e=i.Ra;return null!==e?1+ms(t,e):i instanceof Ms&&(e=i.ce,null!==e)?ms(t,e):0}function bs(t,i){var e=i.Ra;return null!==e?bs(t,e):i instanceof Ms&&(e=i.ce,null!==e)?bs(t,e):i}function xs(t,i,e){if(i===e||null===e)return!1;var n=i.Ra;return null===n||n!==e&&!xs(t,n,e)?i instanceof Ms&&(i=i.ce,null!==i)?xs(t,i,e):!1:!0}function ws(t){return t.Ea()?(t=t.layer,null!==t&&t.Ac?!1:!0):!1}function ks(t){0===arguments.length?es.call(this,ac):es.call(this,t),this.wf="Adornment",this.Gb=null,this.O&=-257,this.Mg=new m(0/0,0/0),this.Vi=new l(k),this.Pb=null}function Ms(t){0===arguments.length?es.call(this,ac):es.call(this,t),this.hc=new l(Bs),this.Kn=this.xk=this.Bq=this.Aq=null,this.qq=!0,this.$r=!1,this.Vr=null,this.zp=this.rq=!0,this.Ap=Au.iF,this.Qd=this.oh=null,this.kr=Yc,this.Fj=!1}function Ps(t,i){null!==i&&(null===t.oh&&(t.oh=new f(sa)),t.oh.add(i))}function Ts(t,i){if(null!==i){i.jr=null;var e=t.Ra;null===e||e.be||Ts(e,e.Xk(""))}}function Ss(t,i,e){if(Ts(t,e),!t.hc.contains(i)){t.hc.add(i);var n=t.pH;if(null!==n){var r=!0,o=t.g;null!==o&&(r=o.Na,o.Na=!0),n(t,i,e),null!==o&&(o.Na=r)}i.Bc&&(e=i.W,i=i.ca,null!==e&&null!==i&&e!==i&&(n=!0,o=t.g,null!==o&&(n=o.qd),t=n?i:e,r=n?e:i,t.Fj||(t.Fj=r),!r.Ji||null!==o&&o.ha.gb||(n?e===r&&(r.Ji=!1):i===r&&(r.Ji=!1))))}}function Cs(t,i,e){if(Ts(t,e),t.hc.remove(i)){var n=t.qH,r=t.g;if(null!==n){var o=!0;null!==r&&(o=r.Na,r.Na=!0),n(t,i,e),null!==r&&(r.Na=o)}i.Bc&&(e=!0,null!==r&&(e=r.qd),t=e?i.ca:i.W,i=e?i.W:i.ca,null!==t&&(t.Fj=!1),null===i||i.Ji||(0===i.hc.count?(i.Fj=null,null!==r&&r.ha.gb||(i.Ji=!0)):js(i)))}}function js(t){if(t.Fj=!1,0!==t.hc.count){var i=!0,e=t.g;if(null===e||!e.ha.gb){for(null!==e&&(i=e.qd),e=t.hc.i;e.next();){var n=e.value;if(n.Bc)if(i){if(n.W===t)return void(t.Ji=!1)}else if(n.ca===t)return void(t.Ji=!1)}t.Ji=!0}}}function Ns(t){null===t.Qd?t.Qd=new g("string",Mr):t.Qd.clear(),so(t,t,function(t,i){var e=i.Jd;null!==e&&t.Qd.add(e,i)}),0===t.Qd.count&&t.Qd.add("",t)}function Ds(t,i,e){var n=i.Jd;if(null!==n&&(null!==t.Qd&&t.Qd.remove(n),i=t.g,null!==i&&e)){for(e=null,n=t.qD(n);n.next();)t=n.value,null===e&&(e=Ul.eb()),e.push(t);if(null!==e){for(n=0;n<e.length;n++)t=e[n],i.remove(t);Ul.ra(e)}}}function As(t,i){var e=i.zm();return null===e?0:1+As(t,e)}function Ls(t,i,e,n,r){if(n>1)for(r=e?t.Wv():t.og();r.next();){var o=r.value;o.Bc&&(o=o.hz(t),null===o||o===t||i.contains(o)||(i.add(o),Ls(o,i,e,n-1,o.Vc)))}else Fs(t,i,e,r)}function Fs(t,i,e,n){for(var r=e?t.Wv():t.og();r.next();){var o=r.value;o.Bc&&(o=o.hz(t),null===o||o===t||i.contains(o)||(i.add(o),n&&(o.dl(),o.He(!1)),o.Vc&&(o.kp=o.Vc,Fs(o,i,e,o.kp))))}t.Vc=!1}function zs(t,i,e,n,r,o,s){for(var a=e?t.Wv():t.og();a.next();){var h=a.value;h.Bc&&(r||h.hg||h.Vb(),h=h.hz(t),null!==h&&h!==t&&!i.contains(h)&&(i.add(h),r||(h.He(!0),h.dl(),qe(o,h,s)),n>2||h.kp))&&(h.kp=!1,zs(h,i,e,n-1,h.Vc,o,s))}t.Vc=!0}function Bs(){es.call(this,dc),this.Wf=null,this.xh="",this.gg=this.Yp=null,this.Jh="",this.Ur=null,this.qr=this.pr=this.or=!1,this.sq=!0,this.tp=Zc,this.Hp=0,this.Kp=Zc,this.Lp=0/0,this.Yl=Wc,this.Kr=.5,this.ue=null,this.Qc=new l(m).freeze(),this.Xn=this.we=null,this.hg=!1,this.py=null,this.zy=!1,this.an=this.di=this.Pa=null,this.hf=0,this.nn=this.jn=null,this.Vi=new l(k),this.Dy=new m,this.qC=this.oC=null,this.jx=!1,this.Q=null}function qs(t){var i=t.W,e=t.ca;null!==i&&null!==e?Os(t,i.yG(e)):Os(t,null)}function Os(t,i){var e=t.kk;if(e!==i){null!==e&&ka(e,t),t.kk=i,null!==i&&wa(i,t);var n=t.bD;if(null!==n){var r=!0,o=t.g;null!==o&&(r=o.Na,o.Na=!0),n(t,e,i),null!==o&&(o.Na=r)}!t.hg||t.oC!==e&&t.qC!==e||t.Vb()}}function Es(t,i){null===t.ue&&(t.ue=new f(Ms)),t.ue.add(i),t.R()}function Is(t){0===t.Qc.count?t.hg=!1:(t.hg=!0,t.jn=t.l(0).copy(),t.nn=t.l(t.ka-1).copy(),ia(t,!1))}function Rs(t,i){return Math.abs(i.x-t.x)>Math.abs(i.y-t.y)?(i.x=i.x>=t.x?t.x+9e9:t.x-9e9,i.y=t.y):(i.y=i.y>=t.y?t.y+9e9:t.y-9e9,i.x=t.x),i}function Gs(t,i){var e=i.jr;return null===e&&(e=new ya,e.port=i,e.Cc=i.T,i.jr=e),ga(e,t)}function Vs(t,i){if(null===i)return ou;var e=t.vb;return e.Lc()&&(void 0===i&&(i=t.od),null!==i&&(e=i.vb)),e===tu?_l:e}function Hs(t,i){if(null===i)return ou;var e=t.xb;return e.Lc()&&(void 0===i&&(i=t.fe),null!==i&&(e=i.xb)),e===tu?_l:e}function Ks(t){var i=t.Fs;return isNaN(i)&&(t=t.od,null!==t&&(i=t.Fs)),isNaN(i)?0:i}function Us(t){var i=t.yt;return isNaN(i)&&(t=t.fe,null!==t&&(i=t.yt)),isNaN(i)?0:i}function Ys(t){if(!t.el)return!1;var i=t.points.n,e=i.length;if(4>e)return!1;t=or(t.g,!0,t.Ra,null);for(var n=1;e-2>n;n++){var r=i[n],o=i[n+1];if(!t.Jo(Math.min(r.x,o.x),Math.min(r.y,o.y),Math.abs(r.x-o.x),Math.abs(r.y-o.y)))return!0}return!1}function Js(t,i,e,n,r,o){var s=i.ro,a=i.po,h=la(i,e,n),l=e,u=n;for(0===r?l+=s:90===r?u+=a:180===r?l-=s:u-=a;h>1&&la(i,l,u)===h-1;)e=l,n=u,0===r?l+=s:90===r?u+=a:180===r?l-=s:u-=a,h-=1;o?h>1&&(180===r||0===r?e=Math.floor(e/s)*s+s/2:(90===r||270===r)&&(n=Math.floor(n/a)*a+a/2)):(e=Math.floor(e/s)*s+s/2,n=Math.floor(n/a)*a+a/2),h>1&&(o=r,l=e,u=n,0===r?(o=90,u+=a):90===r?(o=180,l-=s):180===r?(o=270,u-=a):270===r&&(o=0,l+=s),la(i,l,u)===h-1?Js(t,i,l,u,o,!1):(l=e,u=n,0===r?(o=270,u-=a):90===r?(o=0,l+=s):180===r?(o=90,u+=a):270===r&&(o=180,l-=s),la(i,l,u)===h-1&&Js(t,i,l,u,o,!1))),t.Lk(e,n)}function Ws(t,i,e,n){return t=e-t,isNaN(t)||1/0===t||-1/0===t?0/0:(0>t&&(t=-t),i=n-i,isNaN(i)||1/0===i||-1/0===i?0/0:(0>i&&(i=-i),Au.mb(t,0)?i:Au.mb(i,0)?t:Math.sqrt(t*t+i*i)))}function Xs(t,i,e,n){var r=t.ka;if(!(2>r))if(e){var o=t.l(1);e=o.x-n.x,n=o.y-n.y,o=Ws(i.x,i.y,e,n),0!==o&&(r=2===r?.5*o:o,t=Ks(t),t>r&&(t=r),e=t*(e-i.x)/o,t=t*(n-i.y)/o,i.x+=e,i.y+=t)}else o=t.l(r-2),e=o.x-n.x,n=o.y-n.y,o=Ws(i.x,i.y,e,n),0!==o&&(r=2===r?.5*o:o,t=Us(t),t>r&&(t=r),e=t*(i.x-e)/o,t=t*(i.y-n)/o,i.x-=e,i.y-=t)}function Zs(t,i,e,n){for(var r=t.ka,o=i;Au.mb(i.x,o.x)&&Au.mb(i.y,o.y);){if(e>=r)return r-1;o=t.l(e++)}if(!Au.mb(i.x,o.x)&&!Au.mb(i.y,o.y))return e-1;for(var s=o;Au.mb(i.x,o.x)&&Au.mb(o.x,s.x)&&(!n||(i.y>=o.y?o.y>=s.y:o.y<=s.y))||Au.mb(i.y,o.y)&&Au.mb(o.y,s.y)&&(!n||(i.x>=o.x?o.x>=s.x:o.x<=s.x));){if(e>=r)return r-1;s=t.l(e++)}return e-2}function Qs(t,i,e,n,r,o,s){if(!s&&ta(t)){s=[];var a=0;t.Ea()&&(a=$s(t,r,o,s));var h=r.x,h=r.y;if(a>0)if(Au.D(r.y,o.y))if(r.x<o.x)for(var l=0;a>l;){var u=Math.max(r.x,Math.min(s[l++]-5,o.x-10));i.lineTo(u+e,o.y+n);for(var h=u+e,f=Math.min(u+10,o.x);a>l;){var c=s[l];if(!(f+10>c))break;l++,f=Math.min(c+5,o.x)}c=(u+f)/2+e,c=o.y-10+n,u=f+e,f=o.y+n,t.Ve===$c?Zo(i,u,f,!1,!1):_o(i,h,c,u,c,u,f)}else for(l=a-1;l>=0;){for(u=Math.min(r.x,Math.max(s[l--]+5,o.x+10)),i.lineTo(u+e,o.y+n),h=u+e,f=Math.max(u-10,o.x);l>=0&&(c=s[l],c>f-10);)l--,f=Math.max(c-5,o.x);c=o.y-10+n,u=f+e,f=o.y+n,t.Ve===$c?Zo(i,u,f,!1,!1):_o(i,h,c,u,c,u,f)}else if(Au.D(r.x,o.x))if(r.y<o.y)for(l=0;a>l;){for(u=Math.max(r.y,Math.min(s[l++]-5,o.y-10)),i.lineTo(o.x+e,u+n),h=u+n,f=Math.min(u+10,o.y);a>l&&(c=s[l],f+10>c);)l++,f=Math.min(c+5,o.y);c=o.x-10+e,u=o.x+e,f+=n,t.Ve===$c?Zo(i,u,f,!1,!1):_o(i,c,h,c,f,u,f)}else for(l=a-1;l>=0;){for(u=Math.min(r.y,Math.max(s[l--]+5,o.y+10)),i.lineTo(o.x+e,u+n),h=u+n,f=Math.max(u-10,o.y);l>=0&&(c=s[l],c>f-10);)l--,f=Math.max(c-5,o.y);c=o.x-10+e,u=o.x+e,f+=n,t.Ve===$c?Zo(i,u,f,!1,!1):_o(i,c,h,c,f,u,f)}}i.lineTo(o.x+e,o.y+n)}function $s(t,i,e,n){var r=t.g;if(null===r||i.L(e))return 0;for(r=r.mw;r.next();){var o=r.value;if(null!==o&&o.visible)for(var o=o.Db.n,s=o.length,a=0;s>a;a++){var h=o[a];if(h instanceof Bs){if(h===t)return 0<n.length&&n.sort(function(t,i){return t-i}),n.length;if(h.Ea()&&ta(h)){var l=h.Mm;l.J()&&t.Mm.sg(l)&&!t.usesSamePort(h)&&(l=h.path,null!==l&&l.kl()&&_s(i,e,n,h))}}}}return 0<n.length&&n.sort(function(t,i){return t-i}),n.length}function _s(t,i,e,n){for(var r=Au.D(t.y,i.y),o=n.ka,s=n.l(0),a=Ul.K(),h=1;o>h;h++){var l=n.l(h);if(o-1>h){var u=n.l(h+1);s.y===l.y&&l.y===u.y?(l.x>s.x&&u.x>l.x||l.x<s.x&&u.x<l.x)&&(l=u,h++):s.x===l.x&&l.x===u.x&&(l.y>s.y&&u.y>l.y||l.y<s.y&&u.y<l.y)&&(l=u,h++)}t:{var u=a,f=t.x,c=t.y,p=i.x,d=i.y,y=s.x,s=s.y,v=l.x,g=l.y;if(Au.D(f,p)){if(!Au.D(c,d)&&Au.D(s,g)&&Math.min(c,d)<s&&Math.max(c,d)>s&&Math.min(y,v)<f&&Math.max(y,v)>f&&!Au.D(y,v)){u.x=f,u.y=s,u=!0;break t}}else if(Au.D(c,d)&&Au.D(y,v)&&Math.min(f,p)<y&&Math.max(f,p)>y&&Math.min(s,g)<c&&Math.max(s,g)>c&&!Au.D(s,g)){u.x=y,u.y=c,u=!0;break t}u.x=0,u.y=0,u=!1}u&&e.push(r?a.x:a.y),s=l}Ul.v(a)}function ta(t){return t=t.Ve,t===_c||t===$c}function ia(t,i){if(i||ta(t)){var e=t.g;null===e||e.El.contains(t)||null===t.py||e.El.add(t,t.py)}}function ea(t,i){var e=t.layer;if(null!==e&&e.visible&&!e.Ac){var n=e.g;if(null!==n)for(var r=!1,n=n.mw;n.next();){var o=n.value;if(o.visible)if(o===e)for(var r=!0,s=!1,o=o.Db.n,a=o.length,h=0;a>h;h++){var l=o[h];l instanceof Bs&&(l===t?s=!0:s&&na(t,l,i))}else if(r)for(o=o.Db.n,a=o.length,h=0;a>h;h++)l=o[h],l instanceof Bs&&na(t,l,i)}}}function na(t,i,e){if(null!==i&&null!==i.Pa&&ta(i)){var n=i.Mm;n.J()&&(t.Mm.sg(n)||e.sg(n))&&(t.usesSamePort(i)||i.le())}}function ra(t){var i=t.Wf;if(null!==i){var e=t.gg;if(null!==e){var n=t.xh,r=t.Jh;t:{if(null!==e&&null!==i.oh)for(t=i.oh.i;t.next();){var o=t.value;if(o.Uo===i&&o.at===e&&o.uw===n&&o.vw===r||o.Uo===e&&o.at===i&&o.uw===r&&o.vw===n){t=o;break t}}t=null}for(var s=null,a=null,h=i.hc.n,u=h.length,o=0;u>o;o++){var f=h[o];(f.Wf===i&&f.xh===n&&f.gg===e&&f.Jh===r||f.Wf===e&&f.xh===r&&f.gg===i&&f.Jh===n)&&(null===a?a=f:(null===s&&(s=new l(Bs),s.add(a)),s.add(f)))}if(null!==s)for(null===t&&(t=new sa,t.Uo=i,t.uw=n,t.at=e,t.vw=r,Ps(i,t),Ps(e,t)),t.links=s,i=s.n,o=0;o<i.length;o++)if(f=i[o],0===f.hf){for(e=1,n=0;n<i.length;n++)Math.abs(i[n].hf)===e&&(e++,n=-1);f.an=t,f.hf=f.W===t.Uo?e:-e,e=f.g,(null===e||e.lf)&&f.Vb()}}}}function oa(t){var i=t.an;if(null!==i){var e=t.hf;if(t.an=null,t.hf=0,i.links.remove(t),2>i.links.count)1===i.links.count&&(e=i.links.n[0],e.an=null,e.hf=0,e.Vb()),e=i.Uo,null!==i&&null!==e.oh&&e.oh.remove(i),e=i.at,null!==i&&null!==e.oh&&e.oh.remove(i);else for(e=Math.abs(e),t=0===e%2,i=i.links.i;i.next();){var n=i.value,r=Math.abs(n.hf),o=0===r%2;r>e&&t===o&&(n.hf=0<n.hf?n.hf-2:n.hf+2,n.Vb())}}}function sa(){Ul.gc(this),this.links=this.vw=this.at=this.uw=this.Uo=null}function aa(){Ul.gc(this),this.fA=this.group=null,this.Ls=!0,this.abort=!1,this.bg=this.ag=1,this.Jq=this.Iq=-1,this.he=this.ge=8,this.mc=null,this.$E=!1,this.KE=22,this.SD=111}function ha(t,i,e){return t.ag<=i&&i<=t.Iq&&t.bg<=e&&e<=t.Jq}function la(t,i,e){return ha(t,i,e)?(i-=t.ag,i/=t.ge,e-=t.bg,e/=t.he,t.mc[0|i][0|e]):0}function ua(t,i,e){ha(t,i,e)&&(i-=t.ag,i/=t.ge,e-=t.bg,e/=t.he,t.mc[0|i][0|e]=0)}function fa(t){if(null!==t.mc)for(var i=0;i<=t.ho;i++)for(var e=0;e<=t.io;e++)1<=t.mc[i][e]&&(t.mc[i][e]|=999999)}function ca(t,i,e,n,r,o,s,a,h){if(!(o>i||i>s||a>e||e>h)){var l,u;l=0|i,u=0|e;var f=t.mc[l][u];if(f>=1&&999999>f)for(r?u+=n:l+=n,f+=1;l>=o&&s>=l&&u>=a&&h>=u&&!(f>=t.mc[l][u]);)t.mc[l][u]=f,f+=1,r?u+=n:l+=n;if(l=r?u:l,r)if(n>0)for(e+=n;l>e;e+=n)ca(t,i,e,1,!r,o,s,a,h),ca(t,i,e,-1,!r,o,s,a,h);else for(e+=n;e>l;e+=n)ca(t,i,e,1,!r,o,s,a,h),ca(t,i,e,-1,!r,o,s,a,h);else if(n>0)for(i+=n;l>i;i+=n)ca(t,i,e,1,!r,o,s,a,h),ca(t,i,e,-1,!r,o,s,a,h);else for(i+=n;i>l;i+=n)ca(t,i,e,1,!r,o,s,a,h),ca(t,i,e,-1,!r,o,s,a,h)}}function pa(t,i,e,n,r,o,s,a,h,l,u){for(var f=0|i,c=0|e,p=t.mc[f][c];0===p&&f>a&&h>f&&c>l&&u>c;)if(s?c+=o:f+=o,p=t.mc[f][c],1>=Math.abs(f-n)&&1>=Math.abs(c-r))return t.abort=!0,0;for(f=0|i,c=0|e,p=t.mc[f][c],i=1,t.mc[f][c]=i;0===p&&f>a&&h>f&&c>l&&u>c;)s?c+=o:f+=o,p=t.mc[f][c],t.mc[f][c]=i,i+=1;return s?c:f}function da(t,i,e,n,r,o){if(null!==t.mc){t.abort=!1;var s=i.x,a=i.y;if(ha(t,s,a)){var s=s-t.ag,s=s/t.ge,a=a-t.bg,a=a/t.he,h=n.x,l=n.y;if(ha(t,h,l))if(h-=t.ag,h/=t.ge,l-=t.bg,l/=t.he,1>=Math.abs(s-h)&&1>=Math.abs(a-l))t.abort=!0;else{var u=o.x;i=o.y,n=o.x+o.width;var f=o.y+o.height,u=u-t.ag,u=u/t.ge;i-=t.bg,i/=t.he,n-=t.ag,n/=t.ge,f-=t.bg,f/=t.he,o=Math.max(0,Math.min(t.ho,0|u)),n=Math.min(t.ho,Math.max(0,0|n)),i=Math.max(0,Math.min(t.io,0|i));var f=Math.min(t.io,Math.max(0,0|f)),s=0|s,a=0|a,h=0|h,l=0|l,u=s,c=a,p=0===e||90===e?1:-1;if((e=90===e||270===e)?c=pa(t,s,a,h,l,p,e,o,n,i,f):u=pa(t,s,a,h,l,p,e,o,n,i,f),!t.abort){t:{e=0===r||90===r?1:-1,r=90===r||270===r;for(var p=0|h,d=0|l,y=t.mc[p][d];0===y&&p>o&&n>p&&d>i&&f>d;)if(r?d+=e:p+=e,y=t.mc[p][d],1>=Math.abs(p-s)&&1>=Math.abs(d-a)){t.abort=!0;break t}for(p=0|h,d=0|l,y=t.mc[p][d],t.mc[p][d]=999999;0===y&&p>o&&n>p&&d>i&&f>d;)r?d+=e:p+=e,y=t.mc[p][d],t.mc[p][d]=999999}t.abort||(ca(t,u,c,1,!1,o,n,i,f),ca(t,u,c,-1,!1,o,n,i,f),ca(t,u,c,1,!0,o,n,i,f),ca(t,u,c,-1,!0,o,n,i,f))}}}}}function ya(){Ul.gc(this),this.port=this.Cc=null,this.wg=[],this.To=!1}function va(t,i,e,n){switch(i=i.offsetY){case Ul.Nc:return 90;case Ul.Fc:return 180;case Ul.Xc:return 270;case Ul.Oc:return 0}switch(i){case Ul.Nc|Ul.Xc:return e>180?270:90;case Ul.Fc|Ul.Oc:return e>90&&270>=e?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,i){case Ul.Fc|Ul.Xc:return e>t&&180+t>=e?180:270;case Ul.Xc|Ul.Oc:return e>180-t&&360-t>=e?270:0;case Ul.Oc|Ul.Nc:return e>t&&180+t>=e?90:0;case Ul.Nc|Ul.Fc:return e>180-t&&360-t>=e?180:90;case Ul.Fc|Ul.Xc|Ul.Oc:return e>90&&180+t>=e?180:e>180+t&&360-t>=e?270:0;case Ul.Xc|Ul.Oc|Ul.Nc:return e>180&&360-t>=e?270:e>t&&180>=e?90:0;case Ul.Oc|Ul.Nc|Ul.Fc:return e>t&&180-t>=e?90:e>180-t&&270>=e?180:0;case Ul.Nc|Ul.Fc|Ul.Xc:return e>180-t&&180+t>=e?180:e>180+t?270:90}return n&&i!==(Ul.Fc|Ul.Xc|Ul.Oc|Ul.Nc)&&(e-=15,0>e&&(e+=360)),e>t&&180-t>e?90:e>=180-t&&180+t>=e?180:e>180+t&&360-t>e?270:0}function ga(t,i){var e=t.wg;if(0===e.length){t:if(!t.To){e=t.To,t.To=!0;var n,r=null,o=t.Cc,o=o instanceof xa?o:null;if(null===o||o.be)n=t.Cc.qD(t.port.Jd);else{if(!o.ba.J()){t.To=e;break t}r=o,n=r.pD()}var s=t.wg.length=0,a=t.port.lb(iu,Ul.K()),h=t.port.lb(lu,Ul.K()),o=Ul.Vj(a.x,a.y,0,0);for(o.Oi(h),Ul.v(a),Ul.v(h),a=Ul.fc(o.x+o.width/2,o.y+o.height/2),n=n.i;n.next();)if(h=n.value,h.Ea()){var l=_l,u=h.od===t.port||h.W.Qh(r),l=u?Vs(h,t.port):Hs(h,t.port);if(l.Go()&&(u=u?h.fe:h.od,null!==u)){var f=u.T;if(null!==f){var u=h.computeOtherPoint(f,u),f=a.Fi(u),l=va(o,l,f,h.dc),c=0;0===l?(c=Ul.Oc,f>180&&(f-=360)):c=90===l?Ul.Nc:180===l?Ul.Fc:Ul.Xc,l=t.wg[s],void 0===l?(l=new ma(h,f,c),t.wg[s]=l):(l.link=h,l.angle=f,l.ee=c),l.tw.set(u),s++}}}for(Ul.v(a),t.wg.sort(ya.prototype.GH),r=t.wg.length,a=-1,s=n=0;r>s;s++)l=t.wg[s],void 0!==l&&(l.ee!==a&&(a=l.ee,n=0),l.Do=n,n++);for(a=-1,n=0,s=r-1;s>=0;s--)l=t.wg[s],void 0!==l&&(l.ee!==a&&(a=l.ee,n=l.Do+1),l.vm=n);s=t.wg,u=t.port,r=t.Cc.NH,a=Ul.K(),n=Ul.K(),h=Ul.K(),l=Ul.K(),u.lb(iu,a),u.lb(nu,n),u.lb(lu,h),u.lb(au,l);
var p=c=f=u=0;if(r===Jc)for(var d=0;d<s.length;d++){var y=s[d];if(null!==y){var v=y.link.computeThickness();switch(y.ee){case Ul.Nc:c+=v;break;case Ul.Fc:p+=v;break;case Ul.Xc:u+=v;break;default:case Ul.Oc:f+=v}}}for(var g=0,m=0,b=1,d=0;d<s.length;d++)if(y=s[d],null!==y){var x,w;if(g!=y.ee){switch(g=y.ee){case Ul.Nc:x=h,w=l;break;case Ul.Fc:x=l,w=a;break;case Ul.Xc:x=a,w=n;break;default:case Ul.Oc:x=n,w=h}var k=w.x-x.x;switch(w=w.y-x.y,g){case Ul.Nc:c>Math.abs(k)?(b=Math.abs(k)/c,c=Math.abs(k)):b=1;break;case Ul.Fc:p>Math.abs(w)?(b=Math.abs(w)/p,p=Math.abs(w)):b=1;break;case Ul.Xc:u>Math.abs(k)?(b=Math.abs(k)/u,u=Math.abs(k)):b=1;break;default:case Ul.Oc:f>Math.abs(w)?(b=Math.abs(w)/f,f=Math.abs(w)):b=1}m=0}var M=y.Lo;if(r===Jc){switch(v=y.link.computeThickness(),v*=b,M.set(x),g){case Ul.Nc:M.x=x.x+k/2+c/2-m-v/2;break;case Ul.Fc:M.y=x.y+w/2+p/2-m-v/2;break;case Ul.Xc:M.x=x.x+k/2-u/2+m+v/2;break;default:case Ul.Oc:M.y=x.y+w/2-f/2+m+v/2}m+=v}else v=.5,r===Yc&&(v=(y.Do+1)/(y.vm+1)),M.x=x.x+k*v,M.y=x.y+w*v}for(Ul.v(a),Ul.v(n),Ul.v(h),Ul.v(l),x=t.wg,k=0;k<x.length;k++)w=x[k],null!==w&&(w.Sv=t.computeEndSegmentLength(w));t.To=e,Ul.ic(o)}e=t.wg}for(o=0;o<e.length;o++)if(x=e[o],null!==x&&x.link===i)return x;return null}function ma(t,i,e){this.link=t,this.angle=i,this.ee=e,this.tw=new m,this.vm=this.Do=0,this.Lo=new m,this.Sv=0}function ba(){this.Ej=this.cj=tu,this.Cj=this.aj=0/0,this.Bj=this.$i=Hc,this.Dj=this.bj=0/0}function xa(t){0===arguments.length?Ms.call(this,ac):Ms.call(this,t),this.Lq=new f(es),this.Pn=new f(xa),this.Ak=this.Mq=this.Kq=null,this.Yr=!1,this.pq=!0,this.Zr=!1,this.Pb=this.Nr=null,this.Dp=!1,this.Ep=!0,this.cq=this.Fp=!1,this.Nd=new Sa,this.Nd.group=this,this.jy=!1}function wa(t,i){if(t.Lq.add(i)){i instanceof xa&&t.Pn.add(i);var e=t.xH;if(null!==e){var n=!0,r=t.g;null!==r&&(n=r.Na,r.Na=!0),e(t,i),null!==r&&(r.Na=n)}t.Ea()&&t.be||i.He(!1)}e=t.Pb,null===e&&(e=t),e.R()}function ka(t,i){if(t.Lq.remove(i)){i instanceof xa&&t.Pn.remove(i);var e=t.yH;if(null!==e){var n=!0,r=t.g;null!==r&&(n=r.Na,r.Na=!0),e(t,i),null!==r&&(r.Na=n)}t.Ea()&&t.be||i.He(!0)}e=t.Pb,null===e&&(e=t),e.R()}function Ma(t,i){for(var e=t.Mc;e.next();){var n=e.value;if(n.He(!1),n instanceof xa){var r=n;r.be&&(r.oA=r.be,Ma(r,i))}if(n instanceof Ms)n.sf(i);else if(n instanceof Bs)for(n=n.ug;n.next();)n.value.sf(i)}t.be=!1}function Pa(t,i,e,n){for(var r=t.Mc;r.next();){var o=r.value;if(o.He(!0),o instanceof xa){var s=o;s.oA&&(s.oA=!1,Pa(s,i,e,n))}if(o instanceof Ms)o.sf(i),qe(e,o,n);else if(o instanceof Bs)for(o=o.ug;o.next();)o.value.sf(i)}t.be=!0}function Ta(){Mr.call(this),this.Pe=Au.np,this.yr=new k(0/0,0/0,0/0,0/0)}function Sa(){0<arguments.length&&Ul.Wc(Sa),Ul.gc(this),this.Px=this.Y=null,this.jq=this.lq=!0,this.tq=!1,this.wp=new m(0,0).freeze(),this.mq=this.oq=!0,this.YA="",this.Gn=!1,this.ky=null}function Ca(t,i,e,n,r,o,s,a){for(e=e.i;e.next();){var h=e.value;n&&!h.Ho||null!==r&&!r(h)||!h.canLayout()||(o&&h instanceof Ms?h.tf||(h instanceof xa&&null===h.Qb?Ca(t,i,h.Mc,!1,r,o,s,a):i.add(h)):s&&h instanceof Bs?i.add(h):!a||!h.Fd()||h instanceof Ms||i.add(h))}}function ja(){Ul.gc(this),this.Nd=null,this.clear()}function Na(t,i){if(null===i)return!1;var e=t.vertexes.remove(i);return e&&(t.Kz.remove(i.Cc),i.network=null),e}function Da(t,i){null!==i&&t.edges.remove(i)&&(t.yz.remove(i.link),i.network=null)}function Aa(t){for(var i=Ul.eb(),e=t.edges.i;e.next();){var n=e.value;null!==n.fromVertex&&null!==n.toVertex||i.push(n)}for(e=i.length,n=0;e>n;n++)t.vo(i[n]);Ul.ra(i)}function La(t,i,e){if(null!==e&&e.network!==i){Na(t,e),i.Mk(e);for(var n=e.kc;n.next();){var r=n.value;r.network!==i&&(Da(t,r),i.ko(r),La(t,i,r.fromVertex))}for(n=e.bc;n.next();)e=n.value,e.network!==i&&(Da(t,e),i.ko(e),La(t,i,e.toVertex))}}function Fa(){Ul.gc(this),this.network=null,this.aa=new k(0,0,10,10).freeze(),this.M=new m(5,5).freeze(),this.clear()}function za(){Ul.gc(this),this.network=null,this.clear()}function Ba(){0<arguments.length&&Ul.Wc(Ba),Sa.call(this),this.jw=!0,this.as=this.bs=0/0,this.Ti=new w(0/0,0/0).freeze(),this.Hh=new w(10,10).freeze(),this.se=dp,this.Yc=yp,this.Gh=bp,this.qh=cp}function qa(){0<arguments.length&&Ul.Wc(qa),Sa.call(this),this.Gx=this.rn=this.td=0,this.Sp=360,this.Fx=wp,this.mk=0,this.eB=wp,this.Vt=this.jg=this.yC=0,this.uv=new Wa,this.Yt=this.Vl=0,this.zF=600,this.lr=0/0,this.yp=1,this.Mr=0,this.Pr=360,this.Yc=wp,this.la=Tp,this.Gh=Fp,this.qh=fp,this.Hh=6,this.Zq=zp}function Oa(t,i,e,n,r){var o=t.Sp,s=t.td;t=t.jg,n=n*Math.PI/180,e=e*Math.PI/180;for(var a=i.length,h=0;a>h;h++){var l=n+(r===Tp?h*e/(o>=360?a:a-1):-(h*e)/a),u=i.ja(h),f=s*Math.tan(l)/t,f=Math.sqrt((s*s+t*t*f*f)/(1+f*f));u.Ja=f*Math.cos(l),u.Ua=f*Math.sin(l),u.actualAngle=180*l/Math.PI}}function Ea(t,i,e,n){var r=t.td,o=t.jg,s=t.mk;e=e*Math.PI/180;for(var a=i.length,h=0;a>h;h++){var l=i.ja(h),u=i.ja(h===a-1?0:h+1),f=o*Math.sin(e);l.Ja=r*Math.cos(e),l.Ua=f,l.actualAngle=180*e/Math.PI,isNaN(l.diameter)&&Qa(l,0),isNaN(u.diameter)&&Qa(u,0),l=Ja(t,r,o,n===Tp?e:-e,(l.diameter+u.diameter)/2+s),e+=n===Tp?l:-l}}function Ia(t,i,e,n){var r=t.td,o=t.jg,s=t.Vt;e=e*Math.PI/180;for(var a=i.length,h=0;a>h;h++){var l=i.ja(h);l.Ja=r*Math.cos(e),l.Ua=o*Math.sin(e),l.actualAngle=180*e/Math.PI,l=Ja(t,r,o,n===Tp?e:-e,s),e+=n===Tp?l:-l}}function Ra(t,i,e,n,r){var o=t.Yt,o=t.Sp;if(t.Vl=0,t.uv=new Wa,360>e){for(o=n+(r===Tp?o:-o);0>o;)o+=360;o%=360,o>180&&(o-=360),o*=Math.PI/180,t.Yt=o,Va(t,i,e,n,r)}else Ga(t,i,e,n,r);t.uv.commit(i)}function Ga(t,i,e,n,r){var o=t.td,s=t.mk,a=t.rn,h=o*Math.cos(n*Math.PI/180),l=t.jg*Math.sin(n*Math.PI/180),u=i.Ke();if(3===u.length)u[0].Ja=o,u[0].Ua=0,u[1].Ja=u[0].Ja-u[0].width/2-u[1].width/2-s,u[1].y=u[0].y,u[2].Ja=(u[0].Ja+u[1].Ja)/2,u[2].y=u[0].y-u[2].height-s;else if(4===u.length)u[0].Ja=o,u[0].Ua=0,u[2].Ja=-u[0].Ja,u[2].Ua=u[0].Ua,u[1].Ja=0,u[1].y=Math.min(u[0].y,u[2].y)-u[1].height-s,u[3].Ja=0,u[3].y=Math.max(u[0].y+u[0].height+s,u[2].y+u[2].height+s);else{for(var o=Ul.K(),f=0;f<u.length&&(u[f].Ja=h,u[f].Ua=l,!(f>=u.length-1));f++)Ha(t,h,l,u,f,r,o)||Ka(t,h,l,u,f,r,o),h=o.x,l=o.y;if(Ul.v(o),t.Vl++,!(23<t.Vl)){var h=u[0].Ja,l=u[0].Ua,o=u[u.length-1].Ja,f=u[u.length-1].Ua,c=Math.abs(h-o)-((u[0].width+u[u.length-1].width)/2+s),p=Math.abs(l-f)-((u[0].height+u[u.length-1].height)/2+s),s=0;1>Math.abs(p)?Math.abs(h-o)<(u[0].width+u[u.length-1].width)/2&&(s=0):s=p>0?p:1>Math.abs(c)?0:c,c=!1,c=Math.abs(o)>Math.abs(f)?o>0!=l>f:f>0!=o>h,(c=r===Tp?c:!c)&&(s=-Math.abs(s),s=Math.min(s,-u[u.length-1].width),s=Math.min(s,-u[u.length-1].height)),t.uv.compare(s,u),1<Math.abs(s)&&(t.td=8>t.Vl?t.td-s/(2*Math.PI):5>u.length&&s>10?t.td/2:t.td-(s>0?1.7:-2.3),t.jg=t.td*a,Ga(t,i,e,n,r))}}}function Va(t,i,e,n,r){for(var o=t.td,s=t.jg,a=t.rn,h=o*Math.cos(n*Math.PI/180),l=s*Math.sin(n*Math.PI/180),u=Ul.K(),f=i.Ke(),c=0;c<f.length&&(f[c].Ja=h,f[c].Ua=l,!(c>=f.length-1));c++)Ha(t,h,l,f,c,r,u)||Ka(t,h,l,f,c,r,u),h=u.x,l=u.y;if(Ul.v(u),t.Vl++,!(23<t.Vl)){if(h=Math.atan2(l,h),h=r===Tp?t.Yt-h:h-t.Yt,h=Math.abs(h)<Math.abs(h-2*Math.PI)?h:h-2*Math.PI,o=h*(o+s)/2,s=t.uv,Math.abs(o)<Math.abs(s.Ao))for(s.Ao=o,s.Qm=[],s.lp=[],h=0;h<f.length;h++)s.Qm[h]=f[h].kb.x,s.lp[h]=f[h].kb.y;1<Math.abs(o)&&(t.td=8>t.Vl?t.td-o/(2*Math.PI):t.td-(o>0?1.7:-2.3),t.jg=t.td*a,Va(t,i,e,n,r))}}function Ha(t,i,e,n,r,o,s){var a=t.td,h=t.jg,l=0,u=0;t=(n[r].width+n[r+1].width)/2+t.mk;var f=!1;if(e>=0!=(o===Tp)){if(l=i+t,l>a){if(l=i-t,-a>l)return s.x=l,s.y=u,!1;f=!0}}else if(l=i-t,-a>l){if(l=i+t,l>a)return s.x=l,s.y=u,!1;f=!0}return u=Math.sqrt(1-Math.min(1,l*l/(a*a)))*h,0>e!==f&&(u=-u),Math.abs(e-u)>(n[r].height+n[r+1].height)/2?(s.x=l,s.y=u,!1):(s.x=l,s.y=u,!0)}function Ka(t,i,e,n,r,o,s){var a=t.td,h=t.jg,l=0,u=0;if(t=(n[r].height+n[r+1].height)/2+t.mk,n=!1,i>=0!=(o===Tp)){if(u=e-t,-h>u){if(u=e+t,u>h)return s.x=l,void(s.y=u);n=!0}}else if(u=e+t,u>h){if(u=e-t,-h>u)return s.x=l,void(s.y=u);n=!0}l=Math.sqrt(1-Math.min(1,u*u/(h*h)))*a,0>i!==n&&(l=-l),s.x=l,s.y=u}function Ua(t,i,e,n,r){var o=t.zF;if(.001>Math.abs(t.rn-1))return void 0!==n&&void 0!==r?r*i:2*Math.PI*i;t=i>e?Math.sqrt(i*i-e*e)/i:Math.sqrt(e*e-i*i)/e;for(var s=0,a=0,a=void 0!==n&&void 0!==r?r/(o+1):Math.PI/(2*(o+1)),h=0,l=0;o>=l;l++)h=void 0!==n&&void 0!==r?n+l*r/o:l*Math.PI/(2*o),h=Math.sin(h),s+=Math.sqrt(1-t*t*h*h)*a;return void 0!==n&&void 0!==r?(i>e?i:e)*s:4*(i>e?i:e)*s}function Ya(t,i,e,n,r){var o=0,o=void 0!==n&&void 0!==r?Ua(t,1,e,n,r):Ua(t,1,e);return i/o}function Ja(t,i,e,n,r){if(.001>Math.abs(t.rn-1))return r/i;var o=i>e?Math.sqrt(i*i-e*e)/i:Math.sqrt(e*e-i*i)/e,s=0;t=2*Math.PI/(700*t.network.vertexes.count),i>e&&(n+=Math.PI/2);for(var a=0;;a++){var h=Math.sin(n+a*t),s=s+(i>e?i:e)*Math.sqrt(1-o*o*h*h)*t;if(s>=r)return a*t}}function Wa(){this.Ao=-1/0,this.lp=this.Qm=null}function Xa(){ja.call(this)}function Za(){Fa.call(this),this.actualAngle=this.diameter=0/0}function Qa(t,i){var e=t.network;if(null===e)return 0/0;if(e=e.Qb,null===e)return 0/0;if(e.Gf===Pp)if(e.qw===Bp)t.diameter=Math.max(t.width,t.height);else{var e=Math.abs(Math.sin(i)),n=Math.abs(Math.cos(i));if(0===e)return t.width;if(0===n)return t.height;t.diameter=Math.min(t.height/e,t.width/n)}else t.diameter=e.qw===Bp?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.diameter}function $a(){za.call(this)}function _a(){0<arguments.length&&Ul.Wc(_a),Sa.call(this),this.ig=null,this.vq=0,this.Uf=new w(100,100).freeze(),this.xp=!1,this.Fh=!0,this.ph=!1,this.On=100,this.Up=1,this.zh=1e3,this.mr=Math,this.mn=.05,this.ln=50,this.hn=150,this.kn=0,this.Op=10,this.Np=5}function th(t,i,e){if(ih(t,i)){var n=t.zh;t.zh*=1+1/(i+1);var r=eh(t,i),o=Math.max(0,Math.max(Math.min(t.network.vertexes.count,e*(i+1)/11),10));for(t.Az+=o,th(t,i+1,e),ah(t,o),nh(t,r),i=t.ig,null===i?i=new l(fh):i.clear(),i.Td(r.vertexes),i.sort(function(t,i){return null===t||null===i||t===i?0:i.Of-t.Of}),r=i.i;r.next();)rh(t,r.value);t.zh=n}}function ih(t,i){if(i>10||3>t.network.vertexes.count)return!1;null===t.ig?t.ig=new l(fh):t.ig.clear(),t.ig.Td(t.network.vertexes);var e=t.ig;e.sort(function(t,i){return null===t||null===i||t===i?0:i.Of-t.Of});for(var n=e.count-1;n>=0&&1>=e.ja(n).Of;)n--;return 1<e.count-n}function eh(t,i){for(var e=t.network,n=new uh,r=t.ig.i;r.next();){var o=r.value;if(!(1<o.Of))break;n.Mk(o);var s=new lh;s.Sw=o.Of,s.Vw=o.width,s.Rw=o.height,s.qA=o.M.x,s.rA=o.M.y,null===o.hh&&(o.hh=new l(lh)),o.hh.add(s),o.Yz=o.hh.count-1}for(var a=e.edges.i;a.next();)if(r=a.value,r.fromVertex.network===n&&r.toVertex.network===n)n.ko(r);else if(r.fromVertex.network===n){var h=r.fromVertex.rm;null===h&&(h=new l(fh),r.fromVertex.rm=h),h.add(r.toVertex),r.fromVertex.Of--,r.fromVertex.Rj+=r.toVertex.Rj}else r.toVertex.network===n&&(h=r.toVertex.rm,null===h&&(h=new l(fh),r.toVertex.rm=h),h.add(r.fromVertex),r.toVertex.Of--,r.toVertex.Rj+=r.fromVertex.Rj);for(r=n.edges.i;r.next();)o=r.value,o.length*=Math.max(1,Au.sqrt((o.fromVertex.Rj+o.toVertex.Rj)/(4*i+1)));for(r=n.vertexes.i;r.next();)if(o=r.value,h=o.rm,null!==h&&0<h.count&&(s=o.hh.ja(o.hh.count-1),s=s.Sw-o.Of,!(0>=s))){for(var u=0,f=0,c=h.count-s;c<h.count;c++){for(var p=h.ja(c),d=null,a=p.edges.i;a.next();){var y=a.value;if(y.GG(p)===o){d=y;break}}null!==d&&(f+=d.length,u+=p.width*p.height)}h=o.Ja,a=o.Ua,c=o.width,p=o.height,d=o.M,y=c*p,1>y&&(y=1),u=Au.sqrt((u+y+f*f*4/(s*s))/y),s=(u-1)*c/2,u=(u-1)*p/2,o.kb=new k(h-d.x-s,a-d.y-u,c+2*s,p+2*u),o.focus=new m(d.x+s,d.y+u)}return t.network=n,e}function nh(t,i){for(var e=t.network.vertexes.i;e.next();){var n=e.value;if(n.network=i,null!==n.hh){var r=n.hh.ja(n.Yz);n.Of=r.Sw;var o=r.qA,s=r.rA;n.kb=new k(n.Ja-o,n.Ua-s,r.Vw,r.Rw),n.focus=new m(o,s),n.Yz--}}for(e=t.network.edges.i;e.next();)e.value.network=i;t.network=i}function rh(t,i){var e=i.rm;if(null!==e&&0!==e.count){var n=i.Ja,r=i.Ua,o=i.width,s=i.height;null!==i.hh&&0<i.hh.count&&(s=i.hh.ja(0),o=s.Vw,s=s.Rw);for(var o=Au.sqrt(o*o+s*s)/2,a=!1,h=s=0,l=0,u=i.vertexes.i;u.next();){var f=u.value;1>=f.Of?h++:(a=!0,l++,s+=Math.atan2(i.Ua-f.Ua,i.Ja-f.Ja))}if(0!==h)for(l>0&&(s/=l),u=l=0,l=a?2*Math.PI/(h+1):2*Math.PI/h,0===h%2&&(u=l/2),1<e.count&&e.sort(function(t,i){return null===t||null===i||t===i?0:i.width*i.height-t.width*t.height}),a=0===h%2?0:1,e=e.i;e.next();)if(h=e.value,!(1<h.Of||t.isFixed(h))){for(var f=null,c=h.edges.i;c.next();){f=c.value;break}var c=h.width,p=h.height,c=Au.sqrt(c*c+p*p)/2,f=o+f.length+c,c=s+(l*(a/2>>1)+u)*(0===a%2?1:-1);h.Ja=n+f*Math.cos(c),h.Ua=r+f*Math.sin(c),a++}}}function oh(t,i,e,n,r,o,s){var a=9e19,h=-1,l=0;t:for(;i>l;l++){var u=t[l],f=u.x-e,c=u.y-n,f=f*f+c*c;if(a>f){for(c=l-1;c>=0;c--)if(t[c].y>u.y&&t[c].x-u.x<r+s.width)continue t;for(c=l+1;i>c;c++)if(t[c].x>u.x&&t[c].y-u.y<o+s.height)continue t;h=l,a=f}}return h}function sh(t,i){var e=t.aa,n=e.x,r=e.y,o=e.width,e=e.height,s=i.aa,a=s.x,h=s.y,l=s.width,s=s.height;return a>n+o?r>h+s?(n=n+o-a,r=r-h-s,Au.sqrt(n*n+r*r)):h>r+e?(n=n+o-a,r=r+e-h,Au.sqrt(n*n+r*r)):a-(n+o):n>a+l?r>h+s?(n=n-a-l,r=r-h-s,Au.sqrt(n*n+r*r)):h>r+e?(n=n-a-l,r=r+e-h,Au.sqrt(n*n+r*r)):n-(a+l):r>h+s?r-(h+s):h>r+e?h-(r+e):.1}function ah(t,i){t.ig=null;for(var e=t.vq+i;t.vq<e&&(t.vq++,hh(t)););t.ig=null}function hh(t){null===t.ig&&(t.ig=new l(fh),t.ig.Td(t.network.vertexes));var i=t.ig.n;if(0>=i.length)return!1;var e=i[0];e.forceX=0,e.forceY=0;for(var n=e.Ja,o=n,s=e.Ua,a=s,e=1;e<i.length;e++){var h=i[e];h.forceX=0,h.forceY=0;var u=h.Ja,h=h.Ua,n=Math.min(n,u),o=Math.max(o,u),s=Math.min(s,h),a=Math.max(a,h)}i.sort((s=o-n>a-s)?function(t,i){return null===t||null===i||t===i?0:t.Ja-i.Ja}:function(t,i){return null===t||null===i||t===i?0:t.Ua-i.Ua});for(var a=t.zh,f=0,c=0,p=0,e=0;e<i.length;e++){var h=i[e],u=h.aa,d=h.M,n=u.x+d.x,u=u.y+d.y,c=h.charge*t.electricalFieldX(n,u),p=h.charge*t.electricalFieldY(n,u),c=c+h.mass*t.gravitationalFieldX(n,u),p=p+h.mass*t.gravitationalFieldY(n,u);for(h.forceX+=c,h.forceY+=p,d=e+1;d<i.length;d++)if(o=i[d],o!==h){var y=o.aa,c=o.M,p=y.x+c.x,y=y.y+c.y;if(n-p>a||p-n>a){if(s)break}else if(u-y>a||y-u>a){if(!s)break}else{var v=sh(h,o);1>v?(c=t.xw,null===c&&(t.xw=c=new r(0)),f=c.random(),v=c.random(),n>p?(c=Math.abs(o.aa.right-h.aa.x),c=(1+c)*f):p>n?(c=Math.abs(o.aa.x-h.aa.right),c=-(1+c)*f):(c=Math.max(o.width,h.width),c=(1+c)*f-c/2),u>y?(p=Math.abs(o.aa.bottom-h.aa.y),p=(1+p)*v):p>n?(p=Math.abs(o.aa.y-h.aa.bottom),p=-(1+p)*v):(p=Math.max(o.height,h.height),p=(1+p)*v-p/2)):(f=-(h.charge*o.charge)/(v*v),c=(p-n)/v*f,p=(y-u)/v*f),h.forceX+=c,h.forceY+=p,o.forceX-=c,o.forceY-=p}}}for(e=t.network.edges.i;e.next();)s=e.value,h=s.fromVertex,o=s.toVertex,u=h.aa,d=h.M,n=u.x+d.x,u=u.y+d.y,y=o.aa,c=o.M,p=y.x+c.x,y=y.y+c.y,v=sh(h,o),1>v?(c=t.xw,null===c&&(t.xw=c=new r(0)),f=c.random(),v=c.random(),c=(n>p?1:-1)*(1+(o.width>h.width)?o.width:h.width)*f,p=(u>y?1:-1)*(1+(o.height>h.height)?o.height:h.height)*v):(f=s.stiffness*(v-s.length),c=(p-n)/v*f,p=(y-u)/v*f),h.forceX+=c,h.forceY+=p,o.forceX-=c,o.forceY-=p;for(e=0,n=Math.max(t.zh/20,50),o=0;o<i.length;o++)h=i[o],t.isFixed(h)?t.moveFixedVertex(h):(s=h.forceX,a=h.forceY,-n>s?s=-n:s>n&&(s=n),-n>a?a=-n:a>n&&(a=n),h.Ja+=s,h.Ua+=a,e=Math.max(e,s*s+a*a));return e>t.oD*t.oD}function lh(){this.rA=this.qA=this.Rw=this.Vw=this.Sw=0}function uh(){ja.call(this)}function fh(){Fa.call(this),this.isFixed=!1,this.mass=this.charge=0/0,this.Rj=this.Of=this.forceY=this.forceX=0,this.hh=this.rm=null,this.Yz=0}function ch(){za.call(this),this.length=this.stiffness=0/0}function ph(){0<arguments.length&&Ul.Wc(ph),Sa.call(this),this.sd=this.Ql=25,this.la=0,this.gn=qp,this.Mn=Ep,this.Bn=Gp,this.Nl=4,this.Wm=Up,this.oi=Zp,this.Fh=!0,this.gj=4,this.Hb=this.Fu=this.jb=-1,this.Cf=this.Nq=0,this.Kb=this.Bf=this.$f=this.Lg=this.Ld=null,this.Uq=0,this.Tq=this.Sl=null,this.cg=0,this.Vq=null,this.Ng=[],this.Ng.length=100}function dh(t){var i=t.fromVertex.ld;return t=t.toVertex.ld,null===i&&null===t?8:null===i||null===t?4:1}function yh(t){null===t.Sl&&(t.Sl=[]);for(var i=0,e=t.network.vertexes.i;e.next();){var n=e.value;t.Sl[i]=n.layer,i++,t.Sl[i]=n.column,i++,t.Sl[i]=n.index,i++}return t.Sl}function vh(t,i){for(var e=0,n=t.network.vertexes.i;n.next();){var r=n.value;r.layer=i[e],e++,r.column=i[e],e++,r.index=i[e],e++}}function gh(t,i,e){var n=Kh(t,i),r=t.Ld[i];(null===t.Tq||t.Tq.length<r*r)&&(t.Tq=[]);for(var o=t.Tq,s=0;r>s;s++){var a=0,h=n[s],l=h.near,u=0;if(null!==l&&l.layer===h.layer)if(u=l.index,u>s)for(var f=s+1;u>f;f++)h=n[f],h.near===l&&h.om===l.om||a++;else for(f=s-1;f>u;f--)h=n[f],h.near===l&&h.om===l.om||a++;var c,p,l=0,d=c=f=h=0,y=0,v=0;p=0;var g;if(e>=0)for(u=n[s].Ie,l=0;l<u.count;l++)if(c=u.n[l],c.valid&&c.fromVertex.layer!==i)for(h=c.fromVertex.index,f=c.portToPos,c=c.portFromPos,d=l+1;d<u.count;d++)p=u.n[d],p.valid&&p.fromVertex.layer!==i&&(y=p.fromVertex.index,v=p.portToPos,p=p.portFromPos,v>f&&(h>y||h===y&&c>p)&&a++,f>v&&(y>h||y===h&&p>c)&&a++);if(0>=e)for(u=n[s].Ce,l=0;l<u.count;l++)if(c=u.n[l],c.valid&&c.toVertex.layer!==i)for(h=c.toVertex.index,f=c.portToPos,c=c.portFromPos,d=l+1;d<u.count;d++)p=u.n[d],p.valid&&p.toVertex.layer!==i&&(y=p.toVertex.index,v=p.portToPos,p=p.portFromPos,p>c&&(h>y||h===y&&f>v)&&a++,c>p&&(y>h||y===h&&v>f)&&a++);for(o[s*r+s]=a,u=s+1;r>u;u++){var m=0,b=0;if(e>=0)for(a=n[s].Ie,g=n[u].Ie,l=0;l<a.count;l++)if(c=a.n[l],c.valid&&c.fromVertex.layer!==i)for(h=c.fromVertex.index,c=c.portFromPos,d=0;d<g.count;d++)p=g.n[d],p.valid&&p.fromVertex.layer!==i&&(y=p.fromVertex.index,p=p.portFromPos,(y>h||h===y&&p>c)&&b++,(h>y||y===h&&c>p)&&m++);if(0>=e)for(a=n[s].Ce,g=n[u].Ce,l=0;l<a.count;l++)if(c=a.n[l],c.valid&&c.toVertex.layer!==i)for(h=c.toVertex.index,f=c.portToPos,d=0;d<g.count;d++)p=g.n[d],p.valid&&p.toVertex.layer!==i&&(y=p.toVertex.index,v=p.portToPos,(y>h||h===y&&v>f)&&b++,(h>y||y===h&&f>v)&&m++);o[s*r+u]=m,o[u*r+s]=b}}return Uh(t,i,n),o}function mh(t){for(var i=0,e=0;e<=t.jb;e++){for(var n=t,r=e,o=Kh(n,r),s=n.Ld[r],a=0,h=0;s>h;h++){var l,u=null,u=o[h].Ce,f=0,c=0;if(null!==u)for(var p=0;p<u.count;p++)l=u.n[p],l.valid&&l.toVertex.layer!==r&&(f=l.fromVertex.column+l.portFromColOffset,c=l.toVertex.column+l.portToColOffset,a+=(Math.abs(f-c)+1)*dh(l))}Uh(n,r,o),i+=a}return i}function bh(t,i,e){for(var n=Kh(t,i),r=t.Ld[i],o=[],s=0;r>s;s++){var a=n[s],h=null;0>=e&&(h=a.Ie);var l=null;e>=0&&(l=a.Ce);var u=0,f=0,c=a.near;if(null!==c&&c.layer===a.layer&&(u+=c.column-1,f++),null!==h)for(c=0;c<h.count;c++){var a=h.n[c],p=a.fromVertex;a.valid&&!a.rev&&p.layer!==i&&(u+=p.column+a.portFromColOffset,f++)}if(null!==l)for(h=0;h<l.count;h++)a=l.n[h],c=a.toVertex,a.valid&&!a.rev&&c.layer!==i&&(u+=c.column+a.portToColOffset,f++);o[s]=0===f?-1:u/f}return Uh(t,i,n),o}function xh(t,i,e){for(var n=Kh(t,i),r=t.Ld[i],o=[],s=0;r>s;s++){var a=n[s],h=null;0>=e&&(h=a.Ie);var l=null;e>=0&&(l=a.Ce);var u=0,f=[],c=a.near;if(null!==c&&c.layer===a.layer&&(f[u]=c.column-1,u++),null!==h)for(c=0;c<h.count;c++){var a=h.n[c],p=a.fromVertex;a.valid&&!a.rev&&p.layer!==i&&(f[u]=p.column+a.portFromColOffset,u++)}if(null!==l)for(h=0;h<l.count;h++)a=l.n[h],c=a.toVertex,a.valid&&!a.rev&&c.layer!==i&&(f[u]=c.column+a.portToColOffset,u++);0===u?o[s]=-1:(f.sort(function(t,i){return t-i}),l=u>>1,o[s]=1&u?f[l]:f[l-1]+f[l]>>1)}return Uh(t,i,n),o}function wh(t,i,e,n,r,o){if(i.component===n){i.component=e;var s=0,a=0;if(r)for(var h=i.bc;h.next();){var a=h.value,l=a.toVertex,s=i.layer-l.layer,a=t.linkMinLength(a);s===a&&wh(t,l,e,n,r,o)}if(o)for(h=i.kc;h.next();)a=h.value,l=a.fromVertex,s=l.layer-i.layer,a=t.linkMinLength(a),s===a&&wh(t,l,e,n,r,o)}}function kh(t,i,e,n,r,o){if(i.component===n){if(i.component=e,r)for(var s=i.bc;s.next();)kh(t,s.value.toVertex,e,n,r,o);if(o)for(i=i.kc;i.next();)kh(t,i.value.fromVertex,e,n,r,o)}}function Mh(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid)return i}return null}function Ph(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid){for(var e=!0,n=i.bc;n.next();)if(n.value.toVertex.valid){e=!1;break}if(e)return i}}return null}function Th(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid){for(var e=!0,n=i.kc;n.next();)if(n.value.fromVertex.valid){e=!1;break}if(e)return i}}return null}function Sh(t,i){i.wo=t.Uq,t.Uq++;for(var e=i.bc;e.next();){var n=e.value,r=n.toVertex;-1===r.wo&&(n.forest=!0,Sh(t,r))}i.finish=t.Uq,t.Uq++}function Ch(t){for(var i=t.network.vertexes.i;i.next();){var e=jh(t,i.value);t.jb=Math.max(e,t.jb)}}function jh(t,i){var e=0;if(-1===i.layer){for(var n=i.bc;n.next();)var r=n.value,o=r.toVertex,r=t.linkMinLength(r),e=Math.max(e,jh(t,o)+r);i.layer=e}else e=i.layer;return e}function Nh(t,i){var e=0;if(-1===i.layer){for(var n=i.kc;n.next();)var r=n.value,o=r.fromVertex,r=t.linkMinLength(r),e=Math.max(e,Nh(t,o)+r);i.layer=e}else e=i.layer;return e}function Dh(t,i){if(!i.valid){i.valid=!0;for(var e=i.bc;e.next();)Dh(t,e.value.toVertex);for(e=t.network.vertexes.i;e.next();)e.value.component=-1;for(var n=i.Ie.n,r=n.length,o=0;r>o;o++){var s=n[o],a=t.linkMinLength(s);s.fromVertex.layer-s.toVertex.layer>a&&wh(t,s.fromVertex,0,-1,!0,!1)}for(wh(t,i,1,-1,!0,!0);0!==i.component;){for(var a=0,n=1/0,h=0,l=null,u=t.network.vertexes.i;u.next();){var f=u.value;if(1===f.component){for(var c=0,p=!1,d=f.Ie.n,r=d.length,o=0;r>o;o++){var s=d[o],y=s.fromVertex,c=c+1;1!==y.component&&(a+=1,y=y.layer-f.layer,s=t.linkMinLength(s),n=Math.min(n,y-s))}for(s=f.Ce.n,r=s.length,o=0;r>o;o++)d=s[o].toVertex,c-=1,1!==d.component?a-=1:p=!0;(null===l||h>c)&&!p&&(l=f,h=c)}}if(a>0){for(e.reset();e.next();)r=e.value,1===r.component&&(r.layer+=n);i.component=0}else l.component=0}for(e=t.network.vertexes.i;e.next();)e.value.component=-1;for(wh(t,i,1,-1,!0,!1);0!==i.component;){for(o=0,r=1/0,n=0,a=null,h=t.network.vertexes.i;h.next();)if(l=h.value,1===l.component){for(u=0,f=!1,s=l.Ie.n,c=s.length,p=0;c>p;p++)d=s[p].fromVertex,u+=1,1!==d.component?o+=1:f=!0;for(s=l.Ce.n,c=s.length,p=0;c>p;p++)d=s[p],y=d.toVertex,u-=1,1!==y.component&&(o-=1,y=l.layer-y.layer,d=t.linkMinLength(d),r=Math.min(r,y-d));(null===a||u>n)&&!f&&(a=l,n=u)}if(0>o){for(e.reset();e.next();)o=e.value,1===o.component&&(o.layer-=r);i.component=0}else a.component=0}}}function Ah(t,i,e){return 90===t.la?e&&!i.rev||!e&&i.rev?270:90:180===t.la?e&&!i.rev||!e&&i.rev?0:180:270===t.la?e&&!i.rev||!e&&i.rev?90:270:e&&!i.rev||!e&&i.rev?180:0}function Lh(t,i){var e=i.layer;i.index=t.Ld[e],t.Ld[e]++;for(var e=i.Ce.Ke(),n=!0;n;)for(var n=!1,r=0;r<e.length-1;r++){var o=e[r],s=e[r+1];o.portFromColOffset>s.portFromColOffset&&(n=!0,e[r]=s,e[r+1]=o)}for(r=0;r<e.length;r++)n=e[r],n.valid&&(n=n.toVertex,-1===n.index&&Lh(t,n))}function Fh(t,i){var e=i.layer;i.index=t.Ld[e],t.Ld[e]++;for(var e=i.Ie.Ke(),n=!0,r=0;n;)for(n=!1,r=0;r<e.length-1;r++){var o=e[r],s=e[r+1];o.portToColOffset>s.portToColOffset&&(n=!0,e[r]=s,e[r+1]=o)}for(r=0;r<e.length;r++)n=e[r],n.valid&&(n=n.fromVertex,-1===n.index&&Fh(t,n))}function zh(t,i,e){var n=0,r=Kh(t,i),o=t.Ld[i],s=xh(t,i,e);for(e=bh(t,i,e),n=0;o>n;n++)-1===e[n]&&(e[n]=r[n].column),-1===s[n]&&(s[n]=r[n].column);for(var a,h=!0;h;)for(h=!1,n=0;o-1>n;n++)(s[n+1]<s[n]||s[n+1]===s[n]&&e[n+1]<e[n])&&(h=!0,a=s[n],s[n]=s[n+1],s[n+1]=a,a=e[n],e[n]=e[n+1],e[n+1]=a,a=r[n],r[n]=r[n+1],r[n+1]=a);for(n=s=0;o>n;n++)a=r[n],a.index=n,s+=t.nodeMinColumnSpace(a,!0),a.column=s,s+=1,s+=t.nodeMinColumnSpace(a,!1);Uh(t,i,r)}function Bh(t,i,e){var n=Kh(t,i),r=t.Ld[i];e=gh(t,i,e);var o,s=0;for(o=[],s=0;r>s;s++)o[s]=-1;var a;for(a=[],s=0;r>s;s++)a[s]=-1;for(var h=!1,l=!0;l;)for(l=!1,s=0;r-1>s;s++){var u=e[n[s].index*r+n[s+1].index],f=e[n[s+1].index*r+n[s].index],c=0,p=0,d=n[s].column,y=n[s+1].column,v=t.nodeMinColumnSpace(n[s],!0),g=t.nodeMinColumnSpace(n[s],!1),m=t.nodeMinColumnSpace(n[s+1],!0),b=t.nodeMinColumnSpace(n[s+1],!1),v=d-v+m,g=y-g+b,m=m=0,x=n[s].kc.i;for(x.reset();x.next();)if(b=x.value,b.valid&&b.fromVertex.layer===i){for(b=b.fromVertex,m=0;n[m]!==b;)m++;s>m&&(c+=2*(s-m),p+=2*(s+1-m)),m===s+1&&(c+=1),m>s+1&&(c+=4*(m-s),p+=4*(m-(s+1)))}for(x=n[s].bc.i,x.reset();x.next();)if(b=x.value,b.valid&&b.toVertex.layer===i){for(b=b.toVertex,m=0;n[m]!==b;)m++;m===s+1&&(p+=1)}for(x=n[s+1].kc.i,x.reset();x.next();)if(b=x.value,b.valid&&b.fromVertex.layer===i){for(b=b.fromVertex,m=0;n[m]!==b;)m++;s>m&&(c+=2*(s+1-m),p+=2*(s-m)),m===s&&(p+=1),m>s+1&&(c+=4*(m-(s+1)),p+=4*(m-s))}for(x=n[s+1].bc.i,x.reset();x.next();)if(b=x.value,b.valid&&b.toVertex.layer===i){for(b=b.toVertex,m=0;n[m]!==b;)m++;m===s&&(c+=1)}var m=b=0,x=o[n[s].index],w=a[n[s].index],k=o[n[s+1].index],M=a[n[s+1].index];-1!==x&&(b+=Math.abs(x-d),m+=Math.abs(x-g)),-1!==w&&(b+=Math.abs(w-d),m+=Math.abs(w-g)),-1!==k&&(b+=Math.abs(k-y),m+=Math.abs(k-v)),-1!==M&&(b+=Math.abs(M-y),m+=Math.abs(M-v)),(c-.5>p||p===c&&u-.5>f||p===c&&f===u&&b-.5>m)&&(l=h=!0,n[s].column=g,n[s+1].column=v,u=n[s],n[s]=n[s+1],n[s+1]=u)}for(s=0;r>s;s++)n[s].index=s;return Uh(t,i,n),h}function qh(t,i,e){for(var n=!1;Oh(t,i,e);)n=!0;return n}function Oh(t,i,e){var n=0,r=Kh(t,i),o=t.Ld[i],s=bh(t,i,-1);if(e>0)for(n=0;o>n;n++)s[n]=-1;var a=bh(t,i,1);if(0>e)for(n=0;o>n;n++)a[n]=-1;for(var h=!1,l=!0;l;)for(l=!1,n=0;o>n;n++){var u=r[n].column,f=t.nodeMinColumnSpace(r[n],!0),c=t.nodeMinColumnSpace(r[n],!1),p=0,p=0>n-1||u-r[n-1].column-1>f+t.nodeMinColumnSpace(r[n-1],!1)?u-1:u,f=0,f=n+1>=o||r[n+1].column-u-1>c+t.nodeMinColumnSpace(r[n+1],!0)?u+1:u,d=c=0,y=0,v=0,g=0,m=0;if(0>=e)for(var b=r[n].kc.i;b.next();){var x=b.value;x.valid&&x.fromVertex.layer!==i&&(v=dh(x),g=x.portFromColOffset,m=x.portToColOffset,x=x.fromVertex.column,c+=(Math.abs(u+m-(x+g))+1)*v,d+=(Math.abs(p+m-(x+g))+1)*v,y+=(Math.abs(f+m-(x+g))+1)*v)}if(e>=0)for(b=r[n].bc.i;b.next();)x=b.value,x.valid&&x.toVertex.layer!==i&&(v=dh(x),g=x.portFromColOffset,m=x.portToColOffset,x=x.toVertex.column,c+=(Math.abs(u+g-(x+m))+1)*v,d+=(Math.abs(p+g-(x+m))+1)*v,y+=(Math.abs(f+g-(x+m))+1)*v);m=g=v=0,b=s[r[n].index],x=a[r[n].index],-1!==b&&(v+=Math.abs(b-u),g+=Math.abs(b-p),m+=Math.abs(b-f)),-1!==x&&(v+=Math.abs(x-u),g+=Math.abs(x-p),m+=Math.abs(x-f)),(c>d||d===c&&v>g)&&(l=h=!0,r[n].column=p),(c>y||y===c&&v>m)&&(l=h=!0,r[n].column=f)}return Uh(t,i,r),t.normalize(),h}function Eh(t,i,e){var n=0,r=Kh(t,i),o=t.Ld[i],s=xh(t,i,e);for(e=[],n=0;o>n;n++)e[n]=s[n];for(s=!0;s;)for(s=!1,n=0;o>n;n++){var a=r[n].column,h=t.nodeMinColumnSpace(r[n],!0),l=t.nodeMinColumnSpace(r[n],!1),u=0,f=0,c=0,c=f=0;-1===e[n]?0===n&&n===o-1?u=a:0===n?(f=r[n+1].column,u=f-a===l+t.nodeMinColumnSpace(r[n+1],!0)?a-1:a):n===o-1?(c=r[n-1].column,u=a-c===h+t.nodeMinColumnSpace(r[n-1],!1)?a+1:a):(c=r[n-1].column,c=c+t.nodeMinColumnSpace(r[n-1],!1)+h+1,f=r[n+1].column,f=f-t.nodeMinColumnSpace(r[n+1],!0)-l-1,u=(c+f)/2|0):0===n&&n===o-1?u=e[n]:0===n?(f=r[n+1].column,f=f-t.nodeMinColumnSpace(r[n+1],!0)-l-1,u=Math.min(e[n],f)):n===o-1?(c=r[n-1].column,c=c+t.nodeMinColumnSpace(r[n-1],!1)+h+1,u=Math.max(e[n],c)):(c=r[n-1].column,c=c+t.nodeMinColumnSpace(r[n-1],!1)+h+1,f=r[n+1].column,f=f-t.nodeMinColumnSpace(r[n+1],!0)-l-1,c<e[n]&&e[n]<f?u=e[n]:c>=e[n]?u=c:f<=e[n]&&(u=f)),u!==a&&(s=!0,r[n].column=u)}Uh(t,i,r),t.normalize()}function Ih(t,i){for(var e=!0,n=t.network.vertexes.i;n.next();){var r=n.value,o=t.nodeMinColumnSpace(r,!0),s=t.nodeMinColumnSpace(r,!1);if(r.column-o<=i&&r.column+s>=i){e=!1;break}}if(r=!1,e)for(n.reset();n.next();)e=n.value,e.column>i&&(e.column-=1,r=!0);return r}function Rh(t,i){for(var e=i,e=i+1,n=0,r=[],o=[],n=0;n<=t.jb;n++)r[n]=!1,o[n]=!1;for(var s=t.network.vertexes.i;s.next();){var n=s.value,a=n.column-t.nodeMinColumnSpace(n,!0),h=n.column+t.nodeMinColumnSpace(n,!1);i>=a&&h>=i&&(r[n.layer]=!0),e>=a&&h>=e&&(o[n.layer]=!0)}for(a=!0,e=!1,n=0;n<=t.jb;n++)a=a&&!(r[n]&&o[n]);if(a)for(s.reset();s.next();)r=s.value,r.column>i&&(r.column-=1,e=!0);return e}function Gh(t,i){for(var e=0;e<=t.Hb;e++)for(;Ih(t,e););for(t.normalize(),e=0;e<t.Hb;e++)for(;Rh(t,e););t.normalize();var n,e=0,r=0,o=0,s=0;if(i>0)for(e=0;e<=t.Hb;e++)for(n=yh(t),r=mh(t),o=r+1;o>r;)o=r,Vh(t,e,1),s=mh(t),s>r?vh(t,n):r>s&&(r=s,n=yh(t));if(0>i)for(e=t.Hb;e>=0;e--)for(n=yh(t),r=mh(t),o=r+1;o>r;)o=r,Vh(t,e,-1),s=mh(t),s>r?vh(t,n):r>s&&(r=s,n=yh(t));t.normalize()}function Vh(t,i,e){t.cg=0;for(var n=t.network.vertexes.i;n.next();)n.value.component=-1;if(e>0)for(n.reset();n.next();){var r=n.value;r.column-t.nodeMinColumnSpace(r,!0)<=i&&(r.component=t.cg)}if(0>e)for(n.reset();n.next();)r=n.value,r.column+t.nodeMinColumnSpace(r,!1)>=i&&(r.component=t.cg);for(t.cg++,n.reset();n.next();)i=n.value,-1===i.component&&(kh(t,i,t.cg,-1,!0,!0),t.cg++);var o=0;for(i=[],o=0;o<t.cg*t.cg;o++)i[o]=!1;for(r=[],o=0;o<(t.jb+1)*(t.Hb+1);o++)r[o]=-1;for(n.reset();n.next();)for(var o=n.value,s=o.layer,a=Math.max(0,o.column-t.nodeMinColumnSpace(o,!0)),h=Math.min(t.Hb,o.column+t.nodeMinColumnSpace(o,!1));h>=a;a++)r[s*(t.Hb+1)+a]=o.component;for(o=0;o<=t.jb;o++){if(e>0)for(a=0;a<t.Hb;a++)-1!==r[o*(t.Hb+1)+a]&&-1!==r[o*(t.Hb+1)+a+1]&&r[o*(t.Hb+1)+a]!==r[o*(t.Hb+1)+a+1]&&(i[r[o*(t.Hb+1)+a]*t.cg+r[o*(t.Hb+1)+a+1]]=!0);if(0>e)for(a=t.Hb;a>0;a--)-1!==r[o*(t.Hb+1)+a]&&-1!==r[o*(t.Hb+1)+a-1]&&r[o*(t.Hb+1)+a]!==r[o*(t.Hb+1)+a-1]&&(i[r[o*(t.Hb+1)+a]*t.cg+r[o*(t.Hb+1)+a-1]]=!0)}for(r=[],o=0;o<t.cg;o++)r[o]=!0;for(s=new l("number"),s.add(0),h=0;0!==s.count;)if(h=s.n[s.count-1],s.jd(s.count-1),r[h])for(r[h]=!1,o=0;o<t.cg;o++)i[h*t.cg+o]&&s.Yd(0,o);if(e>0)for(n.reset();n.next();)t=n.value,r[t.component]&&(t.column-=1);if(0>e)for(n.reset();n.next();)e=n.value,r[e.component]&&(e.column+=1)}function Hh(t,i){return 270===t.la?i?uu:pu:90===t.la?i?pu:uu:180===t.la?i?fu:cu:i?cu:fu}function Kh(t,i){var e,n=t.Ld[i];if(n>=t.Ng.length){e=[];for(var r=0;r<t.Ng.length;r++)e[r]=t.Ng[r];t.Ng=e}for(void 0===t.Ng[n]||null===t.Ng[n]?e=[]:(e=t.Ng[n],t.Ng[n]=null),n=t.Vq[i],r=0;r<n.length;r++){var o=n[r];e[o.index]=o}return e}function Uh(t,i,e){t.Ng[t.Ld[i]]=e}function Yh(){this.index=this.Vd=this.Be=this.Gd=this.first=this.layer=0,this.link=null,this.Sh=0}function Jh(){ja.call(this)}function Wh(){Fa.call(this),this.index=this.column=this.layer=-1,this.component=0/0,this.near=null,this.valid=!1,this.finish=this.wo=0/0,this.om=0,this.Hz=this.Iz=null}function Xh(){za.call(this),this.forest=this.rev=this.valid=!1,this.portToPos=this.portFromPos=0/0,this.portToColOffset=this.portFromColOffset=0}function Zh(){0<arguments.length&&Ul.Wc(Zh),Sa.call(this),this.nd=new f(Object),this.fr=Qp,this.Af=$p,this.Wr=dd,this.Cu=wd,this.BA=null,this.ph=!0,this.Yc=md,this.Uf=new w(10,10).freeze(),this.qa=new jl,this.pa=new jl,this.By=[]}function Qh(t,i){if(null!==i){switch(t.Af){case $p:if(0<i.bc.count){for(var e=new l(jl),n=i.rG;n.next();){var r=n.value;$h(t,i,r)&&e.add(r)}0<e.count&&(i.children=e.Ke())}break;case _p:if(0<i.kc.count){for(e=new l(jl),n=i.nI;n.next();)r=n.value,$h(t,i,r)&&e.add(r);0<e.count&&(i.children=e.Ke())}break;default:Ul.k("Unhandled path value"+t.Af.toString())}for(e=i.children,n=e.length,r=0;n>r;r++){var o=e[r];o.initialized=!0,o.level=i.level+1,o.parent=i,t.nd.remove(o)}for(r=0;n>r;r++)o=e[r],Qh(t,o)}}function $h(t,i,e){if(e.initialized){var n;if(null===i)n=!1;else{for(n=i.parent;null!==n&&n!==e;)n=n.parent;n=n===e}if(n||e.level>i.level)return!1;t.removeChild(e.parent,e)}return!0}function _h(t,i){if(null!==i){t.initializeTreeVertexValues(i),i.alignment===ld&&t.sortTreeVertexChildren(i);for(var e=0,n=i.qm,r=0,o=i.children,s=o.length,a=0;s>a;a++){var h=o[a];_h(t,h),e+=h.descendantCount+1,n=Math.max(n,h.maxChildrenCount),r=Math.max(r,h.maxGenerationCount)}i.descendantCount=e,i.maxChildrenCount=n,i.maxGenerationCount=n>0?r+1:0}}function tl(t,i){switch(t.Wr){default:case dd:return null!==i.parent?i.parent:t.qa;case gd:return null===i.parent?t.qa:null===i.parent.parent?t.pa:i.parent;case vd:if(null!==i.parent)return null!==i.parent.parent?i.parent.parent:t.pa;case yd:var e=!0;if(0===i.qm)e=!1;else for(var n=i.children,r=n.length,o=0;r>o;o++)if(0<n[o].qm){e=!1;break}return e&&null!==i.parent?t.pa:null!==i.parent?i.parent:t.qa}}function il(t,i){if(null!==i){t.assignTreeVertexValues(i);for(var e=i.children,n=e.length,r=0;n>r;r++)il(t,e[r])}}function el(t,i){if(null!==i){i.alignment!==ld&&t.sortTreeVertexChildren(i);for(var e=i.children,n=e.length,r=0;n>r;r++)el(t,e[r])}}function nl(t){return t===hd||t===ld||t===ud||t===fd}function rl(t){return t===hd||t===ld}function ol(t){var i=t.parent;if(null!==i){var e=i.alignment;if(nl(e)){if(rl(e)){for(i=i.children,e=0;e<i.length&&t!==i[e];)e++;
return 0===e%2}if(e===ud)return!0}}return!1}function sl(t,i){if(0===i.qm){var e=!1,n=0,r=od;null!==i.parent&&(n=i.parent.angle,r=i.parent.alignment,e=nl(r)),r=ol(i),i.ia.m(0,0),i.Ya.m(i.width,i.height),null===i.parent||null===i.comments||(180!==n&&270!==n||e)&&!r?i.Ia.m(0,0):180===n&&!e||(90===n||270===n)&&r?i.Ia.m(i.width-2*i.M.x,0):i.Ia.m(0,i.height-2*i.M.y)}else{for(var e=Pl(i),n=90===e||270===e,o=0,r=i.children,s=r.length,a=0;s>a;a++)var h=r[a],o=Math.max(o,n?h.Ya.width:h.Ya.height);var l=i.alignment,u=l===sd,f=l===ad,c=nl(l),p=Math.max(0,i.breadthLimit),d=Tl(i),y=i.nodeSpacing,v=Sl(i),g=u||f?0:v/2,m=i.rowSpacing,b=0;(u||f||i.bp||i.cp&&1===i.maxGenerationCount)&&(b=Math.max(0,i.rowIndent));var u=i.width,x=i.height,w=0,k=0,M=0,P=0,T=0,S=0,C=0,j=0,N=0,D=0;if(c&&!rl(l)&&e>135&&r.reverse(),rl(l))if(s>1)for(a=0;s>a;a++){var h=r[a],A=h.Ya;0===a%2&&a!==s-1?N=Math.max(N,(n?A.width:A.height)+ll(h)-y):0!==a%2&&(D=Math.max(D,(n?A.width:A.height)+ll(h)-y))}else 1===s&&(N=n?r[0].Ya.width:r[0].Ya.height);if(c)switch(l){case hd:case ld:k=135>e?al(i,r,N,w,k):hl(i,r,N,w,k),N=k.x,w=k.width,k=k.height;break;case ud:for(a=0;s>a;a++)h=r[a],A=h.Ya,p=0===C?0:m,n?(h.ia.m(o-A.width,T+p),w=Math.max(w,A.width),k=Math.max(k,T+p+A.height),T+=p+A.height):(h.ia.m(P+p,o-A.height),w=Math.max(w,P+p+A.width),k=Math.max(k,A.height),P+=p+A.width),C++;break;case fd:for(o=0;s>o;o++)h=r[o],A=h.Ya,p=0===C?0:m,n?(h.ia.m(y/2+i.M.x,T+p),w=Math.max(w,A.width),k=Math.max(k,T+p+A.height),T+=p+A.height):(h.ia.m(P+p,y/2+i.M.y),w=Math.max(w,P+p+A.width),k=Math.max(k,A.height),P+=p+A.width),C++}else for(a=0;s>a;a++)h=r[a],A=h.Ya,n?(p>0&&C>0&&P+y+A.width>p&&(o>P&&yl(i,l,o-P,0,j,a-1),S++,C=0,j=a,M=k,P=0,T=e>135?-k-m:k+m),D=0===C?g:y,gl(t,h,0,T),h.ia.m(P+D,T),w=Math.max(w,P+D+A.width),k=Math.max(k,M+(0===S?0:m)+A.height),P+=D+A.width):(p>0&&C>0&&T+y+A.height>p&&(o>T&&yl(i,l,0,o-T,j,a-1),S++,C=0,j=a,M=w,T=0,P=e>135?-w-m:w+m),D=0===C?g:y,gl(t,h,P,0),h.ia.m(P,T+D),k=Math.max(k,T+D+A.height),w=Math.max(w,M+(0===S?0:m)+A.width),T+=D+A.height),C++;switch(S>0&&(n?(k+=Math.max(0,d),w>P&&yl(i,l,w-P,0,j,s-1),b>0&&(f||vl(i,b,0,0,s-1),w+=b)):(w+=Math.max(0,d),k>T&&yl(i,l,0,k-T,j,s-1),b>0&&(f||vl(i,0,b,0,s-1),k+=b))),b=f=0,l){case rd:n?f+=w/2-i.M.x-v/2:b+=k/2-i.M.y-v/2;break;case od:S>0?n?f+=w/2-i.M.x-v/2:b+=k/2-i.M.y-v/2:n?(l=r[0].ia.x+r[0].Ia.x,y=r[s-1].ia.x+r[s-1].Ia.x+2*r[s-1].M.x,f+=l+(y-l)/2-i.M.x-v/2):(l=r[0].ia.y+r[0].Ia.y,y=r[s-1].ia.y+r[s-1].Ia.y+2*r[s-1].M.y,b+=l+(y-l)/2-i.M.y-v/2);break;case sd:n?(f-=v,w+=v):(b-=v,k+=v);break;case ad:n?(f+=w-i.width+v,w+=v):(b+=k-i.height+v,k+=v);break;case hd:case ld:n?f=s>1?f+(N+y/2-i.M.x):f+(r[0].M.x-i.M.x+r[0].Ia.x):b=s>1?b+(N+y/2-i.M.y):b+(r[0].M.y-i.M.y+r[0].Ia.y);break;case ud:n?f+=w+y/2-i.M.x:b+=k+y/2-i.M.y;break;case fd:break;default:Ul.k("Unhandled alignment value "+l.toString())}for(a=0;s>a;a++)h=r[a],n?h.ia.m(h.ia.x+h.Ia.x-f,h.ia.y+(e>135?(c?-k:-h.Ya.height)+h.Ia.y-d:x+d+h.Ia.y)):h.ia.m(h.ia.x+(e>135?(c?-w:-h.Ya.width)+h.Ia.x-d:u+d+h.Ia.x),h.ia.y+h.Ia.y-b);n?(w=cl(i,w,f),0>f&&(f=0),e>135&&(b+=k+d),k+=x+d):(e>135&&(f+=w+d),w+=u+d,k=pl(i,k,b),0>b&&(b=0)),i.Ia.m(f,b),i.Ya.m(w,k)}}function al(t,i,e,n,r){var o=i.length;if(0===o)return new k(e,0,n,r);if(1===o){var s=i[0];return n=s.Ya.width,r=s.Ya.height,new k(e,0,n,r)}for(var a=t.nodeSpacing,h=t.rowSpacing,l=90===Pl(t),u=0,f=0,c=0,p=0;o>p;p++)if(!(0!==p%2||o>1&&p===o-1)){var s=i[p],d=s.Ya,y=0===u?0:h;if(l){var v=ll(s)-a;s.ia.m(e-(d.width+v),c+y),n=Math.max(n,d.width+v),r=Math.max(r,c+y+d.height),c+=y+d.height}else v=ll(s)-a,s.ia.m(f+y,e-(d.height+v)),r=Math.max(r,d.height+v),n=Math.max(n,f+y+d.width),f+=y+d.width;u++}var u=0,g=f,m=c;for(l?(f=e+a,c=0):(f=0,c=e+a),p=0;o>p;p++)0!==p%2&&(s=i[p],d=s.Ya,y=0===u?0:h,l?(v=ll(s)-a,s.ia.m(f+v,c+y),n=Math.max(n,f+d.width+v),r=Math.max(r,c+y+d.height),c+=y+d.height):(v=ll(s)-a,s.ia.m(f+y,c+v),n=Math.max(n,f+y+d.width),r=Math.max(r,c+d.height+v),f+=y+d.width),u++);return o>1&&1===o%2&&(s=i[o-1],d=s.Ya,i=ul(s,l?Math.max(Math.abs(m),Math.abs(c)):Math.max(Math.abs(g),Math.abs(f))),l?(s.ia.m(e+a/2-s.M.x-s.Ia.x,r+i),l=e+a/2-s.M.x-s.Ia.x,n=Math.max(n,l+d.width),0>l&&(n-=l),r=Math.max(r,Math.max(m,c)+i+d.height),0>s.ia.x&&(e=fl(t,s.ia.x,!1,e,a))):(s.ia.m(n+i,e+a/2-s.M.y-s.Ia.y),n=Math.max(n,Math.max(g,f)+i+d.width),l=e+a/2-s.M.y-s.Ia.y,r=Math.max(r,l+d.height),0>l&&(r-=l),0>s.ia.y&&(e=fl(t,s.ia.y,!0,e,a)))),new k(e,0,n,r)}function hl(t,i,e,n,r){var o=i.length;if(0===o)return new k(e,0,n,r);if(1===o){var s=i[0];return n=s.Ya.width,r=s.Ya.height,new k(e,0,n,r)}for(var a=t.nodeSpacing,h=t.rowSpacing,l=270===Pl(t),u=0,f=0,c=0,p=0;o>p;p++)if(!(0!==p%2||o>1&&p===o-1)){var s=i[p],d=s.Ya,y=0===u?0:h;if(l){var v=ll(s)-a,c=c-(y+d.height);s.ia.m(e-(d.width+v),c),n=Math.max(n,d.width+v),r=Math.max(r,Math.abs(c))}else v=ll(s)-a,f-=y+d.width,s.ia.m(f,e-(d.height+v)),r=Math.max(r,d.height+v),n=Math.max(n,Math.abs(f));u++}var u=0,g=f,m=c;for(l?(f=e+a,c=0):(f=0,c=e+a),p=0;o>p;p++)0!==p%2&&(s=i[p],d=s.Ya,y=0===u?0:h,l?(v=ll(s)-a,c-=y+d.height,s.ia.m(f+v,c),n=Math.max(n,f+d.width+v),r=Math.max(r,Math.abs(c))):(v=ll(s)-a,f-=y+d.width,s.ia.m(f,c+v),r=Math.max(r,c+d.height+v),n=Math.max(n,Math.abs(f))),u++);for(o>1&&1===o%2&&(s=i[o-1],d=s.Ya,h=ul(s,l?Math.max(Math.abs(m),Math.abs(c)):Math.max(Math.abs(g),Math.abs(f))),l?(s.ia.m(e+a/2-s.M.x-s.Ia.x,-r-d.height-h),f=e+a/2-s.M.x-s.Ia.x,n=Math.max(n,f+d.width),0>f&&(n-=f),r=Math.max(r,Math.abs(Math.min(m,c))+h+d.height),0>s.ia.x&&(e=fl(t,s.ia.x,!1,e,a))):(s.ia.m(-n-d.width-h,e+a/2-s.M.y-s.Ia.y),n=Math.max(n,Math.abs(Math.min(g,f))+h+d.width),f=e+a/2-s.M.y-s.Ia.y,r=Math.max(r,f+d.height),0>f&&(r-=f),0>s.ia.y&&(e=fl(t,s.ia.y,!0,e,a)))),p=0;o>p;p++)s=i[p],l?s.ia.m(s.ia.x,s.ia.y+r):s.ia.m(s.ia.x+n,s.ia.y);return new k(e,0,n,r)}function ll(t){return null===t.parent?0:t.parent.nodeSpacing}function ul(t){return null===t.parent?0:t.parent.rowSpacing}function fl(t,i,e,n,r){t=t.children;for(var o=t.length,s=0;o>s;s++)e?t[s].ia.m(t[s].ia.x,t[s].ia.y-i):t[s].ia.m(t[s].ia.x-i,t[s].ia.y);return i=t[o-1],Math.max(n,e?i.Ia.y+i.M.y-r/2:i.Ia.x+i.M.x-r/2)}function cl(t,i,e){switch(t.alignment){case od:case rd:var n=i;return e+t.width>n&&(n=e+t.width),0>e&&(n-=e),n;case sd:return t.width>i?t.width:i;case ad:return 2*t.M.x>i?t.width:i+t.width-2*t.M.x;case hd:case ld:return n=Math.min(0,e),e=Math.max(i,e+t.width),Math.max(t.width,e-n);case ud:return t.width-t.M.x+t.nodeSpacing/2+i;case fd:return Math.max(t.width,t.M.x+t.nodeSpacing/2+i);default:return i}}function pl(t,i,e){switch(t.alignment){case od:case rd:var n=i;return e+t.height>n&&(n=e+t.height),0>e&&(n-=e),n;case sd:return t.height>i?t.height:i;case ad:return 2*t.M.y>i?t.height:i+t.height-2*t.M.y;case hd:case ld:return n=Math.min(0,e),e=Math.max(i,e+t.height),Math.max(t.height,e-n);case ud:return t.height-t.M.y+t.nodeSpacing/2+i;case fd:return Math.max(t.height,t.M.y+t.nodeSpacing/2+i);default:return i}}function dl(t,i,e){switch(t){case rd:i/=2,e/=2;break;case od:i/=2,e/=2;break;case sd:e=i=0;break;case ad:break;default:Ul.k("Unhandled alignment value "+t.toString())}return new m(i,e)}function yl(t,i,e,n,r,o){i=dl(i,e,n),vl(t,i.x,i.y,r,o)}function vl(t,i,e,n,r){if(0!==i||0!==e)for(t=t.children;r>=n;n++){var o=t[n].ia;o.x+=i,o.y+=e}}function gl(t,i,e,n){var r=i.parent;switch(t.Af){case $p:for(t=i.kc;t.next();)i=t.value,i.fromVertex===r&&i.nr.m(e,n);break;case _p:for(t=i.bc;t.next();)i=t.value,i.toVertex===r&&i.nr.m(e,n);break;default:Ul.k("Unhandled path value "+t.Af.toString())}}function ml(t,i,e){for(var n=0;n<t.length;n++){var r=t[n];r.x+=i,r.y+=e}}function bl(t,i,e,n,r,o,s,a){var h=Pl(i),l=90===h||270===h,u=i.nodeSpacing;i=n;var f=r;n=o,r=s;var c=e.Ss,p=e.jt;s=e.Ya;var d=l?Math.max(r,s.height):Math.max(n,s.width);if((null===c||h!==Pl(e))&&(c=xl(t,2),p=xl(t,2),l?(c[0].m(0,0),c[1].m(0,s.height),p[0].m(s.width,0),p[1].m(p[0].x,c[1].y)):(c[0].m(0,0),c[1].m(s.width,0),p[0].m(0,s.height),p[1].m(c[1].x,p[0].y))),l){if(e=n,n=9999999,!(null===f||2>f.length||null===c||2>c.length))for(l=h=0;h<f.length&&l<c.length;){r=f[h];var y=c[l];o=y.x;var v=y.y;o+=e;var g=r;h+1<f.length&&(g=f[h+1]);var m=y,y=m.x,m=m.y;l+1<c.length&&(m=c[l+1],y=m.x,m=m.y,y+=e);var b=n;r.y===v?b=o-r.x:r.y>v&&r.y<m?b=o+(r.y-v)/(m-v)*(y-o)-r.x:v>r.y&&v<g.y&&(b=o-(r.x+(v-r.y)/(g.y-r.y)*(g.x-r.x))),n>b&&(n=b),g.y<=r.y?h++:v>=m?l++:(g.y<=m&&h++,m<=g.y&&l++)}if(e-=n,e+=u,h=c,l=e,null===i||2>i.length||null===h||2>h.length)n=null;else{for(u=xl(t,i.length+h.length),n=o=r=0;o<h.length&&h[o].y<i[0].y;)v=h[o++],u[n++].m(v.x+l,v.y);for(;r<i.length;)v=i[r++],u[n++].m(v.x,v.y);for(r=i[i.length-1].y;o<h.length&&h[o].y<=r;)o++;for(;o<h.length&&h[o].y>r;)v=h[o++],u[n++].m(v.x+l,v.y);for(h=xl(t,n),r=0;n>r;r++)h[r].assign(u[r]);wl(t,u),n=h}if(o=p,v=e,null===f||2>f.length||null===o||2>o.length)r=null;else{for(u=xl(t,f.length+o.length),l=g=h=0;h<f.length&&f[h].y<o[0].y;)r=f[h++],u[l++].m(r.x,r.y);for(;g<o.length;)r=o[g++],u[l++].m(r.x+v,r.y);for(o=o[o.length-1].y;h<f.length&&f[h].y<=o;)h++;for(;h<f.length&&f[h].y>o;)r=f[h++],u[l++].m(r.x,r.y);for(r=xl(t,l),h=0;l>h;h++)r[h].assign(u[h]);wl(t,u)}o=Math.max(0,e)+s.width,s=d}else{if(e=r,n=9999999,!(null===f||2>f.length||null===c||2>c.length))for(l=h=0;h<f.length&&l<c.length;)r=f[h],y=c[l],o=y.x,v=y.y,v+=e,g=r,h+1<f.length&&(g=f[h+1]),m=y,y=m.x,m=m.y,l+1<c.length&&(m=c[l+1],y=m.x,m=m.y,m+=e),b=n,r.x===o?b=v-r.y:r.x>o&&r.x<y?b=v+(r.x-o)/(y-o)*(m-v)-r.y:o>r.x&&o<g.x&&(b=v-(r.y+(o-r.x)/(g.x-r.x)*(g.y-r.y))),n>b&&(n=b),g.x<=r.x?h++:o>=y?l++:(g.x<=y&&h++,y<=g.x&&l++);if(e-=n,e+=u,h=c,l=e,null===i||2>i.length||null===h||2>h.length)n=null;else{for(u=xl(t,i.length+h.length),n=o=r=0;o<h.length&&h[o].x<i[0].x;)v=h[o++],u[n++].m(v.x,v.y+l);for(;r<i.length;)v=i[r++],u[n++].m(v.x,v.y);for(r=i[i.length-1].x;o<h.length&&h[o].x<=r;)o++;for(;o<h.length&&h[o].x>r;)v=h[o++],u[n++].m(v.x,v.y+l);for(h=xl(t,n),r=0;n>r;r++)h[r].assign(u[r]);wl(t,u),n=h}if(o=p,v=e,null===f||2>f.length||null===o||2>o.length)r=null;else{for(u=xl(t,f.length+o.length),l=g=h=0;h<f.length&&f[h].x<o[0].x;)r=f[h++],u[l++].m(r.x,r.y);for(;g<o.length;)r=o[g++],u[l++].m(r.x,r.y+v);for(o=o[o.length-1].x;h<f.length&&f[h].x<=o;)h++;for(;h<f.length&&f[h].x>o;)r=f[h++],u[l++].m(r.x,r.y);for(r=xl(t,l),h=0;l>h;h++)r[h].assign(u[h]);wl(t,u)}o=d,s=Math.max(0,e)+s.height}return wl(t,i),wl(t,c),wl(t,f),wl(t,p),a[0]=n,a[1]=r,new k(e,0,o,s)}function xl(t,i){var e=t.By[i];if(void 0!==e&&(e=e.pop(),void 0!==e))return e;for(var e=[],n=0;i>n;n++)e[n]=new m;return e}function wl(t,i){var e=i.length,n=t.By[e];void 0===n&&(n=[],t.By[e]=n),n.push(i)}function kl(t,i,e,n){if(null!==i){i.x=e,i.y=n,i=i.children;for(var r=i.length,o=0;r>o;o++){var s=i[o];kl(t,s,e+s.ia.x,n+s.ia.y)}}}function Ml(t,i){if(null!==i){t.setPortSpots(i);for(var e=i.children,n=e.length,r=0;n>r;r++)Ml(t,e[r])}}function Pl(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}function Tl(t){var i=Pl(t),i=90===i||270===i,e=t.layerSpacing;if(0<t.layerSpacingParentOverlap)var n=Math.min(1,t.layerSpacingParentOverlap),e=e-(i?t.height*n:t.width*n);return e<(i?-t.height:-t.width)&&(e=i?-t.height:-t.width),e}function Sl(t){var i=Pl(t),i=90===i||270===i,e=t.nodeIndent;if(0<t.nodeIndentPastParent)var n=Math.min(1,t.nodeIndentPastParent),e=e+(i?t.width*n:t.height*n);return e=Math.max(0,e)}function Cl(){ja.call(this)}function jl(){Fa.call(this),this.initialized=!1,this.parent=null,this.children=[],this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0,this.comments=null,this.ia=new m(0,0),this.Ya=new w(0,0),this.Ia=new m(0,0),this.cp=this.bp=this.aI=!1,this.jt=this.Ss=null,this.sorting=td,this.comparer=fp,this.angle=0,this.alignment=od,this.nodeIndentPastParent=this.nodeIndent=0,this.nodeSpacing=20,this.layerSpacing=50,this.layerSpacingParentOverlap=0,this.compaction=pd,this.breadthLimit=0,this.rowSpacing=25,this.commentSpacing=this.rowIndent=10,this.commentMargin=20,this.setsPortSpot=!0,this.portSpot=tu,this.setsChildPortSpot=!0,this.childPortSpot=tu}function Nl(){za.call(this),this.nr=new m(0,0)}function Dl(){this.xn=[]}function Al(t){var i=new Dl,e=null;if("string"==typeof t?e=(new DOMParser).parseFromString(t,"text/xml"):t instanceof Document&&(e=t.implementation.createDocument("http://www.w3.org/2000/svg","svg",null),e.appendChild(e.importNode(t.documentElement,!0))),null===e)return null;if(t=e.getElementsByTagName("svg"),0===t.length)return null;var n=t[0],r=e.getElementsByTagName("linearGradient"),o=e.getElementsByTagName("radialGradient");for(t=0;t<r.length;t++){for(var s=r[t],a=nc(kr,Uf,{start:du,end:yu}),h=s.childNodes,l=0;l<h.length;l++)if("stop"===h[l].tagName){var u=Fl(i,h[l],"stop-color");if(null!==u&&""!==u){var f=Fl(i,h[l],"offset");(null===f||""===f)&&(f="0");var c=parseFloat(f);isNaN(c)&&(c=0),a.addColorStop((-1!==f.indexOf("%")?.01:1)*c,u)}}s=s.getAttribute("id"),"string"==typeof s&&(i["_brush"+s]=a)}for(t=0;t<o.length;t++){for(s=o[t],a=nc(kr,Yf,{start:ou,end:ou}),h=s.childNodes,l=0;l<h.length;l++)"stop"===h[l].tagName&&(u=Fl(i,h[l],"stop-color"),null!==u&&""!==u)&&(f=Fl(i,h[l],"offset"),(null===f||""===f)&&(f="0"),c=parseFloat(f),isNaN(c)&&(c=0),a.addColorStop((-1!==f.indexOf("%")?.01:1)*c,u));s=s.getAttribute("id"),"string"==typeof s&&(i["_brush"+s]=a)}for(r=!0;r;)for(r=!1,o=e.getElementsByTagName("use"),t=0;t<o.length;t++)a=o[t],0===a.childNodes.length&&(s=a.href,void 0!==s&&(s=e.getElementById(s.baseVal.substring(1)),null!==s&&(s=s.cloneNode(!0),s.removeAttribute("id"),h=parseFloat(a.getAttribute("x")),isNaN(h)&&(h=0),l=parseFloat(a.getAttribute("y")),isNaN(l)&&(l=0),u=a.getAttribute("transform"),null===u&&(u=""),a.setAttribute("transform",u+" translate("+h+","+l+")"),a.appendChild(s),"use"===s.tagName&&(r=!0))));if(zl(i,n,null),e=new to,0===i.xn.length)return e;if(1===i.xn.length)return i.xn[0];for(t=0;t<i.xn.length;t++)e.add(i.xn[t]);return e}function Ll(t,i){var e=t.getAttribute(i);return"string"!=typeof e&&t.style&&(e=t.style[i]),"string"!=typeof e?null:e}function Fl(t,i,e){var n=i.getAttribute(e);return"string"!=typeof n&&i.style&&(n=i.style[e]),"string"!=typeof n||""===n||"inherit"===n?(i=i.parentNode,"g"===i.tagName||"use"===i.tagName?Fl(t,i,e):null):n}function zl(t,i,e){var n=i.tagName;if(("g"===n||"svg"===n||"use"===n||"symbol"===n)&&"none"!==Fl(t,i,"display")){for(var n=i.childNodes,r=0;r<n.length;r++){var o=n[r],s=null;if(void 0!==o.getAttribute){var a=o.getAttribute("transform");switch(o.tagName){case"g":null===a?zl(t,o,null):(s=new to,zl(t,o,s));break;case"use":null===a?zl(t,o,null):(s=new to,zl(t,o,s));break;case"symbol":if("use"!==i.tagName)break;s=new to,zl(t,o,s);var h=s,l=t,u=o;Fl(l,u,"preserveAspectRatio"),Fl(l,u,"viewBox"),h.scale=1;break;case"path":h=o,s=new Po,h=h.getAttribute("d"),"string"==typeof h&&(s.EG=Ou(h));break;case"line":var f=o,s=new Po,h=parseFloat(f.getAttribute("x1"));isNaN(h)&&(h=0),l=parseFloat(f.getAttribute("y1")),isNaN(l)&&(l=0),u=parseFloat(f.getAttribute("x2")),isNaN(u)&&(u=0),f=parseFloat(f.getAttribute("y2")),isNaN(f)&&(f=0);var c=new H(Lu);s.position=new m(Math.min(h,u),Math.min(l,f)),(u-h)/(f-l)>0?(c.ua=0,c.va=0,c.F=Math.abs(u-h),c.G=Math.abs(f-l)):(c.ua=0,c.va=Math.abs(f-l),c.F=Math.abs(u-h),c.G=0),s.ed=c;break;case"circle":u=o,s=new Po,h=parseFloat(u.getAttribute("r")),isNaN(h)||0>h?s=null:(l=parseFloat(u.getAttribute("cx")),isNaN(l)&&(l=0),u=parseFloat(u.getAttribute("cy")),isNaN(u)&&(u=0),f=new H(zu),f.ua=0,f.va=0,f.F=2*h,f.G=2*h,s.position=new m(l-h,u-h),s.ed=f);break;case"ellipse":f=o,s=new Po,h=parseFloat(f.getAttribute("rx")),isNaN(h)||0>h?s=null:(l=parseFloat(f.getAttribute("ry")),isNaN(l)||0>l?s=null:(u=parseFloat(f.getAttribute("cx")),isNaN(u)&&(u=0),f=parseFloat(f.getAttribute("cy")),isNaN(f)&&(f=0),c=new H(zu),c.ua=0,c.va=0,c.F=2*h,c.G=2*l,s.position=new m(u-h,f-l),s.ed=c));break;case"rect":if(c=o,s=new Po,h=parseFloat(c.getAttribute("width")),isNaN(h)||0>h)s=null;else if(l=parseFloat(c.getAttribute("height")),isNaN(l)||0>l)s=null;else{u=parseFloat(c.getAttribute("x")),isNaN(u)&&(u=0),f=parseFloat(c.getAttribute("y")),isNaN(f)&&(f=0);var p=c.getAttribute("rx"),d=c.getAttribute("ry"),c=parseFloat(p);(isNaN(c)||0>c)&&(c=0);var y=parseFloat(d);(isNaN(y)||0>y)&&(y=0),null!==p&&""!==p||null===d||""===d?null===p||""===p||null!==d&&""!==d||(y=c):c=y,c=Math.min(c,h/2),y=Math.min(y,l/2),d=void 0,0===c&&0===y?(d=new H(Fu),d.ua=0,d.va=0,d.F=h,d.G=l):(d=Au.sa/2,p=Ul.p(),Zo(p,c,0,!0),p.lineTo(h-c,0),_o(p,h-c*d,0,h,y*d,h,y),p.lineTo(h,l-y),_o(p,h,l-y*d,h-c*d,l,h-c,l),p.lineTo(c,l),_o(p,c*d,l,0,l-y*d,0,l-y),p.lineTo(0,y),_o(p,0,y*d,c*d,0,c,0),Qo(p),d=p.o,Ul.q(p)),s.position=new m(u,f),s.ed=d}break;case"polygon":s=Rl(o);break;case"polyline":s=Rl(o)}if(null!==s){if(s instanceof Po){if(l=s,h=Fl(t,o,"fill"),null!==h&&-1!==h.indexOf("url")?(h=h.substring(h.indexOf("#")+1,h.length-1),h=t["_brush"+h],l.fill=h instanceof kr?h:"black"):l.fill=null===h?"black":"none"===h?null:h,h=Fl(t,o,"stroke"),null!==h&&-1!==h.indexOf("url")?(h=h.substring(h.indexOf("#")+1,h.length-1),h=t["_brush"+h],l.stroke=h instanceof kr?h:"black"):l.stroke="none"===h?null:h,h=parseFloat(Fl(t,o,"stroke-width")),isNaN(h)||(l.hb=h),h=Fl(t,o,"stroke-linecap"),null!==h&&(l.qI=h),h=Fl(t,o,"stroke-dasharray"),null!==h&&""!==h){for(u=h.split(","),f=[],h=0;h<u.length;h++)c=parseFloat(u[h]),!isNaN(c)&&c>0&&f.push(c);l.gA=f}o=Fl(t,o,"stroke-dashoffset"),null!==o&&""!==o&&(o=parseFloat(o),isNaN(o)||(l.rI=o)),l.rz=!0}if(null!==a){for(a=a.split(")"),o=!0,h=0;h<a.length;h++)/\(.*[^0-9\.,\s-]/.test(a[h])&&(o=!1),/\(.*[0-9]-[0-9]/.test(a[h])&&(o=!1);if(o)for(h=a.length-1;h>=0;h--)if(l=a[h],""!==l)switch(u=l.indexOf("("),o=l.substring(0,u).replace(/\s*/,""),u=l.substring(u+1).split(/\s*[\s,]\s*/),o){case"rotate":ql(t,s,u);break;case"translate":o=s,l=parseFloat(u[0]),isNaN(l)&&(l=0),u=parseFloat(u[1]),isNaN(u)&&(u=0),(0!==l||0!==u)&&(f=o.position.copy(),isNaN(f.x)&&(f.x=0),isNaN(f.y)&&(f.y=0),o.position=new m(l+f.x,u+f.y));break;case"scale":Ol(t,s,u);break;case"skewX":El(t,s,u);break;case"skewY":Il(t,s,u);break;case"matrix":Bl(t,s,u)}}if(s instanceof to){for(a=s,h=o=0,l=a.position.copy(),isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),u=a.elements.i;u.next();)f=u.value.position.copy(),isNaN(f.x)&&(f.x=0),isNaN(f.y)&&(f.y=0),f.x<o&&(o=f.x),f.y<h&&(h=f.y);l.x+=o,l.y+=h,a.position=l}null===e?t.xn.push(s):e.add(s)}}}null!==s&&(t=Ll(i,"visibility"),("hidden"===t||"collapse"===t)&&(s.visible=!1),i=Ll(i,"opacity"),null!==i&&""!==i&&(i=parseFloat(i),isNaN(i)||(s.opacity=i)))}}function Bl(t,i,e){var n=parseFloat(e[0]),r=parseFloat(e[1]),o=parseFloat(e[2]),s=parseFloat(e[3]),a=parseFloat(e[4]),h=parseFloat(e[5]);if(!isNaN(n+r+o+s+a+h)){var l=i.position.copy();if(isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),i instanceof Po){if(e=i.ed.copy(),e.type===Fu)e=t.Xr(e);else if(e.type===zu)e=Gl(e);else if(e.type===Lu){e.type=Bu,t=new X(e.ua,e.va);var u=new Z(Ru,e.F,e.G);t.Fa.add(u),e.ub.add(t)}e.offset(l.x,l.y),e.transform(n,r,o,s,a-l.x,h-l.y),t=e.normalize(),i.ed=e,l.x-=t.x,l.y-=t.y,i.position=l}else if(i instanceof to){for(i=i.elements.i;i.next();)r=i.value,n=r.position.copy(),n.x+=l.x,n.y+=l.y,r.position=n;for(i.reset();i.next();)Bl(t,i.value,e);for(i.reset();i.next();)t=i.value,n=t.position.copy(),n.x-=l.x,n.y-=l.y,t.position=n}}}function ql(t,i,e){var n=parseFloat(e[0]);isNaN(n)&&(n=0);var r=parseFloat(e[1]);isNaN(r)&&(r=0);var o=parseFloat(e[2]);if(isNaN(o)&&(o=0),0!==n){var s=n*Math.PI/180,a=i.position.copy();if(isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),i instanceof Po){if(e=i.ed.copy(),e.type===zu?e=Gl(e):e.type===Fu&&(e=t.Xr(e)),e.type===Bu)e.rotate(n,r-a.x,o-a.y),o=e.normalize(),i.ed=e,a.x-=o.x,a.y-=o.y,i.position=a;else{var n=e.ua-r+a.x,h=e.va-o+a.y,l=e.F-r+a.x,u=e.G-o+a.y;t=n*Math.cos(s)-h*Math.sin(s)+r-a.x,n=h*Math.cos(s)+n*Math.sin(s)+o-a.y,r=l*Math.cos(s)-u*Math.sin(s)+r-a.x,o=u*Math.cos(s)+l*Math.sin(s)+o-a.y,l=Math.min(t,r),u=Math.min(n,o),e.ua=t-l,e.va=n-u,e.F=r-l,e.G=o-u,a.x+=l,a.y+=u,i.position=a,i.ed=e}i.fill instanceof kr&&(a=i.fill.copy(),e=Math.atan((.5-a.start.y)/(.5-a.start.x)),isNaN(e)||(e+=s,a.start=new D((1-Math.cos(e))/2,(1-Math.sin(e))/2),a.end=new D((1+Math.cos(e))/2,(1+Math.sin(e))/2)),i.fill=a),i.stroke instanceof kr&&(a=i.stroke.copy(),e=Math.atan((.5-a.start.y)/(.5-a.start.x)),isNaN(e)||(e+=s,a.start=new D((1-Math.cos(e))/2,(1-Math.sin(e))/2),a.end=new D((1+Math.cos(e))/2,(1+Math.sin(e))/2)),i.stroke=a)}else if(i instanceof to){for(i=i.elements.i;i.next();)o=i.value,s=o.position.copy(),s.x+=a.x,s.y+=a.y,o.position=s;for(i.reset();i.next();)ql(t,i.value,e);for(i.reset();i.next();)e=i.value,s=e.position.copy(),s.x-=a.x,s.y-=a.y,e.position=s}}}function Ol(t,i,e){var n=parseFloat(e[0]);isNaN(n)&&(n=1);var r=parseFloat(e[1]);if(isNaN(r)&&(r=n),1!==n||1!==r){var o=i.position.copy();if(isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0),i instanceof Po)t=i.ed.copy(),o.x*=n,o.y*=r,i.position=o,t.scale(n,r),i.ed=t;else if(i instanceof to){for(i=i.elements.i;i.next();)r=i.value,n=r.position.copy(),n.x+=o.x,n.y+=o.y,r.position=n;for(i.reset();i.next();)Ol(t,i.value,e);for(i.reset();i.next();)t=i.value,n=t.position.copy(),n.x-=o.x,n.y-=o.y,t.position=n}}}function El(t,i,e){var n=parseFloat(e[0]);if(!isNaN(n)){var n=n*Math.PI/180,r=i.position.copy();if(isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0),i instanceof Po){if(e=i.ed.copy(),e.type===Fu)e=t.Xr(e);else if(e.type===zu)e=Gl(e);else if(e.type===Lu){e.type=Bu,t=new X(e.ua,e.va);var o=new Z(Ru,e.F,e.G);t.Fa.add(o),e.ub.add(t)}e.offset(r.x,r.y),e.transform(1,0,Math.tan(n),1,-r.x,-r.y),t=e.normalize(),i.ed=e,r.x-=t.x,r.y-=t.y,i.position=r}else if(i instanceof to){for(i=i.elements.i;i.next();)n=i.value.position.copy(),n.x+=r.x,n.y+=r.y,i.value.position=n;for(i.reset();i.next();)El(t,i.value,e);for(i.reset();i.next();)t=i.value,n=t.position.copy(),n.x-=r.x,n.y-=r.y,t.position=n}}}function Il(t,i,e){var n=parseFloat(e[0]);if(!isNaN(n)){var n=n*Math.PI/180,r=i.position.copy();if(isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0),i instanceof Po){if(e=i.ed.copy(),e.type===Fu)e=t.Xr(e);else if(e.type===zu)e=Gl(e);else if(e.type===Lu){e.type=Bu,t=new X(e.ua,e.va);var o=new Z(Ru,e.F,e.G);t.Fa.add(o),e.ub.add(t)}e.offset(r.x,r.y),e.transform(1,Math.tan(n),0,1,-r.x,-r.y),t=e.normalize(),i.ed=e,r.x-=t.x,r.y-=t.y,i.position=r}else if(i instanceof to){for(i=i.elements.i;i.next();)o=i.value,n=o.position.copy(),n.x+=r.x,n.y+=r.y,o.position=n;for(i.reset();i.next();)Il(t,i.value,e);for(i.reset();i.next();)t=i.value,n=t.position.copy(),n.x-=r.x,n.y-=r.y,t.position=n}}}function Rl(t){var i=!1;if("polygon"===t.tagName)i=!0;else if("polyline"!==t.tagName)return null;var e=new Po,n=t.getAttribute("points");t=new H;var r=new l(X),o=n.split(/\s*[\s,]\s*/);if(4>o.length)return null;for(var n=null,s=new l(Z),a=1;a<o.length;a+=2){var h=parseFloat(o[a-1]),u=parseFloat(o[a]);if("number"!=typeof h||isNaN(h)||"number"!=typeof u||isNaN(u))return null;1===a?n=new X(h,u):s.add(new Z(Ru,h,u))}return i&&(i=new Z(Ru,n.ua,n.va),i.close(),s.add(i)),n.Fa=s,r.add(n),t.ub=r,i=t.normalize(),e.position=new m(-i.x,-i.y),e.ed=t,e}function Gl(t){var i=t.ua,e=t.va,n=t.F,r=t.G,o=Math.abs(n-i)/2,s=Math.abs(r-e)/2,i=Math.min(i,n)+o,e=Math.min(e,r)+s,r=new X(i,e-s),n=new Z(Gu);return n.Rb=i+Au.sa*o,n.jc=e-s,n.df=i+o,n.ef=e-Au.sa*s,n.F=i+o,n.G=e,r.Fa.add(n),n=new Z(Gu),n.Rb=i+o,n.jc=e+Au.sa*s,n.df=i+Au.sa*o,n.ef=e+s,n.F=i,n.G=e+s,r.Fa.add(n),n=new Z(Gu),n.Rb=i-Au.sa*o,n.jc=e+s,n.df=i-o,n.ef=e+Au.sa*s,n.F=i-o,n.G=e,r.Fa.add(n),n=new Z(Gu),n.Rb=i-o,n.jc=e-Au.sa*s,n.df=i-Au.sa*o,n.ef=e-s,n.F=i,n.G=e-s,r.Fa.add(n),t.type=Bu,t.ub.add(r),t}function Vl(){Mr.call(this),this.Me=null}var Hl,Kl={};if(!t.document||void 0===t.document.createElement("canvas").getContext)throw t.console&&t.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");!function(){for(var i=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[e[n]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[e[n]+"CancelAnimationFrame"]||t[e[n]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(e){var n=(new Date).getTime(),r=Math.max(8,16-(n-i)),o=t.setTimeout(function(){e(n+r)},r);return i=n+r,o}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(i){t.clearTimeout(i)})}(),Kl.Debug=null;var Ul={Xc:1,Fc:2,Oc:4,Nc:8,Dm:void 0!==t.navigator&&0<t.navigator.userAgent.indexOf("534.30")&&0<t.navigator.userAgent.indexOf("Android"),aH:void 0!==t.navigator&&0<t.navigator.userAgent.indexOf("MSIE 10.0"),bH:void 0!==t.navigator&&0<t.navigator.userAgent.indexOf("Trident/7"),FJ:void 0!==t.navigator&&0<t.navigator.userAgent.indexOf("Edge/"),Em:0<=navigator.platform.toUpperCase().indexOf("MAC"),cH:null!==navigator.platform.match(/(iPhone|iPod|iPad)/i),gD:function(t,i,e){var n=-1;return function(){var r=this,o=arguments;-1!==n&&Ul.clearTimeout(n),n=Ul.setTimeout(function(){n=-1,e||t.apply(r,o)},i),e&&!n&&t.apply(r,o)}},setTimeout:function(i,e){return t.setTimeout(i,e)},clearTimeout:function(i){t.clearTimeout(i)},setInterval:function(i,e){return t.setInterval(i,e)},clearInterval:function(i){t.clearInterval(i)},createElement:function(i){return t.document.createElement(i)},k:function(t){throw Error(t)},I:function(t,i){if(t.Ca){var e="The object is frozen, so its properties cannot be set: "+t.toString();void 0!==i&&(e+="  to value: "+i),Ul.k(e)}},C:function(t,i,e,n){t instanceof i||(e=Ul.getTypeName(e),void 0!==n&&(e+="."+n),Ul.Kd(t,i,e))},j:function(t,i,e,n){typeof t!==i&&(e=Ul.getTypeName(e),void 0!==n&&(e+="."+n),Ul.Kd(t,i,e))},ze:function(t,i,e){"number"==typeof t&&isFinite(t)||(i=Ul.getTypeName(i),void 0!==e&&(i+="."+e),Ul.k(i+" must be a real number type, and not NaN or Infinity: "+t))},rb:function(t,e,n,r){t instanceof i&&t.Ae===e||(n=Ul.getTypeName(n),void 0!==r&&(n+="."+r),Ul.Kd(t,"a constant of class "+Ul.rg(e),n))},dJ:function(t,i){"string"==typeof t?Wf(t)||Ul.k('Color "'+t+'" is not a valid color string for '+i):t instanceof kr||Ul.k("Value for "+i+" must be a color string or a Brush, not "+t)},Kd:function(t,i,e,n){i=Ul.getTypeName(i),e=Ul.getTypeName(e),void 0!==n&&(e+="."+n),Ul.k("string"==typeof t?e+" value is not an instance of "+i+': "'+t+'"':e+" value is not an instance of "+i+": "+t)},wa:function(t,i,e,n){e=Ul.getTypeName(e),void 0!==n&&(e+="."+n),Ul.k(e+" is not in the range "+i+": "+t)},Wc:function(t){Ul.k(Ul.rg(t)+" constructor cannot take any arguments.")},Mb:function(t){Ul.k("Collection was modified during iteration: "+t.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")},trace:function(i){t.console&&t.console.log(i)},Sa:function(t){return"object"==typeof t&&null!==t},isArray:function(t){return Array.isArray(t)||t instanceof NodeList||t instanceof HTMLCollection},eH:function(t){return Array.isArray(t)},Qy:function(t,i,e){Ul.isArray(t)||Ul.Kd(t,"Array or NodeList or HTMLCollection",i,e)},qb:function(t){return t.length},Pk:function(t){return Array.prototype.slice.call(t)},fb:function(t,i){return Array.isArray(t),t[i]},RC:function(t,i,e){Array.isArray(t)?t[i]=e:Ul.k("Cannot replace an object in an HTMLCollection or NodeList at "+i)},Py:function(t,i){if(Array.isArray(t))return t.indexOf(i);for(var e=t.length,n=0;e>n;n++)if(t[n]===i)return n;return-1},yi:function(t,i,e){Array.isArray(t)?i>=t.length?t.push(e):t.splice(i,0,e):Ul.k("Cannot insert an object into an HTMLCollection or NodeList: "+e+" at "+i)},zi:function(t,i){Array.isArray(t)?i>=t.length?t.pop():t.splice(i,1):Ul.k("Cannot remove an object from an HTMLCollection or NodeList at "+i)},Ww:[],K:function(){var t=Ul.Ww.pop();return void 0===t?new m:t},fc:function(t,i){var e=Ul.Ww.pop();return void 0===e?new m(t,i):(e.x=t,e.y=i,e)},v:function(t){Ul.Ww.push(t)},xA:[],ul:function(){var t=Ul.xA.pop();return void 0===t?new w:t},Oj:function(t){Ul.xA.push(t)},Xw:[],Sf:function(){var t=Ul.Xw.pop();return void 0===t?new k:t},Vj:function(t,i,e,n){var r=Ul.Xw.pop();return void 0===r?new k(t,i,e,n):(r.x=t,r.y=i,r.width=e,r.height=n,r)},ic:function(t){Ul.Xw.push(t)},yA:[],jh:function(){var t=Ul.yA.pop();return void 0===t?new N:t},Ye:function(t){Ul.yA.push(t)},Yw:null,p:function(){var t=Ul.Yw;return null!==t?(Ul.Yw=null,t):new Xo},q:function(t){t.reset(),Ul.Yw=t},wA:[],eb:function(){var t=Ul.wA.pop();return void 0===t?[]:t},ra:function(t){t.length=0,Ul.wA.push(t)},mh:Object.freeze([]),zA:1,gc:function(t){t.__gohashid=Ul.zA++},Is:function(t){var i=t.__gohashid;return void 0===i&&(i=Ul.zA++,t.__gohashid=i),i},Uc:function(t){return t.__gohashid},fa:function(t,i){i.hx=t,Kl[t]=i},Ga:function(t,i){function e(){}e.prototype=i.prototype,t.prototype=new e,t.prototype.constructor=t},Mh:function(t){t.AF=!0},defineProperty:function(t,i,e,n,r){Ul.j(t,"function","Util.defineProperty:classfunc"),Ul.j(i,"object","Util.defineProperty:propobj"),Ul.j(e,"function","Util.defineProperty:getter"),Ul.j(n,"function","Util.defineProperty:setter");for(var o in i){if(i=i[o],e={get:e,set:n},void 0!==r)for(var s in r)e[s]=r[s];Object.defineProperty(t.prototype,o,e),r=Object.getOwnPropertyDescriptor(t.prototype,o),i&&r&&Object.defineProperty(t.prototype,i,r);break}},FI:!1,u:function(t,i,e,n){Ul.j(t,"function","Util.defineReadOnlyProperty:classfunc"),Ul.j(i,"object","Util.defineReadOnlyProperty:propobj"),Ul.j(e,"function","Util.defineReadOnlyProperty:getter");for(var r in i){var o=i[r];if(i={get:e,set:function(t){Ul.k('The property "'+o+'" is read-only and cannot be set to '+t)}},void 0!==n)for(var s in n)i[s]=n[s];Object.defineProperty(t.prototype,r,i),n=Object.getOwnPropertyDescriptor(t.prototype,r),o&&n&&Object.defineProperty(t.prototype,o,n);break}},Xd:function(t,i){for(var e in i)i[e]=!0;t.prototype.UB=i},getTypeName:function(t){return void 0===t?"":"string"==typeof t?t:"function"==typeof t?Ul.rg(t):null===t?"*":""},rg:function(t){if("function"==typeof t){if(t.hx)return t.hx;if(t.name)return t.name;var i=t.toString(),e=i.indexOf("("),i=i.substring(9,e).trim();if(""!==i)return t.hx=i}else if("object"==typeof t&&t.constructor)return Ul.rg(t.constructor);return typeof t},s:function(t,e,n){Ul.j(t,"function","Util.defineEnumValue:classfunc"),Ul.j(e,"string","Util.defineEnumValue:name"),Ul.j(n,"number","Util.defineEnumValue:num"),n=new i(t,e,n),Object.freeze(n),t[e]=n;var r=t.Dt;return r instanceof g||(r=new g("string",i),t.Dt=r),r.add(e,n),n},sb:function(t,i){if(!t||!i)return null;var e=void 0;try{"function"==typeof i?e=i(t):"function"==typeof t.getAttribute?(e=t.getAttribute(i),null===e&&(e=void 0)):e=t[i]}catch(n){}return e},Oa:function(t,i,e){if(t&&i)try{"function"==typeof i?i(t,e):"function"==typeof t.setAttribute?t.setAttribute(i,e):t[i]=e}catch(n){}},ot:function(t,i){Ul.j(t,"object","Setting properties requires Objects as arguments"),Ul.j(i,"object","Setting properties requires Objects as arguments");var e,n=t instanceof to,r=t instanceof Ge;for(e in i){""===e&&Ul.k("Setting properties requires non-empty property names");var o=t,s=e;if(n||r){var a=e.indexOf(".");if(a>0){var h=e.substring(0,a);n?o=t.je(h):(o=t[h],(void 0===o||null===o)&&(o=t.tb[h])),Ul.Sa(o)?s=e.substr(a+1):Ul.k("Unable to find object named: "+h+" in "+t.toString()+" when trying to set property: "+e)}}if("_"!==s[0]&&!Ul.jz(o,s))if(r&&Ul.jz(t.tb,s))o=t.tb;else{if(r&&er(t,s)){t.Ky(s,i[s]);continue}Ul.k('Trying to set undefined property "'+s+'" on object: '+o.toString())}o[s]=i[e],"_"===s[0]&&(a=o.Bl,Ul.isArray(a)||(a=[],o.Bl=a),a.push(s))}},jz:function(t,i){if(t.hasOwnProperty(i))return!0;for(var e=Object.getPrototypeOf(t);e&&e!==Function;){if(e.hasOwnProperty(i))return!0;var n=e.UB;if(n&&n[i])return!0;e=Object.getPrototypeOf(e)}return!1},VC:function(t,i){if(!Ul.Sa(i)||i instanceof Element||i instanceof CanvasRenderingContext2D||i instanceof V||i instanceof n)return"";var e,r="";for(e in i)if("string"!=typeof e)""===r&&(r=i+"\n"),r+="  "+e+" is not a string property\n";else if("_"!==e.charAt(0)&&!(2>=e.length)){var o=Ul.sb(i,e);
null===o||"function"==typeof o||Ul.jz(i,e)||(""===r&&(r=i+"\n"),r+='  unknown property "'+e+'" has value: '+o+" at "+t+"\n")}return r},Kv:function(t,i){if(null!==i&&"number"!=typeof i&&"string"!=typeof i&&"boolean"!=typeof i&&"function"!=typeof i)if(void 0!==Ul.Uc(i)){if(!Ul.bv.contains(i))if(Ul.bv.add(i),Ul.Ju.add(Ul.VC(t,i)),i instanceof l||i instanceof f||i instanceof g)for(var e=i.i;e.next();)Ul.Kv(t+"["+e.key+"]",e.value);else for(e in i){var n=Ul.sb(i,e);if(void 0!==n&&null!==n&&Ul.Sa(n)&&n!==i.UB){if(i instanceof Fo){if(n===i.ej)continue}else if(i instanceof to){if("data"===e||n===i.rh)continue;if("itemArray"===e||n===i.gi)continue;if(i instanceof es&&n===i.Bk)continue}else if(!(i instanceof Ge))if(i instanceof Mi){if("archetypeGroupData"===e||n===i.ax)continue}else if(i instanceof oe){if("archetypeLinkData"===e||n===i.ex)continue;if("archetypeLabelNodeData"===e||n===i.bx)continue}else if(i instanceof ye){if("archetypeNodeData"===e||n===i.ik)continue}else if(i instanceof ei){if("nodeDataArray"===e||n===i.mf)continue;if("linkDataArray"===e||n===i.Ch||n===i.Rl)continue;if(n===i.tc)continue;if(n===i.vh)continue}else if(i instanceof ja||i instanceof Fa||i instanceof za)continue;Ul.Kv(t+"."+e,n)}}}else if(Array.isArray(i))for(e=0;e<i.length;e++)Ul.Kv(t+"["+e+"]",i[e]);else Ul.Ju.add(Ul.VC(t,i))},check:function(t){return void 0===Ul.bv?Ul.bv=new f(Object):Ul.bv.clear(),Ul.Ju=new e,Ul.Kv("",t),t=Ul.Ju.toString(),Ul.Ju=null,t},PH:function(t){for(var i=[],e=0;256>e;e++)i[e]=e;for(var n=0,r=0,e=0;256>e;e++)n=(n+i[e]+119)%256,r=i[e],i[e]=i[n],i[n]=r;for(var n=e=0,o="",s=0;s<t.length;s++)e=(e+1)%256,n=(n+i[e])%256,r=i[e],i[e]=i[n],i[n]=r,o+=String.fromCharCode(t.charCodeAt(s)^i[(i[e]+i[n])%256]);return o},PG:function(t){for(var i=[],e=0;256>e;e++)i["0123456789abcdef".charAt(e>>4)+"0123456789abcdef".charAt(15&e)]=String.fromCharCode(e);t.length%2&&(t="0"+t);for(var n=[],r=0,e=0;e<t.length;e+=2)n[r++]=i[t.substr(e,2)];return t=n.join(""),""===t?"0":t},Da:function(t){return Ul.PH(Ul.PG(t))},wl:null,adym:"7da71ca0ad381e90",XF:"@COLOR1",YF:"@COLOR2"};Ul.wl=function(){var e=t.document.createElement("canvas"),n=e.getContext("2d");n[Ul.Da("7ca11abfd022028846")]=Ul.Da("398c3597c01238");for(var r=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22412913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],o=1;5>o;o++)n[Ul.Da("7ca11abfd7330390")];return n[Ul.Da("7ca11abfd022028846")]=Ul.Da("39f046ebb36e4b"),(4!==r.length||"5"!==r[0][0]||"7"!==r[3][0])&&(Ul.s=function(t,e){var n=new i(t,e,2);Object.freeze(n),t[e]=n;var r=t.Dt;return r instanceof g||(r=new g("string",i),t.Dt=r),r.add(e,n),n}),e}(),i.prototype.toString=function(){return Ul.rg(this.HA)+"."+this.Ub},Ul.u(i,{Ae:"classType"},function(){return this.HA}),Ul.u(i,{name:"name"},function(){return this.Ub}),Ul.u(i,{value:"value"},function(){return this.FF});var Yl;i.findName=Yl=function(t,i){if(null===i||""===i)return null;Ul.j(t,"function","findName:classfunc"),Ul.j(i,"string","EnumValue.findName:name");var e=t.Dt;return e instanceof g?e.ta(i):null},e.prototype.toString=function(){return this.FA.join("")},e.prototype.add=function(t){""!==t&&this.FA.push(t)},r.prototype.random=function(){var t=this.seed%this.uA*this.Pw-this.seed/this.uA*this.hF;return this.seed=t>0?t:t+this.Ct,this.seed*this.dF},Ul.u(o,{i:"iterator"},function(){return this}),o.prototype.reset=o.prototype.reset=function(){},o.prototype.next=o.prototype.hasNext=o.prototype.next=function(){return!1},o.prototype.first=o.prototype.first=function(){return null},o.prototype.any=function(){return!1},o.prototype.all=function(){return!0},o.prototype.each=function(){},Ul.u(o,{count:"count"},function(){return 0}),o.prototype.Vf=function(){},o.prototype.toString=function(){return"EmptyIterator"};var Jl=new o;Ul.Xd(s,{key:!0,value:!0}),Ul.u(s,{i:"iterator"},function(){return this}),s.prototype.reset=s.prototype.reset=function(){this.key=-1},s.prototype.next=s.prototype.hasNext=s.prototype.next=function(){return-1===this.key?(this.key=0,!0):!1},s.prototype.first=s.prototype.first=function(){return this.key=0,this.value},s.prototype.any=function(t){return this.key=-1,t(this.value)},s.prototype.all=function(t){return this.key=-1,t(this.value)},s.prototype.each=function(t){this.key=-1,t(this.value)},Ul.u(s,{count:"count"},function(){return 1}),s.prototype.Vf=function(){this.value=null},s.prototype.toString=function(){return"SingletonIterator("+this.value+")"},Ul.Xd(a,{key:!0,value:!0}),Ul.u(a,{i:"iterator"},function(){return this}),Ul.defineProperty(a,{Km:"predicate"},function(){return this.sj},function(t){this.sj=t}),a.prototype.reset=a.prototype.reset=function(){var t=this.xd;t.wd=null,this.Xa=t.U,this.ud=-1},a.prototype.next=a.prototype.hasNext=a.prototype.next=function(){var t=this.xd;if(t.U!==this.Xa){if(0>this.key)return!1;Ul.Mb(t)}var t=t.n,i=t.length,e=++this.ud,n=this.sj;if(null!==n)for(;i>e;){var r=t[e];if(n(r))return this.key=this.ud=e,this.value=r,!0;e++}else{if(i>e)return this.key=e,this.value=t[e],!0;this.Vf()}return!1},a.prototype.first=a.prototype.first=function(){var t=this.xd;this.Xa=t.U,this.ud=0;var t=t.n,i=t.length,e=this.sj;if(null!==e){for(var n=0;i>n;){var r=t[n];if(e(r))return this.key=this.ud=n,this.value=r;n++}return null}return i>0?(r=t[0],this.key=0,this.value=r):null},a.prototype.any=function(t){var i=this.xd;i.wd=null;var e=i.U;this.ud=-1;for(var n=i.n,r=n.length,o=this.sj,s=0;r>s;s++){var a=n[s];if(null===o||o(a)){if(t(a))return!0;i.U!==e&&Ul.Mb(i)}}return!1},a.prototype.all=function(t){var i=this.xd;i.wd=null;var e=i.U;this.ud=-1;for(var n=i.n,r=n.length,o=this.sj,s=0;r>s;s++){var a=n[s];if(null===o||o(a)){if(!t(a))return!1;i.U!==e&&Ul.Mb(i)}}return!0},a.prototype.each=function(t){var i=this.xd;i.wd=null;var e=i.U;this.ud=-1;for(var n=i.n,r=n.length,o=this.sj,s=0;r>s;s++){var a=n[s];(null===o||o(a))&&(t(a),i.U!==e&&Ul.Mb(i))}},Ul.u(a,{count:"count"},function(){var t=this.sj;if(null!==t){for(var i=0,e=this.xd.n,n=e.length,r=0;n>r;r++)t(e[r])&&i++;return i}return this.xd.n.length}),a.prototype.Vf=function(){this.key=-1,this.value=null,this.Xa=-1,this.sj=null,this.xd.wd=this},a.prototype.toString=function(){return"ListIterator@"+this.ud+"/"+this.xd.count},Ul.Xd(h,{key:!0,value:!0}),Ul.u(h,{i:"iterator"},function(){return this}),h.prototype.reset=h.prototype.reset=function(){var t=this.xd;t.In=null,this.Xa=t.U,this.ud=t.n.length},h.prototype.next=h.prototype.hasNext=h.prototype.next=function(){var t=this.xd;if(t.U!==this.Xa){if(0>this.key)return!1;Ul.Mb(t)}var i=--this.ud;return i>=0?(this.key=i,this.value=t.n[i],!0):(this.Vf(),!1)},h.prototype.first=h.prototype.first=function(){var t=this.xd;this.Xa=t.U;var i=t.n;return this.ud=t=i.length-1,t>=0?(i=i[t],this.key=t,this.value=i):null},h.prototype.any=function(t){var i=this.xd;i.In=null;var e=i.U,n=i.n,r=n.length;for(this.ud=r,r-=1;r>=0;r++){if(t(n[r]))return!0;i.U!==e&&Ul.Mb(i)}return!1},h.prototype.all=function(t){var i=this.xd;i.In=null;var e=i.U,n=i.n,r=n.length;for(this.ud=r,r-=1;r>=0;r++){if(!t(n[r]))return!1;i.U!==e&&Ul.Mb(i)}return!0},h.prototype.each=function(t){var i=this.xd;i.In=null;var e=i.U,n=i.n,r=n.length;for(this.ud=r,r-=1;r>=0;r++)t(n[r]),i.U!==e&&Ul.Mb(i)},Ul.u(h,{count:"count"},function(){return this.xd.n.length}),h.prototype.Vf=function(){this.key=-1,this.value=null,this.Xa=-1,this.xd.In=this},h.prototype.toString=function(){return"ListIteratorBackwards("+this.ud+"/"+this.xd.count+")"},Ul.fa("List",l),l.prototype.Pd=function(){var t=this.U;t++,t>999999999&&(t=0),this.U=t},l.prototype.freeze=l.prototype.freeze=function(){return this.Ca=!0,this},l.prototype.thaw=l.prototype.La=function(){return this.Ca=!1,this},l.prototype.toString=function(){return"List("+Ul.getTypeName(this.oa)+")#"+Ul.Uc(this)},l.prototype.add=l.prototype.push=l.prototype.add=function(t){null!==t&&(Ul.I(this,t),this.n.push(t),this.Pd())},l.prototype.addAll=l.prototype.Td=function(t){if(null===t)return this;Ul.I(this);var i=this.n;if(Ul.isArray(t))for(var e=Ul.qb(t),n=0;e>n;n++){var r=Ul.fb(t,n);i.push(r)}else for(t=t.i;t.next();)r=t.value,i.push(r);return this.Pd(),this},l.prototype.clear=l.prototype.clear=function(){Ul.I(this),this.n.length=0,this.Pd()},l.prototype.contains=l.prototype.has=l.prototype.contains=function(t){return null===t?!1:-1!==this.n.indexOf(t)},l.prototype.indexOf=l.prototype.indexOf=function(t){return null===t?-1:this.n.indexOf(t)},l.prototype.elt=l.prototype.get=l.prototype.ja=function(t){var i=this.n;return(0>t||t>=i.length)&&Ul.wa(t,"0 <= i < length",l,"elt:i"),i[t]},l.prototype.setElt=l.prototype.set=l.prototype.Bg=function(t,i){var e=this.n;(0>t||t>=e.length)&&Ul.wa(t,"0 <= i < length",l,"setElt:i"),Ul.I(this,t),e[t]=i},l.prototype.first=l.prototype.first=function(){var t=this.n;return 0===t.length?null:t[0]},l.prototype.last=l.prototype.Gd=function(){var t=this.n,i=t.length;return i>0?t[i-1]:null},l.prototype.pop=l.prototype.pop=function(){Ul.I(this);var t=this.n;return 0<t.length?t.pop():null},l.prototype.any=function(t){for(var i=this.n,e=this.U,n=i.length,r=0;n>r;r++){if(t(i[r]))return!0;this.U!==e&&Ul.Mb(this)}return!1},l.prototype.all=function(t){for(var i=this.n,e=this.U,n=i.length,r=0;n>r;r++){if(!t(i[r]))return!1;this.U!==e&&Ul.Mb(this)}return!0},l.prototype.each=function(t){for(var i=this.n,e=this.U,n=i.length,r=0;n>r;r++)t(i[r]),this.U!==e&&Ul.Mb(this)},l.prototype.insertAt=l.prototype.Yd=function(t,i){0>t&&Ul.wa(t,">= 0",l,"insertAt:i"),Ul.I(this,t);var e=this.n;return t>=e.length?e.push(i):e.splice(t,0,i),this.Pd(),!0},l.prototype.remove=l.prototype["delete"]=l.prototype.remove=function(t){if(null===t)return!1;Ul.I(this,t);var i=this.n;return t=i.indexOf(t),-1===t?!1:(t===i.length-1?i.pop():i.splice(t,1),this.Pd(),!0)},l.prototype.removeAt=l.prototype.jd=function(t){var i=this.n;(0>t||t>=i.length)&&Ul.wa(t,"0 <= i < length",l,"removeAt:i"),Ul.I(this,t),t===i.length-1?i.pop():i.splice(t,1),this.Pd()},l.prototype.removeRange=l.prototype.removeRange=function(t,i){var e=this.n;(0>t||t>=e.length)&&Ul.wa(t,"0 <= from < length",l,"elt:from"),(0>i||i>=e.length)&&Ul.wa(i,"0 <= to < length",l,"elt:to"),Ul.I(this,t);var n=e.slice((i||t)+1||e.length);e.length=0>t?e.length+t:t,e.push.apply(e,n),this.Pd()},l.prototype.copy=function(){for(var t=new l(this.oa),i=this.n,e=this.count,n=0;e>n;n++)t.add(i[n]);return t},l.prototype.toArray=l.prototype.Ke=function(){for(var t=this.n,i=this.count,e=Array(i),n=0;i>n;n++)e[n]=t[n];return e},l.prototype.toSet=function(){for(var t=new f(this.oa),i=this.n,e=this.count,n=0;e>n;n++)t.add(i[n]);return t},l.prototype.sort=l.prototype.sort=function(t){return Ul.I(this),this.n.sort(t),this.Pd(),this},l.prototype.sortRange=l.prototype.hp=function(t,i,e){var n=this.n,r=n.length;void 0===i&&(i=0),void 0===e&&(e=r),Ul.I(this);var o=e-i;if(1>=o)return this;if((0>i||i>=r-1)&&Ul.wa(i,"0 <= from < length",l,"sortRange:from"),2===o)return e=n[i],r=n[i+1],0<t(e,r)&&(n[i]=r,n[i+1]=e,this.Pd()),this;if(0===i)if(e>=r)n.sort(t);else for(o=n.slice(0,e),o.sort(t),t=0;e>t;t++)n[t]=o[t];else if(e>=r)for(o=n.slice(i),o.sort(t),t=i;r>t;t++)n[t]=o[t-i];else for(o=n.slice(i,e),o.sort(t),t=i;e>t;t++)n[t]=o[t-i];return this.Pd(),this},l.prototype.reverse=l.prototype.reverse=function(){return Ul.I(this),this.n.reverse(),this.Pd(),this},Ul.u(l,{count:"count"},function(){return this.n.length}),Ul.u(l,{size:"size"},function(){return this.n.length}),Ul.u(l,{length:"length"},function(){return this.n.length}),Ul.u(l,{i:"iterator"},function(){if(0>=this.n.length)return Jl;var t=this.wd;return null!==t?(t.reset(),t):new a(this)}),Ul.u(l,{Fm:"iteratorBackwards"},function(){if(0>=this.n.length)return Jl;var t=this.In;return null!==t?(t.reset(),t):new h(this)}),Ul.Xd(u,{key:!0,value:!0}),Ul.u(u,{i:"iterator"},function(){return this}),u.prototype.reset=u.prototype.reset=function(){var t=this.Gk;t.wd=null,this.Xa=t.U,this.Cb=null},u.prototype.next=u.prototype.hasNext=u.prototype.next=function(){var t=this.Gk;if(t.U!==this.Xa){if(null===this.key)return!1;Ul.Mb(t)}var i=this.Cb,i=null===i?t.bb:i.Sb;return null!==i?(this.Cb=i,this.value=i.value,this.key=i.key,!0):(this.Vf(),!1)},u.prototype.first=u.prototype.first=function(){var t=this.Gk;if(this.Xa=t.U,t=t.bb,null!==t){this.Cb=t;var i=t.value;return this.key=t.key,this.value=i}return null},u.prototype.any=function(t){var i=this.Gk;i.wd=null;var e=i.U;this.Cb=null;for(var n=i.bb;null!==n;){if(t(n.value))return!0;i.U!==e&&Ul.Mb(i),n=n.Sb}return!1},u.prototype.all=function(t){var i=this.Gk;i.wd=null;var e=i.U;this.Cb=null;for(var n=i.bb;null!==n;){if(!t(n.value))return!1;i.U!==e&&Ul.Mb(i),n=n.Sb}return!0},u.prototype.each=function(t){var i=this.Gk;i.wd=null;var e=i.U;this.Cb=null;for(var n=i.bb;null!==n;)t(n.value),i.U!==e&&Ul.Mb(i),n=n.Sb},Ul.u(u,{count:"count"},function(){return this.Gk.Zc}),u.prototype.Vf=function(){this.value=this.key=null,this.Xa=-1,this.Gk.wd=this},u.prototype.toString=function(){return null!==this.Cb?"SetIterator@"+this.Cb.value:"SetIterator"},Ul.fa("Set",f),f.prototype.Pd=function(){var t=this.U;t++,t>999999999&&(t=0),this.U=t},f.prototype.freeze=f.prototype.freeze=function(){return this.Ca=!0,this},f.prototype.thaw=f.prototype.La=function(){return this.Ca=!1,this},f.prototype.toString=function(){return"Set("+Ul.getTypeName(this.oa)+")#"+Ul.Uc(this)},f.prototype.add=f.prototype.add=function(t){if(null===t)return!1;Ul.I(this,t);var i=t;return Ul.Sa(t)&&(i=Ul.Is(t)),void 0===this.$c[i]?(this.Zc++,t=new y(t,t),this.$c[i]=t,i=this.Bh,null===i?this.bb=t:(t.Un=i,i.Sb=t),this.Bh=t,this.Pd(),!0):!1},f.prototype.addAll=f.prototype.Td=function(t){if(null===t)return this;if(Ul.I(this),Ul.isArray(t))for(var i=Ul.qb(t),e=0;i>e;e++)this.add(Ul.fb(t,e));else for(t=t.i;t.next();)this.add(t.value);return this},f.prototype.contains=f.prototype.has=f.prototype.contains=function(t){if(null===t)return!1;var i=t;return Ul.Sa(t)&&(i=Ul.Uc(t),void 0===i)?!1:void 0!==this.$c[i]},f.prototype.containsAll=function(t){if(null===t)return!0;for(t=t.i;t.next();)if(!this.contains(t.value))return!1;return!0},f.prototype.containsAny=function(t){if(null===t)return!0;for(t=t.i;t.next();)if(this.contains(t.value))return!0;return!1},f.prototype.first=f.prototype.first=function(){var t=this.bb;return null===t?null:t.value},f.prototype.any=function(t){for(var i=this.U,e=this.bb;null!==e;){if(t(e.value))return!0;this.U!==i&&Ul.Mb(this),e=e.Sb}return!1},f.prototype.all=function(t){for(var i=this.U,e=this.bb;null!==e;){if(!t(e.value))return!1;this.U!==i&&Ul.Mb(this),e=e.Sb}return!0},f.prototype.each=function(t){for(var i=this.U,e=this.bb;null!==e;)t(e.value),this.U!==i&&Ul.Mb(this),e=e.Sb},f.prototype.remove=f.prototype["delete"]=f.prototype.remove=function(t){if(null===t)return!1;Ul.I(this,t);var i=t;if(Ul.Sa(t)&&(i=Ul.Uc(t),void 0===i))return!1;if(t=this.$c[i],void 0===t)return!1;var e=t.Sb,n=t.Un;return null!==e&&(e.Un=n),null!==n&&(n.Sb=e),this.bb===t&&(this.bb=e),this.Bh===t&&(this.Bh=n),delete this.$c[i],this.Zc--,this.Pd(),!0},f.prototype.removeAll=f.prototype.jE=function(t){if(null===t)return this;if(Ul.I(this),Ul.isArray(t))for(var i=Ul.qb(t),e=0;i>e;e++)this.remove(Ul.fb(t,e));else for(t=t.i;t.next();)this.remove(t.value);return this},f.prototype.retainAll=function(t){if(null===t||0===this.count)return this;Ul.I(this);var i=new f(this.oa);i.Td(t),t=new l(this.oa);for(var e=this.i;e.next();)i.contains(e.value)||t.add(e.value);for(i=t.i;i.next();)this.remove(i.value);return this},f.prototype.clear=f.prototype.clear=function(){Ul.I(this),this.$c={},this.Zc=0,this.Bh=this.bb=null,this.Pd()},f.prototype.copy=function(){var t,i=new f(this.oa),e=this.$c;for(t in e)i.add(e[t].value);return i},f.prototype.toArray=f.prototype.Ke=function(){var t,i=Array(this.Zc),e=this.$c,n=0;for(t in e)i[n]=e[t].value,n++;return i},f.prototype.toList=function(){var t,i=new l(this.oa),e=this.$c;for(t in e)i.add(e[t].value);return i},Ul.u(f,{count:"count"},function(){return this.Zc}),Ul.u(f,{size:"size"},function(){return this.Zc}),Ul.u(f,{i:"iterator"},function(){if(0>=this.Zc)return Jl;var t=this.wd;return null!==t?(t.reset(),t):new u(this)}),Ul.Xd(c,{key:!0,value:!0}),Ul.u(c,{i:"iterator"},function(){return this}),c.prototype.reset=c.prototype.reset=function(){this.Xa=this.Wa.U,this.Cb=null},c.prototype.next=c.prototype.hasNext=c.prototype.next=function(){var t=this.Wa;if(t.U!==this.Xa){if(null===this.key)return!1;Ul.Mb(t)}var i=this.Cb,i=null===i?t.bb:i.Sb;return null!==i?(this.Cb=i,this.value=this.key=t=i.key,!0):(this.Vf(),!1)},c.prototype.first=c.prototype.first=function(){var t=this.Wa;return this.Xa=t.U,t=t.bb,null!==t?(this.Cb=t,this.value=this.key=t=t.key):null},c.prototype.any=function(t){var i=this.Wa,e=i.U;this.Cb=null;for(var n=i.bb;null!==n;){if(t(n.key))return!0;i.U!==e&&Ul.Mb(i),n=n.Sb}return!1},c.prototype.all=function(t){var i=this.Wa,e=i.U;this.Cb=null;for(var n=i.bb;null!==n;){if(!t(n.key))return!1;i.U!==e&&Ul.Mb(i),n=n.Sb}return!0},c.prototype.each=function(t){var i=this.Wa,e=i.U;this.Cb=null;for(var n=i.bb;null!==n;)t(n.key),i.U!==e&&Ul.Mb(i),n=n.Sb},Ul.u(c,{count:"count"},function(){return this.Wa.Zc}),c.prototype.Vf=function(){this.value=this.key=null,this.Xa=-1},c.prototype.toString=function(){return null!==this.Cb?"MapKeySetIterator@"+this.Cb.value:"MapKeySetIterator"},Ul.Ga(p,f),p.prototype.freeze=function(){return this},p.prototype.La=function(){return this},p.prototype.toString=function(){return"MapKeySet("+this.Wa.toString()+")"},p.prototype.add=p.prototype.set=p.prototype.add=function(){return Ul.k("This Set is read-only: "+this.toString()),!1},p.prototype.contains=p.prototype.has=p.prototype.contains=function(t){return this.Wa.contains(t)},p.prototype.remove=p.prototype["delete"]=p.prototype.remove=function(){return Ul.k("This Set is read-only: "+this.toString()),!1},p.prototype.clear=p.prototype.clear=function(){Ul.k("This Set is read-only: "+this.toString())},p.prototype.first=p.prototype.first=function(){var t=this.Wa.bb;return null!==t?t.key:null},p.prototype.any=function(t){for(var i=this.Wa.bb;null!==i;){if(t(i.key))return!0;i=i.Sb}return!1},p.prototype.all=function(t){for(var i=this.Wa.bb;null!==i;){if(!t(i.key))return!1;i=i.Sb}return!0},p.prototype.each=function(t){for(var i=this.Wa.bb;null!==i;)t(i.key),i=i.Sb},p.prototype.copy=function(){return new p(this.Wa)},p.prototype.toSet=function(){var t,i=new f(this.Wa.wq),e=this.Wa.$c;for(t in e)i.add(e[t].key);return i},p.prototype.toArray=p.prototype.Ke=function(){var t,i=this.Wa.$c,e=Array(this.Wa.Zc),n=0;for(t in i)e[n]=i[t].key,n++;return e},p.prototype.toList=function(){var t,i=new l(this.oa),e=this.Wa.$c;for(t in e)i.add(e[t].key);return i},Ul.u(p,{count:"count"},function(){return this.Wa.Zc}),Ul.u(p,{size:"size"},function(){return this.Wa.Zc}),Ul.u(p,{i:"iterator"},function(){return 0>=this.Wa.Zc?Jl:new c(this.Wa)}),Ul.Xd(d,{key:!0,value:!0}),Ul.u(d,{i:"iterator"},function(){return this}),d.prototype.reset=d.prototype.reset=function(){var t=this.Wa;t.Jn=null,this.Xa=t.U,this.Cb=null},d.prototype.next=d.prototype.hasNext=d.prototype.next=function(){var t=this.Wa;if(t.U!==this.Xa){if(null===this.key)return!1;Ul.Mb(t)}var i=this.Cb,i=null===i?t.bb:i.Sb;return null!==i?(this.Cb=i,this.value=i.value,this.key=i.key,!0):(this.Vf(),!1)},d.prototype.first=d.prototype.first=function(){var t=this.Wa;if(this.Xa=t.U,t=t.bb,null!==t){this.Cb=t;var i=t.value;return this.key=t.key,this.value=i}return null},d.prototype.any=function(t){var i=this.Wa;i.Jn=null;var e=i.U;this.Cb=null;for(var n=i.bb;null!==n;){if(t(n.value))return!0;i.U!==e&&Ul.Mb(i),n=n.Sb}return!1},d.prototype.all=function(t){var i=this.Wa;i.Jn=null;var e=i.U;this.Cb=null;for(var n=i.bb;null!==n;){if(!t(n.value))return!1;i.U!==e&&Ul.Mb(i),n=n.Sb}return!0},d.prototype.each=function(t){var i=this.Wa;i.Jn=null;var e=i.U;this.Cb=null;for(var n=i.bb;null!==n;)t(n.value),i.U!==e&&Ul.Mb(i),n=n.Sb},Ul.u(d,{count:"count"},function(){return this.Wa.Zc}),d.prototype.Vf=function(){this.value=this.key=null,this.Xa=-1,this.Wa.Jn=this},d.prototype.toString=function(){return null!==this.Cb?"MapValueSetIterator@"+this.Cb.value:"MapValueSetIterator"},Ul.Xd(y,{key:!0,value:!0}),y.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},Ul.Xd(v,{key:!0,value:!0}),Ul.u(v,{i:"iterator"},function(){return this}),v.prototype.reset=v.prototype.reset=function(){var t=this.Wa;t.wd=null,this.Xa=t.U,this.Cb=null},v.prototype.next=v.prototype.hasNext=v.prototype.next=function(){var t=this.Wa;if(t.U!==this.Xa){if(null===this.key)return!1;Ul.Mb(t)}var i=this.Cb,i=null===i?t.bb:i.Sb;return null!==i?(this.Cb=i,this.key=i.key,this.value=i.value,!0):(this.Vf(),!1)},v.prototype.first=v.prototype.first=function(){var t=this.Wa;return this.Xa=t.U,t=t.bb,null!==t?(this.Cb=t,this.key=t.key,this.value=t.value,t):null},v.prototype.any=function(t){var i=this.Wa;i.wd=null;var e=i.U;this.Cb=null;for(var n=i.bb;null!==n;){if(t(n))return!0;i.U!==e&&Ul.Mb(i),n=n.Sb}return!1},v.prototype.all=function(t){var i=this.Wa;i.wd=null;var e=i.U;this.Cb=null;for(var n=i.bb;null!==n;){if(!t(n))return!1;i.U!==e&&Ul.Mb(i),n=n.Sb}return!0},v.prototype.each=function(t){var i=this.Wa;i.wd=null;var e=i.U;this.Cb=null;for(var n=i.bb;null!==n;)t(n),i.U!==e&&Ul.Mb(i),n=n.Sb},Ul.u(v,{count:"count"},function(){return this.Wa.Zc}),v.prototype.Vf=function(){this.value=this.key=null,this.Xa=-1,this.Wa.wd=this},v.prototype.toString=function(){return null!==this.Cb?"MapIterator@"+this.Cb:"MapIterator"},Ul.fa("Map",g),g.prototype.Pd=function(){var t=this.U;t++,t>999999999&&(t=0),this.U=t},g.prototype.freeze=g.prototype.freeze=function(){return this.Ca=!0,this},g.prototype.thaw=g.prototype.La=function(){return this.Ca=!1,this},g.prototype.toString=function(){return"Map("+Ul.getTypeName(this.wq)+","+Ul.getTypeName(this.tv)+")#"+Ul.Uc(this)},g.prototype.add=g.prototype.set=g.prototype.add=function(t,i){Ul.I(this,t);var e=t;Ul.Sa(t)&&(e=Ul.Is(t));var n=this.$c[e];return void 0===n?(this.Zc++,n=new y(t,i),this.$c[e]=n,e=this.Bh,null===e?this.bb=n:(n.Un=e,e.Sb=n),this.Bh=n,this.Pd(),!0):(n.value=i,!1)},g.prototype.addAll=g.prototype.Td=function(t){if(null===t)return this;if(Ul.isArray(t))for(var i=Ul.qb(t),e=0;i>e;e++){var n=Ul.fb(t,e);this.add(n.key,n.value)}else for(t=t.i;t.next();)this.add(t.key,t.value);return this},g.prototype.first=g.prototype.first=function(){return this.bb},g.prototype.any=function(t){for(var i=this.U,e=this.bb;null!==e;){if(t(e))return!0;this.U!==i&&Ul.Mb(this),e=e.Sb}return!1},g.prototype.all=function(t){for(var i=this.U,e=this.bb;null!==e;){if(!t(e))return!1;this.U!==i&&Ul.Mb(this),e=e.Sb}return!0},g.prototype.each=function(t){for(var i=this.U,e=this.bb;null!==e;)t(e),this.U!==i&&Ul.Mb(this),e=e.Sb},g.prototype.contains=g.prototype.has=g.prototype.contains=function(t){var i=t;return Ul.Sa(t)&&(i=Ul.Uc(t),void 0===i)?!1:void 0!==this.$c[i]},g.prototype.getValue=g.prototype.get=g.prototype.ta=function(t){var i=t;return Ul.Sa(t)&&(i=Ul.Uc(t),void 0===i)?null:(t=this.$c[i],void 0===t?null:t.value)},g.prototype.remove=g.prototype["delete"]=g.prototype.remove=function(t){if(null===t)return!1;Ul.I(this,t);var i=t;if(Ul.Sa(t)&&(i=Ul.Uc(t),void 0===i))return!1;if(t=this.$c[i],void 0===t)return!1;var e=t.Sb,n=t.Un;return null!==e&&(e.Un=n),null!==n&&(n.Sb=e),this.bb===t&&(this.bb=e),this.Bh===t&&(this.Bh=n),delete this.$c[i],this.Zc--,this.Pd(),!0},g.prototype.clear=g.prototype.clear=function(){Ul.I(this),this.$c={},this.Zc=0,this.Bh=this.bb=null,this.Pd()},g.prototype.copy=function(){var t,i=new g(this.wq,this.tv),e=this.$c;for(t in e){var n=e[t];i.add(n.key,n.value)}return i},g.prototype.toArray=g.prototype.Ke=function(){var t,i=this.$c,e=Array(this.Zc),n=0;for(t in i){var r=i[t];e[n]=new y(r.key,r.value),n++}return e},g.prototype.toKeySet=g.prototype.Ni=function(){return new p(this)},Ul.u(g,{count:"count"},function(){return this.Zc}),Ul.u(g,{size:"size"},function(){return this.Zc}),Ul.u(g,{i:"iterator"},function(){if(0>=this.count)return Jl;var t=this.wd;return null!==t?(t.reset(),t):new v(this)}),Ul.u(g,{PJ:"iteratorKeys"},function(){return 0>=this.count?Jl:new c(this)}),Ul.u(g,{RD:"iteratorValues"},function(){if(0>=this.count)return Jl;var t=this.Jn;return null!==t?(t.reset(),t):new d(this)}),Ul.fa("Point",m),Ul.Mh(m),Ul.Xd(m,{x:!0,y:!0}),m.prototype.assign=function(t){this.x=t.x,this.y=t.y},m.prototype.setTo=m.prototype.m=function(t,i){return this.x=t,this.y=i,this},m.prototype.set=m.prototype.set=function(t){return this.I(),this.x=t.x,this.y=t.y,this},m.prototype.copy=function(){var t=new m;return t.x=this.x,t.y=this.y,t},Hl=m.prototype,Hl.Ka=function(){return this.Ca=!0,Object.freeze(this),this},Hl.Z=function(){return Object.isFrozen(this)?this:this.copy().freeze()},Hl.freeze=function(){return this.Ca=!0,this},Hl.La=function(){return Object.isFrozen(this)&&Ul.k("cannot thaw constant: "+this),this.Ca=!1,this},Hl.I=function(t){if(this.Ca){var i="The Point is frozen, so its properties cannot be set: "+this.toString();void 0!==t&&(i+="  to value: "+t),Ul.k(i)}},m.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var i=0,e=0;""===t[i];)i++;var n=t[i++];n&&(e=parseFloat(n));for(var r=0;""===t[i];)i++;return(n=t[i++])&&(r=parseFloat(n)),new m(e,r)}return new m},m.stringify=function(t){return t instanceof m?t.x.toString()+" "+t.y.toString():t.toString()},m.prototype.toString=function(){return"Point("+this.x+","+this.y+")"},m.prototype.equals=m.prototype.L=function(t){return t instanceof m?this.x===t.x&&this.y===t.y:!1},m.prototype.equalTo=m.prototype.Tv=function(t,i){return this.x===t&&this.y===i},m.prototype.equalsApprox=m.prototype.De=function(t){return Au.D(this.x,t.x)&&Au.D(this.y,t.y)},m.prototype.add=m.prototype.add=function(t){return this.I(),this.x+=t.x,this.y+=t.y,this},m.prototype.subtract=m.prototype.vt=function(t){return this.I(),this.x-=t.x,this.y-=t.y,this},m.prototype.offset=m.prototype.offset=function(t,i){return this.I(),this.x+=t,this.y+=i,this},m.prototype.rotate=m.prototype.rotate=function(t){if(this.I(),0===t)return this;var i=this.x,e=this.y;if(0===i&&0===e)return this;var n=0,r=0;return t>=360?t-=360:0>t&&(t+=360),90===t?(n=0,r=1):180===t?(n=-1,r=0):270===t?(n=0,r=-1):(t=t*Math.PI/180,n=Math.cos(t),r=Math.sin(t)),this.x=n*i-r*e,this.y=r*i+n*e,this},m.prototype.scale=m.prototype.scale=function(t,i){return this.x*=t,this.y*=i,this},m.prototype.distanceSquaredPoint=m.prototype.Lj=function(t){var i=t.x-this.x;return t=t.y-this.y,i*i+t*t},m.prototype.distanceSquared=m.prototype.ss=function(t,i){var e=t-this.x,n=i-this.y;return e*e+n*n},m.prototype.normalize=m.prototype.normalize=function(){this.I();var t=this.x,i=this.y,e=Math.sqrt(t*t+i*i);return e>0&&(this.x=t/e,this.y=i/e),this},m.prototype.directionPoint=m.prototype.Fi=function(t){return b(t.x-this.x,t.y-this.y)},m.prototype.direction=m.prototype.direction=function(t,i){return b(t-this.x,i-this.y)},m.prototype.projectOntoLineSegment=function(t,i,e,n){return Au.Hm(t,i,e,n,this.x,this.y,this),this},m.prototype.projectOntoLineSegmentPoint=function(t,i){return Au.Hm(t.x,t.y,i.x,i.y,this.x,this.y,this),this},m.prototype.snapToGrid=function(t,i,e,n){return Au.xs(this.x,this.y,t,i,e,n,this),this},m.prototype.snapToGridPoint=function(t,i){return Au.xs(this.x,this.y,t.x,t.y,i.width,i.height,this),this},m.prototype.setRectSpot=m.prototype.pt=function(t,i){return this.I(),this.x=t.x+i.x*t.width+i.offsetX,this.y=t.y+i.y*t.height+i.offsetY,this},m.prototype.setSpot=m.prototype.rt=function(t,i,e,n,r){return this.I(),this.x=t+r.x*e+r.offsetX,this.y=i+r.y*n+r.offsetY,this},m.prototype.transform=function(t){return t.ab(this),this};var Wl;m.distanceLineSegmentSquared=Wl=function(t,i,e,n,r,o){var s=r-e,a=o-n,h=s*s+a*a;e-=t,n-=i;var l=-e*s-n*a;return 0>=l||l>=h?(s=r-t,a=o-i,Math.min(e*e+n*n,s*s+a*a)):(t=s*n-a*e,t*t/h)};var Xl;m.distanceSquared=Xl=function(t,i,e,n){return t=e-t,i=n-i,t*t+i*i};var Zl;m.direction=Zl=function(t,i,e,n){return t=e-t,i=n-i,0===t?i>0?90:0>i?270:0:0===i?t>0?0:180:isNaN(t)||isNaN(i)?0:(n=180*Math.atan(Math.abs(i/t))/Math.PI,0>t?n=0>i?n+180:180-n:0>i&&(n=360-n),n)},m.prototype.isReal=m.prototype.J=function(){return isFinite(this.x)&&isFinite(this.y)},Ul.fa("Size",w),Ul.Mh(w),Ul.Xd(w,{width:!0,height:!0}),w.prototype.assign=function(t){this.width=t.width,this.height=t.height},w.prototype.setTo=w.prototype.m=function(t,i){return this.width=t,this.height=i,this},w.prototype.set=w.prototype.set=function(t){return this.I(),this.width=t.width,this.height=t.height,this},w.prototype.copy=function(){var t=new w;return t.width=this.width,t.height=this.height,t},Hl=w.prototype,Hl.Ka=function(){return this.Ca=!0,Object.freeze(this),this},Hl.Z=function(){return Object.isFrozen(this)?this:this.copy().freeze()},Hl.freeze=function(){return this.Ca=!0,this},Hl.La=function(){return Object.isFrozen(this)&&Ul.k("cannot thaw constant: "+this),this.Ca=!1,this},Hl.I=function(t){if(this.Ca){var i="The Size is frozen, so its properties cannot be set: "+this.toString();void 0!==t&&(i+="  to value: "+t),Ul.k(i)}},w.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var i=0,e=0;""===t[i];)i++;var n=t[i++];n&&(e=parseFloat(n));for(var r=0;""===t[i];)i++;return(n=t[i++])&&(r=parseFloat(n)),new w(e,r)}return new w},w.stringify=function(t){return t instanceof w?t.width.toString()+" "+t.height.toString():t.toString()},w.prototype.toString=function(){return"Size("+this.width+","+this.height+")"},w.prototype.equals=w.prototype.L=function(t){return t instanceof w?this.width===t.width&&this.height===t.height:!1},w.prototype.equalTo=w.prototype.Tv=function(t,i){return this.width===t&&this.height===i},w.prototype.equalsApprox=w.prototype.De=function(t){return Au.D(this.width,t.width)&&Au.D(this.height,t.height)},w.prototype.isReal=w.prototype.J=function(){return isFinite(this.width)&&isFinite(this.height)},Ul.fa("Rect",k),Ul.Mh(k),Ul.Xd(k,{x:!0,y:!0,width:!0,height:!0}),k.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},k.prototype.setTo=k.prototype.m=function(t,i,e,n){return this.x=t,this.y=i,this.width=e,this.height=n,this},k.prototype.set=k.prototype.set=function(t){return this.I(),this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},k.prototype.setPoint=k.prototype.yf=function(t){return this.I(),this.x=t.x,this.y=t.y,this},k.prototype.setSize=function(t){return this.I(),this.width=t.width,this.height=t.height,this},k.prototype.copy=function(){var t=new k;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},Hl=k.prototype,Hl.Ka=function(){return this.Ca=!0,Object.freeze(this),this},Hl.Z=function(){return Object.isFrozen(this)?this:this.copy().freeze()},Hl.freeze=function(){return this.Ca=!0,this},Hl.La=function(){return Object.isFrozen(this)&&Ul.k("cannot thaw constant: "+this),this.Ca=!1,this},Hl.I=function(t){if(this.Ca){var i="The Rect is frozen, so its properties cannot be set: "+this.toString();void 0!==t&&(i+="  to value: "+t),Ul.k(i)}},k.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var i=0,e=0;""===t[i];)i++;var n=t[i++];n&&(e=parseFloat(n));for(var r=0;""===t[i];)i++;(n=t[i++])&&(r=parseFloat(n));for(var o=0;""===t[i];)i++;(n=t[i++])&&(o=parseFloat(n));for(var s=0;""===t[i];)i++;return(n=t[i++])&&(s=parseFloat(n)),new k(e,r,o,s)}return new k},k.stringify=function(t){return t instanceof k?t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString():t.toString()},k.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},k.prototype.equals=k.prototype.L=function(t){return t instanceof k?this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1},k.prototype.equalTo=k.prototype.Tv=function(t,i,e,n){return this.x===t&&this.y===i&&this.width===e&&this.height===n},k.prototype.equalsApprox=k.prototype.De=function(t){return Au.D(this.x,t.x)&&Au.D(this.y,t.y)&&Au.D(this.width,t.width)&&Au.D(this.height,t.height)},k.prototype.containsPoint=k.prototype.Aa=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y
},k.prototype.containsRect=k.prototype.Kj=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},k.prototype.contains=k.prototype.contains=function(t,i,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.x<=t&&t+e<=this.x+this.width&&this.y<=i&&i+n<=this.y+this.height},k.prototype.reset=function(){this.I(),this.height=this.width=this.y=this.x=0},k.prototype.offset=k.prototype.offset=function(t,i){return this.I(),this.x+=t,this.y+=i,this},k.prototype.inflate=k.prototype.Jf=function(t,i){return P(this,i,t,i,t)},k.prototype.addMargin=k.prototype.yv=function(t){return P(this,t.top,t.right,t.bottom,t.left)},k.prototype.subtractMargin=k.prototype.tI=function(t){return P(this,-t.top,-t.right,-t.bottom,-t.left)},k.prototype.grow=function(t,i,e,n){return P(this,t,i,e,n)},k.prototype.intersectRect=function(t){return T(this,t.x,t.y,t.width,t.height)},k.prototype.intersect=function(t,i,e,n){return T(this,t,i,e,n)},k.prototype.intersectsRect=k.prototype.sg=function(t){return this.HD(t.x,t.y,t.width,t.height)},k.prototype.intersects=k.prototype.HD=function(t,i,e,n){var r=this.width,o=this.x;return 1/0!==r&&1/0!==e&&(r+=o,e+=t,isNaN(e)||isNaN(r)||o>e||t>r)?!1:(t=this.height,e=this.y,1/0!==t&&1/0!==n&&(t+=e,n+=i,isNaN(n)||isNaN(t)||e>n||i>t)?!1:!0)},k.prototype.unionPoint=k.prototype.Oi=function(t){return C(this,t.x,t.y,0,0)},k.prototype.unionRect=k.prototype.Th=function(t){return C(this,t.x,t.y,t.width,t.height)},k.prototype.union=k.prototype.YE=function(t,i,e,n){return this.I(),void 0===e&&(e=0),void 0===n&&(n=0),C(this,t,i,e,n)},k.prototype.setSpot=k.prototype.rt=function(t,i,e){return this.I(),this.x=t-e.offsetX-e.x*this.width,this.y=i-e.offsetY-e.y*this.height,this};var Ql;k.contains=Ql=function(t,i,e,n,r,o,s,a){return void 0===s&&(s=0),void 0===a&&(a=0),r>=t&&t+e>=r+s&&o>=i&&i+n>=o+a},k.intersects=function(t,i,e,n,r,o,s,a){return e+=t,s+=r,t>s||r>e?!1:(t=n+i,a+=o,i>a||o>t?!1:!0)},Ul.defineProperty(k,{left:"left"},function(){return this.x},function(t){this.I(t),this.x=t}),Ul.defineProperty(k,{top:"top"},function(){return this.y},function(t){this.I(t),this.y=t}),Ul.defineProperty(k,{right:"right"},function(){return this.x+this.width},function(t){this.I(t),this.x+=t-(this.x+this.width)}),Ul.defineProperty(k,{bottom:"bottom"},function(){return this.y+this.height},function(t){this.I(t),this.y+=t-(this.y+this.height)}),Ul.defineProperty(k,{position:"position"},function(){return new m(this.x,this.y)},function(t){this.I(t),this.x=t.x,this.y=t.y}),Ul.defineProperty(k,{size:"size"},function(){return new w(this.width,this.height)},function(t){this.I(t),this.width=t.width,this.height=t.height}),Ul.defineProperty(k,{Ok:"center"},function(){return new m(this.x+this.width/2,this.y+this.height/2)},function(t){this.I(t),this.x=t.x-this.width/2,this.y=t.y-this.height/2}),Ul.defineProperty(k,{Ja:"centerX"},function(){return this.x+this.width/2},function(t){this.I(t),this.x=t-this.width/2}),Ul.defineProperty(k,{Ua:"centerY"},function(){return this.y+this.height/2},function(t){this.I(t),this.y=t-this.height/2}),k.prototype.isReal=k.prototype.J=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},k.prototype.isEmpty=function(){return 0===this.width&&0===this.height},Ul.fa("Margin",j),Ul.Mh(j),Ul.Xd(j,{top:!0,right:!0,bottom:!0,left:!0}),j.prototype.assign=function(t){this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left},j.prototype.setTo=j.prototype.m=function(t,i,e,n){return this.I(),this.top=t,this.right=i,this.bottom=e,this.left=n,this},j.prototype.set=j.prototype.set=function(t){return this.I(),this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},j.prototype.copy=function(){var t=new j;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},Hl=j.prototype,Hl.Ka=function(){return this.Ca=!0,Object.freeze(this),this},Hl.Z=function(){return Object.isFrozen(this)?this:this.copy().freeze()},Hl.freeze=function(){return this.Ca=!0,this},Hl.La=function(){return Object.isFrozen(this)&&Ul.k("cannot thaw constant: "+this),this.Ca=!1,this},Hl.I=function(t){if(this.Ca){var i="The Margin is frozen, so its properties cannot be set: "+this.toString();void 0!==t&&(i+="  to value: "+t),Ul.k(i)}},j.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var i=0,e=0/0;""===t[i];)i++;var n=t[i++];if(n&&(e=parseFloat(n)),isNaN(e))return new j;for(var r=0/0;""===t[i];)i++;if((n=t[i++])&&(r=parseFloat(n)),isNaN(r))return new j(e);for(var o=0/0;""===t[i];)i++;if((n=t[i++])&&(o=parseFloat(n)),isNaN(o))return new j(e,r);for(var s=0/0;""===t[i];)i++;return(n=t[i++])&&(s=parseFloat(n)),isNaN(s)?new j(e,r):new j(e,r,o,s)}return new j},j.stringify=function(t){return t instanceof j?t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString():t.toString()},j.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},j.prototype.equals=j.prototype.L=function(t){return t instanceof j?this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left:!1},j.prototype.equalTo=j.prototype.Tv=function(t,i,e,n){return this.top===t&&this.right===i&&this.bottom===e&&this.left===n},j.prototype.equalsApprox=j.prototype.De=function(t){return Au.D(this.top,t.top)&&Au.D(this.right,t.right)&&Au.D(this.bottom,t.bottom)&&Au.D(this.left,t.left)},j.prototype.isReal=j.prototype.J=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Ul.Mh(N),Ul.Xd(N,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0}),N.prototype.set=N.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},N.prototype.copy=function(){var t=new N;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},N.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},N.prototype.equals=N.prototype.L=function(t){return t instanceof N?this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy:!1},N.prototype.isIdentity=N.prototype.Os=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy},N.prototype.reset=N.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},N.prototype.multiply=N.prototype.multiply=function(t){var i=this.m12*t.m11+this.m22*t.m12,e=this.m11*t.m21+this.m21*t.m22,n=this.m12*t.m21+this.m22*t.m22,r=this.m11*t.dx+this.m21*t.dy+this.dx,o=this.m12*t.dx+this.m22*t.dy+this.dy;return this.m11=this.m11*t.m11+this.m21*t.m12,this.m12=i,this.m21=e,this.m22=n,this.dx=r,this.dy=o,this},N.prototype.multiplyInverted=N.prototype.aE=function(t){var i=1/(t.m11*t.m22-t.m12*t.m21),e=t.m22*i,n=-t.m12*i,r=-t.m21*i,o=t.m11*i,s=i*(t.m21*t.dy-t.m22*t.dx),a=i*(t.m12*t.dx-t.m11*t.dy);return t=this.m12*e+this.m22*n,i=this.m11*r+this.m21*o,r=this.m12*r+this.m22*o,o=this.m11*s+this.m21*a+this.dx,s=this.m12*s+this.m22*a+this.dy,this.m11=this.m11*e+this.m21*n,this.m12=t,this.m21=i,this.m22=r,this.dx=o,this.dy=s,this},N.prototype.invert=N.prototype.oz=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),i=-this.m12*t,e=-this.m21*t,n=this.m11*t,r=t*(this.m21*this.dy-this.m22*this.dx),o=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=i,this.m21=e,this.m22=n,this.dx=r,this.dy=o,this},N.prototype.rotate=N.prototype.rotate=function(t,i,e){if(t>=360?t-=360:0>t&&(t+=360),0===t)return this;this.translate(i,e);var n=0,r=0;90===t?(n=0,r=1):180===t?(n=-1,r=0):270===t?(n=0,r=-1):(r=t*Math.PI/180,n=Math.cos(r),r=Math.sin(r)),t=this.m12*n+this.m22*r;var o=this.m11*-r+this.m21*n,s=this.m12*-r+this.m22*n;return this.m11=this.m11*n+this.m21*r,this.m12=t,this.m21=o,this.m22=s,this.translate(-i,-e),this},N.prototype.translate=N.prototype.translate=function(t,i){return this.dx+=this.m11*t+this.m21*i,this.dy+=this.m12*t+this.m22*i,this},N.prototype.scale=N.prototype.scale=function(t,i){return void 0===i&&(i=t),this.m11*=t,this.m12*=t,this.m21*=i,this.m22*=i,this},N.prototype.transformPoint=N.prototype.ab=function(t){var i=t.x,e=t.y;return t.x=i*this.m11+e*this.m21+this.dx,t.y=i*this.m12+e*this.m22+this.dy,t},N.prototype.invertedTransformPoint=N.prototype.Ph=function(t){var i=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*i,n=this.m11*i,r=i*(this.m12*this.dx-this.m11*this.dy),o=t.x,s=t.y;return t.x=o*this.m22*i+s*-this.m21*i+i*(this.m21*this.dy-this.m22*this.dx),t.y=o*e+s*n+r,t},N.prototype.transformRect=N.prototype.WE=function(t){var i=t.x,e=t.y,n=i+t.width,r=e+t.height,o=this.m11,s=this.m12,a=this.m21,h=this.m22,l=this.dx,u=this.dy,f=i*o+e*a+l,c=i*s+e*h+u,p=n*o+e*a+l,e=n*s+e*h+u,d=i*o+r*a+l,i=i*s+r*h+u,o=n*o+r*a+l,n=n*s+r*h+u,r=f,s=c,f=Math.min(f,p),r=Math.max(r,p),s=Math.min(s,e),c=Math.max(c,e),f=Math.min(f,d),r=Math.max(r,d),s=Math.min(s,i),c=Math.max(c,i),f=Math.min(f,o),r=Math.max(r,o),s=Math.min(s,n),c=Math.max(c,n);return t.x=f,t.y=s,t.width=r-f,t.height=c-s,t},Ul.fa("Spot",D),Ul.Mh(D),Ul.Xd(D,{x:!0,y:!0,offsetX:!0,offsetY:!0}),D.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY},D.prototype.setTo=D.prototype.m=function(t,i,e,n){return this.I(),this.x=t,this.y=i,this.offsetX=e,this.offsetY=n,this},D.prototype.set=D.prototype.set=function(t){return this.I(),this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},D.prototype.copy=function(){var t=new D;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},Hl=D.prototype,Hl.Ka=function(){return this.Ca=!0,Object.freeze(this),this},Hl.Z=function(){return Object.isFrozen(this)?this:this.copy().freeze()},Hl.freeze=function(){return this.Ca=!0,this},Hl.La=function(){return Object.isFrozen(this)&&Ul.k("cannot thaw constant: "+this),this.Ca=!1,this},Hl.I=function(t){if(this.Ca){var i="The Spot is frozen, so its properties cannot be set: "+this.toString();void 0!==t&&(i+="  to value: "+t),Ul.k(i)}};var $l;D.parse=$l=function(t){if("string"==typeof t){if(t=t.trim(),"None"===t)return _l;if("TopLeft"===t)return iu;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return eu;if("TopRight"===t)return nu;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return ru;if("Center"===t)return ou;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return su;if("BottomLeft"===t)return au;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return hu;if("BottomRight"===t)return lu;if("TopSide"===t)return vu;if("LeftSide"===t)return gu;if("RightSide"===t)return mu;if("BottomSide"===t)return bu;if("TopBottomSides"===t)return xu;if("LeftRightSides"===t)return wu;if("TopLeftSides"===t)return ku;if("TopRightSides"===t)return Mu;if("BottomLeftSides"===t)return Pu;if("BottomRightSides"===t)return Tu;if("NotTopSide"===t)return Su;if("NotLeftSide"===t)return Cu;if("NotRightSide"===t)return ju;if("NotBottomSide"===t)return Nu;if("AllSides"===t)return Du;if("Default"===t)return tu;t=t.split(" ");for(var i=0,e=0;""===t[i];)i++;var n=t[i++];void 0!==n&&0<n.length&&(e=parseFloat(n));for(var r=0;""===t[i];)i++;n=t[i++],void 0!==n&&0<n.length&&(r=parseFloat(n));for(var o=0;""===t[i];)i++;n=t[i++],void 0!==n&&0<n.length&&(o=parseFloat(n));for(var s=0;""===t[i];)i++;return n=t[i++],void 0!==n&&0<n.length&&(s=parseFloat(n)),new D(e,r,o,s)}return new D},D.stringify=function(t){return t instanceof D&&t.pd()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()},D.prototype.toString=function(){return this.pd()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.L(_l)?"None":this.L(iu)?"TopLeft":this.L(eu)?"Top":this.L(nu)?"TopRight":this.L(ru)?"Left":this.L(ou)?"Center":this.L(su)?"Right":this.L(au)?"BottomLeft":this.L(hu)?"Bottom":this.L(lu)?"BottomRight":this.L(vu)?"TopSide":this.L(gu)?"LeftSide":this.L(mu)?"RightSide":this.L(bu)?"BottomSide":this.L(xu)?"TopBottomSides":this.L(wu)?"LeftRightSides":this.L(ku)?"TopLeftSides":this.L(Mu)?"TopRightSides":this.L(Pu)?"BottomLeftSides":this.L(Tu)?"BottomRightSides":this.L(Su)?"NotTopSide":this.L(Cu)?"NotLeftSide":this.L(ju)?"NotRightSide":this.L(Nu)?"NotBottomSide":this.L(Du)?"AllSides":this.L(tu)?"Default":"None"},D.prototype.equals=D.prototype.L=function(t){return t instanceof D?(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY:!1},D.prototype.opposite=function(){return new D(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},D.prototype.includesSide=function(t){return this.Go()&&t.Go()?(t=t.offsetY,(this.offsetY&t)===t):!1},D.prototype.isSpot=D.prototype.pd=function(){return!isNaN(this.x)&&!isNaN(this.y)},D.prototype.isNoSpot=D.prototype.ne=function(){return isNaN(this.x)||isNaN(this.y)},D.prototype.isSide=D.prototype.Go=function(){return this.ne()&&1===this.offsetX&&0!==this.offsetY},D.prototype.isDefault=D.prototype.Lc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY};var _l;D.None=_l=A(new D(0,0,0,0),0).Ka();var tu;D.Default=tu=A(new D(0,0,-1,0),-1).Ka();var iu;D.TopLeft=iu=new D(0,0,0,0).Ka();var eu;D.TopCenter=eu=new D(.5,0,0,0).Ka();var nu;D.TopRight=nu=new D(1,0,0,0).Ka();var ru;D.LeftCenter=ru=new D(0,.5,0,0).Ka();var ou;D.Center=ou=new D(.5,.5,0,0).Ka();var su;D.RightCenter=su=new D(1,.5,0,0).Ka();var au;D.BottomLeft=au=new D(0,1,0,0).Ka();var hu;D.BottomCenter=hu=new D(.5,1,0,0).Ka();var lu;D.BottomRight=lu=new D(1,1,0,0).Ka();var uu;D.MiddleTop=uu=eu;var fu;D.MiddleLeft=fu=ru;var cu;D.MiddleRight=cu=su;var pu;D.MiddleBottom=pu=hu,D.Top=eu;var du;D.Left=du=ru;var yu;D.Right=yu=su,D.Bottom=hu;var vu;D.TopSide=vu=A(new D(0,0,1,Ul.Xc),1).Ka();var gu;D.LeftSide=gu=A(new D(0,0,1,Ul.Fc),1).Ka();var mu;D.RightSide=mu=A(new D(0,0,1,Ul.Oc),1).Ka();var bu;D.BottomSide=bu=A(new D(0,0,1,Ul.Nc),1).Ka();var xu;D.TopBottomSides=xu=A(new D(0,0,1,Ul.Xc|Ul.Nc),1).Ka();var wu;D.LeftRightSides=wu=A(new D(0,0,1,Ul.Fc|Ul.Oc),1).Ka();var ku;D.TopLeftSides=ku=A(new D(0,0,1,Ul.Xc|Ul.Fc),1).Ka();var Mu;D.TopRightSides=Mu=A(new D(0,0,1,Ul.Xc|Ul.Oc),1).Ka();var Pu;D.BottomLeftSides=Pu=A(new D(0,0,1,Ul.Nc|Ul.Fc),1).Ka();var Tu;D.BottomRightSides=Tu=A(new D(0,0,1,Ul.Nc|Ul.Oc),1).Ka();var Su;D.NotTopSide=Su=A(new D(0,0,1,Ul.Fc|Ul.Oc|Ul.Nc),1).Ka();var Cu;D.NotLeftSide=Cu=A(new D(0,0,1,Ul.Xc|Ul.Oc|Ul.Nc),1).Ka();var ju;D.NotRightSide=ju=A(new D(0,0,1,Ul.Xc|Ul.Fc|Ul.Nc),1).Ka();var Nu;D.NotBottomSide=Nu=A(new D(0,0,1,Ul.Xc|Ul.Fc|Ul.Oc),1).Ka();var Du;D.AllSides=Du=A(new D(0,0,1,Ul.Xc|Ul.Fc|Ul.Oc|Ul.Nc),1).Ka(),L.prototype.copy=function(){var t=new L;return t.$e[0]=this.$e[0],t.$e[1]=this.$e[1],t.$e[2]=this.$e[2],t.$e[3]=this.$e[3],t.$e[4]=this.$e[4],t.$e[5]=this.$e[5],t},F.prototype.addColorStop=function(t,i){this.YC.push({offset:t,color:i})},Hl=z.prototype,Hl.arc=function(t,i,e,n,r,o){R(this,t,i,e,n,r,o)},Hl.beginPath=function(){this.path=[]},Hl.bezierCurveTo=function(t,i,e,n,r,o){this.path.push(["C",t,i,e,n,r,o])},Hl.clearRect=function(){},Hl.clip=function(){I(this,"clipPath",this.path,new L)},Hl.closePath=function(){this.path.push(["z"])},Hl.createLinearGradient=function(t,i,e,n){var r=new F("linear");return r.x1=t,r.y1=i,r.x2=e,r.y2=n,r},Hl.createPattern=function(){},Hl.createRadialGradient=function(t,i,e,n,r,o){var s=new F("radial");return s.x1=t,s.y1=i,s.r1=e,s.x2=n,s.y2=r,s.r2=o,s},Hl.drawImage=function(t,i,e,n,r,o,s,a,h){t=[i,e,n,r,o,s,a,h,t],i=this.Ei,r=t[8],e="",r instanceof HTMLCanvasElement&&(e=r.toDataURL()),r instanceof HTMLImageElement&&(e=r.src),e={x:0,y:0,width:t[6],height:t[7],href:e},n="",o=t[6]/t[2],s=t[7]/t[3],(0!==t[4]||0!==t[5])&&(n+=" translate("+t[4]+", "+t[5]+")"),(1!==o||1!==s)&&(n+=" scale("+o+", "+s+")"),(0!==t[0]||0!==t[1])&&(n+=" translate("+-t[0]+", "+-t[1]+")"),(0!==t[0]||0!==t[1]||t[2]!==r.naturalWidth||t[3]!==r.naturalHeight)&&(r="CLIP"+this.Mv,this.Mv++,o=B(this,"clipPath",{id:r}),o.appendChild(B(this,"rect",{x:t[0],y:t[1],width:t[2],height:t[3]})),this.sl.appendChild(o),e["clip-path"]="url(#"+r+")"),q(this,"image",e,i,n),this.addElement("image",e)},Hl.fill=function(){I(this,"fill",this.path,this.Ei)},Hl.fillRect=function(t,i,e,n){E(this,"fill",[t,i,e,n],this.Ei)},Hl.fillText=function(t,i,e){t=[t,i,e],i=this.textAlign,"left"===i?i="start":"right"===i?i="end":"center"===i&&(i="middle"),i={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":i},q(this,"fill",i,this.Ei),this.addElement("text",i,t[0])},Hl.lineTo=function(t,i){this.path.push(["L",t,i])},Hl.moveTo=function(t,i){this.path.push(["M",t,i])},Hl.quadraticCurveTo=function(t,i,e,n){this.path.push(["Q",t,i,e,n])},Hl.rect=function(t,i,e,n){this.path.push(["M",t,i],["L",t+e,i],["L",t+e,i+n],["L",t,i+n],["z"])},Hl.restore=function(){this.Ei=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.nw=t.nw,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},Hl.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,nw:this.nw,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],i=0;i<this.path.length;i++)t.push(this.path[i]);this.stack.push(t),this.stack.push(this.Ei.copy())},Hl.setTransform=function(t,i,e,n,r,o){1===t&&0===i&&0===e&&1===n&&0===r&&0===o||G(this,t,i,e,n,r,o)},Hl.scale=function(){},Hl.stroke=function(){I(this,"stroke",this.path,this.Ei)},Hl.strokeRect=function(t,i,e,n){E(this,"stroke",[t,i,e,n],this.Ei)},Hl.addElement=function(t,i,e){return t=B(this,t,i,e),0<this.rf.length?this.rf[this.rf.length-1].appendChild(t):this.sl.appendChild(t),this.kw=t},Hl.$a=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var t="SHADOW"+this.HE;this.HE++;var i,e,n,r,o,s=this.addElement("filter",{id:t,x:"-100%",y:"-100%",width:"300%",height:"300%"},null);i=B(this,"feGaussianBlur",{"in":"SourceAlpha",result:"blur",xK:this.shadowBlur/2}),e=B(this,"feFlood",{"in":"blur",result:"flood","flood-color":this.shadowColor}),n=B(this,"feComposite",{"in":"flood",in2:"blur",operator:"in",result:"comp"}),r=B(this,"feOffset",{"in":"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),o=B(this,"feMerge",{}),o.appendChild(B(this,"feMergeNode",{"in":"offsetBlur"})),o.appendChild(B(this,"feMergeNode",{"in":"SourceGraphic"})),s.appendChild(i),s.appendChild(e),s.appendChild(n),s.appendChild(r),s.appendChild(o),0<this.rf.length&&this.rf[this.rf.length-1].setAttributeNS(null,"filter","url(#"+t+")")}},Hl=V.prototype,Hl.getContext=function(){return this.dG},Hl.toDataURL=function(t,i){return this.Dd.toDataURL(t,i)},Hl.getBoundingClientRect=function(){return this.Dd.getBoundingClientRect()},Hl.focus=function(){return this.Dd.focus()},Hl.addEventListener=function(t,i,e){this.Dd.addEventListener(t,i,e)},Hl.removeEventListener=function(t,i,e){this.Dd.removeEventListener(t,i,e)},Ul.defineProperty(V,{width:"width"},function(){return this.Dd.width},function(t){this.Dd.width=t}),Ul.defineProperty(V,{height:"height"},function(){return this.Dd.height},function(t){this.Dd.height=t}),Ul.defineProperty(V,{style:"style"},function(){return this.Dd.style},function(t){this.Dd.style=t});var Au={sa:4*((Math.sqrt(2)-1)/3),Wj:new m(0,0).Ka(),kF:new k(0,0,0,0).Ka(),np:new j(0,0,0,0).Ka(),iF:new j(2,2,2,2).Ka(),jF:new w(1/0,1/0).Ka(),fF:new m(-1/0,-1/0).Ka(),eF:new m(1/0,1/0).Ka(),op:new w(0,0).Ka(),Tw:new w(1,1).Ka(),mp:new w(6,6).Ka(),Qw:new w(8,8).Ka(),gF:new m(0/0,0/0).Ka(),Uw:new n,Qi:new n,vA:null,sqrt:function(t){if(0>=t)return 0;var i=Au.vA;if(null===i){for(var i=[],e=0;2e3>=e;e++)i[e]=Math.sqrt(e);Au.vA=i}return 1>t?(e=1/t,2e3>=e?1/i[0|e]:Math.sqrt(t)):2e3>=t?i[0|t]:Math.sqrt(t)},D:function(t,i){var e=t-i;return.5>e&&e>-.5},mb:function(t,i){var e=t-i;return 5e-8>e&&e>-5e-8},Hd:function(t,i,e,n,r,o,s){0>=r&&(r=1e-6);var a=0,h=0,l=0,u=0;if(e>t?(h=t,a=e):(h=e,a=t),n>i?(u=i,l=n):(u=n,l=i),t===e)return s>=u&&l>=s&&o>=t-r&&t+r>=o;if(i===n)return o>=h&&a>=o&&s>=i-r&&i+r>=s;if(a+=r,h-=r,o>=h&&a>=o&&(l+=r,u-=r,s>=u&&l>=s))if(a-h>l-u){if(!(t-e>r||e-t>r))return!0;if(o=(n-i)/(e-t)*(o-t)+i,s>=o-r&&o+r>=s)return!0}else{if(!(i-n>r||n-i>r))return!0;if(s=(e-t)/(n-i)*(s-i)+t,o>=s-r&&s+r>=o)return!0}return!1},Iv:function(t,i,e,n,r,o,s,a,h,l,u,f){if(Au.Hd(t,i,s,a,f,e,n)&&Au.Hd(t,i,s,a,f,r,o))return Au.Hd(t,i,s,a,f,l,u);var c=(t+e)/2,p=(i+n)/2,d=(e+r)/2,y=(n+o)/2;r=(r+s)/2,o=(o+a)/2,n=(c+d)/2,e=(p+y)/2;var d=(d+r)/2,y=(y+o)/2,v=(n+d)/2,g=(e+y)/2;return Au.Iv(t,i,c,p,n,e,v,g,h,l,u,f)||Au.Iv(v,g,d,y,r,o,s,a,h,l,u,f)},UF:function(t,i,e,n,r,o,s,a,h){var l=(e+r)/2,u=(n+o)/2;return h.x=(((t+e)/2+l)/2+(l+(r+s)/2)/2)/2,h.y=(((i+n)/2+u)/2+(u+(o+a)/2)/2)/2,h},TF:function(t,i,e,n,r,o,s,a){var h=(e+r)/2,l=(n+o)/2;return Zl(((t+e)/2+h)/2,((i+n)/2+l)/2,(h+(r+s)/2)/2,(l+(o+a)/2)/2)},oo:function(t,i,e,n,r,o,s,a,h,l){if(Au.Hd(t,i,s,a,h,e,n)&&Au.Hd(t,i,s,a,h,r,o))C(l,t,i,0,0),C(l,s,a,0,0);else{var u=(t+e)/2,f=(i+n)/2,c=(e+r)/2,p=(n+o)/2;r=(r+s)/2,o=(o+a)/2,n=(u+c)/2,e=(f+p)/2;var c=(c+r)/2,p=(p+o)/2,d=(n+c)/2,y=(e+p)/2;Au.oo(t,i,u,f,n,e,d,y,h,l),Au.oo(d,y,c,p,r,o,s,a,h,l)}return l},ye:function(t,i,e,n,r,o,s,a,h,l){if(Au.Hd(t,i,s,a,h,e,n)&&Au.Hd(t,i,s,a,h,r,o))0===l.length&&(l.push(t),l.push(i)),l.push(s),l.push(a);else{var u=(t+e)/2,f=(i+n)/2,c=(e+r)/2,p=(n+o)/2;r=(r+s)/2,o=(o+a)/2,n=(u+c)/2,e=(f+p)/2;var c=(c+r)/2,p=(p+o)/2,d=(n+c)/2,y=(e+p)/2;Au.ye(t,i,u,f,n,e,d,y,h,l),Au.ye(d,y,c,p,r,o,s,a,h,l)}return l},Oz:function(t,i,e,n,r,o,s,a,h,l){if(Au.Hd(t,i,r,o,l,e,n))return Au.Hd(t,i,r,o,l,a,h);var u=(t+e)/2,f=(i+n)/2;e=(e+r)/2,n=(n+o)/2;var c=(u+e)/2,p=(f+n)/2;return Au.Oz(t,i,u,f,c,p,s,a,h,l)||Au.Oz(c,p,e,n,r,o,s,a,h,l)},pK:function(t,i,e,n,r,o,s){return s.x=((t+e)/2+(e+r)/2)/2,s.y=((i+n)/2+(n+o)/2)/2,s},Nz:function(t,i,e,n,r,o,s,a){if(Au.Hd(t,i,r,o,s,e,n))C(a,t,i,0,0),C(a,r,o,0,0);else{var h=(t+e)/2,l=(i+n)/2;e=(e+r)/2,n=(n+o)/2;var u=(h+e)/2,f=(l+n)/2;Au.Nz(t,i,h,l,u,f,s,a),Au.Nz(u,f,e,n,r,o,s,a)}return a},Xo:function(t,i,e,n,r,o,s,a){if(Au.Hd(t,i,r,o,s,e,n))0===a.length&&(a.push(t),a.push(i)),a.push(r),a.push(o);else{var h=(t+e)/2,l=(i+n)/2;e=(e+r)/2,n=(n+o)/2;var u=(h+e)/2,f=(l+n)/2;Au.Xo(t,i,h,l,u,f,s,a),Au.Xo(u,f,e,n,r,o,s,a)}return a},js:function(t,i,e,n,r,o,s,a,h,l,u,f,c,p){if(0>=c&&(c=1e-6),Au.Hd(t,i,s,a,c,e,n)&&Au.Hd(t,i,s,a,c,r,o)){var d=(t-s)*(l-f)-(i-a)*(h-u);if(0===d)return!1;if(c=((t*a-i*s)*(h-u)-(t-s)*(h*f-l*u))/d,d=((t*a-i*s)*(l-f)-(i-a)*(h*f-l*u))/d,(l>f?l-f:f-l)>(h>u?h-u:u-h)){if(s=h=0,a>i?(h=i,s=a):(h=a,s=i),h>d||d>s)return!1}else if(s>t?h=t:(h=s,s=t),h>c||c>s)return!1;return p.x=c,p.y=d,!0}var d=(t+e)/2,y=(i+n)/2;e=(e+r)/2,n=(n+o)/2,r=(r+s)/2,o=(o+a)/2;var v=(d+e)/2,g=(y+n)/2;e=(e+r)/2,n=(n+o)/2;var m=(v+e)/2,b=(g+n)/2,x=(u-h)*(u-h)+(f-l)*(f-l),w=!1;return Au.js(t,i,d,y,v,g,m,b,h,l,u,f,c,p)&&(i=(p.x-h)*(p.x-h)+(p.y-l)*(p.y-l),x>i&&(x=i,w=!0)),t=p.x,d=p.y,Au.js(m,b,e,n,r,o,s,a,h,l,u,f,c,p)&&(i=(p.x-h)*(p.x-h)+(p.y-l)*(p.y-l),x>i?w=!0:(p.x=t,p.y=d)),w},ks:function(t,i,e,n,r,o,s,a,h,l,u,f,c){var p=0;if(0>=c&&(c=1e-6),Au.Hd(t,i,s,a,c,e,n)&&Au.Hd(t,i,s,a,c,r,o)){if(c=(t-s)*(l-f)-(i-a)*(h-u),0===c)return p;var d=((t*a-i*s)*(h-u)-(t-s)*(h*f-l*u))/c,y=((t*a-i*s)*(l-f)-(i-a)*(h*f-l*u))/c;if(d>=u)return p;if((l>f?l-f:f-l)>(h>u?h-u:u-h)){if(t=h=0,a>i?(h=i,t=a):(h=a,t=i),h>y||y>t)return p}else if(s>t?(h=t,t=s):h=s,h>d||d>t)return p;c>0?p++:0>c&&p--}else{var d=(t+e)/2,y=(i+n)/2,v=(e+r)/2,g=(n+o)/2;r=(r+s)/2,o=(o+a)/2,n=(d+v)/2,e=(y+g)/2;var v=(v+r)/2,g=(g+o)/2,m=(n+v)/2,b=(e+g)/2,p=p+Au.ks(t,i,d,y,n,e,m,b,h,l,u,f,c),p=p+Au.ks(m,b,v,g,r,o,s,a,h,l,u,f,c)}return p},Hm:function(t,i,e,n,r,o,s){if(Au.mb(t,e)){var a=0;return e=0,n>i?(a=i,e=n):(a=n,e=i),n=o,a>n?(s.x=t,s.y=a,!1):n>e?(s.x=t,s.y=e,!1):(s.x=t,s.y=n,!0)}return Au.mb(i,n)?(e>t?a=t:(a=e,e=t),n=r,a>n?(s.x=a,s.y=i,!1):n>e?(s.x=e,s.y=i,!1):(s.x=n,s.y=i,!0)):(a=((t-r)*(t-e)+(i-o)*(i-n))/((e-t)*(e-t)+(n-i)*(n-i)),-5e-6>a?(s.x=t,s.y=i,!1):a>1.000005?(s.x=e,s.y=n,!1):(s.x=t+a*(e-t),s.y=i+a*(n-i),!0))},$g:function(t,i,e,n,r,o,s,a,h){return Au.D(t,e)&&Au.D(i,n)?(h.x=t,h.y=i,!1):Au.mb(r,s)?Au.mb(t,e)?(Au.Hm(t,i,e,n,r,o,h),!1):(o=(n-i)/(e-t)*(r-t)+i,Au.Hm(t,i,e,n,r,o,h)):(a=(a-o)/(s-r),Au.mb(t,e)?(o=a*(t-r)+o,e=s=0,n>i?(s=i,e=n):(s=n,e=i),s>o?(h.x=t,h.y=s,!1):o>e?(h.x=t,h.y=e,!1):(h.x=t,h.y=o,!0)):(s=(n-i)/(e-t),Au.mb(a,s)?(Au.Hm(t,i,e,n,r,o,h),!1):(r=(s*t-a*r+o-i)/(s-a),Au.mb(s,0)?(e>t?s=t:(s=e,e=t),s>r?(h.x=s,h.y=i,!1):r>e?(h.x=e,h.y=i,!1):(h.x=r,h.y=i,!0)):(o=s*(r-t)+i,Au.Hm(t,i,e,n,r,o,h)))))},RJ:function(t,i,e,n,r){return Au.$g(e.x,e.y,n.x,n.y,t.x,t.y,i.x,i.y,r)},yJ:function(t,i,e,n,r,o,s,a,h,l){function u(e,n){var r=(e-t)*(e-t)+(n-i)*(n-i);f>r&&(f=r,h.x=e,h.y=n)}var f=1/0;u(h.x,h.y);var c=0,p=0,d=0,y=0;if(s>r?(c=r,p=s):(c=s,p=r),a>o?(d=r,y=s):(d=s,y=r),c=(p-c)/2+l,l=(y-d)/2+l,r=(r+s)/2,o=(o+a)/2,0===c||0===l)return h;if(.5>(e>t?e-t:t-e)){if(c=1-(e-r)*(e-r)/(c*c),0>c)return h;c=Math.sqrt(c),n=-l*c+o,u(e,l*c+o),u(e,n)}else{if(e=(n-i)/(e-t),n=1/(c*c)+e*e/(l*l),a=2*e*(i-e*t)/(l*l)-2*e*o/(l*l)-2*r/(c*c),c=a*a-4*n*(2*e*t*o/(l*l)-2*i*o/(l*l)+o*o/(l*l)+r*r/(c*c)-1+(i-e*t)*(i-e*t)/(l*l)),0>c)return h;c=Math.sqrt(c),l=(-a+c)/(2*n),u(l,e*l-e*t+i),c=(-a-c)/(2*n),u(c,e*c-e*t+i)}return h},bl:function(t,i,e,n,r,o,s,a,h){var l=1e21,u=t,f=i;if(Au.$g(t,i,t,n,r,o,s,a,h)){var c=(h.x-r)*(h.x-r)+(h.y-o)*(h.y-o);l>c&&(l=c,u=h.x,f=h.y)}return Au.$g(e,i,e,n,r,o,s,a,h)&&(c=(h.x-r)*(h.x-r)+(h.y-o)*(h.y-o),l>c&&(l=c,u=h.x,f=h.y)),Au.$g(t,i,e,i,r,o,s,a,h)&&(c=(h.x-r)*(h.x-r)+(h.y-o)*(h.y-o),l>c&&(l=c,u=h.x,f=h.y)),Au.$g(t,n,e,n,r,o,s,a,h)&&(c=(h.x-r)*(h.x-r)+(h.y-o)*(h.y-o),l>c&&(l=c,u=h.x,f=h.y)),h.x=u,h.y=f,1e21>l},dw:function(t,i,e){var n=i.x,r=i.y,o=e.x,s=e.y,a=t.left,h=t.right,l=t.top,u=t.bottom;return n===o?(o=t=0,s>r?(t=r,o=s):(t=s,o=r),n>=a&&h>=n&&u>=t&&o>=l):r===s?(o>n?t=n:(t=o,o=n),r>=l&&u>=r&&h>=t&&o>=a):t.Aa(i)||t.Aa(e)||Au.cw(a,l,h,l,n,r,o,s)||Au.cw(h,l,h,u,n,r,o,s)||Au.cw(h,u,a,u,n,r,o,s)||Au.cw(a,u,a,l,n,r,o,s)?!0:!1},cw:function(t,i,e,n,r,o,s,a){return 0>=Au.Nv(t,i,e,n,r,o)*Au.Nv(t,i,e,n,s,a)&&0>=Au.Nv(r,o,s,a,t,i)*Au.Nv(r,o,s,a,e,n)},Nv:function(t,i,e,n,r,o){return e-=t,n-=i,t=r-t,i=o-i,o=t*n-i*e,0===o&&(o=t*e+i*n,o>0&&(o=(t-e)*e+(i-n)*n,0>o&&(o=0))),0>o?-1:o>0?1:0},ct:function(t){return 0>t&&(t+=360),t>=360&&(t-=360),t},fD:function(t,i,e,n,r,o){var s=Math.PI;o||(n*=s/180,r*=s/180),o=r>n?1:-1;var a=[],h=s/2,l=n;for(n=Math.min(2*s,Math.abs(r-n));n>1e-5;)r=l+o*Math.min(n,h),a.push(Au.jG(e,l,r,t,i)),n-=Math.abs(r-l),l=r;return a},jG:function(t,i,e,n,r){var o=(e-i)/2,s=t*Math.cos(o),a=t*Math.sin(o),h=-a,l=s*s+h*h,u=l+s*s+h*a,l=4/3*(Math.sqrt(2*l*u)-u)/(s*a-h*s),a=s-l*h,s=h+l*s,h=-s,l=o+i,o=Math.cos(l),l=Math.sin(l);return[n+t*Math.cos(i),r+t*Math.sin(i),n+a*o-s*l,r+a*l+s*o,n+a*o-h*l,r+a*l+h*o,n+t*Math.cos(e),r+t*Math.sin(e)]},xs:function(t,i,e,n,r,o,s){e=Math.floor((t-e)/r)*r+e,n=Math.floor((i-n)/o)*o+n;var a=e;return r/2>e+r-t&&(a=e+r),t=n,o/2>n+o-i&&(t=n+o),s.m(a,t),s},xD:function(t,i){var e=Math.max(t,i),n=Math.min(t,i),r=1,o=1;do r=e%n,e=o=n,n=r;while(r>0);return o},sG:function(t,i,e,n){var r=0>e,o=0>n,s=0,a=s=0;i>t?(s=1,a=0):(s=0,a=1);var h=0,l=0,u=0,h=0===s?t:i,l=0===s?e:n;return(0===s?r:o)&&(l=-l),s=a,u=0===s?e:n,(0===s?r:o)&&(u=-u),Au.tG(h,0===s?t:i,l,u,0,0)},tG:function(t,i,e,n,r,o){if(r=0,n>0)if(e>0){o=t*t,r=i*i,t*=e;var s=i*n,a=-r+s,h=-r+Math.sqrt(t*t+s*s);i=a;for(var l=0;9999999999>l&&(i=.5*(a+h),i!==a&&i!==h);++l){var u=t/(i+o),f=s/(i+r),u=u*u+f*f-1;if(u>0)a=i;else{if(!(0>u))break;h=i}}e=o*e/(i+o)-e,n=r*n/(i+r)-n,r=Math.sqrt(e*e+n*n)}else r=Math.abs(n-i);else n=t*t-i*i,r=t*e,n>r?(n=r/n,r=t*n,o=i*Math.sqrt(Math.abs(1-n*n)),e=r-e,r=Math.sqrt(e*e+o*o)):r=Math.abs(e-t);return r}};Ul.fa("Geometry",H),Ul.Mh(H),H.prototype.copy=function(){var t=new H;t.oa=this.oa,t.nc=this.nc,t.uc=this.uc,t.pb=this.pb,t.Bb=this.Bb;for(var i=this.Zi.n,e=i.length,n=t.Zi,r=0;e>r;r++){var o=i[r].copy();n.add(o)}return t.ju=this.ju,t.Ut.assign(this.Ut),t.Ta=this.Ta,t.ri=this.ri.Z(),t.si=this.si.Z(),t.Dn=this.Dn,t.Cn=this.Cn,t.bi=this.bi,t};var Lu;H.Line=Lu=Ul.s(H,"Line",0);var Fu;H.Rectangle=Fu=Ul.s(H,"Rectangle",1);var zu;H.Ellipse=zu=Ul.s(H,"Ellipse",2);var Bu;H.Path=Bu=Ul.s(H,"Path",3),H.prototype.Ka=function(){return this.freeze(),Object.freeze(this),this},H.prototype.freeze=function(){this.Ca=!0;var t=this.ub;t.freeze();for(var t=t.n,i=t.length,e=0;i>e;e++)t[e].freeze();return this},H.prototype.La=function(){Object.isFrozen(this)&&Ul.k("cannot thaw constant: "+this),this.Ca=!1;var t=this.ub;t.La();for(var t=t.n,i=t.length,e=0;i>e;e++)t[e].La();return this},H.prototype.equalsApprox=H.prototype.De=function(t){if(!(t instanceof H))return!1;if(this.type!==t.type)return this.type===Lu&&t.type===Bu?K(this,t):t.type===Lu&&this.type===Bu?K(t,this):!1;if(this.type===Bu){var i=this.ub.n;t=t.ub.n;var e=i.length;if(e!==t.length)return!1;for(var n=0;e>n;n++)if(!i[n].De(t[n]))return!1;return!0}return Au.D(this.ua,t.ua)&&Au.D(this.va,t.va)&&Au.D(this.F,t.F)&&Au.D(this.G,t.G)};var qu;H.stringify=qu=function(t){return t.toString()},H.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case Lu:return 0>t?"M"+this.ua.toString()+" "+this.va.toString()+"L"+this.F.toString()+" "+this.G.toString():"M"+this.ua.toFixed(t)+" "+this.va.toFixed(t)+"L"+this.F.toFixed(t)+" "+this.G.toFixed(t);case Fu:var i=new k(this.ua,this.va,0,0);return i.YE(this.F,this.G,0,0),0>t?"M"+i.x.toString()+" "+i.y.toString()+"H"+i.right.toString()+"V"+i.bottom.toString()+"H"+i.left.toString()+"z":"M"+i.x.toFixed(t)+" "+i.y.toFixed(t)+"H"+i.right.toFixed(t)+"V"+i.bottom.toFixed(t)+"H"+i.left.toFixed(t)+"z";case zu:if(i=new k(this.ua,this.va,0,0),i.YE(this.F,this.G,0,0),0>t){var e=i.left.toString()+" "+(i.y+i.height/2).toString(),n=i.right.toString()+" "+(i.y+i.height/2).toString();return"M"+e+"A"+(i.width/2).toString()+" "+(i.height/2).toString()+" 0 0 1 "+n+"A"+(i.width/2).toString()+" "+(i.height/2).toString()+" 0 0 1 "+e}return e=i.left.toFixed(t)+" "+(i.y+i.height/2).toFixed(t),n=i.right.toFixed(t)+" "+(i.y+i.height/2).toFixed(t),"M"+e+"A"+(i.width/2).toFixed(t)+" "+(i.height/2).toFixed(t)+" 0 0 1 "+n+"A"+(i.width/2).toFixed(t)+" "+(i.height/2).toFixed(t)+" 0 0 1 "+e;case Bu:for(var i="",e=this.ub.n,n=e.length,r=0;n>r;r++){var o=e[r];r>0&&(i+=" x "),o.Ns&&(i+="F "),i+=o.toString(t)}return i;default:return this.type.toString()}};var Ou;H.fillPath=Ou=function(t){"string"!=typeof t&&Ul.Kd(t,"string",H,"fillPath:str"),t=t.split(/[Xx]/);for(var i=t.length,e="",n=0;i>n;n++)var r=t[n],e=null!==r.match(/[Ff]/)?0===n?e+r:e+("X"+(" "===r[0]?"":" ")+r):e+((0===n?"":"X ")+"F"+(" "===r[0]?"":" ")+r);return e};var Eu;H.parse=Eu=function(t,i){function e(){return l>=y-1?!0:null!==h[l+1].match(/[A-Za-z]/)}function n(){return l++,h[l]}function r(){var t=new m(parseFloat(n()),parseFloat(n()));return u===u.toLowerCase()&&(t.x=d.x+t.x,t.y=d.y+t.y),t}function o(){return d=r()}function s(){return p=r()}function a(){return"c"!==f.toLowerCase()&&"s"!==f.toLowerCase()?d:new m(2*d.x-p.x,2*d.y-p.y)}void 0===i&&(i=!1),"string"!=typeof t&&Ul.Kd(t,"string",H,"parse:str"),t=t.replace(/,/gm," "),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),t=t.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),t=t.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");
for(var h=t.split(" "),l=-1,u="",f="",c=new m(0,0),p=new m(0,0),d=new m(0,0),y=h.length,v=Ul.p(),g=!1,b=!1,x=!0;!(l>=y-1);)if(f=u,u=n(),""!==u)switch(u.toUpperCase()){case"X":x=!0,b=g=!1;break;case"M":var w=o();for(null===v.Tb||!0===x?(Zo(v,w.x,w.y,g,!1,!b),x=!1):v.moveTo(w.x,w.y),c=d;!e();)w=o(),v.lineTo(w.x,w.y);break;case"L":for(;!e();)w=o(),v.lineTo(w.x,w.y);break;case"H":for(;!e();)d=w=new m((u===u.toLowerCase()?d.x:0)+parseFloat(n()),d.y),v.lineTo(d.x,d.y);break;case"V":for(;!e();)d=w=new m(d.x,(u===u.toLowerCase()?d.y:0)+parseFloat(n())),v.lineTo(d.x,d.y);break;case"C":for(;!e();){var k=r(),M=s(),w=o();_o(v,k.x,k.y,M.x,M.y,w.x,w.y)}break;case"S":for(;!e();)k=a(),M=s(),w=o(),_o(v,k.x,k.y,M.x,M.y,w.x,w.y);break;case"Q":for(;!e();)M=s(),w=o(),ts(v,M.x,M.y,w.x,w.y);break;case"T":for(;!e();)p=M=a(),w=o(),ts(v,M.x,M.y,w.x,w.y);break;case"B":for(;!e();){var w=parseFloat(n()),k=parseFloat(n()),M=parseFloat(n()),P=parseFloat(n()),T=parseFloat(n()),S=T,C=!1;e()||(S=parseFloat(n()),e()||(C=0!==parseFloat(n()))),u===u.toLowerCase()&&(M+=d.x,P+=d.y),v.arcTo(w,k,M,P,T,S,C)}break;case"A":for(;!e();)k=Math.abs(parseFloat(n())),M=Math.abs(parseFloat(n())),P=parseFloat(n()),T=!!parseFloat(n()),S=!!parseFloat(n()),w=o(),is(v,k,M,P,T,S,w.x,w.y);break;case"Z":w=v.o.ub.n[v.o.ub.length-1],Qo(v),d=c;break;case"F":for(w="",k=1;h[l+k];)if(null!==h[l+k].match(/[Uu]/))k++;else{if(null!==h[l+k].match(/[A-Za-z]/)){w=h[l+k];break}k++}w.match(/[Mm]/)?g=!0:$o(v);break;case"U":for(w="",k=1;h[l+k];)if(null!==h[l+k].match(/[Ff]/))k++;else{if(null!==h[l+k].match(/[A-Za-z]/)){w=h[l+k];break}k++}w.match(/[Mm]/)?b=!0:v.$a(!1)}if(c=v.o,Ul.q(v),i)for(v=c.ub.i;v.next();)w=v.value,w.Ns=!0;return c},H.prototype.vz=function(){if(this.Ta||this.ju!==this.ub.U)return!0;for(var t=this.ub.n,i=t.length,e=0;i>e;e++)if(t[e].vz())return!0;return!1},H.prototype.nA=function(){this.Ta=!1,this.ju=this.ub.U;for(var t=this.ub.n,i=t.length,e=0;i>e;e++)t[e].nA()},H.prototype.kg=function(){var t=this.Ut;t.La(),isNaN(this.Dn)||isNaN(this.Cn)?t.m(0,0,0,0):t.m(0,0,this.Dn,this.Cn),Y(this,t,!1),C(t,0,0,0,0),t.freeze()},H.prototype.computeBoundsWithoutOrigin=H.prototype.aG=function(){var t=new k;return Y(this,t,!0),t},H.prototype.normalize=H.prototype.normalize=function(){Ul.I(this);var t=this.aG();return this.offset(-t.x,-t.y),new m(-t.x,-t.y)},H.prototype.offset=H.prototype.offset=function(t,i){return Ul.I(this),this.transform(1,0,0,1,t,i),this},H.prototype.scale=H.prototype.scale=function(t,i){return Ul.I(this),this.transform(t,0,0,i,0,0),this},H.prototype.rotate=H.prototype.rotate=function(t,i,e){Ul.I(this),void 0===i&&(i=0),void 0===e&&(e=0);var n=Ul.jh();return n.reset(),n.rotate(t,i,e),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Ul.Ye(n),this},H.prototype.transform=H.prototype.transform=function(t,i,e,n,r,o){var s=0,a=0;switch(this.type){case Lu:case Fu:case zu:s=this.nc,a=this.uc,this.nc=s*t+a*e+r,this.uc=s*i+a*n+o,s=this.pb,a=this.Bb,this.pb=s*t+a*e+r,this.Bb=s*i+a*n+o;break;case Bu:for(var h=this.ub.n,l=h.length,u=0;l>u;u++){var f=h[u],s=f.ua,a=f.va;f.ua=s*t+a*e+r,f.va=s*i+a*n+o;for(var f=f.Fa.n,c=f.length,p=0;c>p;p++){var d=f[p];switch(d.type){case Ru:case Iu:s=d.F,a=d.G,d.F=s*t+a*e+r,d.G=s*i+a*n+o;break;case Gu:s=d.Rb,a=d.jc,d.Rb=s*t+a*e+r,d.jc=s*i+a*n+o,s=d.df,a=d.ef,d.df=s*t+a*e+r,d.ef=s*i+a*n+o,s=d.F,a=d.G,d.F=s*t+a*e+r,d.G=s*i+a*n+o;break;case Vu:s=d.Rb,a=d.jc,d.Rb=s*t+a*e+r,d.jc=s*i+a*n+o,s=d.F,a=d.G,d.F=s*t+a*e+r,d.G=s*i+a*n+o;break;case Hu:s=d.Ja,a=d.Ua,d.Ja=s*t+a*e+r,d.Ua=s*i+a*n+o,0!==i&&(s=180*Math.atan2(i,t)/Math.PI,0>s&&(s+=360),d.Je+=s),0>t&&(d.Je=180-d.Je,d.Qf=-d.Qf),0>n&&(d.Je=-d.Je,d.Qf=-d.Qf),d.radiusX*=Math.sqrt(t*t+e*e),void 0!==d.radiusY&&(d.radiusY*=Math.sqrt(i*i+n*n));break;case Ku:s=d.F,a=d.G,d.F=s*t+a*e+r,d.G=s*i+a*n+o,0!==i&&(s=180*Math.atan2(i,t)/Math.PI,0>s&&(s+=360),d.Pi+=s),0>t&&(d.Pi=180-d.Pi,d.fl=!d.fl),0>n&&(d.Pi=-d.Pi,d.fl=!d.fl),d.radiusX*=Math.sqrt(t*t+e*e),d.radiusY*=Math.sqrt(i*i+n*n);break;default:Ul.k("Unknown Segment type: "+d.type)}}}}return this.Ta=!0,this},H.prototype.Xr=function(t,i){var e=this.nc,n=this.uc,r=this.pb,o=this.Bb,s=Math.min(e,r),a=Math.min(n,o),e=Math.abs(r-e),n=Math.abs(o-n),o=Ul.K();return o.x=s,o.y=a,i.ab(o),r=new X(o.x,o.y),o.x=s+e,o.y=a,i.ab(o),r.Fa.add(new Z(Ru,o.x,o.y)),o.x=s+e,o.y=a+n,i.ab(o),r.Fa.add(new Z(Ru,o.x,o.y)),o.x=s,o.y=a+n,i.ab(o),r.Fa.add(new Z(Ru,o.x,o.y).close()),Ul.v(o),t.type=Bu,t.ub.add(r),t},H.prototype.Aa=function(t,i,e,n){var r=t.x,o=t.y,s=this.kb.x-20;t=t.y;for(var a=0,h=0,l=0,u=0,f=0,c=0,p=this.ub.n,d=p.length,y=0;d>y;y++){var v=p[y];if(v.Ns){if(e&&v.Aa(r,o,i))return!0;for(var g=v.Fa,h=v.ua,l=v.va,m=h,b=l,x=g.n,w=0;w<=g.length;w++){var k,M;switch(w!==g.length?(k=x[w],M=k.type,f=k.F,c=k.G):(M=Ru,f=m,c=b),M){case Iu:if(u=J(r,o,s,t,h,l,m,b),isNaN(u))return!0;a+=u,m=f,b=c;break;case Ru:if(u=J(r,o,s,t,h,l,f,c),isNaN(u))return!0;a+=u;break;case Gu:u=Au.ks(h,l,k.Rb,k.jc,k.df,k.ef,f,c,s,t,r,o,.5),a+=u;break;case Vu:u=Au.ks(h,l,(h+2*k.Rb)/3,(l+2*k.jc)/3,(k.Rb+2*f)/3,(k.Rb+2*f)/3,f,c,s,t,r,o,.5),a+=u;break;case Hu:case Ku:M=k.type===Hu?Q(k,v):$(k,v,h,l);for(var P=M.length,T=null,S=0;P>S;S++){if(T=M[S],0===S){if(u=J(r,o,s,t,h,l,T[0],T[1]),isNaN(u))return!0;a+=u}u=Au.ks(T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],s,t,r,o,.5),a+=u}null!==T&&(f=T[6],c=T[7]);break;default:Ul.k("Unknown Segment type: "+k.type)}h=f,l=c}if(0!==a)return!0;a=0}else if(v.Aa(r,o,n?i:i+2))return!0}return 0!==a},H.prototype.getPointAlongPath=function(t){(0>t||t>1)&&Ul.wa(t,"0 <= fraction <= 1",H,"getPointAlongPath:fraction");var i=this.ub.first(),e=Ul.eb(),n=[];n.push(i.ua),n.push(i.va);for(var r=i.ua,o=i.va,s=r,a=o,h=i.Fa.n,l=h.length,u=0;l>u;u++){var f=h[u];switch(f.oa){case Iu:e.push(n),n=[],n.push(f.F),n.push(f.G),r=f.F,o=f.G,s=r,a=o;break;case Ru:n.push(f.F),n.push(f.G),r=f.F,o=f.G;break;case Gu:Au.ye(r,o,f.cd,f.xe,f.dg,f.eg,f.pb,f.Bb,.5,n),r=f.F,o=f.G;break;case Vu:Au.Xo(r,o,f.cd,f.xe,f.pb,f.Bb,.5,n),r=f.F,o=f.G;break;case Hu:for(var c=Q(f,i),p=c.length,d=0;p>d;d++){var y=c[d];Au.ye(r,o,y[2],y[3],y[4],y[5],y[6],y[7],.5,n),r=y[6],o=y[7]}break;case Ku:for(c=$(f,i,r,o),p=c.length,d=0;p>d;d++)y=c[d],Au.ye(r,o,y[2],y[3],y[4],y[5],y[6],y[7],.5,n),r=y[6],o=y[7];break;default:Ul.k("Segment not of valid type")}f.Ah&&(n.push(s),n.push(a))}for(e.push(n),c=0,s=e.length,a=n=i=0;s>a;a++)for(h=e[a],l=h.length,u=0;l>u;u+=2)r=h[u],o=h[u+1],0!==u&&(f=Math.sqrt(Xl(i,n,r,o)),c+=f),i=r,n=o;for(t*=c,a=c=0;s>a;a++)for(h=e[a],l=h.length,u=0;l>u;u++){if(r=h[u],o=h[u+1],0!==u){if(f=Math.sqrt(Xl(i,n,r,o)),c+f>t)return u=(t-c)/f,Ul.ra(e),new m(i+(r-i)*u,n+(o-n)*u);c+=f}i=r,n=o}return Ul.ra(e),null},Ul.defineProperty(H,{type:"type"},function(){return this.oa},function(t){this.oa!==t&&(Ul.I(this,t),this.oa=t,this.Ta=!0)}),Ul.defineProperty(H,{ua:"startX"},function(){return this.nc},function(t){this.nc!==t&&(Ul.I(this,t),this.nc=t,this.Ta=!0)}),Ul.defineProperty(H,{va:"startY"},function(){return this.uc},function(t){this.uc!==t&&(Ul.I(this,t),this.uc=t,this.Ta=!0)}),Ul.defineProperty(H,{F:"endX"},function(){return this.pb},function(t){this.pb!==t&&(Ul.I(this,t),this.pb=t,this.Ta=!0)}),Ul.defineProperty(H,{G:"endY"},function(){return this.Bb},function(t){this.Bb!==t&&(Ul.I(this,t),this.Bb=t,this.Ta=!0)}),Ul.defineProperty(H,{ub:"figures"},function(){return this.Zi},function(t){this.Zi!==t&&(Ul.I(this,t),this.Zi=t,this.Ta=!0)}),H.prototype.add=H.prototype.add=function(t){return this.Zi.add(t),this},Ul.defineProperty(H,{A:"spot1"},function(){return this.ri},function(t){Ul.I(this,t),this.ri=t.Z()}),Ul.defineProperty(H,{B:"spot2"},function(){return this.si},function(t){Ul.I(this,t),this.si=t.Z()}),Ul.defineProperty(H,{Bd:"defaultStretch"},function(){return this.bi},function(t){Ul.I(this,t),this.bi=t}),Ul.u(H,{kb:"bounds"},function(){return this.vz()&&(this.nA(),this.kg()),this.Ut}),Ul.fa("PathFigure",X),Ul.Mh(X),X.prototype.copy=function(){var t=new X;t.Il=this.Il,t.En=this.En,t.nc=this.nc,t.uc=this.uc;for(var i=this.Yn.n,e=i.length,n=t.Yn,r=0;e>r;r++){var o=i[r].copy();n.add(o)}return t.cv=this.cv,t.Ta=this.Ta,t},X.prototype.equalsApprox=X.prototype.De=function(t){if(!(t instanceof X&&Au.D(this.ua,t.ua)&&Au.D(this.va,t.va)))return!1;var i=this.Fa.n;t=t.Fa.n;var e=i.length;if(e!==t.length)return!1;for(var n=0;e>n;n++)if(!i[n].De(t[n]))return!1;return!0},Hl=X.prototype,Hl.toString=function(t){void 0===t&&(t=-1);for(var i=0>t?"M"+this.ua.toString()+" "+this.va.toString():"M"+this.ua.toFixed(t)+" "+this.va.toFixed(t),e=this.Fa.n,n=e.length,r=0;n>r;r++)i+=" "+e[r].toString(t);return i},Hl.freeze=function(){this.Ca=!0;var t=this.Fa;t.freeze();for(var i=t.n,t=t.length,e=0;t>e;e++)i[e].freeze();return this},Hl.La=function(){this.Ca=!1;var t=this.Fa;t.La();for(var t=t.n,i=t.length,e=0;i>e;e++)t[e].La();return this},Hl.vz=function(){if(this.Ta)return!0;var t=this.Fa;if(this.cv!==t.U)return!0;for(var t=t.n,i=t.length,e=0;i>e;e++)if(t[e].Ta)return!0;return!1},Hl.nA=function(){this.Ta=!1;var t=this.Fa;this.cv=t.U;for(var t=t.n,i=t.length,e=0;i>e;e++){var n=t[e];n.Ta=!1,n.Ri=null}},Ul.defineProperty(X,{Ns:"isFilled"},function(){return this.Il},function(t){Ul.I(this,t),this.Il=t}),Ul.defineProperty(X,{il:"isShadowed"},function(){return this.En},function(t){Ul.I(this,t),this.En=t}),Ul.defineProperty(X,{ua:"startX"},function(){return this.nc},function(t){Ul.I(this,t),this.nc=t,this.Ta=!0}),Ul.defineProperty(X,{va:"startY"},function(){return this.uc},function(t){Ul.I(this,t),this.uc=t,this.Ta=!0}),Ul.defineProperty(X,{Fa:"segments"},function(){return this.Yn},function(t){Ul.I(this,t),this.Yn=t,this.Ta=!0}),X.prototype.add=X.prototype.add=function(t){return this.Yn.add(t),this},X.prototype.Aa=function(t,i,e){for(var n=this.ua,r=this.va,o=n,s=r,a=this.Fa.n,h=a.length,l=0;h>l;l++){var u=a[l];switch(u.type){case Iu:o=u.F,s=u.G,n=u.F,r=u.G;break;case Ru:if(Au.Hd(n,r,u.F,u.G,e,t,i))return!0;n=u.F,r=u.G;break;case Gu:if(Au.Iv(n,r,u.Rb,u.jc,u.df,u.ef,u.F,u.G,.5,t,i,e))return!0;n=u.F,r=u.G;break;case Vu:if(Au.Oz(n,r,u.Rb,u.jc,u.F,u.G,.5,t,i,e))return!0;n=u.F,r=u.G;break;case Hu:case Ku:for(var f=u.type===Hu?Q(u,this):$(u,this,n,r),c=f.length,p=null,d=0;c>d;d++)if(p=f[d],0===d&&Au.Hd(n,r,p[0],p[1],e,t,i)||Au.Iv(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,t,i,e))return!0;null!==p&&(n=p[6],r=p[7]);break;default:Ul.k("Unknown Segment type: "+u.type)}if(u.ew&&(n!==o||r!==s)&&Au.Hd(n,r,o,s,e,t,i))return!0}return!1},Ul.fa("PathSegment",Z),Ul.Mh(Z),Z.prototype.copy=function(){var t=new Z;return t.oa=this.oa,t.pb=this.pb,t.Bb=this.Bb,void 0!==this.cd&&(t.cd=this.cd),void 0!==this.xe&&(t.xe=this.xe),void 0!==this.dg&&(t.dg=this.dg),void 0!==this.eg&&(t.eg=this.eg),void 0!==this.Ln&&(t.Ln=this.Ln),void 0!==this.bn&&(t.bn=this.bn),t.Ah=this.Ah,t.Ta=this.Ta,t},Z.prototype.equalsApprox=Z.prototype.De=function(t){if(!(t instanceof Z)||this.type!==t.type||this.ew!==t.ew)return!1;switch(this.type){case Iu:case Ru:return Au.D(this.F,t.F)&&Au.D(this.G,t.G);case Gu:return Au.D(this.F,t.F)&&Au.D(this.G,t.G)&&Au.D(this.Rb,t.Rb)&&Au.D(this.jc,t.jc)&&Au.D(this.df,t.df)&&Au.D(this.ef,t.ef);case Vu:return Au.D(this.F,t.F)&&Au.D(this.G,t.G)&&Au.D(this.Rb,t.Rb)&&Au.D(this.jc,t.jc);case Hu:return Au.D(this.Je,t.Je)&&Au.D(this.Qf,t.Qf)&&Au.D(this.Ja,t.Ja)&&Au.D(this.Ua,t.Ua)&&Au.D(this.radiusX,t.radiusX)&&Au.D(this.radiusY,t.radiusY);case Ku:return this.fl===t.fl&&this.hw===t.hw&&Au.D(this.Pi,t.Pi)&&Au.D(this.F,t.F)&&Au.D(this.G,t.G)&&Au.D(this.radiusX,t.radiusX)&&Au.D(this.radiusY,t.radiusY);default:return!1}},Z.prototype.toString=function(t){void 0===t&&(t=-1);var i="";switch(this.type){case Iu:i=0>t?"M"+this.F.toString()+" "+this.G.toString():"M"+this.F.toFixed(t)+" "+this.G.toFixed(t);break;case Ru:i=0>t?"L"+this.F.toString()+" "+this.G.toString():"L"+this.F.toFixed(t)+" "+this.G.toFixed(t);break;case Gu:i=0>t?"C"+this.Rb.toString()+" "+this.jc.toString()+" "+this.df.toString()+" "+this.ef.toString()+" "+this.F.toString()+" "+this.G.toString():"C"+this.Rb.toFixed(t)+" "+this.jc.toFixed(t)+" "+this.df.toFixed(t)+" "+this.ef.toFixed(t)+" "+this.F.toFixed(t)+" "+this.G.toFixed(t);break;case Vu:i=0>t?"Q"+this.Rb.toString()+" "+this.jc.toString()+" "+this.F.toString()+" "+this.G.toString():"Q"+this.Rb.toFixed(t)+" "+this.jc.toFixed(t)+" "+this.F.toFixed(t)+" "+this.G.toFixed(t);break;case Hu:i=0>t?"B"+this.Je.toString()+" "+this.Qf.toString()+" "+this.Ja.toString()+" "+this.Ua.toString()+" "+this.radiusX:"B"+this.Je.toFixed(t)+" "+this.Qf.toFixed(t)+" "+this.Ja.toFixed(t)+" "+this.Ua.toFixed(t)+" "+this.radiusX;break;case Ku:i=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Pi.toString()+" "+(this.hw?1:0)+" "+(this.fl?1:0)+" "+this.F.toString()+" "+this.G.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.Pi.toFixed(t)+" "+(this.hw?1:0)+" "+(this.fl?1:0)+" "+this.F.toFixed(t)+" "+this.G.toFixed(t);break;default:i=this.type.toString()}return i+(this.Ah?"z":"")};var Iu;Z.Move=Iu=Ul.s(Z,"Move",0);var Ru;Z.Line=Ru=Ul.s(Z,"Line",1);var Gu;Z.Bezier=Gu=Ul.s(Z,"Bezier",2);var Vu;Z.QuadraticBezier=Vu=Ul.s(Z,"QuadraticBezier",3);var Hu;Z.Arc=Hu=Ul.s(Z,"Arc",4);var Ku;Z.SvgArc=Ku=Ul.s(Z,"SvgArc",4),Z.prototype.freeze=function(){return this.Ca=!0,this},Z.prototype.La=function(){return this.Ca=!1,this},Z.prototype.close=Z.prototype.close=function(){return this.Ah=!0,this},Ul.defineProperty(Z,{ew:"isClosed"},function(){return this.Ah},function(t){this.Ah!==t&&(this.Ah=t,this.Ta=!0)}),Ul.defineProperty(Z,{type:"type"},function(){return this.oa},function(t){Ul.I(this,t),this.oa=t,this.Ta=!0}),Ul.defineProperty(Z,{F:"endX"},function(){return this.pb},function(t){Ul.I(this,t),this.pb=t,this.Ta=!0}),Ul.defineProperty(Z,{G:"endY"},function(){return this.Bb},function(t){Ul.I(this,t),this.Bb=t,this.Ta=!0}),Ul.defineProperty(Z,{Rb:"point1X"},function(){return this.cd},function(t){Ul.I(this,t),this.cd=t,this.Ta=!0}),Ul.defineProperty(Z,{jc:"point1Y"},function(){return this.xe},function(t){Ul.I(this,t),this.xe=t,this.Ta=!0}),Ul.defineProperty(Z,{df:"point2X"},function(){return this.dg},function(t){Ul.I(this,t),this.dg=t,this.Ta=!0}),Ul.defineProperty(Z,{ef:"point2Y"},function(){return this.eg},function(t){Ul.I(this,t),this.eg=t,this.Ta=!0}),Ul.defineProperty(Z,{Ja:"centerX"},function(){return this.cd},function(t){Ul.I(this,t),this.cd=t,this.Ta=!0}),Ul.defineProperty(Z,{Ua:"centerY"},function(){return this.xe},function(t){Ul.I(this,t),this.xe=t,this.Ta=!0}),Ul.defineProperty(Z,{radiusX:"radiusX"},function(){return this.dg},function(t){0>t&&Ul.wa(t,">= zero",Z,"radiusX"),Ul.I(this,t),this.dg=t,this.Ta=!0}),Ul.defineProperty(Z,{radiusY:"radiusY"},function(){return this.eg},function(t){0>t&&Ul.wa(t,">= zero",Z,"radiusY"),Ul.I(this,t),this.eg=t,this.Ta=!0}),Ul.defineProperty(Z,{Je:"startAngle"},function(){return this.pb},function(t){this.pb!==t&&(Ul.I(this,t),t%=360,0>t&&(t+=360),this.pb=t,this.Ta=!0)}),Ul.defineProperty(Z,{Qf:"sweepAngle"},function(){return this.Bb},function(t){Ul.I(this,t),t>360&&(t=360),-360>t&&(t=-360),this.Bb=t,this.Ta=!0}),Ul.defineProperty(Z,{fl:"isClockwiseArc"},function(){return this.bn},function(t){Ul.I(this,t),this.bn=t,this.Ta=!0}),Ul.defineProperty(Z,{hw:"isLargeArc"},function(){return this.Ln},function(t){Ul.I(this,t),this.Ln=t,this.Ta=!0}),Ul.defineProperty(Z,{Pi:"xAxisRotation"},function(){return this.cd},function(t){t%=360,0>t&&(t+=360),Ul.I(this,t),this.cd=t,this.Ta=!0}),Ul.fa("InputEvent",_),_.prototype.copy=function(){var t=new _;return t.Y=this.Y,t.Hy.assign(this.ff),t.Cx.assign(this.da),t.Mu=this.Mu,t.Rt=this.Rt,t.Au=this.Au,t.gu=this.gu,t.rv=this.rv,t.Tt=this.Tt,t.cu=this.cu,t.wu=this.wu,t.nu=this.nu,t.Si=this.Si,t.Vp=this.Vp,t.qv=this.qv,t.nv=this.nv,t.fg=this.fg,t},_.prototype.toString=function(){var t="^";return 0!==this.hd&&(t+="M:"+this.hd),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.Te&&(t+="C:"+this.Te),0!==this.Uk&&(t+="D:"+this.Uk),this.Tc&&(t+="h"),this.bubbles&&(t+="b"),null!==this.da&&(t+="@"+this.da.toString()),t},Ul.defineProperty(_,{g:"diagram"},function(){return this.Y},function(t){this.Y=t}),Ul.defineProperty(_,{ff:"viewPoint"},function(){return this.Hy},function(t){Ul.C(t,m,_,"viewPoint"),this.Hy.assign(t)}),Ul.defineProperty(_,{da:"documentPoint"},function(){return this.Cx},function(t){Ul.C(t,m,_,"documentPoint"),this.Cx.assign(t)}),Ul.defineProperty(_,{hd:"modifiers"},function(){return this.Mu},function(t){this.Mu=t}),Ul.defineProperty(_,{button:"button"},function(){return this.Rt},function(t){this.Rt=t}),Ul.defineProperty(_,{key:"key"},function(){return this.Au},function(t){this.Au=t}),Ul.defineProperty(_,{Wk:"down"},function(){return this.gu},function(t){this.gu=t}),Ul.defineProperty(_,{up:"up"},function(){return this.rv},function(t){this.rv=t}),Ul.defineProperty(_,{Te:"clickCount"},function(){return this.Tt},function(t){this.Tt=t}),Ul.defineProperty(_,{Uk:"delta"},function(){return this.cu},function(t){this.cu=t}),Ul.defineProperty(_,{Ps:"isMultiTouch"},function(){return this.wu},function(t){this.wu=t}),Ul.defineProperty(_,{Tc:"handled"},function(){return this.nu},function(t){this.nu=t}),Ul.defineProperty(_,{bubbles:"bubbles"},function(){return this.Si},function(t){this.Si=t}),Ul.defineProperty(_,{event:"event"},function(){return this.Vp},function(t){this.Vp=t}),Ul.u(_,{jl:"isTouchEvent"},function(){var i=t.TouchEvent;return i&&this.event instanceof i?!0:(i=t.PointerEvent)&&this.event instanceof i&&"touch"===this.event.pointerType}),Ul.defineProperty(_,{timestamp:"timestamp"},function(){return this.qv},function(t){this.qv=t}),Ul.defineProperty(_,{Cg:"targetDiagram"},function(){return this.nv},function(t){this.nv=t}),Ul.defineProperty(_,{pe:"targetObject"},function(){return this.fg},function(t){this.fg=t}),Ul.defineProperty(_,{control:"control"},function(){return 0!==(1&this.hd)},function(t){this.hd=t?1|this.hd:-2&this.hd}),Ul.defineProperty(_,{shift:"shift"},function(){return 0!==(4&this.hd)},function(t){this.hd=t?4|this.hd:-5&this.hd}),Ul.defineProperty(_,{alt:"alt"},function(){return 0!==(2&this.hd)},function(t){this.hd=t?2|this.hd:-3&this.hd}),Ul.defineProperty(_,{Ys:"meta"},function(){return 0!==(8&this.hd)},function(t){this.hd=t?8|this.hd:-9&this.hd}),Ul.defineProperty(_,{left:"left"},function(){return 0===this.button},function(t){this.button=t?0:2}),Ul.defineProperty(_,{$J:"middle"},function(){return 1===this.button},function(t){this.button=t?1:0}),Ul.defineProperty(_,{right:"right"},function(){return 2===this.button},function(t){this.button=t?2:0}),Ul.fa("DiagramEvent",ti),ti.prototype.copy=function(){var t=new ti;return t.Y=this.Y,t.Ub=this.Ub,t.iv=this.iv,t.Vu=this.Vu,t.St=this.St,t},ti.prototype.toString=function(){var t="*"+this.name;return this.cancel&&(t+="x"),null!==this.hA&&(t+=":"+this.hA.toString()),null!==this.Mz&&(t+="("+this.Mz.toString()+")"),t},Ul.defineProperty(ti,{g:"diagram"},function(){return this.Y},function(t){this.Y=t}),Ul.defineProperty(ti,{name:"name"},function(){return this.Ub},function(t){this.Ub=t}),Ul.defineProperty(ti,{hA:"subject"},function(){return this.iv},function(t){this.iv=t}),Ul.defineProperty(ti,{Mz:"parameter"},function(){return this.Vu},function(t){this.Vu=t}),Ul.defineProperty(ti,{cancel:"cancel"},function(){return this.St},function(t){this.St=t}),Ul.fa("ChangedEvent",ii);var Uu;ii.Transaction=Uu=Ul.s(ii,"Transaction",-1);var Yu;ii.Property=Yu=Ul.s(ii,"Property",0);var Ju;ii.Insert=Ju=Ul.s(ii,"Insert",1);var Wu;ii.Remove=Wu=Ul.s(ii,"Remove",2),ii.prototype.clear=ii.prototype.clear=function(){this.Wq=this.Xq=this.ar=this.br=this.$q=this.Y=this.Od=null},ii.prototype.copy=function(){var t=new ii;t.Od=this.Od,t.Y=this.Y,t.Bp=this.Bp,t.Lu=this.Lu,t.Xl=this.Xl,t.$q=this.$q;var i=this.br;return t.br=Ul.Sa(i)&&"function"==typeof i.Z?i.Z():i,i=this.ar,t.ar=Ul.Sa(i)&&"function"==typeof i.Z?i.Z():i,i=this.Xq,t.Xq=Ul.Sa(i)&&"function"==typeof i.Z?i.Z():i,i=this.Wq,t.Wq=Ul.Sa(i)&&"function"==typeof i.Z?i.Z():i,t},ii.prototype.toString=function(){var t="",t=this.Ad===Uu?t+"* ":this.Ad===Yu?t+(null!==this.ga?"!m":"!d"):t+((null!==this.ga?"!m":"!d")+this.Ad);return this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.Lf&&this.Lf!==this.propertyName&&(t+=" "+this.Lf),t+=": ",this.Ad===Uu?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=$u(this.object)),null!==this.oldValue&&(t+="  old: "+$u(this.oldValue)),null!==this.zg&&(t+=" "+this.zg),null!==this.newValue&&(t+="  new: "+$u(this.newValue)),null!==this.xg&&(t+=" "+this.xg)),t},ii.prototype.getValue=ii.prototype.ta=function(t){return t?this.oldValue:this.newValue},ii.prototype.getParam=function(t){return t?this.zg:this.xg},ii.prototype.canUndo=ii.prototype.canUndo=function(){return null!==this.ga||null!==this.g?!0:!1},ii.prototype.undo=ii.prototype.undo=function(){this.canUndo()&&(null!==this.ga?this.ga.pm(this,!0):null!==this.g&&this.g.pm(this,!0))},ii.prototype.canRedo=ii.prototype.canRedo=function(){return null!==this.ga||null!==this.g?!0:!1},ii.prototype.redo=ii.prototype.redo=function(){this.canRedo()&&(null!==this.ga?this.ga.pm(this,!1):null!==this.g&&this.g.pm(this,!1))},Ul.defineProperty(ii,{ga:"model"},function(){return this.Od},function(t){this.Od=t}),Ul.defineProperty(ii,{g:"diagram"},function(){return this.Y},function(t){this.Y=t}),Ul.defineProperty(ii,{Ad:"change"},function(){return this.Bp},function(t){this.Bp=t}),Ul.defineProperty(ii,{Lf:"modelChange"},function(){return this.Lu},function(t){this.Lu=t}),Ul.defineProperty(ii,{propertyName:"propertyName"},function(){return this.Xl},function(t){this.Xl=t}),Ul.u(ii,{KJ:"isTransactionFinished"},function(){return this.Bp===Uu&&("CommittedTransaction"===this.Xl||"FinishedUndo"===this.Xl||"FinishedRedo"===this.Xl)}),Ul.defineProperty(ii,{object:"object"},function(){return this.$q},function(t){this.$q=t}),Ul.defineProperty(ii,{oldValue:"oldValue"},function(){return this.br},function(t){this.br=t}),Ul.defineProperty(ii,{zg:"oldParam"},function(){return this.ar},function(t){this.ar=t}),Ul.defineProperty(ii,{newValue:"newValue"},function(){return this.Xq},function(t){this.Xq=t}),Ul.defineProperty(ii,{xg:"newParam"},function(){return this.Wq},function(t){this.Wq=t}),Ul.fa("Model",ei),ei.prototype.clear=ei.prototype.clear=function(){this.mf=[],this.tc.clear(),this.vh.clear(),this.ha.clear()},Hl=ei.prototype,Hl.At=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.Sk&&(t+=',\n  "dataFormat": '+this.quote(this.Sk)),this.nb&&(t+=',\n  "isReadOnly": '+this.nb),"key"!==this.Jm&&"string"==typeof this.Jm&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.Jm)),this.Xy&&(t+=',\n  "copiesArrays": true'),this.Wy&&(t+=',\n  "copiesArrayObjects": true'),"category"!==this.Im&&"string"==typeof this.Im&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.Im)),t},Hl.pA=function(){var t,i="",e=this.Zs,n=!1;for(t in e)if(!ri(t,e[t])){n=!0;break}return n&&(i=',\n  "modelData": '+si(this,e)),i+',\n  "nodeDataArray": '+ni(this,this.ah,!0)},Hl.ft=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.Sk=t.dataFormat),t.isReadOnly&&(this.nb=t.isReadOnly),t.nodeKeyProperty&&(this.Jm=t.nodeKeyProperty),t.copiesArrays&&(this.Xy=t.copiesArrays),t.copiesArrayObjects&&(this.Wy=t.copiesArrayObjects),t.nodeCategoryProperty&&(this.Im=t.nodeCategoryProperty)},Hl.Qz=function(t){var i=t.modelData;Ul.Sa(i)&&(this.ht(i),this.Zs=i),t=t.nodeDataArray,Ul.isArray(t)&&(this.ht(t),this.ah=t)},Hl.toString=function(t){if(void 0===t&&(t=0),t>1)return this.kA();var i=(""!==this.name?this.name:"")+" Model";if(t>0){i+="\n node data:",t=this.ah;for(var e=Ul.qb(t),n=0;e>n;n++)var r=Ul.fb(t,n),i=i+(" "+this.wb(r)+":"+$u(r))}return i},ei.prototype.toJson=ei.prototype.toJSON=ei.prototype.kA=function(t){return void 0===t&&(t=this.constructor===ei?"go.Model":this.constructor===yi?"go.GraphLinksModel":this.constructor===gi?"go.TreeModel":Ul.rg(this)),'{ "class": '+this.quote(t)+this.At()+this.pA()+"}"},ei.fromJson=ei.fromJSON=function(i,e){void 0===e&&(e=null),null!==e&&Ul.C(e,ei,ei,"fromJson:model");var n=null;if("string"==typeof i)if(t.JSON&&t.JSON.parse)try{n=t.JSON.parse(i)}catch(r){}else Ul.trace("WARNING: no JSON.parse available");else"object"==typeof i?n=i:Ul.k("Unable to construct a Model from: "+i);if(null===e){var o;o=null;var s=n["class"];if("string"==typeof s)try{var a=null;0===s.indexOf("go.")?(s=s.substr(3),a=Kl[s]):(a=Kl[s],void 0===a&&(a=t[s])),"function"==typeof a&&(o=new a)}catch(h){}null===o||o instanceof ei?e=o:Ul.k("Unable to construct a Model of declared class: "+n["class"])}return null===e&&(e=new yi),e.ft(n),e.Qz(n),e},ei.prototype.replaceJsonObjects=ei.prototype.ht=function(t){if(Ul.isArray(t))for(var i=Ul.qb(t),e=0;i>e;e++){var n=Ul.fb(t,e);Ul.Sa(n)&&Ul.RC(t,e,this.ht(n))}else if(Ul.Sa(t)){for(e in t)if(n=t[e],Ul.Sa(n)&&(n=this.ht(n),t[e]=n,"points"===e&&Array.isArray(n))){for(var r=0===n.length%2,o=0;o<n.length;o++)if("number"!=typeof n[o]){r=!1;break}if(r){for(r=new l(m),o=0;o<n.length/2;o++)r.add(new m(n[2*o],n[2*o+1]));r.freeze(),t[e]=r}}if("object"==typeof t){if(e=t,n=t["class"],"NaN"===n)e=0/0;else if("Date"===n)e=new Date(t.value);else if("go.Point"===n)e=new m(ai(t.x),ai(t.y));else if("go.Size"===n)e=new w(ai(t.width),ai(t.height));else if("go.Rect"===n)e=new k(ai(t.x),ai(t.y),ai(t.width),ai(t.height));else if("go.Margin"===n)e=new j(ai(t.top),ai(t.right),ai(t.bottom),ai(t.left));else if("go.Spot"===n)e="string"==typeof t["enum"]?$l(t["enum"]):new D(ai(t.x),ai(t.y),ai(t.offsetX),ai(t.offsetY));else if("go.Brush"===n){if(e=new kr,e.type=Yl(kr,t.type),"string"==typeof t.color&&(e.color=t.color),t.start instanceof D&&(e.start=t.start),t.end instanceof D&&(e.end=t.end),"number"==typeof t.startRadius&&(e.ut=ai(t.startRadius)),"number"==typeof t.endRadius&&(e.us=ai(t.endRadius)),t=t.colorStops,Ul.Sa(t))for(i in t)e.addColorStop(parseFloat(i),t[i])}else"go.Geometry"===n&&(i=null,i="string"==typeof t.path?Eu(t.path):new H,i.type=Yl(H,t.type),"number"==typeof t.startX&&(i.ua=ai(t.startX)),"number"==typeof t.startY&&(i.va=ai(t.startY)),"number"==typeof t.endX&&(i.F=ai(t.endX)),"number"==typeof t.endY&&(i.G=ai(t.endY)),t.spot1 instanceof D&&(i.A=t.spot1),t.spot2 instanceof D&&(i.B=t.spot2),e=i);t=e}}return t},ei.prototype.quote=function(t){for(var i="",e=t.length,n=0;e>n;n++)var r=t[n],i='"'===r||"\\"===r?i+("\\"+r):"\b"===r?i+"\\b":"\f"===r?i+"\\f":"\n"===r?i+"\\n":"\r"===r?i+"\\r":"	"===r?i+"\\t":i+r;return'"'+i+'"'},ei.prototype.writeJsonValue=ei.prototype.Bt=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?1/0===t?"9e9999":-1/0===t?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.Bt(t.valueOf()):Ul.isArray(t)?ni(this,t):Ul.Sa(t)?si(this,t):"function"==typeof t?"null":t.toString()},Ul.defineProperty(ei,{name:"name"},function(){return this.Ub},function(t){var i=this.Ub;i!==t&&(Ul.j(t,"string",ei,"name"),this.Ub=t,this.h("name",i,t))}),Ul.defineProperty(ei,{Sk:"dataFormat"},function(){return this.wx},function(t){var i=this.wx;i!==t&&(Ul.j(t,"string",ei,"dataFormat"),this.wx=t,this.h("dataFormat",i,t))}),Ul.defineProperty(ei,{nb:"isReadOnly"},function(){return this.vk},function(t){var i=this.vk;i!==t&&(Ul.j(t,"boolean",ei,"isReadOnly"),this.vk=t,this.h("isReadOnly",i,t))}),Ul.defineProperty(ei,{Zs:"modelData"},function(){return this.gy},function(t){var i=this.gy;i!==t&&(Ul.j(t,"object",ei,"modelData"),this.gy=t,this.h("modelData",i,t),this.Nb(t))}),ei.prototype.addChangedListener=ei.prototype.Jy=function(t){Ul.j(t,"function",ei,"addChangedListener:listener"),null===this.jj&&(this.jj=new l("function")),this.jj.add(t)},ei.prototype.removeChangedListener=ei.prototype.Tz=function(t){Ul.j(t,"function",ei,"removeChangedListener:listener"),null!==this.jj&&(this.jj.remove(t),0===this.jj.count&&(this.jj=null))},ei.prototype.Jv=function(t){if(this.cb||this.ha.ED(t),null!==this.jj){var i=this.jj,e=i.length;if(1===e)(i=i.ja(0))(t);else if(0!==e)for(var n=i.Ke(),r=0;e>r;r++)(i=n[r])(t)}},ei.prototype.raiseChangedEvent=ei.prototype.Dc=function(t,i,e,n,r,o,s){hi(this,"",t,i,e,n,r,o,s)},ei.prototype.raiseChanged=ei.prototype.h=function(t,i,e,n,r){hi(this,"",Yu,t,this,i,e,n,r)},ei.prototype.raiseDataChanged=ei.prototype.Pz=function(t,i,e,n,r,o){hi(this,"",Yu,i,t,e,n,r,o)},Ul.defineProperty(ei,{ha:"undoManager"},function(){return this.Gy},function(t){var i=this.Gy;i!==t&&(Ul.C(t,wi,ei,"undoManager"),null!==i&&i.SH(this),this.Gy=t,null!==t&&t.MF(this))}),Ul.defineProperty(ei,{cb:"skipsUndoManager"},function(){return this.qi},function(t){Ul.j(t,"boolean",ei,"skipsUndoManager"),this.qi=t}),ei.prototype.pm=function(t,i){if(null!==t&&t.ga===this)if(t.Ad===Yu){var e=t.object,n=t.propertyName,r=t.ta(i);Ul.Oa(e,n,r)}else t.Ad===Ju?"nodeDataArray"===t.Lf?(e=t.newValue,Ul.Sa(e)&&(n=this.wb(e),void 0!==n&&(i?(Ul.zi(this.mf,t.xg),this.tc.remove(n)):(Ul.yi(this.mf,t.xg,e),this.tc.add(n,e))))):""===t.Lf?(e=t.object,!Ul.isArray(e)&&t.propertyName&&(e=Ul.sb(t.object,t.propertyName)),Ul.isArray(e)&&(n=t.newValue,r=t.xg,i?Ul.zi(e,r):Ul.yi(e,r,n))):Ul.k("unknown ChangedEvent.Insert object: "+t.toString()):t.Ad===Wu?"nodeDataArray"===t.Lf?(e=t.oldValue,Ul.Sa(e)&&(n=this.wb(e),void 0!==n&&(i?(Ul.yi(this.mf,t.zg,e),this.tc.add(n,e)):(Ul.zi(this.mf,t.zg),this.tc.remove(n))))):""===t.Lf?(e=t.object,!Ul.isArray(e)&&t.propertyName&&(e=Ul.sb(t.object,t.propertyName)),Ul.isArray(e)&&(n=t.oldValue,r=t.zg,i?Ul.yi(e,r,n):Ul.zi(e,r))):Ul.k("unknown ChangedEvent.Remove object: "+t.toString()):t.Ad!==Uu&&Ul.k("unknown ChangedEvent: "+t.toString())},ei.prototype.startTransaction=ei.prototype.Wb=function(t){return this.ha.Wb(t)},ei.prototype.commitTransaction=ei.prototype.Wd=function(t){return this.ha.Wd(t)},ei.prototype.rollbackTransaction=ei.prototype.ap=function(){return this.ha.ap()},ei.prototype.updateTargetBindings=ei.prototype.Nb=function(t,i){void 0===i&&(i=""),hi(this,"SourceChanged",Uu,i,t,null,null)},Ul.defineProperty(ei,{Jm:"nodeKeyProperty"},function(){return this.Tl},function(t){var i=this.Tl;i!==t&&(li(t,ei,"nodeKeyProperty"),0<this.tc.count&&Ul.k("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Tl=t,this.h("nodeKeyProperty",i,t))}),ei.prototype.getKeyForNodeData=ei.prototype.wb=function(t){if(null!==t){var i=this.Tl;if(""!==i&&(i=Ul.sb(t,i),void 0!==i)){if(ui(i))return i;Ul.k("Key value for node data "+t+" is not a number or a string: "+i)}}},ei.prototype.setKeyForNodeData=ei.prototype.bA=function(t,i){if(void 0!==i&&null!==i&&ui(i)||Ul.Kd(i,"number or string",ei,"setKeyForNodeData:key"),null!==t){var e=this.Tl;if(""!==e)if(this.Ue(t)){var n=Ul.sb(t,e);n!==i&&null===this.qf(i)&&(Ul.Oa(t,e,i),this.tc.remove(n),this.tc.add(i,t),hi(this,"nodeKey",Yu,e,t,n,i),"string"==typeof e&&this.Nb(t,e),this.gt(n,i))}else Ul.Oa(t,e,i)}},Ul.defineProperty(ei,{TJ:"makeUniqueKeyFunction"},function(){return this.Eu},function(t){var i=this.Eu;i!==t&&(null!==t&&Ul.j(t,"function",ei,"makeUniqueKeyFunction"),this.Eu=t,this.h("makeUniqueKeyFunction",i,t))}),ei.prototype.containsNodeData=ei.prototype.Ue=function(t){return t=this.wb(t),void 0===t?!1:this.tc.contains(t)},ei.prototype.findNodeDataForKey=ei.prototype.qf=function(t){return null===t&&Ul.k("Model.findNodeDataForKey:key must not be null"),void 0!==t&&ui(t)?this.tc.ta(t):null},Ul.defineProperty(ei,{ah:"nodeDataArray"},function(){return this.mf},function(t){var i=this.mf;if(i!==t){Ul.Qy(t,ei,"nodeDataArray"),this.tc.clear(),this.mA();for(var e=Ul.qb(t),n=0;e>n;n++){var r=Ul.fb(t,n);if(!Ul.Sa(r))return void Ul.k("Model.nodeDataArray must only contain Objects, not: "+r);Ul.Is(r)}this.mf=t;for(var o=new l(Object),n=0;e>n;n++){var r=Ul.fb(t,n),s=this.wb(r);void 0===s?o.add(r):null!==this.tc.ta(s)?o.add(r):this.tc.add(s,r)}for(n=o.i;n.next();)r=n.value,this.UD(r),o=this.wb(r),void 0!==o&&this.tc.add(o,r);for(hi(this,"nodeDataArray",Yu,"nodeDataArray",this,i,t),n=0;e>n;n++)r=Ul.fb(t,n),this.$o(r),this.Zo(r);this.XC(),Ul.eH(t)||(this.nb=!0)}}),ei.prototype.makeNodeDataKeyUnique=ei.prototype.UD=function(t){if(null!==t){var i=this.Tl;
if(""!==i){var e=this.wb(t);if(void 0===e||this.tc.contains(e)){var n=this.Eu;if(null!==n&&(e=n(this,t),void 0!==e&&null!==e&&!this.tc.contains(e)))return void Ul.Oa(t,i,e);if("string"==typeof e){for(n=2;this.tc.contains(e+n);)n++;Ul.Oa(t,i,e+n)}else if(void 0===e||"number"==typeof e){for(n=-this.tc.count-1;this.tc.contains(n);)n--;Ul.Oa(t,i,n)}else Ul.k("Model.getKeyForNodeData returned something other than a string or a number: "+e)}}}},ei.prototype.addNodeData=ei.prototype.km=function(t){if(null!==t){Ul.Is(t);var i=this.wb(t);(void 0===i||this.tc.ta(i)!==t)&&(this.UD(t),i=this.wb(t),void 0===i?Ul.k("Model.makeNodeDataKeyUnique failed on "+t+".  Data not added to Model."):(this.tc.add(i,t),i=Ul.qb(this.mf),Ul.yi(this.mf,i,t),hi(this,"nodeDataArray",Ju,"nodeDataArray",this,null,t,null,i),this.$o(t),this.Zo(t)))}},ei.prototype.addNodeDataCollection=function(t){if(Ul.isArray(t))for(var i=Ul.qb(t),e=0;i>e;e++)this.km(Ul.fb(t,e));else for(t=t.i;t.next();)this.km(t.value)},ei.prototype.removeNodeData=ei.prototype.Vz=function(t){if(null!==t){var i=this.wb(t);void 0!==i&&this.tc.contains(i)&&(this.tc.remove(i),i=Ul.Py(this.mf,t),0>i||(Ul.zi(this.mf,i),hi(this,"nodeDataArray",Wu,"nodeDataArray",this,t,null,i,null),this.zt(t)))}},ei.prototype.removeNodeDataCollection=function(t){if(Ul.isArray(t))for(var i=Ul.qb(t),e=0;i>e;e++)this.Vz(Ul.fb(t,e));else for(t=t.i;t.next();)this.Vz(t.value)},Hl=ei.prototype,Hl.gt=function(t,i){var e=pi(this,t);e instanceof f&&this.vh.add(i,e)},Hl.mA=function(){},Hl.$o=function(){},Hl.Zo=function(){},Hl.zt=function(){},ei.prototype.clearUnresolvedReferences=ei.prototype.XC=function(t){void 0===t?this.vh.clear():this.vh.remove(t)},Ul.defineProperty(ei,{gJ:"copyNodeDataFunction"},function(){return this.Xt},function(t){var i=this.Xt;i!==t&&(null!==t&&Ul.j(t,"function",ei,"copyNodeDataFunction"),this.Xt=t,this.h("copyNodeDataFunction",i,t))}),Ul.defineProperty(ei,{Xy:"copiesArrays"},function(){return this.ox},function(t){var i=this.ox;i!==t&&(null!==t&&Ul.j(t,"boolean",ei,"copiesArrays"),this.ox=t,this.h("copiesArrays",i,t))}),Ul.defineProperty(ei,{Wy:"copiesArrayObjects"},function(){return this.nx},function(t){var i=this.nx;i!==t&&(null!==t&&Ul.j(t,"boolean",ei,"copiesArrayObjects"),this.nx=t,this.h("copiesArrayObjects",i,t))}),ei.prototype.copyNodeData=function(t){if(null===t)return null;var i=null,i=this.Xt,i=null!==i?i(t,this):di(this,t,!0);return Ul.Sa(i)&&Ul.gc(i),i};var Xu=!1;ei.prototype.setDataProperty=function(t,i,e){if(this.Ue(t)){if(i===this.Jm)this.bA(t,e);else if(i===this.Im)return void this.Dw(t,e)}else!Xu&&t instanceof Mr&&(Xu=!0,Ul.trace('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Ul.trace("  Is that really your intent?"));var n=Ul.sb(t,i);n!==e&&(Ul.Oa(t,i,e),this.Pz(t,i,n,e))},ei.prototype.addArrayItem=function(t,i){this.XG(t,-1,i)},ei.prototype.insertArrayItem=ei.prototype.XG=function(t,i,e){t===this.mf&&Ul.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray"),0>i&&(i=Ul.qb(t)),Ul.yi(t,i,e),hi(this,"",Ju,"",t,null,e,null,i)},ei.prototype.removeArrayItem=function(t,i){void 0===i&&(i=-1),t===this.mf&&Ul.k("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===i&&(i=Ul.qb(t)-1);var e=Ul.fb(t,i);Ul.zi(t,i),hi(this,"",Wu,"",t,e,null,i,null)},Ul.defineProperty(ei,{Im:"nodeCategoryProperty"},function(){return this.Yq},function(t){var i=this.Yq;i!==t&&(li(t,ei,"nodeCategoryProperty"),this.Yq=t,this.h("nodeCategoryProperty",i,t))}),ei.prototype.getCategoryForNodeData=ei.prototype.fz=function(t){if(null===t)return"";var i=this.Yq;return""===i?"":(i=Ul.sb(t,i),void 0===i?"":"string"==typeof i?i:(Ul.k("getCategoryForNodeData found a non-string category for "+t+": "+i),""))},ei.prototype.setCategoryForNodeData=ei.prototype.Dw=function(t,i){if(Ul.j(i,"string",ei,"setCategoryForNodeData:cat"),null!==t){var e=this.Yq;if(""!==e)if(this.Ue(t)){var n=Ul.sb(t,e);void 0===n&&(n=""),n!==i&&(Ul.Oa(t,e,i),hi(this,"nodeCategory",Yu,e,t,n,i))}else Ul.Oa(t,e,i)}},Ul.Ga(yi,ei),Ul.fa("GraphLinksModel",yi),yi.prototype.clear=yi.prototype.clear=function(){ei.prototype.clear.call(this),this.Ch=[],this.Rl.clear()},Hl=yi.prototype,Hl.toString=function(t){if(void 0===t&&(t=0),t>=2)return this.kA();var i=(""!==this.name?this.name:"")+" GraphLinksModel";if(t>0){i+="\n node data:",t=this.ah;for(var e=Ul.qb(t),n=0,n=0;e>n;n++)var r=Ul.fb(t,n),i=i+(" "+this.wb(r)+":"+$u(r));for(i+="\n link data:",t=this.Qj,e=Ul.qb(t),n=0;e>n;n++)r=Ul.fb(t,n),i+=" "+this.$k(r)+"-->"+this.cl(r)}return i},Hl.At=function(){var t=ei.prototype.At.call(this),i="";return"category"!==this.Ts&&"string"==typeof this.Ts&&(i+=',\n  "linkCategoryProperty": '+this.quote(this.Ts)),"from"!==this.Ko&&"string"==typeof this.Ko&&(i+=',\n  "linkFromKeyProperty": '+this.quote(this.Ko)),"to"!==this.Mo&&"string"==typeof this.Mo&&(i+=',\n  "linkToKeyProperty": '+this.quote(this.Mo)),""!==this.Us&&"string"==typeof this.Us&&(i+=',\n  "linkFromPortIdProperty": '+this.quote(this.Us)),""!==this.Ws&&"string"==typeof this.Ws&&(i+=',\n  "linkToPortIdProperty": '+this.quote(this.Ws)),""!==this.Vs&&"string"==typeof this.Vs&&(i+=',\n  "linkLabelKeysProperty": '+this.quote(this.Vs)),"isGroup"!==this.bt&&"string"==typeof this.bt&&(i+=',\n  "nodeIsGroupProperty": '+this.quote(this.bt)),"group"!==this.Vo&&"string"==typeof this.Vo&&(i+=',\n  "nodeGroupKeyProperty": '+this.quote(this.Vo)),t+i},Hl.pA=function(){var t=ei.prototype.pA.call(this),i=',\n  "linkDataArray": '+ni(this,this.Qj,!0);return t+i},Hl.ft=function(t){ei.prototype.ft.call(this,t),t.linkFromKeyProperty&&(this.Ko=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.Mo=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.Us=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.Ws=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.Ts=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.Vs=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.bt=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.Vo=t.nodeGroupKeyProperty)},Hl.Qz=function(t){ei.prototype.Qz.call(this,t),t=t.linkDataArray,Ul.isArray(t)&&(this.ht(t),this.Qj=t)},Hl.pm=function(t,i){var e=null;if(t.Ad===Ju){if("linkDataArray"===t.Lf?e=this.Ch:"linkLabelKeys"===t.Lf&&(e=this.Pj(t.object)),Ul.isArray(e))return void(i?Ul.zi(e,t.xg):Ul.yi(e,t.xg,t.newValue))}else if(t.Ad===Wu&&("linkDataArray"===t.Lf?e=this.Ch:"linkLabelKeys"===t.Lf&&(e=this.Pj(t.object)),Ul.isArray(e)))return void(i?Ul.yi(e,t.zg,t.oldValue):Ul.zi(e,t.zg));ei.prototype.pm.call(this,t,i)},Ul.defineProperty(yi,{Oy:"archetypeNodeData"},function(){return this.ik},function(t){var i=this.ik;i!==t&&(null!==t&&Ul.C(t,Object,yi,"archetypeNodeData"),this.ik=t,this.h("archetypeNodeData",i,t))}),yi.prototype.Gm=function(t){if(void 0!==t){var i=this.ik;if(null!==i){var e=this.qf(t);null===e&&(e=this.copyNodeData(i),Ul.Oa(e,this.Tl,t),this.km(e))}return t}},Ul.defineProperty(yi,{Ko:"linkFromKeyProperty"},function(){return this.fj},function(t){var i=this.fj;i!==t&&(li(t,yi,"linkFromKeyProperty"),this.fj=t,this.h("linkFromKeyProperty",i,t))}),yi.prototype.getFromKeyForLinkData=yi.prototype.$k=function(t){if(null!==t){var i=this.fj;if(""!==i&&(i=Ul.sb(t,i),void 0!==i)){if(ui(i))return i;Ul.k("FromKey value for link data "+t+" is not a number or a string: "+i)}}},yi.prototype.setFromKeyForLinkData=yi.prototype.Ew=function(t,i){if(null===i&&(i=void 0),void 0===i||ui(i)||Ul.Kd(i,"number or string",yi,"setFromKeyForLinkData:key"),null!==t){var e=this.fj;if(""!==e)if(i=this.Gm(i),this.Ci(t)){var n=Ul.sb(t,e);n!==i&&(ci(this,n,t),Ul.Oa(t,e,i),null===this.qf(i)&&fi(this,i,t),hi(this,"linkFromKey",Yu,e,t,n,i),"string"==typeof e&&this.Nb(t,e))}else Ul.Oa(t,e,i)}},Ul.defineProperty(yi,{Mo:"linkToKeyProperty"},function(){return this.ij},function(t){var i=this.ij;i!==t&&(li(t,yi,"linkToKeyProperty"),this.ij=t,this.h("linkToKeyProperty",i,t))}),yi.prototype.getToKeyForLinkData=yi.prototype.cl=function(t){if(null!==t){var i=this.ij;if(""!==i&&(i=Ul.sb(t,i),void 0!==i)){if(ui(i))return i;Ul.k("ToKey value for link data "+t+" is not a number or a string: "+i)}}},yi.prototype.setToKeyForLinkData=yi.prototype.Gw=function(t,i){if(null===i&&(i=void 0),void 0===i||ui(i)||Ul.Kd(i,"number or string",yi,"setToKeyForLinkData:key"),null!==t){var e=this.ij;if(""!==e)if(i=this.Gm(i),this.Ci(t)){var n=Ul.sb(t,e);n!==i&&(ci(this,n,t),Ul.Oa(t,e,i),null===this.qf(i)&&fi(this,i,t),hi(this,"linkToKey",Yu,e,t,n,i),"string"==typeof e&&this.Nb(t,e))}else Ul.Oa(t,e,i)}},Ul.defineProperty(yi,{Us:"linkFromPortIdProperty"},function(){return this.Cq},function(t){var i=this.Cq;i!==t&&(li(t,yi,"linkFromPortIdProperty"),this.Cq=t,this.h("linkFromPortIdProperty",i,t))}),yi.prototype.getFromPortIdForLinkData=yi.prototype.FG=function(t){if(null===t)return"";var i=this.Cq;return""===i?"":(t=Ul.sb(t,i),void 0===t?"":t)},yi.prototype.setFromPortIdForLinkData=yi.prototype.aA=function(t,i){if(Ul.j(i,"string",yi,"setFromPortIdForLinkData:portname"),null!==t){var e=this.Cq;if(""!==e)if(this.Ci(t)){var n=Ul.sb(t,e);void 0===n&&(n=""),n!==i&&(Ul.Oa(t,e,i),hi(this,"linkFromPortId",Yu,e,t,n,i),"string"==typeof e&&this.Nb(t,e))}else Ul.Oa(t,e,i)}},Ul.defineProperty(yi,{Ws:"linkToPortIdProperty"},function(){return this.Dq},function(t){var i=this.Dq;i!==t&&(li(t,yi,"linkToPortIdProperty"),this.Dq=t,this.h("linkToPortIdProperty",i,t))}),yi.prototype.getToPortIdForLinkData=yi.prototype.IG=function(t){if(null===t)return"";var i=this.Dq;return""===i?"":(t=Ul.sb(t,i),void 0===t?"":t)},yi.prototype.setToPortIdForLinkData=yi.prototype.eA=function(t,i){if(Ul.j(i,"string",yi,"setToPortIdForLinkData:portname"),null!==t){var e=this.Dq;if(""!==e)if(this.Ci(t)){var n=Ul.sb(t,e);void 0===n&&(n=""),n!==i&&(Ul.Oa(t,e,i),hi(this,"linkToPortId",Yu,e,t,n,i),"string"==typeof e&&this.Nb(t,e))}else Ul.Oa(t,e,i)}},Ul.defineProperty(yi,{Vs:"linkLabelKeysProperty"},function(){return this.Dh},function(t){var i=this.Dh;i!==t&&(li(t,yi,"linkLabelKeysProperty"),this.Dh=t,this.h("linkLabelKeysProperty",i,t))}),yi.prototype.getLabelKeysForLinkData=yi.prototype.Pj=function(t){if(null===t)return Ul.mh;var i=this.Dh;return""===i?Ul.mh:(t=Ul.sb(t,i),void 0===t?Ul.mh:t)},yi.prototype.setLabelKeysForLinkData=yi.prototype.FE=function(t,i){if(Ul.Qy(i,yi,"setLabelKeysForLinkData:arr"),null!==t){var e=this.Dh;if(""!==e)if(this.Ci(t)){var n=Ul.sb(t,e);if(void 0===n&&(n=Ul.mh),n!==i){for(var r=Ul.qb(n),o=0;r>o;o++){var s=Ul.fb(n,o);ci(this,s,t)}for(Ul.Oa(t,e,i),r=Ul.qb(i),o=0;r>o;o++)s=Ul.fb(i,o),null===this.qf(s)&&fi(this,s,t);hi(this,"linkLabelKeys",Yu,e,t,n,i),"string"==typeof e&&this.Nb(t,e)}}else Ul.Oa(t,e,i)}},yi.prototype.addLabelKeyForLinkData=yi.prototype.Ly=function(t,i){if(null!==i&&void 0!==i&&(ui(i)||Ul.Kd(i,"number or string",yi,"addLabelKeyForLinkData:key"),null!==t)){var e=this.Dh;if(""!==e){var n=Ul.sb(t,e);void 0===n?(e=[],e.push(i),this.FE(t,e)):Ul.isArray(n)?0<=Ul.Py(n,i)||(Ul.yi(n,1/0,i),this.Ci(t)&&(null===this.qf(i)&&fi(this,i,t),hi(this,"linkLabelKeys",Ju,e,t,null,i))):Ul.k(e+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},yi.prototype.removeLabelKeyForLinkData=yi.prototype.mE=function(t,i){if(null!==i&&void 0!==i&&(ui(i)||Ul.Kd(i,"number or string",yi,"removeLabelKeyForLinkData:key"),null!==t)){var e=this.Dh;if(""!==e){var n=Ul.sb(t,e);if(Ul.isArray(n)){var r=Ul.Py(n,i);0>r||(Ul.zi(n,r),this.Ci(t)&&(ci(this,i,t),hi(this,"linkLabelKeys",Wu,e,t,i,null)))}else void 0!==n&&Ul.k(e+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},Ul.defineProperty(yi,{Qj:"linkDataArray"},function(){return this.Ch},function(t){var i=this.Ch;if(i!==t){Ul.Qy(t,yi,"linkDataArray");for(var e=Ul.qb(t),n=0;e>n;n++){var r=Ul.fb(t,n);if(!Ul.Sa(r))return void Ul.k("GraphLinksModel.linkDataArray must only contain Objects, not: "+r);Ul.Is(r)}this.Ch=t;for(var o=new f(Object),n=0;e>n;n++)r=Ul.fb(t,n),o.add(r);for(this.Rl=o,hi(this,"linkDataArray",Yu,"linkDataArray",this,i,t),n=0;e>n;n++)r=Ul.fb(t,n),vi(this,r)}}),yi.prototype.containsLinkData=yi.prototype.Ci=function(t){return null===t?!1:this.Rl.contains(t)},yi.prototype.addLinkData=yi.prototype.xv=function(t){if(null!==t){if(void 0===Ul.Uc(t))Ul.gc(t);else if(this.Ci(t))return;this.Rl.add(t);var i=Ul.qb(this.Ch);Ul.yi(this.Ch,i,t),hi(this,"linkDataArray",Ju,"linkDataArray",this,null,t,null,i),vi(this,t)}},yi.prototype.addLinkDataCollection=function(t){if(Ul.isArray(t))for(var i=Ul.qb(t),e=0;i>e;e++)this.xv(Ul.fb(t,e));else for(t=t.i;t.next();)this.xv(t.value)},yi.prototype.removeLinkData=yi.prototype.Uz=function(t){if(null!==t){this.Rl.remove(t);var i=this.Ch.indexOf(t);if(!(0>i)){Ul.zi(this.Ch,i),hi(this,"linkDataArray",Wu,"linkDataArray",this,t,null,i,null),i=this.$k(t),ci(this,i,t),i=this.cl(t),ci(this,i,t);var e=this.Pj(t);if(Ul.isArray(e))for(var n=Ul.qb(e),r=0;n>r;r++)i=Ul.fb(e,r),ci(this,i,t)}}},yi.prototype.removeLinkDataCollection=function(t){if(Ul.isArray(t))for(var i=Ul.qb(t),e=0;i>e;e++)this.Uz(Ul.fb(t,e));else for(t=t.i;t.next();)this.Uz(t.value)},Ul.defineProperty(yi,{fJ:"copyLinkDataFunction"},function(){return this.Wt},function(t){var i=this.Wt;i!==t&&(null!==t&&Ul.j(t,"function",yi,"copyLinkDataFunction"),this.Wt=t,this.h("copyLinkDataFunction",i,t))}),yi.prototype.copyLinkData=yi.prototype.eD=function(t){if(null===t)return null;var i=null,i=this.Wt;if(null!==i)i=i(t,this);else{var e,i=new t.constructor;for(e in t)if("__gohashid"!==e){var n=Ul.sb(t,e);Ul.Oa(i,e,n)}}return null!==i&&(Ul.gc(i),""!==this.fj&&Ul.Oa(i,this.fj,void 0),""!==this.ij&&Ul.Oa(i,this.ij,void 0),""!==this.Dh&&Ul.Oa(i,this.Dh,[])),i},Ul.defineProperty(yi,{bt:"nodeIsGroupProperty"},function(){return this.Ou},function(t){var i=this.Ou;i!==t&&(li(t,yi,"nodeIsGroupProperty"),this.Ou=t,this.h("nodeIsGroupProperty",i,t))}),yi.prototype.isGroupForNodeData=yi.prototype.sz=function(t){if(null===t)return!1;var i=this.Ou;return""===i?!1:Ul.sb(t,i)?!0:!1},Ul.defineProperty(yi,{Vo:"nodeGroupKeyProperty"},function(){return this.pj},function(t){var i=this.pj;i!==t&&(li(t,yi,"nodeGroupKeyProperty"),this.pj=t,this.h("nodeGroupKeyProperty",i,t))}),Ul.defineProperty(yi,{tm:"copiesGroupKeyOfNodeData"},function(){return this.px},function(t){this.px!==t&&(Ul.j(t,"boolean",yi,"copiesGroupKeyOfNodeData"),this.px=t)}),yi.prototype.getGroupKeyForNodeData=yi.prototype.Bm=function(t){if(null!==t){var i=this.pj;if(""!==i&&(i=Ul.sb(t,i),void 0!==i)){if(ui(i))return i;Ul.k("GroupKey value for node data "+t+" is not a number or a string: "+i)}}},yi.prototype.setGroupKeyForNodeData=yi.prototype.Fw=function(t,i){if(null===i&&(i=void 0),void 0===i||ui(i)||Ul.Kd(i,"number or string",yi,"setGroupKeyForNodeData:key"),null!==t){var e=this.pj;if(""!==e)if(this.Ue(t)){var n=Ul.sb(t,e);n!==i&&(ci(this,n,t),Ul.Oa(t,e,i),null===this.qf(i)&&fi(this,i,t),hi(this,"nodeGroupKey",Yu,e,t,n,i),"string"==typeof e&&this.Nb(t,e))}else Ul.Oa(t,e,i)}},yi.prototype.copyNodeData=function(t){return null===t?null:(t=ei.prototype.copyNodeData.call(this,t),this.tm||""===this.pj||Ul.Oa(t,this.pj,void 0),t)},yi.prototype.setDataProperty=function(t,i,e){if(this.Ue(t))if(i===this.Jm)this.bA(t,e);else{if(i===this.Im)return void this.Dw(t,e);if(i===this.Vo)return void this.Fw(t,e);i===this.bt&&Ul.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+i)}else if(this.Ci(t)){if(i===this.Ko)return void this.Ew(t,e);if(i===this.Mo)return void this.Gw(t,e);if(i===this.Us)return void this.aA(t,e);if(i===this.Ws)return void this.eA(t,e);if(i===this.Ts)return void this.EE(t,e);if(i===this.Vs)return void this.FE(t,e)}else!Xu&&t instanceof Mr&&(Xu=!0,Ul.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Ul.trace("  Is that really your intent?"));var n=Ul.sb(t,i);n!==e&&(Ul.Oa(t,i,e),this.Pz(t,i,n,e))},Hl=yi.prototype,Hl.gt=function(t,i){ei.prototype.gt.call(this,t,i);for(var e=this.tc.i;e.next();)this.Xz(e.value,t,i);for(var n=this.Rl.i;n.next();){var r=e.value,o=t,s=i;if(this.$k(r)===o){var a=this.fj;Ul.Oa(r,a,s),hi(this,"linkFromKey",Yu,a,r,o,s),"string"==typeof a&&this.Nb(r,a)}this.cl(r)===o&&(a=this.ij,Ul.Oa(r,a,s),hi(this,"linkToKey",Yu,a,r,o,s),"string"==typeof a&&this.Nb(r,a));var h=this.Pj(r);if(Ul.isArray(h))for(var l=Ul.qb(h),a=this.Dh,u=0;l>u;u++)Ul.fb(h,u)===o&&(Ul.RC(h,u,s),hi(this,"linkLabelKeys",Ju,a,r,o,s))}},Hl.Xz=function(t,i,e){if(this.Bm(t)===i){var n=this.pj;Ul.Oa(t,n,e),hi(this,"nodeGroupKey",Yu,n,t,i,e),"string"==typeof n&&this.Nb(t,n)}},Hl.mA=function(){ei.prototype.mA.call(this);for(var t=this.Qj,i=Ul.qb(t),e=0;i>e;e++){var n=Ul.fb(t,e);vi(this,n)}},Hl.$o=function(t){ei.prototype.$o.call(this,t),t=this.wb(t);var i=pi(this,t);if(null!==i){for(var e=new l(Object),i=i.i;i.next();){var n=i.value;if(this.Ue(n)){if(this.Bm(n)===t){var r=this.pj;hi(this,"nodeGroupKey",Yu,r,n,t,t),"string"==typeof r&&this.Nb(n,r),e.add(n)}}else{this.$k(n)===t&&(r=this.fj,hi(this,"linkFromKey",Yu,r,n,t,t),"string"==typeof r&&this.Nb(n,r),e.add(n)),this.cl(n)===t&&(r=this.ij,hi(this,"linkToKey",Yu,r,n,t,t),"string"==typeof r&&this.Nb(n,r),e.add(n));var o=this.Pj(n);if(Ul.isArray(o))for(var s=Ul.qb(o),r=this.Dh,a=0;s>a;a++)Ul.fb(o,a)===t&&(hi(this,"linkLabelKeys",Ju,r,n,t,t),e.add(n))}}for(e=e.i;e.next();)ci(this,t,e.value)}},Hl.Zo=function(t){ei.prototype.Zo.call(this,t);var i=this.Bm(t);null===this.qf(i)&&fi(this,i,t)},Hl.zt=function(t){ei.prototype.zt.call(this,t);var i=this.Bm(t);ci(this,i,t)},Ul.defineProperty(yi,{Ts:"linkCategoryProperty"},function(){return this.zq},function(t){var i=this.zq;i!==t&&(li(t,yi,"linkCategoryProperty"),this.zq=t,this.h("linkCategoryProperty",i,t))}),yi.prototype.getCategoryForLinkData=yi.prototype.Zv=function(t){if(null===t)return"";var i=this.zq;return""===i?"":(i=Ul.sb(t,i),void 0===i?"":"string"==typeof i?i:(Ul.k("getCategoryForLinkData found a non-string category for "+t+": "+i),""))},yi.prototype.setCategoryForLinkData=yi.prototype.EE=function(t,i){if(Ul.j(i,"string",yi,"setCategoryForLinkData:cat"),null!==t){var e=this.zq;if(""===e)return"";if(this.Ci(t)){var n=Ul.sb(t,e);void 0===n&&(n=""),n!==i&&(Ul.Oa(t,e,i),hi(this,"linkCategory",Yu,e,t,n,i),"string"==typeof e&&this.Nb(t,e))}else Ul.Oa(t,e,i)}},Ul.Ga(gi,ei),Ul.fa("TreeModel",gi),gi.prototype.toString=function(t){if(void 0===t&&(t=0),t>=2)return this.kA();var i=(""!==this.name?this.name:"")+" TreeModel";if(t>0){i+="\n node data:",t=this.ah;for(var e=Ul.qb(t),n=0;e>n;n++)var r=Ul.fb(t,n),i=i+(" "+this.wb(r)+":"+$u(r))}return i},gi.prototype.At=function(){var t=ei.prototype.At.call(this),i="";return"parent"!==this.Wo&&"string"==typeof this.Wo&&(i+=',\n  "nodeParentKeyProperty": '+this.quote(this.Wo)),t+i},gi.prototype.ft=function(t){ei.prototype.ft.call(this,t),t.nodeParentKeyProperty&&(this.Wo=t.nodeParentKeyProperty)},gi.prototype.Gm=function(t){return t},Ul.defineProperty(gi,{Wo:"nodeParentKeyProperty"},function(){return this.qj},function(t){var i=this.qj;i!==t&&(li(t,gi,"nodeParentKeyProperty"),this.qj=t,this.h("nodeParentKeyProperty",i,t))}),Ul.defineProperty(gi,{um:"copiesParentKeyOfNodeData"},function(){return this.qx},function(t){this.qx!==t&&(Ul.j(t,"boolean",gi,"copiesParentKeyOfNodeData"),this.qx=t)}),gi.prototype.getParentKeyForNodeData=gi.prototype.Cm=function(t){if(null!==t){var i=this.qj;if(""!==i&&(i=Ul.sb(t,i),void 0!==i)){if(ui(i))return i;Ul.k("ParentKey value for node data "+t+" is not a number or a string: "+i)}}},gi.prototype.setParentKeyForNodeData=gi.prototype.ih=function(t,i){if(null===i&&(i=void 0),void 0===i||ui(i)||Ul.Kd(i,"number or string",gi,"setParentKeyForNodeData:key"),null!==t){var e=this.qj;if(""!==e)if(i=this.Gm(i),this.Ue(t)){var n=Ul.sb(t,e);n!==i&&(ci(this,n,t),Ul.Oa(t,e,i),null===this.qf(i)&&fi(this,i,t),hi(this,"nodeParentKey",Yu,e,t,n,i),"string"==typeof e&&this.Nb(t,e))}else Ul.Oa(t,e,i)}},Ul.defineProperty(gi,{nK:"parentLinkCategoryProperty"},function(){return this.er},function(t){var i=this.er;i!==t&&(li(t,gi,"parentLinkCategoryProperty"),this.er=t,this.h("parentLinkCategoryProperty",i,t))}),gi.prototype.getParentLinkCategoryForNodeData=gi.prototype.HG=function(t){if(null===t)return"";var i=this.er;return""===i?"":(i=Ul.sb(t,i),void 0===i?"":"string"==typeof i?i:(Ul.k("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+i),""))},gi.prototype.setParentLinkCategoryForNodeData=gi.prototype.hI=function(t,i){if(Ul.j(i,"string",gi,"setParentLinkCategoryForNodeData:cat"),null!==t){var e=this.er;if(""===e)return"";if(this.Ue(t)){var n=Ul.sb(t,e);void 0===n&&(n=""),n!==i&&(Ul.Oa(t,e,i),hi(this,"parentLinkCategory",Yu,e,t,n,i),"string"==typeof e&&this.Nb(t,e))}else Ul.Oa(t,e,i)}},gi.prototype.copyNodeData=function(t){return null===t?null:(t=ei.prototype.copyNodeData.call(this,t),this.um||""===this.qj||Ul.Oa(t,this.qj,void 0),t)},gi.prototype.setDataProperty=function(t,i,e){if(this.Ue(t))if(i===this.Jm)this.bA(t,e);else{if(i===this.Im)return void this.Dw(t,e);if(i===this.Wo)return void this.ih(t,e)}else!Xu&&t instanceof Mr&&(Xu=!0,Ul.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Ul.trace("  Is that really your intent?"));var n=Ul.sb(t,i);n!==e&&(Ul.Oa(t,i,e),this.Pz(t,i,n,e))},Hl=gi.prototype,Hl.gt=function(t,i){ei.prototype.gt.call(this,t,i);for(var e=this.tc.i;e.next();)this.Xz(e.value,t,i)},Hl.Xz=function(t,i,e){if(this.Cm(t)===i){var n=this.qj;Ul.Oa(t,n,e),hi(this,"nodeParentKey",Yu,n,t,i,e),"string"==typeof n&&this.Nb(t,n)}},Hl.$o=function(t){ei.prototype.$o.call(this,t),t=this.wb(t);var i=pi(this,t);if(null!==i){for(var e=new l(Object),i=i.i;i.next();){var n=i.value;if(this.Ue(n)&&this.Cm(n)===t){var r=this.qj;hi(this,"nodeParentKey",Yu,r,n,t,t),"string"==typeof r&&this.Nb(n,r),e.add(n)}}for(e=e.i;e.next();)ci(this,t,e.value)}},Hl.Zo=function(t){ei.prototype.Zo.call(this,t);var i=this.Cm(t),i=this.Gm(i);null===this.qf(i)&&fi(this,i,t)},Hl.zt=function(t){ei.prototype.zt.call(this,t);var i=this.Cm(t);ci(this,i,t)},Ul.fa("Binding",mi);var Zu;mi.OneWay=Zu=Ul.s(mi,"OneWay",1);var Qu;mi.TwoWay=Qu=Ul.s(mi,"TwoWay",2),mi.parseEnum=function(t,i){return Ul.j(t,"function",mi,"parseEnum:ctor"),Ul.rb(i,t,mi,"parseEnum:defval"),function(e){return e=Yl(t,e),null===e?i:e}};var $u;mi.toString=$u=function(t){var i=t;return Ul.Sa(t)&&(t.text?i=t.text:t.name?i=t.name:void 0!==t.key?i=t.key:void 0!==t.id?i=t.id:t.constructor===Object&&(t.Text?i=t.Text:t.Name?i=t.Name:void 0!==t.Key?i=t.Key:void 0!==t.Id?i=t.Id:void 0!==t.ID&&(i=t.ID))),void 0===i?"undefined":null===i?"null":i.toString()},mi.prototype.toString=function(){return"Binding("+this.Lw+":"+this.LE+(-1!==this.tl?" "+this.tl:"")+" "+this.mode.name+")"},mi.prototype.freeze=function(){return this.Ca=!0,this},mi.prototype.La=function(){return this.Ca=!1,this},Ul.defineProperty(mi,{tl:null},function(){return this.mC},function(t){Ul.I(this),Ul.j(t,"number",mi,"targetId"),this.mC=t}),Ul.defineProperty(mi,{Lw:"targetProperty"},function(){return this.ov},function(t){Ul.I(this),Ul.j(t,"string",mi,"targetProperty"),this.ov=t}),Ul.defineProperty(mi,{Nm:"sourceName"},function(){return this.hC},function(t){Ul.I(this),null!==t&&Ul.j(t,"string",mi,"sourceName"),this.hC=t,null!==t&&(this.Ey=!1)}),Ul.defineProperty(mi,{xt:"toModel"},function(){return this.Ey},function(t){Ul.I(this),Ul.j(t,"boolean",mi,"toModel"),this.Ey=t}),Ul.defineProperty(mi,{LE:"sourceProperty"},function(){return this.fv},function(t){Ul.I(this),Ul.j(t,"string",mi,"sourceProperty"),this.fv=t}),Ul.defineProperty(mi,{eG:"converter"},function(){return this.mx},function(t){Ul.I(this),null!==t&&Ul.j(t,"function",mi,"converter"),this.mx=t}),Ul.defineProperty(mi,{SF:"backConverter"},function(){return this.gx},function(t){Ul.I(this),null!==t&&Ul.j(t,"function",mi,"backConverter"),this.gx=t}),Ul.defineProperty(mi,{mode:"mode"},function(){return this.ey},function(t){Ul.I(this),Ul.rb(t,mi,mi,"mode"),this.ey=t}),mi.prototype.makeTwoWay=function(t){return void 0===t&&(t=null),null!==t&&Ul.j(t,"function",mi,"makeTwoWay"),this.mode=Qu,this.SF=t,this},mi.prototype.ofObject=mi.prototype.rw=function(t){return void 0===t&&(t=""),this.Nm=t,this.xt=!1,this},mi.prototype.ofModel=function(){return this.Nm=null,this.xt=!0,this},mi.prototype.ofData=function(){return this.Nm=null,this.xt=!1,this},mi.prototype.updateTarget=mi.prototype.ZE=function(t,i,e){var n=this.fv;if(void 0===e||n===e){e=this.ov;var r=this.mx;if(null===r&&""===e)Ul.trace("Binding error: target property is the empty string: "+this.toString());else{var o=i;if(""!==n&&(o=Ul.sb(i,n)),void 0!==o)if(null===r)""!==e&&Ul.Oa(t,e,o);else try{if(""!==e){var s=r(o,t);Ul.Oa(t,e,s)}else r(o,t)}catch(a){}}}},mi.prototype.updateSource=mi.prototype.Mw=function(t,i,e,n){if(void 0===n&&(n=null),this.ey===Qu){var r=this.ov;if(void 0===e||r===e){e=this.fv;var o=this.gx;if(null!==o||""!==e){var s=t;if(""!==r&&(s=Ul.sb(t,r)),void 0!==s)if(null===o)null!==n&&n.ga?n.ga.setDataProperty(i,e,s):Ul.Oa(i,e,s);else try{if(""!==e){var a=o(s,i);null!==n&&n.ga?n.ga.setDataProperty(i,e,a):Ul.Oa(i,e,a)}else o(s,i)}catch(h){}}}}},Ul.fa("Transaction",xi),xi.prototype.toString=function(t){var i="Transaction: "+this.name+" "+this.Ug.count.toString()+(this.Ms?"":", incomplete");if(void 0!==t&&t>0){t=this.Ug.count;for(var e=0;t>e;e++){var n=this.Ug.ja(e);null!==n&&(i+="\n  "+n.toString())}}return i},xi.prototype.clear=xi.prototype.clear=function(){var t=this.Ug;t.La();for(var i=t.count-1;i>=0;i--){var e=t.ja(i);null!==e&&e.clear()}t.clear(),t.freeze()},xi.prototype.canUndo=xi.prototype.canUndo=function(){return this.Ms},xi.prototype.undo=xi.prototype.undo=function(){if(this.canUndo())for(var t=this.Ug.count-1;t>=0;t--){var i=this.Ug.ja(t);null!==i&&i.undo()}},xi.prototype.canRedo=xi.prototype.canRedo=function(){return this.Ms},xi.prototype.redo=xi.prototype.redo=function(){if(this.canRedo())for(var t=this.Ug.count,i=0;t>i;i++){var e=this.Ug.ja(i);null!==e&&e.redo()}},Ul.u(xi,{Ug:"changes"},function(){return this.mF}),Ul.defineProperty(xi,{name:"name"},function(){return this.Ub},function(t){this.Ub=t}),Ul.defineProperty(xi,{Ms:"isComplete"},function(){return this.nB},function(t){this.nB=t}),Ul.fa("UndoManager",wi),wi.prototype.toString=function(t){for(var i="UndoManager "+this.Ii+"<"+this.history.count+"<="+this.VD,i=i+"[",e=this.bE.count,n=0;e>n;n++)n>0&&(i+=" "),i+=this.bE.ja(n);if(i+="]",void 0!==t&&t>0)for(e=this.history.count,n=0;e>n;n++)i+="\n "+this.history.ja(n).toString(t-1);return i},wi.prototype.clear=wi.prototype.clear=function(){var t=this.history;t.La();for(var i=t.count-1;i>=0;i--){var e=t.ja(i);null!==e&&e.clear()}t.clear(),this.Ig=-1,t.freeze(),this.fi=!1,this.bu=null,this.Jk=0,this.Og.La(),this.Og.clear(),this.Og.freeze(),this.Qn.clear()},wi.prototype.addModel=wi.prototype.MF=function(t){this.hy.add(t)},wi.prototype.removeModel=wi.prototype.SH=function(t){this.hy.remove(t)},wi.prototype.startTransaction=wi.prototype.Wb=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.gb)return!1;!0===this.Kx&&(this.Kx=!1,this.Jk++,this.Rc("StartingFirstTransaction",t,this.Di),0<this.Jk&&this.Jk--),this.isEnabled&&(this.Og.La(),this.Og.add(t),this.Og.freeze(),this.Qn.add(null===this.Di?0:this.Di.Ug.count)),this.Jk++;var i=1===this.Le;return i&&this.Rc("StartedTransaction",t,this.Di),i},wi.prototype.commitTransaction=wi.prototype.Wd=function(t){return void 0===t&&(t=""),ki(this,!0,t)},wi.prototype.rollbackTransaction=wi.prototype.ap=function(){return ki(this,!1,"")},wi.prototype.canUndo=wi.prototype.canUndo=function(){if(!this.isEnabled||0<this.Le||this.gb)return!1;var t=this.UE;return null!==t&&t.canUndo()?!0:!1},wi.prototype.undo=wi.prototype.undo=function(){if(this.canUndo()){var t=this.UE;try{this.Rc("StartingUndo","Undo",t),this.fi=!0,this.Ig--,t.undo()}catch(i){Ul.trace("undo error: "+i.toString())}finally{this.fi=!1,this.Rc("FinishedUndo","Undo",t)}}},wi.prototype.canRedo=wi.prototype.canRedo=function(){if(!this.isEnabled||0<this.Le||this.gb)return!1;var t=this.TE;return null!==t&&t.canRedo()?!0:!1},wi.prototype.redo=wi.prototype.redo=function(){if(this.canRedo()){var t=this.TE;try{this.Rc("StartingRedo","Redo",t),this.fi=!0,this.Ig++,t.redo()}catch(i){Ul.trace("redo error: "+i.toString())}finally{this.fi=!1,this.Rc("FinishedRedo","Redo",t)}}},wi.prototype.Rc=function(t,i,e){void 0===e&&(e=null);var n=new ii;for(n.Ad=Uu,n.propertyName=t,n.object=e,n.oldValue=i,t=this.BH;t.next();)i=t.value,n.ga=i,i.Jv(n)},wi.prototype.handleChanged=wi.prototype.ED=function(t){if(this.isEnabled&&!this.gb&&!this.skipsEvent(t)){var i=this.Di;null===i&&(this.bu=i=new xi);var e=t.copy(),i=i.Ug;i.La(),i.add(e),i.freeze(),this.Ry&&0>=this.Le&&!this.Kx&&(t=t.g,null!==t&&!1===t.lf||Ul.trace("Change not within a transaction: "+e.toString()))}},wi.prototype.skipsEvent=function(t){if(null===t||0>t.Ad.value)return!0;if(t=t.object,t instanceof Mr){if(t=t.layer,null!==t&&t.Ac)return!0}else if(t instanceof Ie&&t.Ac)return!0;return!1},Ul.u(wi,{BH:"models"},function(){return this.hy.i}),Ul.defineProperty(wi,{isEnabled:"isEnabled"},function(){return this.Ne},function(t){this.Ne=t}),Ul.u(wi,{UE:"transactionToUndo"},function(){return 0<=this.Ii&&this.Ii<=this.history.count-1?this.history.ja(this.Ii):null}),Ul.u(wi,{TE:"transactionToRedo"},function(){return this.Ii<this.history.count-1?this.history.ja(this.Ii+1):null}),Ul.u(wi,{gb:"isUndoingRedoing"},function(){return this.fi}),Ul.u(wi,{history:"history"},function(){return this.tF}),Ul.defineProperty(wi,{VD:"maxHistoryLength"},function(){return this.CB},function(t){this.CB=t}),Ul.u(wi,{Ii:"historyIndex"},function(){return this.Ig}),Ul.u(wi,{Di:"currentTransaction"},function(){return this.bu}),Ul.u(wi,{Le:"transactionLevel"},function(){return this.Jk}),Ul.u(wi,{ND:"isInTransaction"},function(){return 0<this.Jk}),Ul.defineProperty(wi,{Ry:"checksTransactionLevel"},function(){return this.GA},function(t){this.GA=t}),Ul.u(wi,{bE:"nestedTransactionNames"},function(){return this.Og}),Ul.fa("CommandHandler",Mi);var _u=null,tf="";Mi.prototype.toString=function(){return"CommandHandler"},Ul.u(Mi,{g:"diagram"},function(){return this.Y}),Mi.prototype.Ec=function(t){this.Y=t},Mi.prototype.doKeyDown=function(){var t=this.g;if(null!==t){var i=t.N,e=Ul.Em?i.Ys:i.control,n=i.shift,r=i.alt,o=i.key;!e||"C"!==o&&"Insert"!==o?e&&"X"===o||n&&"Del"===o?this.canCutSelection()&&this.cutSelection():e&&"V"===o||n&&"Insert"===o?this.canPasteSelection()&&this.pasteSelection():e&&"Y"===o||r&&n&&"Backspace"===o?this.canRedo()&&this.redo():e&&"Z"===o||r&&"Backspace"===o?this.canUndo()&&this.undo():"Del"===o||"Backspace"===o?this.canDeleteSelection()&&this.deleteSelection():e&&"A"===o?this.canSelectAll()&&this.selectAll():"Esc"===o?this.canStopCommand()&&this.stopCommand():"Up"===o?t.Se&&(e?t.scroll("pixel","up"):t.scroll("line","up")):"Down"===o?t.Se&&(e?t.scroll("pixel","down"):t.scroll("line","down")):"Left"===o?t.Re&&(e?t.scroll("pixel","left"):t.scroll("line","left")):"Right"===o?t.Re&&(e?t.scroll("pixel","right"):t.scroll("line","right")):"PageUp"===o?n&&t.Re?t.scroll("page","left"):t.Se&&t.scroll("page","up"):"PageDown"===o?n&&t.Re?t.scroll("page","right"):t.Se&&t.scroll("page","down"):"Home"===o?(i=t.Cd,e&&t.Se?t.position=new m(t.position.x,i.y):!e&&t.Re&&(t.position=new m(i.x,t.position.y))):"End"===o?(i=t.Cd,n=t.ob,e&&t.Se?t.position=new m(n.x,i.bottom-n.height):!e&&t.Re&&(t.position=new m(i.right-n.width,n.y))):"Subtract"===o?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===o?this.canIncreaseZoom()&&this.increaseZoom():e&&"0"===o?this.canResetZoom()&&this.resetZoom():n&&"Z"===o?this.canZoomToFit()&&this.zoomToFit():e&&!n&&"G"===o?this.canGroupSelection()&&this.groupSelection():e&&n&&"G"===o?this.canUngroupSelection()&&this.ungroupSelection():i.event&&113===i.event.which?this.canEditTextBlock()&&this.editTextBlock():i.event&&93===i.event.which?this.canShowContextMenu()&&this.showContextMenu():i.bubbles=!0:this.canCopySelection()&&this.copySelection()}},Mi.prototype.doKeyUp=function(){var t=this.g;null!==t&&(t.N.bubbles=!0)},Mi.prototype.stopCommand=function(){var t=this.g;if(null!==t){var i=t.Va;i instanceof Pe&&t.of&&t.Lv(),null!==i&&i.doCancel()
}},Mi.prototype.canStopCommand=function(){return!0},Mi.prototype.selectAll=function(){var t=this.g;if(null!==t){t.ma();try{t.ac="wait",t.za("ChangingSelection");for(var i=t.Sj;i.next();)i.value.Za=!0;for(var e=t.yg;e.next();)e.value.Za=!0;for(var n=t.links;n.next();)n.value.Za=!0}finally{t.za("ChangedSelection"),t.ac=""}}},Mi.prototype.canSelectAll=function(){var t=this.g;return null!==t&&t.of},Mi.prototype.deleteSelection=function(){var t=this.g;if(null!==t&&!t.za("SelectionDeleting",t.selection))try{t.ac="wait",t.Wb("Delete"),t.za("ChangingSelection");for(var i=new f(es),e=t.selection.i;e.next();)Pi(i,e.value,!0,this.qG?1/0:0,!0,function(t){return t.canDelete()});t.Wz(i,!0),t.za("SelectionDeleted",i)}finally{t.za("ChangedSelection"),t.Wd("Delete"),t.ac=""}},Mi.prototype.canDeleteSelection=function(){var t=this.g;return null===t||t.nb||t.uf||!t.lm||0===t.selection.count?!1:!0},Mi.prototype.to=function(t,i,e){var n=new g(es,es);for(t=t.i;t.next();)Ti(this,t.value,i,n,e);if(null!==i){e=i.ga,t=!1,null!==i.tb.Ed&&(t=i.tb.Ed.Gi);for(var r=new f(Bs),o=new g(Bs,Bs),s=n.i;s.next();){var a=s.value;if(a instanceof Bs){var h=a;t||null!==h.W&&null!==h.ca||r.add(h)}else if(e instanceof gi&&a instanceof Ms&&null!==a.data){var h=e,l=a,a=s.key,u=a.zm();null!==u&&(u=n.ta(u),null!==u?(h.ih(l.data,h.wb(u.data)),h=i.ng(l.data),a=a.As(),null!==a&&null!==h&&o.add(a,h)):h.ih(l.data,void 0))}}if(0<r.count&&i.Wz(r,!1),0<o.count)for(i=o.i;i.next();)n.add(i.key,i.value)}for(i=n.i;i.next();)i.value.Nb();return n},Mi.prototype.copySelection=function(){var t=this.g;if(null!==t){for(var i=new f(es),t=t.selection.i;t.next();)Pi(i,t.value,!0,this.hG?1/0:0,this.fG,function(t){return t.canCopy()});this.copyToClipboard(i)}},Mi.prototype.canCopySelection=function(){var t=this.g;return null!==t&&t.Ij&&t.My&&0!==t.selection.count?!0:!1},Mi.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Mi.prototype.canCutSelection=function(){var t=this.g;return null!==t&&!t.nb&&!t.uf&&t.Ij&&t.lm&&t.My&&0!==t.selection.count?!0:!1},Mi.prototype.copyToClipboard=function(t){var i=this.g;if(null!==i){var e=null;if(null===t)_u=null,tf="";else{var e=i.ga,n=!1,r=!1,o=null;try{if(e instanceof gi){var s=e,n=s.um;s.um=this.dD}e instanceof yi&&(s=e,r=s.tm,s.tm=this.cD),o=i.to(t,null,!0)}finally{e instanceof gi&&(e.um=n),e instanceof yi&&(e.tm=r),e=new l(es),e.Td(o),_u=e,tf=i.ga.Sk}}i.za("ClipboardChanged",e)}},Mi.prototype.pasteFromClipboard=function(){var t=new f(es),i=_u;if(null===i)return t;var e=this.g;if(null===e||tf!==e.ga.Sk)return t;var n=e.ga,r=!1,o=!1,s=null;try{if(n instanceof gi){var a=n,r=a.um;a.um=this.dD}n instanceof yi&&(a=n,o=a.tm,a.tm=this.cD),s=e.to(i,e,!1)}finally{for(n instanceof gi&&(n.um=r),n instanceof yi&&(n.tm=o),i=s.i;i.next();)e=i.value,n=i.key,e.location.J()||(n.location.J()?e.location=n.location:!e.position.J()&&n.position.J()&&(e.position=n.position)),t.add(e)}return t},Mi.prototype.pasteSelection=function(t){void 0===t&&(t=null);var i=this.g;if(null!==i)try{i.ac="wait",i.Wb("Paste"),i.za("ChangingSelection");var e=this.pasteFromClipboard();0<e.count&&Cn(i);for(var n=e.i;n.next();)n.value.Za=!0;if(i.za("ChangedSelection"),null!==t){var r=i.computePartsBounds(i.selection);if(r){var o=i.tb.Ed;null===o&&(o=new Ni,o.Ec(i));var s=o.computeEffectiveCollection(i.selection);o.moveParts(s,new m(t.x-r.Ja,t.y-r.Ua),!1)}}i.za("ClipboardPasted",e)}finally{i.Wd("Paste"),i.ac=""}},Mi.prototype.canPasteSelection=function(){var t=this.g;return null===t||t.nb||t.uf||!t.lo||!t.My||null===_u||tf!==t.ga.Sk?!1:!0},Mi.prototype.undo=function(){var t=this.g;null!==t&&t.ha.undo()},Mi.prototype.canUndo=function(){var t=this.g;return null===t||t.nb||t.uf?!1:t.NC&&t.ha.canUndo()},Mi.prototype.redo=function(){var t=this.g;null!==t&&t.ha.redo()},Mi.prototype.canRedo=function(){var t=this.g;return null===t||t.nb||t.uf?!1:t.NC&&t.ha.canRedo()},Mi.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.Ow),Ul.ze(t,Mi,"decreaseZoom:factor");var i=this.g;null!==i&&i.no===Nf&&(t*=i.scale,t<i.Yg||t>i.Xg||(i.scale=t))},Mi.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.Ow),Ul.ze(t,Mi,"canDecreaseZoom:factor");var i=this.g;return null===i||i.no!==Nf?!1:(t*=i.scale,t<i.Yg||t>i.Xg?!1:i.Gv)},Mi.prototype.increaseZoom=function(t){void 0===t&&(t=this.Ow),Ul.ze(t,Mi,"increaseZoom:factor");var i=this.g;null!==i&&i.no===Nf&&(t*=i.scale,t<i.Yg||t>i.Xg||(i.scale=t))},Mi.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.Ow),Ul.ze(t,Mi,"canIncreaseZoom:factor");var i=this.g;return null===i||i.no!==Nf?!1:(t*=i.scale,t<i.Yg||t>i.Xg?!1:i.Gv)},Mi.prototype.resetZoom=function(t){void 0===t&&(t=this.Pv),Ul.ze(t,Mi,"resetZoom:newscale");var i=this.g;null===i||t<i.Yg||t>i.Xg||(i.scale=t)},Mi.prototype.canResetZoom=function(t){void 0===t&&(t=this.Pv),Ul.ze(t,Mi,"canResetZoom:newscale");var i=this.g;return null===i||t<i.Yg||t>i.Xg?!1:i.Gv},Mi.prototype.zoomToFit=function(){var t=this.g;if(null!==t){var i=t.scale,e=t.position;i!==this.FC||isNaN(this.Zx)?(this.Zx=i,this.zB=e.copy(),t.zoomToFit(),t.bf(),this.FC=t.scale):(t.scale=this.Zx,t.position=this.zB)}},Mi.prototype.canZoomToFit=function(){var t=this.g;return null===t?!1:t.Gv},Mi.prototype.collapseTree=function(t){void 0===t&&(t=null);var i=this.g;if(null===i)return!1;try{i.Wb("Collapse Tree");var e=new l(Ms);if(null!==t&&t.Vc)t.collapseTree(),e.add(t);else for(var n=i.selection.i;n.next();){var r=n.value;r instanceof Ms&&(t=r,t.Vc&&(t.collapseTree(),e.add(t)))}i.za("TreeCollapsed",e)}finally{i.Wd("Collapse Tree")}},Mi.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.nb)return!1;if(null!==t){if(!t.Vc)return!1;if(0<t.Yv().count)return!0}else for(t=i.selection.i;t.next();)if(i=t.value,i instanceof Ms&&i.Vc&&0<i.Yv().count)return!0;return!1},Mi.prototype.expandTree=function(t){void 0===t&&(t=null);var i=this.g;if(null===i)return!1;try{i.Wb("Expand Tree");var e=new l(Ms);if(null===t||t.Vc)for(var n=i.selection.i;n.next();){var r=n.value;r instanceof Ms&&(t=r,t.Vc||(t.expandTree(),e.add(t)))}else t.expandTree(),e.add(t);i.za("TreeExpanded",e)}finally{i.Wd("Expand Tree")}},Mi.prototype.canExpandTree=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.nb)return!1;if(null!==t){if(t.Vc)return!1;if(0<t.Yv().count)return!0}else for(t=i.selection.i;t.next();)if(i=t.value,i instanceof Ms&&!i.Vc&&0<i.Yv().count)return!0;return!1},Mi.prototype.groupSelection=function(){var t=this.g;if(null!==t){var i=t.ga;if(i instanceof yi){var e=this.OC;if(null!==e){var n=null;try{t.ac="wait",t.Wb("Group"),t.za("ChangingSelection");for(var r=new l(es),o=t.selection.i;o.next();){var s=o.value;s.Fd()&&s.canGroup()&&r.add(s)}for(var a=new l(es),h=r.i;h.next();){for(var u=h.value,o=!1,f=r.i;f.next();)if(u.Qh(f.value)){o=!0;break}o||a.add(u)}if(0<a.count){var c=a.first().Ra;if(null!==c)for(;null!==c;){for(var r=!1,p=a.i;p.next();)if(!p.value.Qh(c)){r=!0;break}if(!r)break;c=c.Ra}if(e instanceof xa)go(e),n=e.copy(),null!==n&&t.add(n);else if(i.sz(e)){var d=i.copyNodeData(e);Ul.Sa(d)&&(i.km(d),n=t.Xv(d))}if(null!==n){null!==c&&this.isValidMember(c,n)&&(n.Ra=c);for(var y=a.i;y.next();){var v=y.value;this.isValidMember(n,v)&&(v.Ra=n)}t.select(n)}}t.za("ChangedSelection"),t.za("SelectionGrouped",n)}finally{t.Wd("Group"),t.ac=""}}}}},Mi.prototype.canGroupSelection=function(){var t=this.g;if(null===t||t.nb||t.uf||!t.lo||!t.Bv||!(t.ga instanceof yi)||null===this.OC)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.Fd()&&i.canGroup())return!0}return!1},Mi.prototype.isValidMember=function(t,i){if(null===i||t===i||i instanceof Bs)return!1;if(null!==t){if(t===i||t.Qh(i))return!1;var e=t.Bz;if(null!==e&&!e(t,i)||null===t.data&&null!==i.data||null!==t.data&&null===i.data)return!1}return e=this.Bz,null!==e?e(t,i):!0},Mi.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var i=this.g;if(null!==i){var e=i.ga;if(e instanceof yi)try{i.ac="wait",i.Wb("Ungroup"),i.za("ChangingSelection");var n=new l(xa);if(null!==t)n.add(t);else for(var r=i.selection.i;r.next();){var o=r.value;o instanceof xa&&(t=o,t.canUngroup()&&n.add(t))}if(0<n.count){i.Lv();for(var s=n.i;s.next();){var a=s.value;a.expandSubGraph();var h=a.Ra,u=null!==h&&null!==h.data?e.wb(h.data):void 0,f=new l(es);f.Td(a.Mc);for(var c=f.i;c.next();){var p=c.value;if(p.Za=!0,!(p instanceof Bs)){var d=p.data;null!==d?e.Fw(d,u):p.Ra=h}}i.remove(a)}}i.za("ChangedSelection"),i.za("SelectionUngrouped",n,f)}finally{i.Wd("Ungroup"),i.ac=""}}},Mi.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.nb||i.uf||!i.lm||!i.Fv||!(i.ga instanceof yi))return!1;if(null!==t){if(t.canUngroup())return!0}else for(t=i.selection.i;t.next();)if(i=t.value,i instanceof xa&&i.canUngroup())return!0;return!1},Mi.prototype.addTopLevelParts=function(t,i){for(var e=!0,n=Si(t).i;n.next();){var r=n.value;null!==r.Ra&&(!i||this.isValidMember(null,r)?r.Ra=null:e=!1)}return e},Mi.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var i=this.g;if(null===i)return!1;try{i.Wb("Collapse SubGraph");var e=new l(xa);if(null!==t&&t.be)t.collapseSubGraph(),e.add(t);else for(var n=i.selection.i;n.next();){var r=n.value;r instanceof xa&&(t=r,t.be&&(t.collapseSubGraph(),e.add(t)))}i.za("SubGraphCollapsed",e)}finally{i.Wd("Collapse SubGraph")}},Mi.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.nb)return!1;if(null!==t)return t.be?!0:!1;for(t=i.selection.i;t.next();)if(i=t.value,i instanceof xa&&i.be)return!0;return!1},Mi.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var i=this.g;if(null===i)return!1;try{i.Wb("Expand SubGraph");var e=new l(xa);if(null===t||t.be)for(var n=i.selection.i;n.next();){var r=n.value;r instanceof xa&&(t=r,t.be||(t.expandSubGraph(),e.add(t)))}else t.expandSubGraph(),e.add(t);i.za("SubGraphExpanded",e)}finally{i.Wd("Expand SubGraph")}},Mi.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var i=this.g;if(null===i||i.nb)return!1;if(null!==t)return t.be?!1:!0;for(t=i.selection.i;t.next();)if(i=t.value,i instanceof xa&&!i.be)return!0;return!1},Mi.prototype.editTextBlock=function(t){void 0===t&&(t=null),null!==t&&Ul.C(t,Fo,Mi,"editTextBlock");var i=this.g;if(null!==i){var e=i.tb.iA;if(null!==e){if(null===t){t=null;for(var n=i.selection.i;n.next();){var r=n.value;if(r.canEdit()){t=r;break}}if(null===t)return;t=t.vs(function(t){return t instanceof Fo&&t.bz})}null!==t&&(i.Va=null,e.kh=t,i.Va=e)}}},Mi.prototype.canEditTextBlock=function(t){void 0===t&&(t=null),null!==t&&Ul.C(t,Fo,Mi,"canEditTextBlock");var i=this.g;if(null===i||i.nb||i.uf||!i.Ev||null===i.tb.iA)return!1;if(null!==t){if(t=t.T,null!==t&&t.canEdit())return!0}else for(i=i.selection.i;i.next();)if(t=i.value,t.canEdit()&&(t=t.vs(function(t){return t instanceof Fo&&t.bz}),null!==t))return!0;return!1},Mi.prototype.showContextMenu=function(t){var i=this.g;if(null!==i){var e=i.tb.Vy;if(null!==e&&(void 0===t&&(t=0<i.selection.count?i.selection.first():i),t=e.findObjectWithContextMenu(t),null!==t)){var n=new _,r=null;t instanceof Mr?r=t.lb(ou):i.fH||(r=i.ob,r=new m(r.x+r.width/2,r.y+r.height/2)),null!==r&&(n.ff=i.VE(r),n.da=r,i.N=n),i.Va=e,be(e,!1,t)}}},Mi.prototype.canShowContextMenu=function(t){var i=this.g;if(null===i)return!1;var e=i.tb.Vy;return null===e?!1:(void 0===t&&(t=0<i.selection.count?i.selection.first():i),null===e.findObjectWithContextMenu(t)?!1:!0)},Ul.defineProperty(Mi,{fG:"copiesConnectedLinks"},function(){return this.JA},function(t){Ul.j(t,"boolean",Mi,"copiesConnectedLinks"),this.JA=t}),Ul.defineProperty(Mi,{hG:"copiesTree"},function(){return this.NA},function(t){Ul.j(t,"boolean",Mi,"copiesTree"),this.NA=t}),Ul.defineProperty(Mi,{qG:"deletesTree"},function(){return this.XA},function(t){Ul.j(t,"boolean",Mi,"deletesTree"),this.XA=t}),Ul.defineProperty(Mi,{dD:"copiesParentKey"},function(){return this.MA},function(t){Ul.j(t,"boolean",Mi,"copiesParentKey"),this.MA=t}),Ul.defineProperty(Mi,{cD:"copiesGroupKey"},function(){return this.LA},function(t){Ul.j(t,"boolean",Mi,"copiesGroupKey"),this.LA=t}),Ul.defineProperty(Mi,{OC:"archetypeGroupData"},function(){return this.ax},function(t){null!==t&&Ul.C(t,Object,Mi,"archetypeGroupData");var i=this.g;null!==i&&(i=i.ga,i instanceof yi&&(t instanceof xa||i.sz(t)||Ul.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+t))),this.ax=t}),Ul.defineProperty(Mi,{Bz:"memberValidation"},function(){return this.Ak},function(t){null!==t&&Ul.j(t,"function",Mi,"memberValidation"),this.Ak=t}),Ul.defineProperty(Mi,{Pv:"defaultScale"},function(){return this.VA},function(t){Ul.ze(t,Mi,"defaultScale"),t>0||Ul.k("defaultScale must be larger than zero, not: "+t),this.VA=t}),Ul.defineProperty(Mi,{Ow:"zoomFactor"},function(){return this.EC},function(t){Ul.ze(t,Mi,"zoomFactor"),t>1||Ul.k("zoomFactor must be larger than 1.0, not: "+t),this.EC=t}),Ul.fa("Tool",Ci),Ci.prototype.Ec=function(t){this.Y=t},Ci.prototype.toString=function(){return""!==this.name?this.name+" Tool":Ul.rg(Object.getPrototypeOf(this))},Ci.prototype.updateAdornments=function(){},Ci.prototype.canStart=function(){return this.isEnabled},Ci.prototype.doStart=function(){},Ci.prototype.doActivate=function(){this.na=!0},Ci.prototype.doDeactivate=function(){this.na=!1},Ci.prototype.doStop=function(){},Ci.prototype.doCancel=function(){this.stopTool()},Ci.prototype.stopTool=function(){var t=this.g;null!==t&&t.Va===this&&(t.Va=null,t.ac="")},Ci.prototype.doMouseDown=function(){!this.na&&this.canStart()&&this.doActivate()},Ci.prototype.doMouseMove=function(){},Ci.prototype.doMouseUp=function(){this.stopTool()},Ci.prototype.doMouseWheel=function(){},Ci.prototype.canStartMultiTouch=function(){return!0},Ci.prototype.standardPinchZoomStart=function(){var t=this.g;if(null!==t){var i=t.N.event,e=null,n=null;if(void 0!==i.targetTouches){if(2>i.targetTouches.length)return;e=i.targetTouches[0],n=i.targetTouches[1]}else{if(null===t.Df[0])return;e=t.Df[0],n=t.Df[1]}if(this.doCancel(),t.yn){t.Lx=!0,t.MB=t.scale;var r=t.Ab,o=t.zb,s=t.ib.getBoundingClientRect(),a=e.clientX-r/s.width*s.left,h=e.clientY-o/s.height*s.top,e=n,n=e.clientX-r/s.width*s.left-a,o=e.clientY-o/s.height*s.top-h,o=Math.sqrt(n*n+o*o);t.iC=o,i.preventDefault(),i.cancelBubble=!0}else en(t)}},Ci.prototype.standardPinchZoomMove=function(){var t=this.g;if(null!==t){var i=t.N.event;this.doCancel(),en(t);var e=null,n=null;if(void 0!==i.targetTouches){if(2>i.targetTouches.length)return;e=i.targetTouches[0],n=i.targetTouches[1]}else{if(null===t.Df[0])return;e=t.Df[0],n=t.Df[1]}if(t.yn&&t.Lx){var r=t.Ab,o=t.zb,s=t.ib.getBoundingClientRect(),a=e,e=a.clientX-r/s.width*s.left,h=a.clientY-o/s.height*s.top,a=n,n=a.clientX-r/s.width*s.left,o=a.clientY-o/s.height*s.top,s=n-e,r=o-h,s=Math.sqrt(s*s+r*r)/t.iC,e=new m((Math.min(n,e)+Math.max(n,e))/2,(Math.min(o,h)+Math.max(o,h))/2),h=t.MB*s,n=t.Eb;h!==t.scale&&n.canResetZoom(h)&&(o=t.Rm,t.Rm=e,n.resetZoom(h),t.Rm=o),i.preventDefault(),i.cancelBubble=!0}}},Ci.prototype.doKeyDown=function(){var t=this.g;null!==t&&"Esc"===t.N.key&&this.doCancel()},Ci.prototype.doKeyUp=function(){},Ci.prototype.startTransaction=Ci.prototype.Wb=function(t){void 0===t&&(t=this.name),this.zf=null;var i=this.g;return null===i?!1:i.Wb(t)},Ci.prototype.stopTransaction=Ci.prototype.Uj=function(){var t=this.g;return null===t?!1:null===this.zf?t.ap():t.Wd(this.zf)},Ci.prototype.standardMouseSelect=function(){var t=this.g;if(null!==t&&t.of){var i=t.N,e=t.zs(i.da,!1);if(null!==e){if(Ul.Em?i.Ys:i.control){for(t.za("ChangingSelection"),i=e;null!==i&&!i.canSelect();)i=i.Ra;null!==i&&(i.Za=!i.Za),t.za("ChangedSelection")}else if(i.shift){if(!e.Za){for(t.za("ChangingSelection"),i=e;null!==i&&!i.canSelect();)i=i.Ra;null!==i&&(i.Za=!0),t.za("ChangedSelection")}}else if(!e.Za){for(i=e;null!==i&&!i.canSelect();)i=i.Ra;null!==i&&t.select(i)}}else!i.left||(Ul.Em?i.Ys:i.control)||i.shift||t.Lv()}},Ci.prototype.standardMouseClick=function(t,i){void 0===t&&(t=null),void 0===i&&(i=function(t){return!t.layer.Ac});var e=this.g;if(null!==e){var n=e.N,r=e.ke(n.da,t,i);n.pe=r,ji(r,n,e)}},Ci.prototype.standardMouseOver=function(){var t=this.g;if(null!==t){var i=t.N;if(null!==i.g&&!0!==t.Lb.bd){var e=t.cb;t.cb=!0;var n=t.ke(i.da,null,null);i.pe=n;var r=!1;if(n!==t.en){var o=t.en,s=o;for(t.en=n,this.doCurrentObjectChanged(o,n),i.Tc=!1;null!==o;){var a=o.$D;if(null!==a){if(n===o)break;if(null!==n&&n.gl(o))break;if(a(i,o,n),r=!0,i.Tc)break}o=o.S}for(o=s,i.Tc=!1;null!==n;){if(a=n.ZD,null!==a){if(o===n)break;if(null!==o&&o.gl(n))break;if(a(i,n,o),r=!0,i.Tc)break}n=n.S}n=t.en}if(null!==n){for(o=n,a="";null!==o&&(a=o.cursor,""===a);)o=o.S;for(t.ac=a,i.Tc=!1,o=n;null!==o&&(a=o.Fz,null===a||(a(i,o),r=!0,!i.Tc));)o=o.S}else t.ac="",a=t.Fz,null!==a&&(a(i),r=!0);r&&t.de(),t.cb=e}}},Ci.prototype.doCurrentObjectChanged=function(){},Ci.prototype.standardMouseWheel=function(){var t=this.g;if(null!==t){var i=t.N,e=i.Uk;if(0!==e&&t.Cd.J()){var n=t.Eb,r=t.tb.$s;if((r===Pf&&!i.shift||r===Mf&&i.control)&&(e>0?n.canIncreaseZoom():n.canDecreaseZoom()))r=t.Rm,t.Rm=i.ff,e>0?n.increaseZoom():n.decreaseZoom(),t.Rm=r,i.bubbles=!1;else if(r===Pf&&i.shift||r===Mf&&!i.control){if(n=t.position.copy(),r=e>0?e:-e,!i.shift&&t.Se){var o=t.mt,r=r/40*o;e>0?t.scroll("pixel","up",r):t.scroll("pixel","down",r)}else i.shift&&t.Re&&(o=t.lt,r=r/40*o,e>0?t.scroll("pixel","left",r):t.scroll("pixel","right",r));t.position.L(n)||(i.bubbles=!1)}}}},Ci.prototype.standardWaitAfter=function(t){Ul.j(t,"number",Ci,"standardWaitAfter:delay"),this.cancelWaitAfter();var i=this;this.vv=Ul.setTimeout(function(){i.doWaitAfter()},t)},Ci.prototype.cancelWaitAfter=function(){-1!==this.vv&&Ul.clearTimeout(this.vv),this.vv=-1},Ci.prototype.doWaitAfter=function(){},Ci.prototype.findToolHandleAt=function(t,i){var e=this.g;if(null===e)return null;if(e=e.ke(t,null,function(t){return t=t.T,null===t?!1:null!==t.vc}),null===e)return null;var n=e.T;return null===n||n.Kc!==i?null:e},Ci.prototype.isBeyondDragSize=function(t,i){var e=this.g;if(null===e)return!1;void 0===t&&(t=e.wc.ff),void 0===i&&(i=e.N.ff);var n=e.tb.vG,r=n.width,n=n.height;return e.wc.jl&&(r+=6,n+=6),Math.abs(i.x-t.x)>r||Math.abs(i.y-t.y)>n},Ul.u(Ci,{g:"diagram"},function(){return this.Y}),Ul.defineProperty(Ci,{name:"name"},function(){return this.Ub},function(t){Ul.j(t,"string",Ci,"name"),this.Ub=t}),Ul.defineProperty(Ci,{isEnabled:"isEnabled"},function(){return this.Ne},function(t){Ul.j(t,"boolean",Ci,"isEnabled"),this.Ne=t}),Ul.defineProperty(Ci,{na:"isActive"},function(){return this.lB},function(t){Ul.j(t,"boolean",Ci,"isActive"),this.lB=t}),Ul.defineProperty(Ci,{zf:"transactionResult"},function(){return this.AC},function(t){null!==t&&Ul.j(t,"string",Ci,"transactionResult"),this.AC=t}),Ul.Ga(Ni,Ci),Ul.fa("DraggingTool",Ni),Ul.defineProperty(Ni,{MD:"isCopyEnabled"},function(){return this.pB},function(t){Ul.j(t,"boolean",Ni,"isCopyEnabled"),this.pB=t}),Ul.defineProperty(Ni,{gG:"copiesEffectiveCollection"},function(){return this.KA},function(t){Ul.j(t,"boolean",Ni,"copiesEffectiveCollection"),this.KA=t}),Ul.defineProperty(Ni,{wG:"dragsTree"},function(){return this.cB},function(t){Ul.j(t,"boolean",Ni,"dragsTree"),this.cB=t}),Ul.defineProperty(Ni,{gw:"isGridSnapEnabled"},function(){return this.iq},function(t){Ul.j(t,"boolean",Ni,"isGridSnapEnabled"),this.iq=t}),Ul.defineProperty(Ni,{YG:"isComplexRoutingRealtime"},function(){return this.oB},function(t){Ul.j(t,"boolean",Ni,"isComplexRoutingRealtime"),this.oB=t}),Ul.defineProperty(Ni,{$G:"isGridSnapRealtime"},function(){return this.tB},function(t){Ul.j(t,"boolean",Ni,"isGridSnapRealtime"),this.tB=t}),Ul.defineProperty(Ni,{DD:"gridSnapCellSize"},function(){return this.Mx},function(t){Ul.C(t,w,Ni,"gridSnapCellSize"),this.Mx.L(t)||(this.Mx=t=t.Z())}),Ul.defineProperty(Ni,{JG:"gridSnapCellSpot"},function(){return this.Nx},function(t){Ul.C(t,D,Ni,"gridSnapCellSpot"),this.Nx.L(t)||(this.Nx=t=t.Z())}),Ul.defineProperty(Ni,{KG:"gridSnapOrigin"},function(){return this.Ox},function(t){Ul.C(t,m,Ni,"gridSnapOrigin"),this.Ox.L(t)||(this.Ox=t=t.Z())}),Ul.defineProperty(Ni,{Gi:"dragsLink"},function(){return this.bB},function(t){Ul.j(t,"boolean",Ni,"dragsLink"),this.bB=t}),Ul.defineProperty(Ni,{rs:"currentPart"},function(){return this.QA},function(t){null!==t&&Ul.C(t,es,Ni,"currentPart"),this.QA=t}),Ul.defineProperty(Ni,{oc:"copiedParts"},function(){return this.IA},function(t){this.IA=t}),Ul.defineProperty(Ni,{cc:"draggedParts"},function(){return this.aB},function(t){this.aB=t}),Ul.u(Ni,{vJ:"draggingParts"},function(){return null!==this.oc?this.oc.Ni():null!==this.cc?this.cc.Ni():this.sF}),Ul.defineProperty(Ni,{Sc:"draggedLink"},function(){return this.$A},function(t){null!==t&&Ul.C(t,Bs,Ni,"draggedLink"),this.$A=t}),Ul.defineProperty(Ni,{fw:"isDragOutStarted"},function(){return this.rB},function(t){this.rB=t}),Ul.defineProperty(Ni,{Tj:"startPoint"},function(){return this.gv},function(t){Ul.C(t,m,Ni,"startPoint"),this.gv.L(t)||(this.gv=t=t.Z())}),Ul.defineProperty(Ni,{iD:"delay"},function(){return this.pn},function(t){Ul.j(t,"number",Ni,"delay"),this.pn=t}),Ni.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.Nk&&!t.Ij&&!t.Av||!t.of)return!1;var i=t.N;return!i.left||t.Va!==this&&(!this.isBeyondDragSize()||i.jl&&i.timestamp-t.wc.timestamp<this.pn)?!1:null!==this.findDraggablePart()},Ni.prototype.findDraggablePart=function(){var t=this.g;if(null===t)return null;if(t=t.zs(t.wc.da,!1),null===t)return null;for(;null!==t&&!t.canSelect();)t=t.Ra;return null!==t&&(t.canMove()||t.canCopy())?t:null},Ni.prototype.standardMouseSelect=function(){var t=this.g;if(null!==t&&t.of){var i=t.zs(t.wc.da,!1);if(null!==i){for(;null!==i&&!i.canSelect();)i=i.Ra;this.rs=i,this.rs.Za||(t.za("ChangingSelection"),i=t.N,(Ul.Em?i.Ys:i.control)||i.shift||Cn(t),this.rs.Za=!0,t.za("ChangedSelection"))}}},Ni.prototype.doActivate=function(){var t=this.g;if(null!==t){this.standardMouseSelect();var i=this.rs;null!==i&&(i.canMove()||i.canCopy())&&(this.na=!0,this.bo.set(t.position),Di(this,t.selection),this.Yi.length=0,this.cc=this.computeEffectiveCollection(t.selection),t.tt=!0,Bi(this,this.cc),this.Wb("Drag"),this.Tj=t.wc.da,t.Ge=!0,t.Av&&(this.fw=!0,this.Rp=!1,nf=this,rf=this.g,this.doSimulatedDragOut()))}},Ni.prototype.computeEffectiveCollection=function(t){var i=null!==this.g&&this.g.Va===this,e=new g(es);if(null===t)return e;for(var n=t.i;n.next();)Li(this,e,n.value,i);if(null!==this.Sc&&this.Gi)return e;for(n=t.i;n.next();)t=n.value,t instanceof Bs&&(i=t.W,null===i||e.contains(i)?(i=t.ca,null===i||e.contains(i)||e.remove(t)):e.remove(t));return e},Ni.prototype.doDeactivate=function(){this.na=!1;var t=this.g;if(null!==t&&ur(t),Fi(this),qi(this,this.cc),this.cc=null,this.Rp=this.fw=!1,0<ef.count){for(var i=ef.length,e=0;i>e;e++){var n=ef.ja(e);Ri(n),Ii(n),Fi(n),null!==n.g&&ur(n.g)}ef.clear()}Ri(this),this.bo.m(0/0,0/0),nf=rf=null,Ii(this),t.Ge=!1,t.ac="",t.tt=!1,this.Uj()},Ni.prototype.doCancel=function(){Ii(this),Hi(this);var t=this.g;null!==t&&this.bo.J()&&(t.position=this.bo),this.stopTool()},Ni.prototype.doKeyDown=function(){var t=this.g;null!==t&&(t=t.N,null!==t&&this.na&&("Esc"===t.key?this.doCancel():this.doMouseMove()))},Ni.prototype.doKeyUp=function(){var t=this.g;null!==t&&null!==t.N&&this.na&&this.doMouseMove()},Ni.prototype.moveParts=function(t,i,e){if(null!==t&&(Ul.C(t,g,Ni,"moveParts:parts"),0!==t.count)){var n=Ul.K(),r=Ul.K();r.assign(i),isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0);var o=this.jv;o||Bi(this,t);for(var s=new l(_i),a=new l(y),h=t.i;h.next();){var u=h.key;if(u.Fd()){var f=Vi(this,u,t);if(null!==f)s.add(new _i(u,h.value,f));else if(!e||u.canMove()){f=h.value.point,n.assign(f);var c=Ul.K(),p=this.computeMove(u,n.add(r),t,c);u.location=p,Ul.v(c),h.value.IE=c.vt(f)}}else h.key instanceof Bs&&a.add(h.Cb)}for(e=s.i;e.next();)s=e.value,f=s.info.point,n.assign(f),s.Cc.location=n.add(s.LG.IE);for(f=Ul.K(),e=Ul.K(),a=a.i;a.next();)c=a.value,s=c.key,s instanceof Bs&&(s.ip?(h=s.W,u=s.ca,null!==this.Sc&&this.Gi?(c=c.value.point,t.add(s,Ai(r)),h=i.x-c.x,u=i.y-c.y,s.ll(h,u)):(null!==h&&(f.assign(h.location),p=t.ta(h),null!==p&&f.vt(p.point)),null!==u&&(e.assign(u.location),p=t.ta(u),null!==p&&e.vt(p.point)),null!==h&&null!==u?f.De(e)?(c=c.value.point,h=n,h.assign(f),h.vt(c),t.add(s,Ai(f)),s.ll(h.x,h.y)):(s.ip=!1,s.Vb()):(c=c.value.point,t.add(s,Ai(null!==h?f:null!==u?e:i)),h=r.x-c.x,u=r.y-c.y,s.ll(h,u)))):(null===s.W||null===s.ca)&&(c=c.value.point,t.add(s,Ai(i)),h=r.x-c.x,u=r.y-c.y,s.ll(h,u)));Ul.v(n),Ul.v(r),Ul.v(f),Ul.v(e),o||qi(this,t)}},Ni.prototype.computeMove=function(t,i,e,n){if(void 0===n&&(n=new m),n.assign(i),null===t)return n;void 0===e&&(e=null);var r=i;if(this.gw&&(this.$G||null===e||this.g.N.up)&&(r=Ul.K(),e=r,e.assign(i),null!==t)){var o=this.g;if(null!==o){var s=o.Gs,a=this.DD,o=a.width,a=a.height,h=this.KG,l=h.x,h=h.y,u=this.JG;if(null!==s){var f=s.aw;isNaN(o)&&(o=f.width),isNaN(a)&&(a=f.height),s=s.CD,isNaN(l)&&(l=s.x),isNaN(h)&&(h=s.y)}s=Ul.fc(0,0),s.rt(0,0,o,a,u),Au.xs(i.x,i.y,l+s.x,h+s.y,o,a,e),Ul.v(s)}}return e=null!==t.mD?t.mD(t,i,r):r,a=t.AH,o=a.x,isNaN(o)&&(o=t.location.x),a=a.y,isNaN(a)&&(a=t.location.y),s=t.vH,l=s.x,isNaN(l)&&(l=t.location.x),s=s.y,isNaN(s)&&(s=t.location.y),n.m(Math.max(o,Math.min(e.x,l)),Math.max(a,Math.min(e.y,s))),r!==i&&Ul.v(r),n},Ni.prototype.doDragOver=function(){},Ni.prototype.doDropOnto=function(){},Ni.prototype.doMouseMove=function(){if(this.na){var t=this.g;if(null!==t&&null!==this.rs&&null!==this.cc){var i=!1,e=!1;this.mayCopy()?(i=!0,t.ac="copy",Ei(this,!1),Bi(this,this.oc),Gi(this,this.oc,!1),qi(this,this.oc)):this.mayMove()?(e=!0,t.ac="default",Ii(this),Gi(this,this.cc,!0)):this.mayDragOut()?(t.ac="no-drop",Ei(this,!1),Gi(this,this.oc,!1)):Ii(this),Ui(this,t.N.da,e,i)}}},Ni.prototype.doMouseUp=function(){if(this.na){var t=this.g;if(null!==t){var i=!1,e=this.mayCopy();if(e&&null!==this.oc?(Ii(this),Ei(this,!0),Bi(this,this.oc),Gi(this,this.oc,!1),qi(this,this.oc),null!==this.oc&&t.CE(this.oc.Ni())):(i=!0,Ii(this),this.mayMove()&&(Gi(this,this.cc,!0),this.ev=!1,Ui(this,t.N.da,!0,!1),this.ev=!0)),this.Rp=!0,Zi(this,t.N.da),this.na){if(this.oc=null,i&&null!==this.cc)for(i=this.cc.i;i.next();){var n=i.key;n instanceof Ms&&(n=n.Ra,null===n||null===n.placeholder||this.cc.contains(n)||n.aD&&n.R())}t.pc(),qi(this,this.cc),this.zf=e?"Copy":"Move",t.za(e?"SelectionCopied":"SelectionMoved",t.selection)}this.stopTool()}}},Ni.prototype.mayCopy=function(){if(!this.MD)return!1;var t=this.g;if(null===t||t.nb||t.uf||!t.lo||!t.Ij||(Ul.Em?!t.N.alt:!t.N.control))return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.Fd()&&i.canCopy())return!0}return null!==this.Sc&&this.Gi&&this.Sc.canCopy()?!0:!1},Ni.prototype.mayDragOut=function(){if(!this.MD)return!1;var t=this.g;if(null===t||!t.Av||!t.Ij||t.Nk)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.Fd()&&i.canCopy())return!0}return null!==this.Sc&&this.Gi&&this.Sc.canCopy()?!0:!1},Ni.prototype.mayMove=function(){var t=this.g;if(null===t||t.nb||!t.Nk)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.Fd()&&i.canMove())return!0}return null!==this.Sc&&this.Gi&&this.Sc.canMove()?!0:!1};var ef=new l(Ni),nf=null,rf=null;Ni.prototype.mayDragIn=function(){var t=this.g;if(null===t||!t.MC||t.nb||t.uf||!t.lo)return!1;var i=nf;return null===i||i.g.ga.Sk!==t.ga.Sk?!1:!0},Ni.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.g;t.Lb.Mi(),fn(t),t=nf,null!==t&&(t.g.ac="copy")}},Ni.prototype.doSimulatedDragLeave=function(){var t=nf;null!==t&&t.doSimulatedDragOut(),this.doCancel()},Ni.prototype.doSimulatedDragOver=function(){var t=this.g;if(null!==t){var i=nf;null!==i&&null!==i.cc&&this.mayDragIn()&&(t.ac="copy",Qi(this,i.cc.Ni(),!1),Gi(this,this.oc,!1),Ui(this,t.N.da,!1,!0))}},Ni.prototype.doSimulatedDrop=function(){var t=this.g;if(null!==t){var i=nf;null!==i&&(i.Rp=!0,Ii(this),this.mayDragIn()&&(this.Wb("Drop"),Qi(this,i.cc.Ni(),!0),Gi(this,this.oc,!1),null!==this.oc&&t.CE(this.oc.Ni()),this.zf="ExternalCopy",Zi(this,t.N.da),t.pc(),this.oc=null,t.focus(),t.za("ExternalObjectsDropped",t.selection),this.Uj()))}},Ni.prototype.doSimulatedDragOut=function(){var t=this.g;null!==t&&(t.ac=this.mayCopy()||this.mayMove()?"":"no-drop")},Ul.fa("DraggingInfo",$i),Ul.Ga(te,Ci),Ul.fa("LinkingBaseTool",te),te.prototype.doStop=function(){var t=this.g;null!==t&&ur(t),this.fh=this.eh=this.dh=this.bh=this.qc=null,this.Nw.clear(),this.Rf=null},Ul.defineProperty(te,{fE:"portGravity"},function(){return this.XB},function(t){Ul.j(t,"number",te,"portGravity"),t>=0&&(this.XB=t)}),Ul.defineProperty(te,{Io:"isUnconnectedLinkValid"},function(){return this.xB},function(t){Ul.j(t,"boolean",te,"isUnconnectedLinkValid"),this.xB=t}),Ul.defineProperty(te,{Dg:"temporaryLink"},function(){return this.tC},function(t){Ul.C(t,Bs,te,"temporaryLink"),this.tC=t}),Ul.defineProperty(te,{qe:"temporaryFromNode"},function(){return this.rC},function(t){Ul.C(t,Ms,te,"temporaryFromNode"),this.rC=t}),Ul.defineProperty(te,{Om:"temporaryFromPort"},function(){return this.sC},function(t){Ul.C(t,Mr,te,"temporaryFromPort"),this.sC=t}),Ul.defineProperty(te,{re:"temporaryToNode"},function(){return this.uC},function(t){Ul.C(t,Ms,te,"temporaryToNode"),this.uC=t}),Ul.defineProperty(te,{Pm:"temporaryToPort"},function(){return this.vC},function(t){Ul.C(t,Mr,te,"temporaryToPort"),this.vC=t}),Ul.defineProperty(te,{qc:"originalLink"},function(){return this.PB},function(t){null!==t&&Ul.C(t,Bs,te,"originalLink"),this.PB=t}),Ul.defineProperty(te,{bh:"originalFromNode"},function(){return this.NB},function(t){null!==t&&Ul.C(t,Ms,te,"originalFromNode"),this.NB=t}),Ul.defineProperty(te,{dh:"originalFromPort"},function(){return this.OB},function(t){null!==t&&Ul.C(t,Mr,te,"originalFromPort"),this.OB=t}),Ul.defineProperty(te,{eh:"originalToNode"},function(){return this.SB},function(t){null!==t&&Ul.C(t,Ms,te,"originalToNode"),this.SB=t}),Ul.defineProperty(te,{fh:"originalToPort"},function(){return this.TB},function(t){null!==t&&Ul.C(t,Mr,te,"originalToPort"),this.TB=t}),Ul.defineProperty(te,{$d:"isForwards"},function(){return this.sB},function(t){Ul.j(t,"boolean",te,"isForwards"),this.sB=t}),Ul.u(te,{Nw:"validPortsCache"},function(){return this.EF}),Ul.defineProperty(te,{Rf:"targetPort"},function(){return this.nC},function(t){null!==t&&Ul.C(t,Mr,te,"targetPort"),this.nC=t}),te.prototype.copyPortProperties=function(t,i,e,n,r){if(null!==t&&null!==i&&null!==e&&null!==n){n.xa=i.ba.size,r?(n.xb=i.xb,n.vl=i.vl):(n.vb=i.vb,n.Yk=i.Yk),e.Ze=ou;var o=Ul.K();e.location=i.lb(ou,o),Ul.v(o),n.angle=i.Zk(),null!==this.ww&&this.ww(t,i,e,n,r)}},te.prototype.setNoTargetPortProperties=function(t,i,e){null!==i&&(i.xa=Au.Tw,i.vb=_l,i.xb=_l),null!==t&&(t.location=this.g.N.da),null!==this.ww&&this.ww(null,null,t,i,e)},te.prototype.doMouseDown=function(){this.na&&this.doMouseMove()},te.prototype.doMouseMove=function(){if(this.na){var t=this.g;if(null!==t){if(this.Rf=this.findTargetPort(this.$d),null!==this.Rf){var i=this.Rf.T;if(i instanceof Ms)return void(this.$d?this.copyPortProperties(i,this.Rf,this.re,this.Pm,!0):this.copyPortProperties(i,this.Rf,this.qe,this.Om,!1))}this.$d?this.setNoTargetPortProperties(this.re,this.Pm,!0):this.setNoTargetPortProperties(this.qe,this.Om,!1),(t.Re||t.Se)&&hr(t,t.N.ff)}}},te.prototype.findValidLinkablePort=function(t,i){if(null===t)return null;var e=t.T;if(!(e instanceof Ms))return null;for(;null!==t;){var n=i?t.OE:t.vD;if(!0===n&&(null!==t.Jd||t instanceof Ms)&&(i?this.isValidTo(e,t):this.isValidFrom(e,t)))return t;if(!1===n)break;t=t.S}return null},te.prototype.findTargetPort=function(t){var i=this.g,e=i.N.da,n=this.fE;0>=n&&(n=.1);for(var r=this,o=i.ym(e,n,function(i){return r.findValidLinkablePort(i,t)},null,!0),n=1/0,i=null,o=o.i;o.next();){var s=o.value,a=s.T;if(a instanceof Ms){var h=s.lb(ou,Ul.K()),l=e.x-h.x,u=e.y-h.y;Ul.v(h),h=l*l+u*u,n>h&&(l=this.Nw.ta(s),null!==l?l&&(i=s,n=h):t&&this.isValidLink(this.bh,this.dh,a,s)||!t&&this.isValidLink(a,s,this.eh,this.fh)?(this.Nw.add(s,!0),i=s,n=h):this.Nw.add(s,!1))
}}return null!==i&&(e=i.T,e instanceof Ms&&(null===e.layer||e.layer.gs))?i:null},te.prototype.isValidFrom=function(t,i){if(null===t||null===i)return this.Io;if(this.g.Va===this&&(null!==t.layer&&!t.layer.gs||!0!==i.vD))return!1;var e=i.DG;if(1/0>e){if(null!==this.qc&&t===this.bh&&i===this.dh)return!0;var n=i.Jd;if(null===n&&(n=""),t.Wv(n).count>=e)return!1}return!0},te.prototype.isValidTo=function(t,i){if(null===t||null===i)return this.Io;if(this.g.Va===this&&(null!==t.layer&&!t.layer.gs||!0!==i.OE))return!1;var e=i.yI;if(1/0>e){if(null!==this.qc&&t===this.eh&&i===this.fh)return!0;var n=i.Jd;if(null===n&&(n=""),t.og(n).count>=e)return!1}return!0},te.prototype.isInSameNode=function(t,i){if(null===t||null===i)return!1;if(t===i)return!0;var e=t.T,n=i.T;return null!==e&&e===n},te.prototype.isLinked=function(t,i){if(null===t||null===i)return!1;var e=t.T;if(!(e instanceof Ms))return!1;var n=t.Jd;null===n&&(n="");var r=i.T;if(!(r instanceof Ms))return!1;var o=i.Jd;for(null===o&&(o=""),r=r.og(o);r.next();)if(o=r.value,o.W===e&&o.pg===n)return!0;return!1},te.prototype.isValidLink=function(t,i,e,n){if(!this.isValidFrom(t,i)||!this.isValidTo(e,n)||!(null===i||null===n||(i.CG&&n.xI||!this.isInSameNode(i,n))&&(i.BG&&n.wI||!this.isLinked(i,n)))||null!==this.qc&&(null!==t&&this.isLabelDependentOnLink(t,this.qc)||null!==e&&this.isLabelDependentOnLink(e,this.qc))||null!==t&&null!==e&&(null===t.data&&null!==e.data||null!==t.data&&null===e.data)||!this.isValidCycle(t,e,this.qc))return!1;if(null!==t){var r=t.pw;if(null!==r&&!r(t,i,e,n,this.qc))return!1}return null===e||(r=e.pw,null===r||r(t,i,e,n,this.qc))?(r=this.pw,null!==r?r(t,i,e,n,this.qc):!0):!1},te.prototype.isLabelDependentOnLink=function(t,i){if(null===t)return!1;var e=t.ce;if(null===e)return!1;if(e===i)return!0;var n=new f(Ms);return n.add(t),ie(this,e,i,n)},te.prototype.isValidCycle=function(t,i,e){if(void 0===e&&(e=null),null===t||null===i)return this.Io;var n=this.g.DI;if(n!==Lf){if(n===qf){if(null!==e&&!e.Bc)return!0;for(n=i.oe;n.next();){var r=n.value;if(r!==e&&r.Bc&&r.ca===i)return!1}return!ee(this,t,i,e,!0)}if(n===Of){if(null!==e&&!e.Bc)return!0;for(n=t.oe;n.next();)if(r=n.value,r!==e&&r.Bc&&r.W===t)return!1;return!ee(this,t,i,e,!0)}if(n===Ff)return t===i?t=!0:(n=new f(Ms),n.add(i),t=ne(this,n,t,i,e)),!t;if(n===zf)return!ee(this,t,i,e,!1);if(n===Bf)return t===i?t=!0:(n=new f(Ms),n.add(i),t=re(this,n,t,i,e)),!t}return!0},Ul.defineProperty(te,{pw:"linkValidation"},function(){return this.xk},function(t){null!==t&&Ul.j(t,"function",te,"linkValidation"),this.xk=t}),Ul.defineProperty(te,{ww:"portTargeted"},function(){return this.YB},function(t){null!==t&&Ul.j(t,"function",te,"portTargeted"),this.YB=t}),Ul.Ga(oe,te),Ul.fa("LinkingTool",oe);var of;oe.Either=of=Ul.s(oe,"Either",0);var sf;oe.ForwardsOnly=sf=Ul.s(oe,"ForwardsOnly",0);var af;oe.BackwardsOnly=af=Ul.s(oe,"BackwardsOnly",0),Ul.defineProperty(oe,{OF:"archetypeLinkData"},function(){return this.ex},function(t){null!==t&&Ul.C(t,Object,oe,"archetypeLinkData"),t instanceof Mr&&Ul.C(t,Bs,oe,"archetypeLinkData"),this.ex=t}),Ul.defineProperty(oe,{PC:"archetypeLabelNodeData"},function(){return this.bx},function(t){null!==t&&Ul.C(t,Object,oe,"archetypeLabelNodeData"),t instanceof Mr&&Ul.C(t,Ms,oe,"archetypeLabelNodeData"),this.bx=t}),Ul.defineProperty(oe,{direction:"direction"},function(){return this.la},function(t){Ul.rb(t,oe,oe,"direction"),this.la=t}),Ul.defineProperty(oe,{ME:"startObject"},function(){return this.jC},function(t){null!==t&&Ul.C(t,Mr,oe,"startObject"),this.jC=t}),Ul.u(oe,{Kw:"startPort"},function(){return this.yy}),oe.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.nb||t.uf||!t.gs)return!1;var i=t.ga;return(i instanceof yi||i instanceof gi)&&t.N.left&&(t.Va===this||this.isBeyondDragSize())?null!==this.findLinkablePort():!1},oe.prototype.findLinkablePort=function(){var t=this.g;if(null===t)return null;var i=this.ME;if(null===i&&(i=t.ke(t.wc.da,null,null)),null===i||!(i.T instanceof Ms))return null;if(t=this.direction,t===of||t===sf){var e=this.findValidLinkablePort(i,!1);if(null!==e)return this.$d=!0,e}return t!==of&&t!==af||(e=this.findValidLinkablePort(i,!0),null===e)?null:(this.$d=!1,e)},oe.prototype.doActivate=function(){var t=this.g;if(null!==t&&(null===this.Kw&&(this.yy=this.findLinkablePort()),null!==this.Kw)){if(this.Wb(this.name),t.Ge=!0,t.ac="pointer",this.$d){this.dh=this.Kw;var i=this.dh.T;i instanceof Ms&&(this.bh=i),this.copyPortProperties(this.bh,this.dh,this.qe,this.Om,!1)}else this.fh=this.Kw,i=this.fh.T,i instanceof Ms&&(this.eh=i),this.copyPortProperties(this.eh,this.fh,this.re,this.Pm,!0);t.add(this.qe),t.add(this.re),null!==this.Dg&&(null!==this.qe&&(this.Dg.W=this.qe),null!==this.re&&(this.Dg.ca=this.re),this.Dg.Vb(),t.add(this.Dg)),this.na=!0}},oe.prototype.doDeactivate=function(){this.na=!1;var t=this.g;null!==t&&(t.remove(this.Dg),t.remove(this.qe),t.remove(this.re),t.Ge=!1,t.ac="",this.Uj())},oe.prototype.doStop=function(){te.prototype.doStop.call(this),this.ME=this.yy=null},oe.prototype.doMouseUp=function(){if(this.na){var t=this.g;if(null===t)return;var i=this.zf=null,e=null,n=null,r=null,o=this.Rf=this.findTargetPort(this.$d);if(null!==o){var s=o.T;s instanceof Ms&&(this.$d?(null!==this.bh&&(i=this.bh,e=this.dh),n=s,r=o):(i=s,e=o,null!==this.eh&&(n=this.eh,r=this.fh)))}else this.$d?null!==this.bh&&this.Io&&(i=this.bh,e=this.dh):null!==this.eh&&this.Io&&(n=this.eh,r=this.fh);(null!==i||null!==n)&&(i=this.insertLink(i,e,n,r),null!==i?(null===o&&(this.$d?i.nn=t.N.da.copy():i.jn=t.N.da.copy()),t.of&&t.select(i),this.zf=this.name,t.za("LinkDrawn",i)):t.ga.XC())}this.stopTool()},oe.prototype.insertLink=function(t,i,e,n){var r=this.g;if(null===r)return null;var o=r.ga;if(o instanceof gi){var s=t;if(i=e,r.qd||(s=e,i=t),null!==s&&null!==i)return o.ih(i.data,o.wb(s.data)),i.As()}else if(o instanceof yi)if(s="",null!==t&&(null===i&&(i=t),s=i.Jd,null===s&&(s="")),i="",null!==e&&(null===n&&(n=e),i=n.Jd,null===i&&(i="")),n=this.OF,n instanceof Bs){if(go(n),o=n.copy(),null!==o)return o.W=t,o.pg=s,o.ca=e,o.lh=i,r.add(o),t=this.PC,t instanceof Ms&&(go(t),t=t.copy(),null!==t&&(t.ce=o,r.add(t))),o}else if(null!==n&&(n=o.eD(n),Ul.Sa(n)))return null!==t&&o.Ew(n,o.wb(t.data)),o.aA(n,s),null!==e&&o.Gw(n,o.wb(e.data)),o.eA(n,i),o.xv(n),t=this.PC,null===t||t instanceof Ms||(t=o.copyNodeData(t),Ul.Sa(t)&&(o.km(t),t=o.wb(t),void 0!==t&&o.Ly(n,t))),o=r.ng(n);return null},Ul.Ga(se,te),Ul.fa("RelinkingTool",se),se.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Bs){var i="RelinkFrom",e=null;if(t.Za&&!this.g.nb){var n=t.nt;null!==n&&t.canRelinkFrom()&&t.ba.J()&&t.Ea()&&n.ba.J()&&n.kl()&&(e=t.xo(i),null===e&&(e=this.makeAdornment(n,!1),null!==e&&(e.Kc=i),t.Kk(i,e)))}null===e&&t.ol(i),i="RelinkTo",e=null,t.Za&&!this.g.nb&&(n=t.nt,null!==n&&t.canRelinkTo()&&t.ba.J()&&t.Ea()&&n.ba.J()&&n.kl()&&(e=t.xo(i),null===e&&(e=this.makeAdornment(n,!0),null!==e&&(e.Kc=i),t.Kk(i,e)))),null===e&&t.ol(i)}},se.prototype.makeAdornment=function(t,i){var e=new ks;e.type=dc;var n=i?this.vI:this.AG;return null!==n&&e.add(n.copy()),e.vc=t,e},Ul.defineProperty(se,{AG:"fromHandleArchetype"},function(){return this.gB},function(t){null!==t&&Ul.C(t,Mr,se,"fromHandleArchetype"),this.gB=t}),Ul.defineProperty(se,{vI:"toHandleArchetype"},function(){return this.wC},function(t){null!==t&&Ul.C(t,Mr,se,"toHandleArchetype"),this.wC=t}),Ul.u(se,{handle:"handle"},function(){return this.Yb}),se.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.nb||t.uf||!t.mm)return!1;var i=t.ga;return(i instanceof yi||i instanceof gi)&&t.N.left?(i=this.findToolHandleAt(t.wc.da,"RelinkFrom"),null===i&&(i=this.findToolHandleAt(t.wc.da,"RelinkTo")),null!==i):!1},se.prototype.doActivate=function(){var t=this.g;if(null!==t){if(null===this.qc){var i=this.findToolHandleAt(t.wc.da,"RelinkFrom");if(null===i&&(i=this.findToolHandleAt(t.wc.da,"RelinkTo")),null===i)return;var e=i.T;if(!(e instanceof ks&&e.Lh instanceof Bs))return;this.Yb=i,this.$d=null===e||"RelinkTo"===e.Kc,this.qc=e.Lh}this.Wb(this.name),t.Ge=!0,t.ac="pointer",this.dh=this.qc.od,this.bh=this.qc.W,this.fh=this.qc.fe,this.eh=this.qc.ca,this.QB.set(this.qc.ba),null!==this.qc&&0<this.qc.ka&&(null===this.qc.W&&(null!==this.Om&&(this.Om.xa=Au.op),null!==this.qe&&(this.qe.location=this.qc.l(0))),null===this.qc.ca&&(null!==this.Pm&&(this.Pm.xa=Au.op),null!==this.re&&(this.re.location=this.qc.l(this.qc.ka-1)))),this.copyPortProperties(this.bh,this.dh,this.qe,this.Om,!1),this.copyPortProperties(this.eh,this.fh,this.re,this.Pm,!0),t.add(this.qe),t.add(this.re),null!==this.Dg&&(null!==this.qe&&(this.Dg.W=this.qe),null!==this.re&&(this.Dg.ca=this.re),this.copyLinkProperties(this.qc,this.Dg),this.Dg.Vb(),t.add(this.Dg)),this.na=!0}},se.prototype.copyLinkProperties=function(t,i){if(null!==t&&null!==i){i.es=t.es,i.Yy=t.Yy;var e=t.Ve;(e===_c||e===$c)&&(e=Zc),i.Ve=e,i.Ov=t.Ov,i.zw=t.zw,i.gp=t.gp,i.vb=t.vb,i.Yk=t.Yk,i.Es=t.Es,i.Fs=t.Fs,i.xb=t.xb,i.vl=t.vl,i.wt=t.wt,i.yt=t.yt}},se.prototype.doDeactivate=function(){this.na=!1;var t=this.g;null!==t&&(t.remove(this.Dg),t.remove(this.qe),t.remove(this.re),t.Ge=!1,t.ac="",this.Uj())},se.prototype.doStop=function(){te.prototype.doStop.call(this),this.Yb=null},se.prototype.doMouseUp=function(){if(this.na){var t=this.g;if(null===t)return;this.zf=null;var i=this.bh,e=this.dh,n=this.eh,r=this.fh,o=this.qc;if(this.Rf=this.findTargetPort(this.$d),null!==this.Rf){var s=this.Rf.T;s instanceof Ms&&(this.$d?(n=s,r=this.Rf):(i=s,e=this.Rf))}else this.Io?this.$d?r=n=null:e=i=null:o=null;null!==o&&(this.reconnectLink(o,this.$d?n:i,this.$d?r:e,this.$d),null===this.Rf&&(this.$d?o.nn=t.N.da.copy():o.jn=t.N.da.copy(),o.Vb()),t.of&&(o.Za=!0),this.zf=this.name,t.za("LinkRelinked",o,this.$d?this.fh:this.dh)),ea(this.qc,this.QB)}this.stopTool()},se.prototype.reconnectLink=function(t,i,e,n){return null===this.g?!1:(e=null!==e&&null!==e.Jd?e.Jd:"",n?(t.ca=i,t.lh=e):(t.W=i,t.pg=e),!0)},Ul.Ga(he,Ci),Ul.fa("LinkReshapingTool",he);var hf;he.None=hf=Ul.s(he,"None",0);var lf;he.Horizontal=lf=Ul.s(he,"Horizontal",1);var uf;he.Vertical=uf=Ul.s(he,"Vertical",2);var ff;he.All=ff=Ul.s(he,"All",3),he.prototype.getReshapingBehavior=he.prototype.AD=function(t){return t&&t.$B?t.$B:hf},he.prototype.setReshapingBehavior=he.prototype.qt=function(t,i){Ul.C(t,Mr,he,"setReshapingBehavior:obj"),Ul.rb(i,he,he,"setReshapingBehavior:behavior"),t.$B=i},he.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Bs){if(t.Za&&!this.g.nb){var i=t.path;if(null!==i&&t.canReshape()&&t.ba.J()&&t.Ea()&&i.ba.J()&&i.kl()){var e=t.xo(this.name);if((null===e||e.xF!==t.ka||e.GF!==t.it)&&(e=this.makeAdornment(i),null!==e&&(e.xF=t.ka,e.GF=t.it,t.Kk(this.name,e))),null!==e)return void(e.location=t.position)}}t.ol(this.name)}},he.prototype.makeAdornment=function(t){var i=t.T,e=i.ka,n=i.dc,r=null;if(null!==i.points&&e>1){r=new ks,r.type=dc;var e=i.Bs,o=i.lw,s=n?1:0;if(i.it&&i.Ve!==Qc)for(var a=e+s;o-s>a;a++){var h=this.makeResegmentHandle(t,a);null!==h&&(h.Pf=a,h.Bw=.5,r.add(h))}for(a=e+1;o>a;a++)if(h=this.makeHandle(t,a),null!==h){if(h.Pf=a,a!==e)if(a===e+1&&n){var s=i.l(e),l=i.l(e+1);Au.D(s.x,l.x)&&Au.D(s.y,l.y)&&(l=i.l(e-1)),Au.D(s.x,l.x)?(this.qt(h,uf),h.cursor="n-resize"):Au.D(s.y,l.y)&&(this.qt(h,lf),h.cursor="w-resize")}else a===o-1&&n?(s=i.l(o-1),l=i.l(o),Au.D(s.x,l.x)&&Au.D(s.y,l.y)&&(s=i.l(o+1)),Au.D(s.x,l.x)?(this.qt(h,uf),h.cursor="n-resize"):Au.D(s.y,l.y)&&(this.qt(h,lf),h.cursor="w-resize")):a!==o&&(this.qt(h,ff),h.cursor="move");r.add(h)}r.Kc=this.name,r.vc=t}return r},he.prototype.makeHandle=function(){var t=this.Hs;return null===t?null:t.copy()},Ul.defineProperty(he,{Hs:"handleArchetype"},function(){return this.pk},function(t){null!==t&&Ul.C(t,Mr,he,"handleArchetype"),this.pk=t}),he.prototype.makeResegmentHandle=function(){var t=this.zH;return null===t?null:t.copy()},Ul.defineProperty(he,{zH:"midHandleArchetype"},function(){return this.DB},function(t){null!==t&&Ul.C(t,Mr,he,"midHandleArchetype"),this.DB=t}),Ul.u(he,{handle:"handle"},function(){return this.Yb}),Ul.u(he,{fs:"adornedLink"},function(){return this.$w}),he.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return null!==t&&!t.nb&&t.Cv&&t.N.left?null!==this.findToolHandleAt(t.wc.da,this.name):!1},he.prototype.doActivate=function(){var t=this.g;if(null!==t&&(this.Yb=this.findToolHandleAt(t.wc.da,this.name),null!==this.Yb)){var i=this.Yb.T.Lh;if(i instanceof Bs){if(this.$w=i,t.Ge=!0,this.Wb(this.name),i.it&&.5===this.Yb.Bw){var e=i.points.copy(),n=this.Yb.lb(ou);e.Yd(this.Yb.Pf+1,n),i.dc&&e.Yd(this.Yb.Pf+1,n),i.points=e,i.Zd(),this.Yb=this.findToolHandleAt(t.wc.da,this.name)}this.RB=i.l(this.Yb.Pf),this.my=i.points.copy(),this.na=!0}}},he.prototype.doDeactivate=function(){this.Uj(),this.$w=this.Yb=null;var t=this.g;null!==t&&(t.Ge=!1),this.na=!1},he.prototype.doCancel=function(){var t=this.fs;null!==t&&(t.points=this.my),this.stopTool()},he.prototype.doMouseMove=function(){var t=this.g;this.na&&null!==t&&(t=this.computeReshape(t.N.da),this.reshape(t))},he.prototype.doMouseUp=function(){var t=this.g;if(this.na&&null!==t){var i=this.computeReshape(t.N.da);if(this.reshape(i),i=this.fs,null!==i&&i.it){var e=this.handle.Pf,n=i.l(e-1),r=i.l(e),o=i.l(e+1);if(i.dc){if(e>i.Bs+1&&e<i.lw-1){var s=i.l(e-2);if(Math.abs(n.x-r.x)<this.gh&&Math.abs(n.y-r.y)<this.gh&&(le(this,s,n,r,o,!0)||le(this,s,n,r,o,!1))){var a=i.points.copy();le(this,s,n,r,o,!0)?(a.Bg(e-2,new m(s.x,(o.y+s.y)/2)),a.Bg(e+1,new m(o.x,(o.y+s.y)/2))):(a.Bg(e-2,new m((o.x+s.x)/2,s.y)),a.Bg(e+1,new m((o.x+s.x)/2,o.y))),a.jd(e),a.jd(e-1),i.points=a,i.Zd()}else s=i.l(e+2),Math.abs(r.x-o.x)<this.gh&&Math.abs(r.y-o.y)<this.gh&&(le(this,n,r,o,s,!0)||le(this,n,r,o,s,!1))&&(a=i.points.copy(),le(this,n,r,o,s,!0)?(a.Bg(e-1,new m(n.x,(n.y+s.y)/2)),a.Bg(e+2,new m(s.x,(n.y+s.y)/2))):(a.Bg(e-1,new m((n.x+s.x)/2,n.y)),a.Bg(e+2,new m((n.x+s.x)/2,s.y))),a.jd(e+1),a.jd(e),i.points=a,i.Zd())}}else s=Ul.K(),Au.Hm(n.x,n.y,o.x,o.y,r.x,r.y,s)&&s.Lj(r)<this.gh*this.gh&&(a=i.points.copy(),a.jd(e),i.points=a,i.Zd()),Ul.v(s)}t.pc(),this.zf=this.name,t.za("LinkReshaped",this.fs)}this.stopTool()},Ul.defineProperty(he,{gh:"resegmentingDistance"},function(){return this.ZB},function(t){Ul.j(t,"number",he,"resegmentingDistance"),this.ZB=t}),he.prototype.reshape=function(t){var i=this.fs;i.rl();var e=this.handle.Pf,n=this.AD(this.handle);if(i.dc)if(e===i.Bs+1)e=i.Bs+1,n===uf?(i.V(e,i.l(e-1).x,t.y),i.V(e+1,i.l(e+2).x,t.y)):n===lf&&(i.V(e,t.x,i.l(e-1).y),i.V(e+1,t.x,i.l(e+2).y));else if(e===i.lw-1)e=i.lw-1,n===uf?(i.V(e-1,i.l(e-2).x,t.y),i.V(e,i.l(e+1).x,t.y)):n===lf&&(i.V(e-1,t.x,i.l(e-2).y),i.V(e,t.x,i.l(e+1).y));else{var n=e,r=i.l(n),o=i.l(n-1),s=i.l(n+1);Au.D(o.x,r.x)&&Au.D(r.y,s.y)?(Au.D(o.x,i.l(n-2).x)&&!Au.D(o.y,i.l(n-2).y)?(i.w(n,t.x,o.y),e++,n++):i.V(n-1,t.x,o.y),Au.D(s.y,i.l(n+2).y)&&!Au.D(s.x,i.l(n+2).x)?i.w(n+1,s.x,t.y):i.V(n+1,s.x,t.y)):Au.D(o.y,r.y)&&Au.D(r.x,s.x)?(Au.D(o.y,i.l(n-2).y)&&!Au.D(o.x,i.l(n-2).x)?(i.w(n,o.x,t.y),e++,n++):i.V(n-1,o.x,t.y),Au.D(s.x,i.l(n+2).x)&&!Au.D(s.y,i.l(n+2).y)?i.w(n+1,t.x,s.y):i.V(n+1,t.x,s.y)):Au.D(o.x,r.x)&&Au.D(r.x,s.x)?(Au.D(o.x,i.l(n-2).x)&&!Au.D(o.y,i.l(n-2).y)?(i.w(n,t.x,o.y),e++,n++):i.V(n-1,t.x,o.y),Au.D(s.x,i.l(n+2).x)&&!Au.D(s.y,i.l(n+2).y)?i.w(n+1,t.x,s.y):i.V(n+1,t.x,s.y)):Au.D(o.y,r.y)&&Au.D(r.y,s.y)&&(Au.D(o.y,i.l(n-2).y)&&!Au.D(o.x,i.l(n-2).x)?(i.w(n,o.x,t.y),e++,n++):i.V(n-1,o.x,t.y),Au.D(s.y,i.l(n+2).y)&&!Au.D(s.x,i.l(n+2).x)?i.w(n+1,s.x,t.y):i.V(n+1,s.x,t.y)),i.V(e,t.x,t.y)}else i.V(e,t.x,t.y),1===e&&i.computeSpot(!0).ne()&&(r=i.W,o=i.od,null===r||r.Ea()||(r=r.findVisibleNode(),r!==i.W&&(o=r.Xk(""))),n=o.lb(ou,Ul.K()),r=i.getLinkPointFromPoint(r,o,n,t,!0,Ul.K()),i.V(0,r.x,r.y),Ul.v(n),Ul.v(r)),e===i.ka-2&&i.computeSpot(!1).ne()&&(e=i.ca,r=i.fe,null===e||e.Ea()||(e=e.findVisibleNode(),e!==i.ca&&(r=e.Xk(""))),n=r.lb(ou,Ul.K()),r=i.getLinkPointFromPoint(e,r,n,t,!1,Ul.K()),i.V(i.ka-1,r.x,r.y),Ul.v(n),Ul.v(r));i.Bi()},he.prototype.computeReshape=function(t){var i=this.fs,e=this.handle.Pf;switch(this.AD(this.handle)){case ff:return t;case uf:return i=i.l(e),new m(i.x,t.y);case lf:return i=i.l(e),new m(t.x,i.y);default:case hf:return i.l(e)}},Ul.u(he,{jK:"originalPoint"},function(){return this.RB}),Ul.u(he,{kK:"originalPoints"},function(){return this.my}),Ul.Ga(ue,Ci),Ul.fa("ResizingTool",ue),ue.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Bs)){if(t.Za&&!this.g.nb){var i=t.sE;if(null!==i&&t.canResize()&&t.ba.J()&&t.Ea()&&i.ba.J()&&i.kl()){var e=t.xo(this.name);if(null===e&&(e=this.makeAdornment(i)),null!==e){var n=i.Zk();e.angle=n;var r=i.lb(e.Ze,Ul.K()),o=i.Hi();if(e.location=r,Ul.v(r),r=e.placeholder,null!==r){var i=i.Ha,s=Ul.ul();s.m(i.width*o,i.height*o),r.xa=s,Ul.Oj(s)}return fe(this,e,n),void t.Kk(this.name,e)}}}t.ol(this.name)}},ue.prototype.makeAdornment=function(t){var i=null,i=t.T.rE;if(null===i){i=new ks,i.type=lc,i.Ze=ou;var e=new Ta;e.tg=!0,i.add(e),i.add(this.makeHandle(t,iu)),i.add(this.makeHandle(t,nu)),i.add(this.makeHandle(t,lu)),i.add(this.makeHandle(t,au)),i.add(this.makeHandle(t,uu)),i.add(this.makeHandle(t,cu)),i.add(this.makeHandle(t,pu)),i.add(this.makeHandle(t,fu))}else if(go(i),i=i.copy(),null===i)return null;return i.Kc=this.name,i.vc=t,i},ue.prototype.makeHandle=function(t,i){var e=this.Hs;return null===e?null:(e=e.copy(),e.alignment=i,e)},Ul.defineProperty(ue,{Hs:"handleArchetype"},function(){return this.pk},function(t){null!==t&&Ul.C(t,Mr,ue,"handleArchetype"),this.pk=t}),Ul.u(ue,{handle:"handle"},function(){return this.Yb}),Ul.defineProperty(ue,{vc:"adornedObject"},function(){return this.Gb},function(t){null!==t&&Ul.C(t,Mr,ue,"adornedObject"),this.Gb=t}),ue.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return null!==t&&!t.nb&&t.hs&&t.N.left&&null!==this.findToolHandleAt(t.wc.da,this.name)?!0:!1},ue.prototype.doActivate=function(){var t=this.g;null!==t&&(this.Yb=this.findToolHandleAt(t.wc.da,this.name),null!==this.Yb&&(this.Gb=this.Yb.T.vc,this.ly.set(this.Gb.T.location),this.Tu.set(this.Gb.xa),this.Hx=this.computeCellSize(),this.Jx=this.computeMinSize(),this.Ix=this.computeMaxSize(),t.Ge=!0,this.KB=t.Lb.isEnabled,t.Lb.isEnabled=!1,this.Wb(this.name),this.na=!0))},ue.prototype.doDeactivate=function(){var t=this.g;null!==t&&(this.Uj(),this.Gb=this.Yb=null,this.na=t.Ge=!1,t.Lb.isEnabled=this.KB)},ue.prototype.doCancel=function(){this.Gb.xa=this.Tu,this.Gb.T.location=this.ly,this.stopTool()},ue.prototype.doMouseMove=function(){var t=this.g;if(this.na&&null!==t){var i=this.Jx,e=this.Ix,n=this.Hx,r=this.Gb.zD(t.N.da,Ul.K()),o=Zf;this.Gb instanceof Po&&(o=jo(this.Gb)),i=this.computeResize(r,this.Yb.alignment,i,e,n,!(o===ic||o===ec||t.N.shift)),this.resize(i),t.bf(),Ul.v(r)}},ue.prototype.doMouseUp=function(){var t=this.g;if(this.na&&null!==t){var i=this.Jx,e=this.Ix,n=this.Hx,r=this.Gb.zD(t.N.da,Ul.K()),o=Zf;this.Gb instanceof Po&&(o=jo(this.Gb)),i=this.computeResize(r,this.Yb.alignment,i,e,n,!(o===ic||o===ec||t.N.shift)),this.resize(i),Ul.v(r),t.pc(),this.zf=this.name,t.za("PartResized",this.Gb,this.Tu)}this.stopTool()},ue.prototype.resize=function(t){if(null!==this.g){var i=this.vc,e=i.T,n=i.Zk(),r=i.Hi(),o=Math.PI*n/180,s=Math.cos(o),o=Math.sin(o),a=n>0&&180>n?1:0,h=n>90&&270>n?1:0,n=n>180&&360>n?1:0,l=i.Ha.width,u=i.Ha.height;i.xa=t.size;var f=e.position.copy();e.pf(),l=i.Ha.width-l,u=i.Ha.height-u,(0!==l||0!==u)&&(0!==l&&(f.x+=r*((t.x+l*h)*s-(t.y+u*a)*o)),0!==u&&(f.y+=r*((t.x+l*n)*o+(t.y+u*h)*s)),e.move(f))}},ue.prototype.computeResize=function(t,i,e,n,r,o){i.ne()&&(i=ou);var s=this.vc.Ha,a=s.x,h=s.y,l=s.x+s.width,u=s.y+s.height,f=1;if(!o){var f=s.width,c=s.height;0>=f&&(f=1),0>=c&&(c=1),f=c/f}return c=Ul.K(),Au.xs(t.x,t.y,a,h,r.width,r.height,c),t=s.copy(),0>=i.x?0>=i.y?(t.x=Math.max(c.x,l-n.width),t.x=Math.min(t.x,l-e.width),t.width=Math.max(l-t.x,e.width),t.y=Math.max(c.y,u-n.height),t.y=Math.min(t.y,u-e.height),t.height=Math.max(u-t.y,e.height),o||(i=t.height/t.width,i>f?(t.height=f*t.width,t.y=u-t.height):(t.width=t.height/f,t.x=l-t.width))):1<=i.y?(t.x=Math.max(c.x,l-n.width),t.x=Math.min(t.x,l-e.width),t.width=Math.max(l-t.x,e.width),t.height=Math.max(Math.min(c.y-h,n.height),e.height),o||(i=t.height/t.width,i>f?t.height=f*t.width:(t.width=t.height/f,t.x=l-t.width))):(t.x=Math.max(c.x,l-n.width),t.x=Math.min(t.x,l-e.width),t.width=l-t.x,o||(t.height=f*t.width,t.y=h+.5*(u-h-t.height))):1<=i.x?0>=i.y?(t.width=Math.max(Math.min(c.x-a,n.width),e.width),t.y=Math.max(c.y,u-n.height),t.y=Math.min(t.y,u-e.height),t.height=Math.max(u-t.y,e.height),o||(i=t.height/t.width,i>f?(t.height=f*t.width,t.y=u-t.height):t.width=t.height/f)):1<=i.y?(t.width=Math.max(Math.min(c.x-a,n.width),e.width),t.height=Math.max(Math.min(c.y-h,n.height),e.height),o||(i=t.height/t.width,i>f?t.height=f*t.width:t.width=t.height/f)):(t.width=Math.max(Math.min(c.x-a,n.width),e.width),o||(t.height=f*t.width,t.y=h+.5*(u-h-t.height))):0>=i.y?(t.y=Math.max(c.y,u-n.height),t.y=Math.min(t.y,u-e.height),t.height=u-t.y,o||(t.width=t.height/f,t.x=a+.5*(l-a-t.width))):1<=i.y&&(t.height=Math.max(Math.min(c.y-h,n.height),e.height),o||(t.width=t.height/f,t.x=a+.5*(l-a-t.width))),Ul.v(c),t},ue.prototype.computeMinSize=function(){var t=this.vc.vg.copy(),i=this.vg;return!isNaN(i.width)&&i.width>t.width&&(t.width=i.width),!isNaN(i.height)&&i.height>t.height&&(t.height=i.height),t},ue.prototype.computeMaxSize=function(){var t=this.vc.af.copy(),i=this.af;return!isNaN(i.width)&&i.width<t.width&&(t.width=i.width),!isNaN(i.height)&&i.height<t.height&&(t.height=i.height),t},ue.prototype.computeCellSize=function(){var t=new w(0/0,0/0),i=this.vc.T;if(null!==i){var e=i.VH;!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)}return e=this.qo,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),i=this.g,(isNaN(t.width)||isNaN(t.height))&&i&&(e=i.tb.Ed,null!==e&&e.gw&&(e=e.DD,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height)),i=i.Gs,null!==i&&i.visible&&this.gw&&(e=i.aw,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height))),(isNaN(t.width)||0===t.width||1/0===t.width)&&(t.width=1),(isNaN(t.height)||0===t.height||1/0===t.height)&&(t.height=1),t},Ul.defineProperty(ue,{vg:"minSize"},function(){return this.nj},function(t){if(Ul.C(t,w,ue,"minSize"),!this.nj.L(t)){var i=t.width;isNaN(i)&&(i=0),t=t.height,isNaN(t)&&(t=0),this.nj.m(i,t)}}),Ul.defineProperty(ue,{af:"maxSize"},function(){return this.lj},function(t){if(Ul.C(t,w,ue,"maxSize"),!this.lj.L(t)){var i=t.width;isNaN(i)&&(i=1/0),t=t.height,isNaN(t)&&(t=1/0),this.lj.m(i,t)}}),Ul.defineProperty(ue,{qo:"cellSize"},function(){return this.Ti},function(t){Ul.C(t,w,ue,"cellSize"),this.Ti.L(t)||this.Ti.assign(t)}),Ul.defineProperty(ue,{gw:"isGridSnapEnabled"},function(){return this.iq},function(t){Ul.j(t,"boolean",ue,"isGridSnapEnabled"),this.iq=t}),Ul.u(ue,{hK:"originalDesiredSize"},function(){return this.Tu}),Ul.u(ue,{iK:"originalLocation"},function(){return this.ly}),Ul.Ga(ce,Ci),Ul.fa("RotatingTool",ce),ce.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Bs)){if(t.Za&&!this.g.nb){var i=t.vE;if(null!==i&&t.canRotate()&&t.ba.J()&&t.Ea()&&i.ba.J()&&i.kl()){var e=t.xo(this.name);if(null===e&&(e=this.makeAdornment(i)),null!==e){e.angle=i.Zk();var n=null,r=null;i===t||i===t.ec?(n=t.ec,r=t.Ze):(n=i,r=ou);for(var o=n.Ha,r=Ul.fc(o.width*r.x+r.offsetX,o.height*r.y+r.offsetY);null!==n&&n!==i;)n.transform.ab(r),n=n.S;var n=r.y,o=Math.max(r.x-i.Ha.width,0),s=Ul.K();return e.location=i.lb(new D(1,0,50+o,n),s),Ul.v(s),Ul.v(r),void t.Kk(this.name,e)}}}t.ol(this.name)}},ce.prototype.makeAdornment=function(t){var i=null,i=t.T.YH;if(null===i){i=new ks,i.type=ac,i.Ze=ou;var e=this.Hs;null!==e&&i.add(e.copy())}else if(go(i),i=i.copy(),null===i)return null;return i.Kc=this.name,i.vc=t,i},Ul.defineProperty(ce,{Hs:"handleArchetype"},function(){return this.pk},function(t){null!==t&&Ul.C(t,Mr,ce,"handleArchetype"),this.pk=t}),Ul.u(ce,{handle:"handle"},function(){return this.Yb}),Ul.defineProperty(ce,{vc:"adornedObject"},function(){return this.Gb},function(t){null!==t&&Ul.C(t,Mr,ce,"adornedObject"),this.Gb=t}),ce.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return null!==t&&!t.nb&&t.Dv&&t.N.left&&null!==this.findToolHandleAt(t.wc.da,this.name)?!0:!1},ce.prototype.doActivate=function(){var t=this.g;if(null!==t&&(this.Yb=this.findToolHandleAt(t.wc.da,this.name),null!==this.Yb)){this.Gb=this.Yb.T.vc;var i=this.Gb.T,e=i.ec;this.aC=this.Gb===i||this.Gb===e?e.lb(i.Ze):this.Gb.lb(ou),this.Su=this.Gb.angle,t.Ge=!0,t.az=!0,this.Wb(this.name),this.na=!0}},ce.prototype.doDeactivate=function(){var t=this.g;null!==t&&(this.Uj(),this.Gb=this.Yb=null,this.na=t.Ge=!1)},ce.prototype.doCancel=function(){var t=this.g;null!==t&&(t.az=!1),this.rotate(this.Su),this.stopTool()},ce.prototype.doMouseMove=function(){var t=this.g;this.na&&null!==t&&(t=this.computeRotate(t.N.da),this.rotate(t))},ce.prototype.doMouseUp=function(){var t=this.g;if(this.na&&null!==t){t.az=!1;var i=this.computeRotate(t.N.da);this.rotate(i),t.pc(),this.zf=this.name,t.za("PartRotated",this.Gb,this.Su)}this.stopTool()},ce.prototype.rotate=function(t){null!==this.Gb&&(this.Gb.angle=t)},ce.prototype.computeRotate=function(t){t=this.aC.Fi(t);var i=this.Gb.S;null!==i&&(t-=i.Zk(),t>=360?t-=360:0>t&&(t+=360));var i=Math.min(Math.abs(this.mI),180),e=Math.min(Math.abs(this.lI),i/2);return!this.g.N.shift&&i>0&&e>0&&(e>t%i?t=Math.floor(t/i)*i:t%i>i-e&&(t=(Math.floor(t/i)+1)*i)),t>=360?t-=360:0>t&&(t+=360),t},Ul.defineProperty(ce,{mI:"snapAngleMultiple"},function(){return this.gC},function(t){Ul.j(t,"number",ce,"snapAngleMultiple"),this.gC=t}),Ul.defineProperty(ce,{lI:"snapAngleEpsilon"},function(){return this.fC},function(t){Ul.j(t,"number",ce,"snapAngleEpsilon"),this.fC=t}),Ul.u(ce,{gK:"originalAngle"},function(){return this.Su}),Ul.Ga(pe,Ci),Ul.fa("ClickSelectingTool",pe),pe.prototype.canStart=function(){return!this.isEnabled||null===this.g||this.isBeyondDragSize()?!1:!0},pe.prototype.doMouseUp=function(){this.na&&(this.standardMouseSelect(),this.standardMouseClick()),this.stopTool()},Ul.Ga(de,Ci),Ul.fa("ActionTool",de),de.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t)return!1;var i=t.N,e=t.ke(i.da,function(t){for(;null!==t.S&&!t.pz;)t=t.S;return t},function(t){return t.pz});return null!==e?(this.Um=e,t.en=t.ke(i.da,null,null),!0):!1},de.prototype.doMouseDown=function(){if(this.na){var t=this.g.N,i=this.Um;null!==i&&(t.pe=i,null!==i.HC&&i.HC(t,i))}else this.canStart()&&this.doActivate()},de.prototype.doMouseMove=function(){if(this.na){var t=this.g.N,i=this.Um;null!==i&&(t.pe=i,null!==i.IC&&i.IC(t,i))}},de.prototype.doMouseUp=function(){if(this.na){var t=this.g,i=t.N,e=this.Um;if(null===e)return;i.pe=e,null!==e.JC&&e.JC(i,e),this.isBeyondDragSize()||ji(e,i,t)}this.stopTool()},de.prototype.doCancel=function(){var t=this.g;if(null!==t){var t=t.N,i=this.Um;if(null===i)return;t.pe=i,null!==i.GC&&i.GC(t,i)}this.stopTool()},de.prototype.doStop=function(){this.Um=null},Ul.Ga(ye,Ci),Ul.fa("ClickCreatingTool",ye),ye.prototype.canStart=function(){if(!this.isEnabled||null===this.Oy)return!1;var t=this.g;if(null===t||t.nb||t.uf||!t.lo||!t.N.left||this.isBeyondDragSize())return!1;if(this.ZG){if(1===t.N.Te&&(this.fB=t.N.ff.copy()),2!==t.N.Te||this.isBeyondDragSize(this.fB))return!1}else if(1!==t.N.Te)return!1;return t.Va!==this&&null!==t.zs(t.N.da,!0)?!1:!0},ye.prototype.doMouseUp=function(){var t=this.g;this.na&&null!==t&&this.insertPart(t.N.da),this.stopTool()},ye.prototype.insertPart=function(t){var i=this.g;if(null===i)return null;var e=this.Oy;if(null===e)return null;this.Wb(this.name);var n=null;return e instanceof es?e.Fd()&&(go(e),n=e.copy(),null!==n&&i.add(n)):null!==e&&(e=i.ga.copyNodeData(e),Ul.Sa(e)&&(i.ga.km(e),n=i.Oh(e))),null!==n&&(n.location=t,i.of&&i.select(n)),i.pc(),this.zf=this.name,i.za("PartCreated",n),this.Uj(),n},Ul.defineProperty(ye,{Oy:"archetypeNodeData"},function(){return this.ik},function(t){null!==t&&Ul.C(t,Object,ye,"archetypeNodeData"),this.ik=t}),Ul.defineProperty(ye,{ZG:"isDoubleClick"},function(){return this.qB},function(t){Ul.j(t,"boolean",ye,"isDoubleClick"),this.qB=t}),Ul.Ga(ge,Ci),Ul.fa("ContextMenuTool",ge),Ul.hD=!1,Ul.ms=null,Ul.ns=null,ge.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return null===t||this.isBeyondDragSize()||!t.N.right?!1:null!==this.on&&t.N.jl||null!==this.findObjectWithContextMenu()?!0:!1},ge.prototype.doStart=function(){var t=this.g;null!==t&&this.HB.set(t.wc.da)},ge.prototype.doStop=function(){this.hideDefaultContextMenu(),this.hideContextMenu(),this.fn=null},ge.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var i=this.g;if(null===i)return null;var e=i.N,n=null;if(t instanceof Ge||(n=t instanceof Mr?t:i.ke(e.da,null,function(t){return!t.layer.Ac})),null!==n){for(t=n;null!==t;){if(e=t.contextMenu,null!==e)return t;t=t.S}if(null!==this.on&&i.N.jl)return n.T}else if(e=i.contextMenu,null!==e)return i;return null},ge.prototype.doActivate=function(){},ge.prototype.doMouseUp=function(){var t=this.g;null!==t&&(this.na?null!==this.Hf&&(t=t.ke(t.N.da,null,null),null!==t&&t.gl(this.Hf)&&this.standardMouseClick(null,null),this.stopTool()):this.canStart()&&be(this,!0))},ge.prototype.doMouseMove=function(){this.na&&this.standardMouseOver()},ge.prototype.showContextMenu=function(t,i){Ul.C(t,ks,ge,"showContextMenu:contextmenu"),null!==i&&Ul.C(i,Mr,ge,"showContextMenu:obj");var e=this.g;if(null!==e){if(t!==this.Hf&&this.hideContextMenu(),t.wf="Tool",t.pl=!1,t.scale=1/e.scale,t.Kc=this.name,e.add(t),null!==i){var e=null,n=i.zo();null!==n&&(e=n.data),t.vc=i,t.data=e}else t.data=e.ga;t.pf(),this.positionContextMenu(t,i),this.Hf=t}},ge.prototype.positionContextMenu=function(t){if(null===t.placeholder){var i=this.g;if(null!==i){var e=i.N.da.copy(),n=t.Ba,r=i.ob;i.N.jl&&(e.x-=n.width),e.x+n.width>r.right&&(e.x-=n.width+5),e.x<r.x&&(e.x=r.x),e.y+n.height>r.bottom&&(e.y-=n.height+5),e.y<r.y&&(e.y=r.y),t.position=e}}},ge.prototype.hideContextMenu=function(){var t=this.g;null!==t&&null!==this.Hf&&(this.Hf.data=null,this.Hf.vc=null,t.remove(this.Hf),this.Hf=null,this.standardMouseOver())},ge.prototype.initializeDefaultButtons=function(){if(null===this.g)return null;var t=new l(ve);return t.add(new ve("Copy",function(t){t.Eb.copySelection()},function(t){return t.Eb.canCopySelection()})),t.add(new ve("Cut",function(t){t.Eb.cutSelection()},function(t){return t.Eb.canCutSelection()})),t.add(new ve("Delete",function(t){t.Eb.deleteSelection()},function(t){return t.Eb.canDeleteSelection()})),t.add(new ve("Paste",function(t){t.Eb.pasteSelection(t.N.da)},function(t){return t.Eb.canPasteSelection()})),t.add(new ve("Select All",function(t){t.Eb.selectAll()},function(t){return t.Eb.canSelectAll()})),t.add(new ve("Undo",function(t){t.Eb.undo()},function(t){return t.Eb.canUndo()})),t.add(new ve("Redo",function(t){t.Eb.redo()},function(t){return t.Eb.canRedo()})),t.add(new ve("Zoom To Fit",function(t){t.Eb.zoomToFit()},function(t){return t.Eb.canZoomToFit()})),t.add(new ve("Reset Zoom",function(t){t.Eb.resetZoom()},function(t){return t.Eb.canResetZoom()})),t.add(new ve("Group Selection",function(t){t.Eb.groupSelection()},function(t){return t.Eb.canGroupSelection()})),t.add(new ve("Ungroup Selection",function(t){t.Eb.ungroupSelection()},function(t){return t.Eb.canUngroupSelection()})),t.add(new ve("Edit Text",function(t){t.Eb.editTextBlock()},function(t){return t.Eb.canEditTextBlock()})),t},ge.prototype.showDefaultContextMenu=function(){var t=this.g;if(null!==t){null===this.xx&&(this.xx=this.initializeDefaultButtons()),this.on!==this.Hf&&this.hideContextMenu(),Ul.ns.innerHTML="",Ul.ms.addEventListener("click",this.xC,!1);var i=this,e=Ul.createElement("ul");e.className="defaultCXul",Ul.ns.appendChild(e),e.innerHTML="";
for(var n=this.xx.i;n.next();){var r=n.value,o=r.text,s=r.visible;if("function"==typeof r.ZC&&("function"!=typeof s||s(t))){s=Ul.createElement("li"),s.className="defaultCXli";var a=Ul.createElement("a");a.className="defaultCXa",a.href="#",a.nF=r.ZC,a.addEventListener("click",function(e){return this.nF(t),i.stopTool(),e.preventDefault(),!1},!1),a.textContent=o,s.appendChild(a),e.appendChild(s)}}Ul.ns.style.display="block",Ul.ms.style.display="block",this.Hf=this.on}},ge.prototype.hideDefaultContextMenu=function(){null!==this.Hf&&this.Hf===this.on&&(Ul.ns.style.display="none",Ul.ms.style.display="none",Ul.ms.removeEventListener("click",this.xC,!1),this.Hf=null)},Ul.defineProperty(ge,{Hf:"currentContextMenu"},function(){return this.OA},function(t){null!==t&&Ul.C(t,ks,ge,"currentContextMenu"),this.OA=t}),Ul.defineProperty(ge,{iJ:"currentObject"},function(){return this.fn},function(t){null!==t&&Ul.C(t,Mr,ge,"currentObject"),this.fn=t}),Ul.u(ge,{bK:"mouseDownPoint"},function(){return this.HB}),Ul.Ga(xe,Ci),Ul.fa("DragSelectingTool",xe),xe.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.of)return!1;var i=t.N;return!i.left||t.Va!==this&&(!this.isBeyondDragSize()||i.timestamp-t.wc.timestamp<this.iD||null!==t.zs(i.da,!0))?!1:!0},xe.prototype.doActivate=function(){var t=this.g;null!==t&&(this.na=!0,t.Ge=!0,t.cb=!0,t.add(this.Tg),this.doMouseMove())},xe.prototype.doDeactivate=function(){var t=this.g;null!==t&&(t.remove(this.Tg),t.cb=!1,this.na=t.Ge=!1)},xe.prototype.doMouseMove=function(){if(null!==this.g&&this.na&&null!==this.Tg){var t=this.computeBoxBounds(),i=this.Tg.je("SHAPE");null===i&&(i=this.Tg.If()),i.xa=t.size,this.Tg.position=t.position}},xe.prototype.doMouseUp=function(){if(this.na){var t=this.g;t.remove(this.Tg);try{t.ac="wait",this.selectInRect(this.computeBoxBounds())}finally{t.ac=""}}this.stopTool()},xe.prototype.computeBoxBounds=function(){var t=this.g;return null===t?new k(0,0,0,0):new k(t.wc.da,t.N.da)},xe.prototype.selectInRect=function(t){var i=this.g;if(null!==i){var e=i.N;if(i.za("ChangingSelection"),t=i.Nj(t,null,function(t){return t instanceof es?t.canSelect():!1},this.hH),Ul.Em?e.Ys:e.control)if(e.shift)for(t=t.i;t.next();)e=t.value,e.Za&&(e.Za=!1);else for(t=t.i;t.next();)e=t.value,e.Za=!e.Za;else{if(!e.shift){for(var e=new l(es),n=i.selection.i;n.next();){var r=n.value;t.contains(r)||e.add(r)}for(e=e.i;e.next();)e.value.Za=!1}for(t=t.i;t.next();)e=t.value,e.Za||(e.Za=!0)}i.za("ChangedSelection")}},Ul.defineProperty(xe,{iD:"delay"},function(){return this.pn},function(t){Ul.j(t,"number",xe,"delay"),this.pn=t}),Ul.defineProperty(xe,{hH:"isPartialInclusion"},function(){return this.vB},function(t){Ul.j(t,"boolean",xe,"isPartialInclusion"),this.vB=t}),Ul.defineProperty(xe,{Tg:"box"},function(){return this.zl},function(t){null!==t&&Ul.C(t,es,xe,"box"),this.zl=t}),Ul.Ga(we,Ci),Ul.fa("PanningTool",we),we.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return null===t||!t.Re&&!t.Se||!t.N.left||t.Va!==this&&!this.isBeyondDragSize()?!1:!0},we.prototype.doActivate=function(){var i=this.g;null!==i&&(this.Si?(i.N.bubbles=!0,t.document.addEventListener("scroll",this.lC,!1)):(i.ac="move",i.Ge=!0,this.ny=i.position.copy()),this.na=!0)},we.prototype.doDeactivate=function(){var t=this.g;null!==t&&(t.ac="",this.na=t.Ge=!1)},we.prototype.doCancel=function(){var t=this.g;null!==t&&(t.position=this.ny,t.Ge=!1),this.stopTool()},we.prototype.doMouseMove=function(){this.move()},we.prototype.doMouseUp=function(){this.move(),this.stopTool()},we.prototype.move=function(){var t=this.g;if(this.na&&t)if(this.Si)t.N.bubbles=!0;else{var i=t.position,e=t.wc.da,n=t.N.da,r=i.x+e.x-n.x,e=i.y+e.y-n.y;t.Re||(r=i.x),t.Se||(e=i.y),t.position=new m(r,e)}},Ul.defineProperty(we,{bubbles:"bubbles"},function(){return this.Si},function(t){Ul.j(t,"boolean",we,"bubbles"),this.Si=t}),Ul.u(we,{lK:"originalPosition"},function(){return this.ny}),Ul.fa("TextEditingTool",ke),Ul.Ga(ke,Ci);var cf;ke.LostFocus=cf=Ul.s(ke,"LostFocus",0);var pf;ke.MouseDown=pf=Ul.s(ke,"MouseDown",1);var df;ke.Tab=df=Ul.s(ke,"Tab",2);var yf;ke.Enter=yf=Ul.s(ke,"Enter",3),ke.SingleClick=Ul.s(ke,"SingleClick",0);var vf;ke.SingleClickSelected=vf=Ul.s(ke,"SingleClickSelected",1);var gf=Ul.s(ke,"StateNone",0),mf=Ul.s(ke,"StateActive",1),bf=Ul.s(ke,"StateEditing",2),xf=Ul.s(ke,"StateEditing2",3),wf=Ul.s(ke,"StateValidating",4),kf=Ul.s(ke,"StateValidated",5);Ul.defineProperty(ke,{kh:"textBlock"},function(){return this.pv},function(t){null!==t&&Ul.C(t,Fo,ke,"textBlock"),this.pv=t}),Ul.defineProperty(ke,{mg:"currentTextEditor"},function(){return this.RA},function(t){this.RA=t}),Ul.defineProperty(ke,{nG:"defaultTextEditor"},function(){return this.WA},function(t){Ul.C(t,Element,ke,"defaultTextEditor"),this.WA=t}),Ul.defineProperty(ke,{pI:"starting"},function(){return this.kC},function(t){Ul.rb(t,ke,ke,"starting"),this.kC=t}),ke.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return null===t||t.nb||!t.N.left||this.isBeyondDragSize()?!1:(t=t.ke(t.N.da,null,function(t){return t instanceof Fo}),null!==t&&t.bz&&t.T.canEdit()?(t=t.T,null===t||this.pI===vf&&!t.Za?!1:!0):!1)},ke.prototype.doStart=function(){this.na||null===this.kh||this.doActivate()},ke.prototype.doActivate=function(){if(!this.na){var t=this.g;if(null!==t){var i=this.kh;if(null===i&&(i=t.ke(t.N.da,function(t){return t instanceof Fo?t:null})),null!==i){this.kh=i;var e=i.T;if(null!==e){this.na=!0,this.Xa=mf;var n=this.nG,r=!1;if(null!==i.NE&&(n=i.NE),null===n||n.AA||(r=!0),this.pC=this.kh.copy(),t.cI(e.ba),n.AA){var o=i.lb(ou),s=t.position,a=t.scale,h=i.Hi()*a;h<this.YD&&(h=this.YD),this.Qx=i.Ha.width;var e=this.Qx*h,l=i.Ha.height*h,u=(o.x-s.x)*a,o=(o.y-s.y)*a;n.value=i.text,t.Vk.style.font=i.font,n.style.font="inherit",n.style.fontSize=100*h+"%",n.style.lineHeight="normal",n.style.width=e+6+"px",n.style.height=l+2+"px",n.style.left=(u-e/2|0)-1+"px",n.style.top=(o-l/2|0)-1+"px",n.style.textAlign=i.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style["white-space"]="pre-wrap",n.style.overflow="hidden"}t.Vk.appendChild(n),n.style.position="absolute",n.style.zIndex=100,n.className="start",n.textEditingTool=this,n.DK=h,r&&"function"==typeof n.onActivate&&n.onActivate(),this.mg=n,"function"==typeof n.focus&&n.focus(),"function"==typeof n.select&&this.$z&&n.select()}}}}},ke.prototype.doCancel=function(){null!==this.Dk&&(this.mg.style.border=this.Dk,this.Dk=null),this.stopTool()},ke.prototype.doMouseUp=function(){!this.na&&this.canStart()&&this.doActivate()},ke.prototype.doMouseDown=function(){this.na&&this.acceptText(pf)},ke.prototype.acceptText=function(t){switch(t){case pf:this.Xa===kf||this.Xa===xf?"function"==typeof this.mg.focus&&this.mg.focus():(this.Xa===mf||this.Xa===bf)&&(this.Xa=wf,Me(this));break;case cf:case yf:case df:if(yf===t&&!0===this.pv.iw)break;(this.Xa===mf||this.Xa===bf)&&(this.Xa=wf,Me(this))}},ke.prototype.doDeactivate=function(){var t=this.g;if(null!==t){if(this.Xa=gf,this.kh=null,null!==this.mg){var i=this.mg;"function"==typeof i.onDeactivate&&i.onDeactivate(),null!==i&&t.Vk.removeChild(i)}this.na=!1}},ke.prototype.isValidText=function(t,i,e){Ul.C(t,Fo,ke,"isValidText:textblock");var n=this.jA;return null===n||n(t,i,e)?(n=t.jA,null===n||n(t,i,e)?!0:!1):!1},Ul.defineProperty(ke,{jA:"textValidation"},function(){return this.Hk},function(t){null!==t&&Ul.j(t,"function",ke,"textValidation"),this.Hk=t}),Ul.defineProperty(ke,{YD:"minimumEditorScale"},function(){return this.EB},function(t){null!==t&&Ul.j(t,"number",ke,"minimumEditorScale"),this.EB=t}),Ul.defineProperty(ke,{$z:"selectsTextOnActivate"},function(){return this.dC},function(t){null!==t&&Ul.j(t,"boolean",ke,"selectsTextOnActivate"),this.dC=t}),Ul.Ga(Pe,Ci),Ul.fa("ToolManager",Pe);var Mf;Pe.WheelScroll=Mf=Ul.s(Pe,"WheelScroll",0);var Pf;Pe.WheelZoom=Pf=Ul.s(Pe,"WheelZoom",1),Pe.WheelNone=Ul.s(Pe,"WheelNone",2);var Tf;Pe.GestureZoom=Tf=Ul.s(Pe,"GestureZoom",3);var Sf;Pe.GestureCancel=Sf=Ul.s(Pe,"GestureCancel",4);var Cf;Pe.GestureNone=Cf=Ul.s(Pe,"GestureNone",5),Ul.defineProperty(Pe,{$s:"mouseWheelBehavior"},function(){return this.IB},function(t){Ul.rb(t,Pe,Pe,"mouseWheelBehavior"),this.IB=t}),Ul.defineProperty(Pe,{Bo:"gestureBehavior"},function(){return this.hB},function(t){Ul.rb(t,Pe,Pe,"gestureBehavior"),this.hB=t}),Pe.prototype.initializeStandardTools=function(){this.HF=new de,this.iE=new se,this.rH=new he,this.uE=new ue,this.$H=new ce,this.TD=new oe,this.Ed=new Ni,this.uG=new xe,this.JH=new we,this.Vy=new ge,this.iA=new ke,this.VF=new ye,this.WF=new pe},Pe.prototype.doMouseDown=function(){var t=this.g;if(null!==t){var i=t.N;if(i.jl&&this.Bo===Sf&&(i.bubbles=!1),i.Ps){if(this.Bo===Cf)return void(i.bubbles=!0);if(this.Bo===Sf)return;if(t.Va.canStartMultiTouch())return void t.Va.standardPinchZoomStart()}i=t.ha,i.Ry&&0!==i.Le&&Ul.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var i=this.cf.length,e=0;i>e;e++){var n=this.cf.ja(e);if(null===n.g&&n.Ec(this.g),n.canStart())return t.Va=n,void(t.Va===n&&(n.na||n.doActivate(),n.doMouseDown()))}1===t.N.button&&(this.$s===Mf?this.$s=Pf:this.$s===Pf&&(this.$s=Mf)),this.doActivate(),this.standardWaitAfter(this.FD)}},Pe.prototype.doMouseMove=function(){var t=this.g;if(null!==t){var i=t.N;if(i.Ps){if(this.Bo===Cf)return void(i.bubbles=!0);if(this.Bo===Sf)return;if(t.Va.canStartMultiTouch())return void t.Va.standardPinchZoomMove()}if(this.na)for(var i=this.Mf.length,e=0;i>e;e++){var n=this.Mf.ja(e);if(null===n.g&&n.Ec(this.g),n.canStart())return t.Va=n,void(t.Va===n&&(n.na||n.doActivate(),n.doMouseMove()))}this.standardMouseOver(),this.isBeyondDragSize()&&this.standardWaitAfter(this.na?this.FD:this.QG)}},Pe.prototype.doCurrentObjectChanged=function(t,i){var e=this.Rk;null===e||null!==i&&(i===e||i.gl(e))||this.hideToolTip()},Pe.prototype.doWaitAfter=function(){var t=this.g;null!==t&&t.ib&&(this.doMouseHover(),this.na||this.doToolTip())},Pe.prototype.doMouseHover=function(){var t=this.g;if(null!==t){var i=t.N;null===i.pe&&(i.pe=t.ke(i.da,null,null));var e=i.pe;if(null!==e)for(i.Tc=!1;null!==e&&(t=this.na?e.Dz:e.Ez,null===t||(t(i,e),!i.Tc));)e=e.S;else t=this.na?t.Dz:t.Ez,null!==t&&t(i)}},Pe.prototype.doToolTip=function(){var t=this.g;if(null!==t){var i=t.N;if(null===i.pe&&(i.pe=t.ke(i.da,null,null)),i=i.pe,null!==i){if(i!==this.Rk&&!i.gl(this.Rk)){for(;null!==i;){if(t=i.lA,null!==t)return void this.showToolTip(t,i);i=i.S}this.hideToolTip()}}else t=t.lA,null!==t?this.showToolTip(t,null):this.hideToolTip()}},Pe.prototype.showToolTip=function(t,i){Ul.C(t,ks,Pe,"showToolTip:tooltip"),null!==i&&Ul.C(i,Mr,Pe,"showToolTip:obj");var e=this.g;if(null!==e){if(t!==this.Rk&&this.hideToolTip(),t.wf="Tool",t.pl=!1,t.scale=1/e.scale,e.add(t),null!==i&&i!==this.au){var e=null,n=i.zo();null!==n&&(e=n.data),t.vc=i,t.data=e}else null===i&&(t.data=e.ga);(null===i||i!==this.au)&&(t.pf(),this.positionToolTip(t,i)),this.vx=t,this.au=i}},Pe.prototype.positionToolTip=function(t){if(null===t.placeholder){var i=this.g;if(null!==i){var e=i.N.da.copy(),n=t.Ba,r=i.ob;i.N.jl&&(e.x-=n.width),e.x+n.width>r.right&&(e.x-=n.width+5),e.x<r.x&&(e.x=r.x),e.y=e.y+20+n.height>r.bottom?e.y-(n.height+5):e.y+20,e.y<r.y&&(e.y=r.y),t.position=e}}},Pe.prototype.hideToolTip=function(){if(null!==this.Rk){var t=this.g;null!==t&&(this.Rk.data=null,this.Rk.vc=null,t.remove(this.Rk),this.au=this.vx=null)}},Ul.u(Pe,{Rk:"currentToolTip"},function(){return this.vx}),Pe.prototype.doMouseUp=function(){if(this.cancelWaitAfter(),this.na){var t=this.g;if(null===t)return;for(var i=this.Nf.length,e=0;i>e;e++){var n=this.Nf.ja(e);if(null===n.g&&n.Ec(this.g),n.canStart())return t.Va=n,void(t.Va===n&&(n.na||n.doActivate(),n.doMouseUp()))}}this.doDeactivate()},Pe.prototype.doMouseWheel=function(){this.standardMouseWheel()},Pe.prototype.doKeyDown=function(){var t=this.g;null!==t&&t.Eb.doKeyDown()},Pe.prototype.doKeyUp=function(){var t=this.g;null!==t&&t.Eb.doKeyUp()},Pe.prototype.doCancel=function(){null!==nf&&nf.doCancel(),Ci.prototype.doCancel.call(this)},Pe.prototype.findTool=function(t){Ul.j(t,"string",Pe,"findTool:name");for(var i=this.cf.length,e=0;i>e;e++){var n=this.cf.ja(e);if(n.name===t)return n}for(i=this.Mf.length,e=0;i>e;e++)if(n=this.Mf.ja(e),n.name===t)return n;for(i=this.Nf.length,e=0;i>e;e++)if(n=this.Nf.ja(e),n.name===t)return n;return null},Pe.prototype.replaceTool=function(t,i){Ul.j(t,"string",Pe,"replaceTool:name"),null!==i&&(Ul.C(i,Ci,Pe,"replaceTool:newtool"),i.g&&i.g!==this.g&&Ul.k("Cannot share tools between Diagrams: "+i.toString()),i.Ec(this.g));for(var e=this.cf.length,n=0;e>n;n++){var r=this.cf.ja(n);if(r.name===t)return null!==i?this.cf.Bg(n,i):this.cf.jd(n),r}for(e=this.Mf.length,n=0;e>n;n++)if(r=this.Mf.ja(n),r.name===t)return null!==i?this.Mf.Bg(n,i):this.Mf.jd(n),r;for(e=this.Nf.length,n=0;e>n;n++)if(r=this.Nf.ja(n),r.name===t)return null!==i?this.Nf.Bg(n,i):this.Nf.jd(n),r;return null},Ul.u(Pe,{cf:"mouseDownTools"},function(){return this.uF}),Ul.u(Pe,{Mf:"mouseMoveTools"},function(){return this.vF}),Ul.u(Pe,{Nf:"mouseUpTools"},function(){return this.wF}),Ul.defineProperty(Pe,{QG:"hoverDelay"},function(){return this.kB},function(t){Ul.j(t,"number",Pe,"hoverDelay"),this.kB=t}),Ul.defineProperty(Pe,{FD:"holdDelay"},function(){return this.jB},function(t){Ul.j(t,"number",Pe,"holdDelay"),this.jB=t}),Ul.defineProperty(Pe,{vG:"dragSize"},function(){return this.ZA},function(t){Ul.C(t,w,Pe,"dragSize"),this.ZA=t.Z()}),Ul.defineProperty(Pe,{HF:"actionTool"},function(){return this.findTool("Action")},function(t){Te(this,"Action",t,this.cf)}),Ul.defineProperty(Pe,{iE:"relinkingTool"},function(){return this.findTool("Relinking")},function(t){Te(this,"Relinking",t,this.cf)}),Ul.defineProperty(Pe,{rH:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(t){Te(this,"LinkReshaping",t,this.cf)}),Ul.defineProperty(Pe,{uE:"resizingTool"},function(){return this.findTool("Resizing")},function(t){Te(this,"Resizing",t,this.cf)}),Ul.defineProperty(Pe,{$H:"rotatingTool"},function(){return this.findTool("Rotating")},function(t){Te(this,"Rotating",t,this.cf)}),Ul.defineProperty(Pe,{TD:"linkingTool"},function(){return this.findTool("Linking")},function(t){Te(this,"Linking",t,this.Mf)}),Ul.defineProperty(Pe,{Ed:"draggingTool"},function(){return this.findTool("Dragging")},function(t){Te(this,"Dragging",t,this.Mf)}),Ul.defineProperty(Pe,{uG:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(t){Te(this,"DragSelecting",t,this.Mf)}),Ul.defineProperty(Pe,{JH:"panningTool"},function(){return this.findTool("Panning")},function(t){Te(this,"Panning",t,this.Mf)}),Ul.defineProperty(Pe,{Vy:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(t){Te(this,"ContextMenu",t,this.Nf)}),Ul.defineProperty(Pe,{iA:"textEditingTool"},function(){return this.findTool("TextEditing")},function(t){Te(this,"TextEditing",t,this.Nf)}),Ul.defineProperty(Pe,{VF:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(t){Te(this,"ClickCreating",t,this.Nf)}),Ul.defineProperty(Pe,{WF:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(t){Te(this,"ClickSelecting",t,this.Nf)}),Ul.fa("AnimationManager",Se),Se.prototype.Ec=function(t){this.Y=t},Se.prototype.prepareAnimation=Se.prototype.ml=function(){this.Ne&&(this.dj&&this.Mi(),this.bd=!0,this.CA=!1)};var jf={opacity:function(t,i,e,n,r,o){t.opacity=n(r,i,e-i,o)},position:function(t,i,e,n,r,o){r!==o?t.GE(n(r,i.x,e.x-i.x,o),n(r,i.y,e.y-i.y,o)):t.position=new m(n(r,i.x,e.x-i.x,o),n(r,i.y,e.y-i.y,o))},scale:function(t,i,e,n,r,o){t.scale=n(r,i,e-i,o)},visible:function(t,i,e,n,r,o){t.visible=r!==o?i:e}};Se.prototype.stopAnimation=Se.prototype.Mi=function(){!0===this.bd&&(this.bd=!1,this.CA&&this.Y.de()),this.dj&&this.Ne&&(Le(this),ze(this,this.Y,this.oF,this.PA,this.tx,this.tx,null!==this.Gl&&null!==this.Fl),Fe(this),Be(this))},Ul.defineProperty(Se,{isEnabled:"isEnabled"},function(){return this.Ne},function(t){Ul.j(t,"boolean",Se,"isEnabled"),this.Ne=t}),Ul.defineProperty(Se,{duration:"duration"},function(){return this.Ex},function(t){Ul.j(t,"number",Se,"duration"),1>t&&Ul.wa(t,">= 1",Se,"duration"),this.Ex=t}),Ul.u(Se,{Vg:"isAnimating"},function(){return this.dj}),Ul.u(Se,{JJ:"isTicking"},function(){return this.Fn}),Ul.fa("Layer",Ie),Ie.prototype.Ec=function(t){this.Y=t},Ie.prototype.toString=function(t){void 0===t&&(t=0);var i='Layer "'+this.name+'"';if(0>=t)return i;for(var e=0,n=0,r=0,o=0,s=0,a=this.Db.i;a.next();){var h=a.value;h instanceof xa?r++:h instanceof Ms?n++:h instanceof Bs?o++:h instanceof ks?s++:e++}if(a="",e>0&&(a+=e+" Parts "),n>0&&(a+=n+" Nodes "),r>0&&(a+=r+" Groups "),o>0&&(a+=o+" Links "),s>0&&(a+=s+" Adornments "),t>1)for(t=this.Db.i;t.next();)e=t.value,a+="\n    "+e.toString(),n=e.data,null!==n&&Ul.Uc(n)&&(a+=" #"+Ul.Uc(n)),e instanceof Ms?a+=" "+$u(n):e instanceof Bs&&(a+=" "+$u(e.W)+" "+$u(e.ca));return i+" "+this.Db.count+": "+a},Ie.prototype.findObjectAt=Ie.prototype.ke=function(t,i,e){if(void 0===i&&(i=null),void 0===e&&(e=null),!1===this.Fk)return null;var n=!1;this.g.ob.Aa(t)&&(n=!0);for(var r=Ul.K(),o=this.Db.n,s=o.length;s--;){var a=o[s];if((!0!==n||!1!==vs(a))&&a.Ea()&&(r.assign(t),x(r,a.Ff),a=a.ke(r,i,e),null!==a&&(null!==i&&(a=i(a)),null!==a&&(null===e||e(a)))))return Ul.v(r),a}return Ul.v(r),null},Ie.prototype.findObjectsAt=Ie.prototype.ys=function(t,i,e,n){if(void 0===i&&(i=null),void 0===e&&(e=null),n instanceof l||n instanceof f||(n=new f(Mr)),!1===this.Fk)return n;var r=!1;this.g.ob.Aa(t)&&(r=!0);for(var o=Ul.K(),s=this.Db.n,a=s.length;a--;){var h=s[a];!0===r&&!1===vs(h)||!h.Ea()||(o.assign(t),x(o,h.Ff),h.ys(o,i,e,n)&&(null!==i&&(h=i(h)),null===h||null!==e&&!e(h)||n.add(h)))}return Ul.v(o),n},Ie.prototype.findObjectsIn=Ie.prototype.Nj=function(t,i,e,n,r){if(void 0===i&&(i=null),void 0===e&&(e=null),void 0===n&&(n=!1),r instanceof l||r instanceof f||(r=new f(Mr)),!1===this.Fk)return r;var o=!1;this.g.ob.Kj(t)&&(o=!0);for(var s=this.Db.n,a=s.length;a--;){var h=s[a];(!0!==o||!1!==vs(h))&&h.Ea()&&h.Nj(t,i,e,n,r)&&(null!==i&&(h=i(h)),null===h||null!==e&&!e(h)||r.add(h))}return r},Ie.prototype.dz=function(t,i,e,n,r,o,s){if(!1===this.Fk)return r;for(var a=this.Db.n,h=a.length;h--;){var l=a[h];(!0!==s||!1!==vs(l))&&o(l)&&l.Ea()&&l.Nj(t,i,e,n,r)&&(null!==i&&(l=i(l)),null===l||null!==e&&!e(l)||r.add(l))}return r},Ie.prototype.findObjectsNear=Ie.prototype.ym=function(t,i,e,n,r,o){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=!0),!1!==r&&!0!==r&&((r instanceof l||r instanceof f)&&(o=r),r=!0),o instanceof l||o instanceof f||(o=new f(Mr)),!1===this.Fk)return o;var s=!1;this.g.ob.Aa(t)&&(s=!0);for(var a=Ul.K(),h=Ul.K(),u=this.Db.n,c=u.length;c--;){var p=u[c];!0===s&&!1===vs(p)||!p.Ea()||(a.assign(t),x(a,p.Ff),h.m(t.x+i,t.y),x(h,p.Ff),p.ym(a,h,e,n,r,o)&&(null!==e&&(p=e(p)),null===p||null!==n&&!n(p)||o.add(p)))}return Ul.v(a),Ul.v(h),o},Hl=Ie.prototype,Hl.xf=function(t,i){if(this.visible){var e;e=void 0===i?t.ob:i;for(var n=this.Db.n,r=n.length,o=0;r>o;o++){var s=n[o];if(s.BB=o,!(s instanceof Bs&&!1===s.hg)){if(s instanceof ks){var a=s;if(null!==a.Lh)continue}if(S(s.ba,e))for(s.xf(!0),rs(s),s=s.zv;s.next();)a=s.value,Nr(a,1/0,1/0),a.zc(),a.xf(!0);else s.xf(!1),null!==s.zv&&0<s.zv.count&&rs(s)}}}},Hl.We=function(t,i,e,n){if(this.visible&&0!==this.Ic&&(void 0===n&&(n=!0),n||!this.Ac)){1!==this.Ic&&(t.globalAlpha=this.Ic),e=this.Uu,e.length=0,n=i.scale;for(var r=this.Db.n,o=r.length,s=0;o>s;s++){var a=r[s];if(vs(a)||wo(a)){if(a instanceof Bs){var h=a;if(h.dc&&e.push(h),!1===h.hg)continue}h=a.ba,1<h.width*n||1<h.height*n?a.We(t,i):fs(a,t)}}t.globalAlpha=1}},Hl.h=function(t,i,e,n,r){var o=this.g;null!==o&&o.Dc(Yu,t,this,i,e,n,r)},Hl.Eo=function(t,i,e){var n=this.Db;if(i.Bu=this,t>=n.count)t=n.count;else if(n.ja(t)===i)return-1;return n.Yd(t,i),i.Js(e),n=this.g,null!==n&&(e?n.ma():n.Eo(i)),i instanceof xa&&this.Jw(i),t},Hl.Fe=function(t,i,e){if(!e&&i.layer!==this&&null!==i.layer)return i.layer.Fe(t,i,e);var n=this.Db;if(0>t||t>=n.length){if(t=n.indexOf(i),0>t)return-1}else if(n.ja(t)!==i&&(t=n.indexOf(i),0>t))return-1;return i.Ks(e),n.jd(t),n=this.g,null!==n&&(e?n.ma():n.Fe(i)),i.Bu=null,t},Hl.Jw=function(t){for(;null!==t;){if(t.layer===this){var i=t;if(0!==i.Mc.count){for(var e=-1,n=-1,r=this.Db.n,o=r.length,s=0;o>s;s++){var a=r[s];if(a===i&&(e=s,n>=0))break;if(0>n&&a.Ra===i&&(n=s,e>=0))break}!(0>n)&&e>n&&(r=this.Db,r.jd(e),r.Yd(n,i))}}t=t.Ra}},Hl.clear=function(){for(var t=this.Db.Ke(),i=t.length,e=0;i>e;e++)t[e].xf(!1),this.Fe(-1,t[e],!1)},Ul.u(Ie,{Sj:"parts"},function(){return this.Db.i}),Ul.u(Ie,{oK:"partsBackwards"},function(){return this.Db.Fm}),Ul.u(Ie,{g:"diagram"},function(){return this.Y}),Ul.defineProperty(Ie,{name:"name"},function(){return this.Ub},function(t){Ul.j(t,"string",Ie,"name");var i=this.Ub;if(i!==t){var e=this.g;if(null!==e)for(""===i&&Ul.k("Cannot rename default Layer to: "+t),e=e.mw;e.next();)e.value.name===t&&Ul.k("Layer.name is already present in this diagram: "+t);for(this.Ub=t,this.h("name",i,t),t=this.Db.i;t.next();)t.value.wf=this.Ub}}),Ul.defineProperty(Ie,{opacity:"opacity"},function(){return this.Ic},function(t){var i=this.Ic;i!==t&&(Ul.j(t,"number",Ie,"opacity"),(0>t||t>1)&&Ul.wa(t,"0 <= value <= 1",Ie,"opacity"),this.Ic=t,this.h("opacity",i,t),t=this.g,null!==t&&t.ma())}),Ul.defineProperty(Ie,{Ac:"isTemporary"},function(){return this.Wx},function(t){var i=this.Wx;i!==t&&(Ul.j(t,"boolean",Ie,"isTemporary"),this.Wx=t,this.h("isTemporary",i,t))}),Ul.defineProperty(Ie,{visible:"visible"},function(){return this.Iy},function(t){var i=this.Iy;if(i!==t){for(Ul.j(t,"boolean",Ie,"visible"),this.Iy=t,this.h("visible",i,t),i=this.Db.i;i.next();)i.value.He(t);t=this.g,null!==t&&t.ma()}}),Ul.defineProperty(Ie,{Ag:"pickable"},function(){return this.Fk},function(t){var i=this.Fk;i!==t&&(Ul.j(t,"boolean",Ie,"pickable"),this.Fk=t,this.h("pickable",i,t))}),Ul.defineProperty(Ie,{KD:"isBoundsIncluded"},function(){return this.Rx},function(t){this.Rx!==t&&(this.Rx=t,null!==this.g&&this.g.pc())}),Ul.defineProperty(Ie,{Ij:"allowCopy"},function(){return this.Xj},function(t){var i=this.Xj;i!==t&&(Ul.j(t,"boolean",Ie,"allowCopy"),this.Xj=t,this.h("allowCopy",i,t))}),Ul.defineProperty(Ie,{lm:"allowDelete"},function(){return this.Yj},function(t){var i=this.Yj;i!==t&&(Ul.j(t,"boolean",Ie,"allowDelete"),this.Yj=t,this.h("allowDelete",i,t))}),Ul.defineProperty(Ie,{Ev:"allowTextEdit"},function(){return this.gk},function(t){var i=this.gk;i!==t&&(Ul.j(t,"boolean",Ie,"allowTextEdit"),this.gk=t,this.h("allowTextEdit",i,t))}),Ul.defineProperty(Ie,{Bv:"allowGroup"},function(){return this.Zj},function(t){var i=this.Zj;i!==t&&(Ul.j(t,"boolean",Ie,"allowGroup"),this.Zj=t,this.h("allowGroup",i,t))}),Ul.defineProperty(Ie,{Fv:"allowUngroup"},function(){return this.hk},function(t){var i=this.hk;i!==t&&(Ul.j(t,"boolean",Ie,"allowUngroup"),this.hk=t,this.h("allowUngroup",i,t))}),Ul.defineProperty(Ie,{gs:"allowLink"},function(){return this.$j},function(t){var i=this.$j;i!==t&&(Ul.j(t,"boolean",Ie,"allowLink"),this.$j=t,this.h("allowLink",i,t))}),Ul.defineProperty(Ie,{mm:"allowRelink"},function(){return this.bk},function(t){var i=this.bk;i!==t&&(Ul.j(t,"boolean",Ie,"allowRelink"),this.bk=t,this.h("allowRelink",i,t))}),Ul.defineProperty(Ie,{Nk:"allowMove"},function(){return this.ak},function(t){var i=this.ak;i!==t&&(Ul.j(t,"boolean",Ie,"allowMove"),this.ak=t,this.h("allowMove",i,t))}),Ul.defineProperty(Ie,{Cv:"allowReshape"},function(){return this.ck},function(t){var i=this.ck;i!==t&&(Ul.j(t,"boolean",Ie,"allowReshape"),this.ck=t,this.h("allowReshape",i,t))}),Ul.defineProperty(Ie,{hs:"allowResize"},function(){return this.dk},function(t){var i=this.dk;i!==t&&(Ul.j(t,"boolean",Ie,"allowResize"),this.dk=t,this.h("allowResize",i,t))}),Ul.defineProperty(Ie,{Dv:"allowRotate"},function(){return this.ek},function(t){var i=this.ek;i!==t&&(Ul.j(t,"boolean",Ie,"allowRotate"),this.ek=t,this.h("allowRotate",i,t))}),Ul.defineProperty(Ie,{of:"allowSelect"},function(){return this.fk},function(t){var i=this.fk;i!==t&&(Ul.j(t,"boolean",Ie,"allowSelect"),this.fk=t,this.h("allowSelect",i,t))}),Ul.fa("Diagram",Ge),Ge.prototype.toString=function(t){void 0===t&&(t=0);var i="";if(this.id&&(i=this.id),this.Vk&&this.Vk.id&&(i=this.Vk.id),i='Diagram "'+i+'"',0>=t)return i;for(var e=this.Zb.i;e.next();)i+="\n  "+e.value.toString(t-1);return i},Ge.prototype.checkProperties=function(){return Ul.check(this)},Ge.fromDiv=function(i){var e=i;return"string"==typeof i&&(e=t.document.getElementById(i)),e instanceof HTMLDivElement&&e.Y instanceof Ge?e.Y:null},Ul.defineProperty(Ge,{Vk:"div"},function(){return this.Jb},function(i){if(null!==i&&Ul.C(i,HTMLDivElement,Ge,"div"),this.Jb!==i){qc=[];var e=this.Jb;null!==e?(e.Y=void 0,e.innerHTML="",null!==this.ib&&(this.ib.removeEventListener("touchstart",this.SE,!1),this.ib.removeEventListener("touchmove",this.RE,!1),this.ib.removeEventListener("touchend",this.QE,!1),this.ib.Dd.Y=null),e=this.tb,null!==e&&(e.cf.each(function(t){t.cancelWaitAfter()}),e.Mf.each(function(t){t.cancelWaitAfter()}),e.Nf.each(function(t){t.cancelWaitAfter()})),e.cancelWaitAfter(),this.Va.doCancel(),this.Gg=this.ib=null,t.removeEventListener("resize",this.aF,!1),t.removeEventListener("mousemove",this.Qo,!0),t.removeEventListener("mousedown",this.Po,!0),t.removeEventListener("mouseup",this.So,!0),t.removeEventListener("mousewheel",this.Zg,!0),t.removeEventListener("DOMMouseScroll",this.Zg,!0),t.removeEventListener("mouseout",this.Ro,!0)):this.lf=!1,this.Jb=null,null!==i&&((e=i.Y)&&(e.Vk=null),yr(this,i),this.Sz())}}),Ge.prototype.computePixelRatio=function(){if(null!==this.im)return this.im;var i=this.Gg;return(t.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)},Ge.prototype.doMouseMove=function(){this.Va.doMouseMove()},Ge.prototype.doMouseDown=function(){this.Va.doMouseDown()},Ge.prototype.doMouseUp=function(){this.Va.doMouseUp()},Ge.prototype.doMouseWheel=function(){this.Va.doMouseWheel()},Ge.prototype.doKeyDown=function(){this.Va.doKeyDown()},Ge.prototype.doKeyUp=function(){this.Va.doKeyUp()},Ge.prototype.focus=Ge.prototype.focus=function(){this.ib&&this.ib.focus()},Ge.prototype.LB=function(){if(this.Y.isEnabled){var t=this.Y;if(t.sy&&null!==t.ib){t.Zu=!0;var i=t.Cd,e=t.ob,n=i.width,r=e.width,o=i.height,s=e.height,a=i.right,h=e.right,l=i.bottom,u=e.bottom,f=i.x,c=e.x,i=i.y,e=e.y,p=t.scale;if(n>r||o>s){var d=Ul.K();this.bC&&t.Re?(d.m(this.scrollLeft/p+f,t.position.y),t.position=d):this.cC&&t.Se&&(d.m(t.position.x,this.scrollTop/p+i),t.position=d),Ul.v(d),t.Zu=!1,t.Hl=!1}else d=Ul.K(),this.bC&&t.Re&&(c>f&&(t.position=new m(this.scrollLeft+f,t.position.y)),a>h&&(t.position=new m(-(t.uj.scrollWidth-t.Ab)+this.scrollLeft-t.Ab/p+t.Cd.right,t.position.y))),this.cC&&t.Se&&(e>i&&(t.position=new m(t.position.x,this.scrollTop+i)),l>u&&(t.position=new m(t.position.x,-(t.vj.scrollHeight-t.zb)+this.scrollTop-t.zb/p+t.Cd.bottom))),Ul.v(d),xn(t),t.Zu=!1,t.Hl=!1,i=t.Cd,e=t.ob,a=i.right,h=e.right,l=i.bottom,u=e.bottom,f=i.x,c=e.x,i=i.y,e=e.y,r>=n&&f>=c&&h>=a&&(t.ty.style.width="1px"),s>=o&&i>=e&&u>=l&&(t.uy.style.height="1px")}}else Mn(this.Y)},Ge.prototype.Ru=function(){this.Y.isEnabled?this.Y.sy=!0:Mn(this.Y)},Ge.prototype.computeBounds=Ge.prototype.kg=function(){return 0<this.Xf.count&&pn(this),Ze(this)},Ge.prototype.computePartsBounds=function(t){var i=null;for(t=t.i;t.next();){var e=t.value;e instanceof Bs||(e.pf(),null===i?i=e.ba.copy():i.Th(e.ba))}return null===i?new k(0/0,0/0,0,0):i},Ge.prototype.zoomToFit=Ge.prototype.zoomToFit=function(){this.scale=$e(this,Df)},Ge.prototype.zoomToRect=function(t,i){void 0===i&&(i=Df);var e=t.width,n=t.height;if(!(0===e||0===n||isNaN(e)&&isNaN(n))){var r=1;if(i===Df||i===Af)if(isNaN(e))r=this.ob.height*this.scale/n;else if(isNaN(n))r=this.ob.width*this.scale/e;else var r=this.Ab,o=this.zb,r=i===Af?o/n>r/e?(o-(this.qk?this.zd:0))/n:(r-(this.rk?this.zd:0))/e:Math.min(o/n,r/e);this.scale=r,this.position=new m(t.x,t.y)}},Ul.defineProperty(Ge,{qz:null},function(){return this.sc},function(t){this.sc=t}),Ge.prototype.alignDocument=function(t,i){this.ei&&Zn(this,this.kg());var e=this.Cd,n=this.ob,r=this.sc;this.sc=!0,this.position=new m(e.x+(t.x*e.width+t.offsetX)-(i.x*n.width-i.offsetX),e.y+(t.y*e.height+t.offsetY)-(i.y*n.height-i.offsetY)),this.sc=r,this.ma()},Ge.prototype.findPartAt=Ge.prototype.zs=function(t,i){var e=i?tn(this,t,function(t){return t.T},function(t){return t.canSelect()}):tn(this,t,function(t){return t.T});return e instanceof es?e:null},Ge.prototype.findObjectAt=Ge.prototype.ke=function(t,i,e){void 0===i&&(i=null),void 0===e&&(e=null),pn(this);for(var n=this.Zb.Fm;n.next();){var r=n.value;if(r.visible&&(r=r.ke(t,i,e),null!==r))return r}return null},Ge.prototype.findObjectsAt=Ge.prototype.ys=function(t,i,e,n){void 0===i&&(i=null),void 0===e&&(e=null),n instanceof l||n instanceof f||(n=new f(Mr)),pn(this);for(var r=this.Zb.Fm;r.next();){var o=r.value;o.visible&&o.ys(t,i,e,n)}return n},Ge.prototype.findObjectsIn=Ge.prototype.Nj=function(t,i,e,n,r){void 0===i&&(i=null),void 0===e&&(e=null),void 0===n&&(n=!1),r instanceof l||r instanceof f||(r=new f(Mr)),pn(this);for(var o=this.Zb.Fm;o.next();){var s=o.value;s.visible&&s.Nj(t,i,e,n,r)}return r},Ge.prototype.dz=function(t,i,e,n,r,o){var s=new f(Mr);pn(this);for(var a=this.Zb.Fm;a.next();){var h=a.value;h.visible&&h.dz(t,i,e,n,s,r,o)}return s},Ge.prototype.findObjectsNear=Ge.prototype.ym=function(t,i,e,n,r,o){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=!0),!1!==r&&!0!==r&&((r instanceof l||r instanceof f)&&(o=r),r=!0),o instanceof l||o instanceof f||(o=new f(Mr)),pn(this);for(var s=this.Zb.Fm;s.next();){var a=s.value;a.visible&&a.ym(t,i,e,n,r,o)}return o},Ge.prototype.acceptEvent=function(t){var i=this.Jc;return this.Jc=this.Ob,this.Ob=i,rn(this,this,t,i,t instanceof MouseEvent),i},Ge.prototype.kH=function(t){if(!this.Y.isEnabled)return!1;var i=this.Y.Ob;switch(rn(this.Y,this.Y,t,i,!1),i.key=String.fromCharCode(t.which),i.Wk=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return this.Y.doKeyDown(),187!==t.which&&189!==t.which&&48!==t.which&&107!==t.which&&109!==t.which&&61!==t.which&&173!==t.which||!0!==t.ctrlKey?an(i,t):(t.cancelBubble=!0,t.preventDefault(),t.stopPropagation(),!1)},Ge.prototype.lH=function(t){if(!this.Y.isEnabled)return!1;var i=this.Y.Ob;switch(rn(this.Y,this.Y,t,i,!1),i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 93:t.preventDefault()}return this.Y.doKeyUp(),an(i,t)},Ge.prototype.$p=function(t){var i=this.ib;if(null===i)return new m(0,0);var e=this.Ab,n=this.zb,i=i.getBoundingClientRect(),e=t.clientX-e/i.width*i.left;return t=t.clientY-n/i.height*i.top,null!==this.Sd?(t=new m(e,t),x(t,this.Sd),t):new m(e,t)},Ge.prototype.invalidateDocumentBounds=Ge.prototype.pc=function(){this.ei||(this.ei=!0,this.de(!0))},Ge.prototype.redraw=Ge.prototype.Sz=function(){this.sc||this.vd||(this.ma(),bn(this),xn(this),this.pc(),this.bf())},Ge.prototype.isUpdateRequested=function(){return this.Ef},Ge.prototype.delayInitialization=Ge.prototype.oG=function(t){void 0===t&&(t=null);var i=this.Lb,e=i.isEnabled;i.Mi(),i.isEnabled=!1,fn(this),this.lf=!1,i.isEnabled=e,null!==t&&Ul.setTimeout(t,1)
},Ge.prototype.requestUpdate=Ge.prototype.de=function(t){if(void 0===t&&(t=!1),!0!==this.Ef&&!(this.sc||!1===t&&this.vd)){this.Ef=!0;var i=this;requestAnimationFrame(function(){i.Ef&&i.bf()})}},Ge.prototype.maybeUpdate=Ge.prototype.bf=function(){(!this.un||this.Ef)&&(this.un&&(this.un=!1),fn(this))},Ge.prototype.xf=function(t,i,e,n){var r=this.nh;if(this.uk||r.Vg)for(r=0;i>r;r++)t[r].xf(e,n)},Ge.prototype.We=function(t,i){void 0===t&&(t=this.Gg),void 0===i&&(i=null),null===this.Jb&&Ul.k("No div specified");var e=this.ib;if(null===e&&Ul.k("No canvas specified"),this.nh.bd)0===this.ha.Le&&this.de(!0);else{wn(this);var n=t!==this.Gg,r=this.Zb.n,o=r.length,s=this;if(this.xf(r,o,s),n)Je(this,t),xn(this);else if(!this.Md&&null===i)return;var a=this.Ma,h=this.$b,l=Math.round(a.x*h)/h,u=Math.round(a.y*h)/h,o=this.Sd;for(o.reset(),1!==h&&o.scale(h),0===a.x&&0===a.y||o.translate(-l,-u),a=this.nf,Ul.Dm?(e.width=e.width,Je(this,t),t.scale(a,a)):(t.setTransform(1,0,0,1,0,0),t.scale(a,a),t.clearRect(0,0,this.Ab,this.zb)),t.miterLimit=9,t.setTransform(1,0,0,1,0,0),t.scale(a,a),t.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),e=null!==i?function(e){var n=t,r=i;if(e.visible&&0!==e.Ic){1!==e.Ic&&(n.globalAlpha=e.Ic);var o=e.Uu;o.length=0;var a=s.scale;e=e.Db.n;for(var h=e.length,l=0;h>l;l++){var u=e[l];if((vs(u)||wo(u))&&!r.contains(u)){if(u instanceof Bs){var f=u;if(f.dc&&o.push(f),!1===f.hg)continue}f=u.ba,1<f.width*a||1<f.height*a?u.We(n,s):fs(u,n)}}n.globalAlpha=1}}:function(i){i.We(t,s)},gn(this,t),o=r.length,a=0;o>a;a++)e(r[a]);this.sk?this.sk.wl(this)&&this.Zw():this.$p=function(){return new m(0,0)},n?(Je(this),xn(this)):this.Md=this.uk=!1}},Ge.prototype.getRenderingHint=Ge.prototype.$v=function(t){return this.Qg[t]},Ge.prototype.setRenderingHint=Ge.prototype.iI=function(t,i){this.Qg[t]=i,this.Sz()},Ge.prototype.resetRenderingHints=Ge.prototype.qE=function(){this.Qg=new n,this.Qg.drawShadows=!0,this.Qg.textGreeking=!0,this.Qg.viewportOptimizations=Ul.cH?!1:!0,this.Qg.temporaryPixelRatio=!0,this.Qg.pictureRatioOptimization=!0},Ge.prototype.getInputOption=Ge.prototype.gz=function(t){return this.dq[t]},Ge.prototype.setInputOption=function(t,i){this.dq[t]=i},Ge.prototype.resetInputOptions=Ge.prototype.pE=function(){this.dq=new n,this.dq.extraTouchArea=10,this.dq.extraTouchThreshold=10},Ge.prototype.setProperties=function(t){Ul.ot(this,t)},Ge.prototype.ma=function(t){if(void 0===t&&(t=null),null===t)this.Md=!0,this.de();else{var i=this.ob;null!==t&&t.J()&&i.sg(t)&&(this.Md=!0,this.de())}for(i=this.Ul.i;i.next();)i.value.ma(t)},Ge.prototype.nz=function(t,i){if(!0!==this.Md){this.Md=!0;var e=!0===this.$v("temporaryPixelRatio");if(!0===this.$v("viewportOptimizations")&&this.yE!==If&&this.xE.Tv(0,0,0,0)&&i.width===t.width&&i.height===t.height){var n=this.scale,r=Ul.Sf(),o=Math.max(t.x,i.x),s=Math.max(t.y,i.y),a=Math.min(t.x+t.width,i.x+i.width),h=Math.min(t.y+t.height,i.y+i.height);if(r.x=o,r.y=s,r.width=Math.max(0,a-o)*n,r.height=Math.max(0,h-s)*n,0<r.width&&0<r.height){if(!this.vd&&(this.Ef=!1,null!==this.Jb)){this.vd=!0,pn(this),0!==this.El.count&&(mn(this),pn(this)),this.Cd.J()||Zn(this,this.kg());var l=this.ib;if(null!==l){var u=this.nf,s=this.Ab*u,a=this.zb*u,o=this.scale*u,n=Math.round(Math.round(i.x*o)-Math.round(t.x*o)),o=Math.round(Math.round(i.y*o)-Math.round(t.y*o)),h=this.Dx,f=this.dB;h.width!==s&&(h.width=s),h.height!==a&&(h.height=a),f.clearRect(0,0,s,a);var h=190*this.nf,c=70*this.nf,p=Math.max(n,0),d=Math.max(o,0),y=Math.floor(s-p),v=Math.floor(a-d);f.GD=!1,f.drawImage(l.Dd,p,d,y,v,0,0,y,v),this.sk.wl(this)&&f.clearRect(0,0,h,c);var l=Ul.eb(),f=Ul.eb(),v=Math.abs(n),y=Math.abs(o),g=0===p?0:s-v,p=Ul.fc(g,0),v=Ul.fc(v+g,a);f.push(new k(Math.min(p.x,v.x),Math.min(p.y,v.y),Math.abs(p.x-v.x),Math.abs(p.y-v.y)));var m=this.Sd;m.reset(),m.scale(u,u),1!==this.$b&&m.scale(this.$b),u=this.Ma,(0!==u.x||0!==u.y)&&isFinite(u.x)&&isFinite(u.y)&&m.translate(-u.x,-u.y),x(p,m),x(v,m),l.push(new k(Math.min(p.x,v.x),Math.min(p.y,v.y),Math.abs(p.x-v.x),Math.abs(p.y-v.y))),g=0===d?0:a-y,p.m(0,g),v.m(s,y+g),f.push(new k(Math.min(p.x,v.x),Math.min(p.y,v.y),Math.abs(p.x-v.x),Math.abs(p.y-v.y))),x(p,m),x(v,m),l.push(new k(Math.min(p.x,v.x),Math.min(p.y,v.y),Math.abs(p.x-v.x),Math.abs(p.y-v.y))),this.sk.wl(this)&&(s=n>0?0:-n,a=o>0?0:-o,p.m(s,a),v.m(h+s,c+a),f.push(new k(Math.min(p.x,v.x),Math.min(p.y,v.y),Math.abs(p.x-v.x),Math.abs(p.y-v.y))),x(p,m),x(v,m),l.push(new k(Math.min(p.x,v.x),Math.min(p.y,v.y),Math.abs(p.x-v.x),Math.abs(p.y-v.y)))),Ul.v(p),Ul.v(v),un(this,!1),yn(this,l,f,n,o),Ul.ra(l),Ul.ra(f),this.vd=!1}}}else this.bf();Ul.ic(r),e&&(this.im=1,this.bf(),Ue(this,!0))}else e?(this.im=1,this.bf(),Ue(this,!0)):this.bf();for(e=this.Ul.i;e.next();)e.value.nz()}},Ge.prototype.add=Ge.prototype.add=function(t){Ul.C(t,es,Ge,"add:part");var i=t.g;if(i!==this){null!==i&&Ul.k("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+i.toString()),this.Vm&&(t.wk="Tool");var e=t.wf,i=this.ws(e);null===i&&(i=this.ws("")),null===i&&Ul.k('Cannot add a Part when unable find a Layer named "'+e+'" and there is no default Layer'),t.layer!==i&&(e=i.Eo(99999999,t,t.g===this),e>=0&&this.Dc(Ju,"parts",i,null,t,null,e),i.Ac||this.pc(),t.H(Ec),e=t.Rs,null!==e&&e(t,null,i))}},Ge.prototype.Eo=function(t){if(t instanceof Ms){if(this.Rn.add(t),t instanceof xa){var i=t.Ra;null===i?this.Ik.add(t):i.Pn.add(t),i=t.Qb,null!==i&&(i.g=this)}}else t instanceof Bs?this.Nn.add(t):t instanceof ks||this.Db.add(t);var e=this;ao(t,function(t){zn(e,t)}),t.Pb&&t.R(),i=t.data,null!==i&&(t instanceof ks||(t instanceof Bs?this.lk.add(i,t):this.$h.add(i,t)),ao(t,function(t){Ln(e,t)})),!0!==Jr(t)&&!0!==ps(t)||this.Xf.add(t),us(t,!0,this),ws(t)?(t.ba.J()&&this.ma(hs(t,t.ba)),this.pc()):t.Ea()&&t.ba.J()&&this.ma(hs(t,t.ba)),this.de()},Ge.prototype.Fe=function(t){if(t.ls(),t instanceof Ms){if(this.Rn.remove(t),t instanceof xa){var i=t.Ra;null===i?this.Ik.remove(t):i.Pn.remove(t),i=t.Qb,null!==i&&(i.g=null)}}else t instanceof Bs?this.Nn.remove(t):t instanceof ks||this.Db.remove(t);var e=this;ao(t,function(t){qn(e,t)}),i=t.data,null!==i&&(t instanceof ks||(t instanceof Bs?this.lk.remove(i):this.$h.remove(i)),ao(t,function(t){Fn(e,t)})),this.Xf.remove(t),ws(t)?(t.ba.J()&&this.ma(hs(t,t.ba)),this.pc()):t.Ea()&&t.ba.J()&&this.ma(hs(t,t.ba)),this.de()},Ge.prototype.remove=Ge.prototype.remove=function(t){Ul.C(t,es,Ge,"remove:part"),t.Za=!1,t.Wg=!1;var i=t.layer;if(null!==i&&i.g===this){t.H(Ic),t.xm();var e=i.Fe(-1,t,!1);e>=0&&this.Dc(Wu,"parts",i,t,null,e,null),e=t.Rs,null!==e&&e(t,i,null)}},Ge.prototype.removeParts=Ge.prototype.Wz=function(t,i){if(Ul.isArray(t))for(var e=Ul.qb(t),n=0;e>n;n++){var r=Ul.fb(t,n);i&&!r.canDelete()||this.remove(r)}else for(r=new f(es),r.Td(t),e=r.i;e.next();)r=e.value,i&&!r.canDelete()||this.remove(r)},Ge.prototype.copyParts=Ge.prototype.to=function(t,i,e){return this.Eb.to(t,i,e)},Ge.prototype.moveParts=Ge.prototype.moveParts=function(t,i,e){Ul.C(i,m,Ge,"moveParts:offset");var n=this.tb;if(null!==n){n=n.Ed,null===n&&(n=new Ni,n.Ec(this));var r=new g(es,Object);if(null!==t)t=t.i;else{for(t=this.Sj;t.next();)Li(n,r,t.value,e);for(t=this.yg;t.next();)Li(n,r,t.value,e);t=this.links}for(;t.next();)Li(n,r,t.value,e);n.moveParts(r,i,e)}},Ge.prototype.addLayer=Ge.prototype.cs=function(t){Pn(this,t,null),t.Ec(this);var i=this.Zb,e=i.count-1;if(!t.Ac)for(;e>=0&&i.ja(e).Ac;)e--;i.Yd(e+1,t),null!==this.Od&&this.Dc(Ju,"layers",this,null,t,null,e+1),this.ma(),this.pc()},Ge.prototype.addLayerBefore=Ge.prototype.LF=function(t,i){Pn(this,t,i),t.Ec(this);var e=this.Zb,n=e.indexOf(t);n>=0&&(e.remove(t),null!==this.Od&&this.Dc(Wu,"layers",this,t,null,n,null));for(var r=e.count,o=0;r>o;o++)if(e.ja(o)===i){e.Yd(o,t);break}null!==this.Od&&this.Dc(Ju,"layers",this,null,t,null,o),this.ma(),0>n&&this.pc()},Ge.prototype.addLayerAfter=function(t,i){Pn(this,t,i),t.Ec(this);var e=this.Zb,n=e.indexOf(t);n>=0&&(e.remove(t),null!==this.Od&&this.Dc(Wu,"layers",this,t,null,n,null));for(var r=e.count,o=0;r>o;o++)if(e.ja(o)===i){e.Yd(o+1,t);break}null!==this.Od&&this.Dc(Ju,"layers",this,null,t,null,o+1),this.ma(),0>n&&this.pc()},Ge.prototype.removeLayer=function(t){if(Ul.C(t,Ie,Ge,"removeLayer:layer"),t.g!==this&&Ul.k("Cannot remove a Layer from another Diagram: "+t+" of "+t.g),""!==t.name){var i=this.Zb,e=i.indexOf(t);if(i.remove(t)){for(i=t.Db.copy().i;i.next();){var n=i.value,r=n.wf;n.wf=r!==t.name?r:""}null!==this.Od&&this.Dc(Wu,"layers",this,t,null,e,null),this.ma(),this.pc()}}},Ge.prototype.findLayer=Ge.prototype.ws=function(t){for(var i=this.mw;i.next();){var e=i.value;if(e.name===t)return e}return null},Ge.prototype.addChangedListener=Ge.prototype.Jy=function(t){Ul.j(t,"function",Ge,"addChangedListener:listener"),null===this.Ui&&(this.Ui=new l("function")),this.Ui.add(t)},Ge.prototype.removeChangedListener=Ge.prototype.Tz=function(t){Ul.j(t,"function",Ge,"removeChangedListener:listener"),null!==this.Ui&&(this.Ui.remove(t),0===this.Ui.count&&(this.Ui=null))},Ge.prototype.Jv=function(t){if(this.cb||this.ha.ED(t),t.Ad!==Uu&&(this.Rh=!0),null!==this.Ui){var i=this.Ui,e=i.length;if(1===e)(i=i.ja(0))(t);else if(0!==e)for(var n=i.Ke(),r=0;e>r;r++)(i=n[r])(t)}},Ge.prototype.raiseChangedEvent=Ge.prototype.Dc=function(t,i,e,n,r,o,s){void 0===o&&(o=null),void 0===s&&(s=null);var a=new ii;a.g=this,a.Ad=t,a.propertyName=i,a.object=e,a.oldValue=n,a.zg=o,a.newValue=r,a.xg=s,this.Jv(a)},Ge.prototype.raiseChanged=Ge.prototype.h=function(t,i,e,n,r){this.Dc(Yu,t,this,i,e,n,r)},Ul.u(Ge,{Lb:"animationManager"},function(){return this.nh}),Ul.u(Ge,{ha:"undoManager"},function(){return this.Od.ha}),Ul.defineProperty(Ge,{cb:"skipsUndoManager"},function(){return this.qi},function(t){Ul.j(t,"boolean",Ge,"skipsUndoManager"),this.qi=t,this.Od.qi=t}),Ul.defineProperty(Ge,{az:"delaysLayout"},function(){return this.zx},function(t){this.zx=t}),Ge.prototype.pm=function(t,i){if(null!==t&&t.g===this){var e=t.Ad;if(e===Yu){var n=t.object,e=t.propertyName,r=t.ta(i);Ul.Oa(n,e,r),n instanceof Mr&&(n=n.T,null!==n&&n.Zd()),this.Rh=!0}else if(e===Ju){if(r=t.object,e=t.xg,n=t.newValue,r instanceof to)if("number"==typeof e&&n instanceof Mr){var o=r;i?o.Fe(e):o.Yd(e,n),n=r.T,null!==n&&n.Zd()}else"number"==typeof e&&n instanceof ko&&(o=r,i?n.ae?o.oE(e):o.kE(e):(e=n.ae?o.gd(n.index):o.fd(n.index),e.qs(n)));else r instanceof Ie?(o=!0===t.zg,"number"==typeof e&&n instanceof es&&(i?(n.Zd(),r.Fe(o?e:-1,n,o)):r.Eo(e,n,o))):r instanceof Ge?"number"==typeof e&&n instanceof Ie&&(r=n,i?this.Zb.jd(e):(r.Ec(this),this.Zb.Yd(e,r))):Ul.k("unknown ChangedEvent.Insert object: "+t.toString());this.Rh=!0}else e===Wu?(r=t.object,e=t.zg,n=t.oldValue,r instanceof to?"number"==typeof e&&n instanceof Mr?(o=r,i?o.Yd(e,n):o.Fe(e)):"number"==typeof e&&n instanceof ko&&(o=r,i?(e=n.ae?o.gd(n.index):o.fd(n.index),e.qs(n)):n.ae?o.oE(e):o.kE(e)):r instanceof Ie?(o=!0===t.xg,"number"==typeof e&&n instanceof es&&(i?r.Eo(e,n,o):(n.Zd(),r.Fe(o?e:-1,n,o)))):r instanceof Ge?"number"==typeof e&&n instanceof Ie&&(r=n,i?(r.Ec(this),this.Zb.Yd(e,r)):this.Zb.jd(e)):Ul.k("unknown ChangedEvent.Remove object: "+t.toString()),this.Rh=!0):e!==Uu&&Ul.k("unknown ChangedEvent: "+t.toString())}},Ge.prototype.startTransaction=Ge.prototype.Wb=function(t){return this.ha.Wb(t)},Ge.prototype.commitTransaction=Ge.prototype.Wd=function(t){return this.ha.Wd(t)},Ge.prototype.rollbackTransaction=Ge.prototype.ap=function(){return this.ha.ap()},Ge.prototype.updateAllTargetBindings=Ge.prototype.CI=function(t){void 0===t&&(t="");for(var i=this.Sj;i.next();)i.value.Nb(t);for(i=this.yg;i.next();)i.value.Nb(t);for(i=this.links;i.next();)i.value.Nb(t)},Ge.prototype.updateAllRelationshipsFromData=function(){for(var t=this.Sj;t.next();)t.value.updateRelationshipsFromData();for(t=this.yg;t.next();)t.value.updateRelationshipsFromData();for(t=this.links;t.next();)t.value.updateRelationshipsFromData()},Ge.prototype.dt=function(t,i,e){void 0===e&&(e=!1),e||bn(this),xn(this);var n=this.Qb;null===n||!n.jw||e||t.width===i.width&&t.height===i.height||n.H(),n=this.Va,!0===this.Jl&&n instanceof Pe&&(this.N.da=this.XE(this.N.ff),n.doMouseMove()),this.nz(t,i),Sn(this),this.za("ViewportBoundsChanged",e?Ul.mh:null,t)},Ge.prototype.clearSelection=Ge.prototype.Lv=function(){var t=0<this.selection.count;t&&this.za("ChangingSelection"),Cn(this),t&&this.za("ChangedSelection")},Ge.prototype.select=Ge.prototype.select=function(t){null!==t&&(Ul.C(t,es,Ge,"select:part"),t.layer.g===this&&(!t.Za||1<this.selection.count)&&(this.za("ChangingSelection"),Cn(this),t.Za=!0,this.za("ChangedSelection")))},Ge.prototype.selectCollection=Ge.prototype.CE=function(t){if(this.za("ChangingSelection"),Cn(this),Ul.isArray(t))for(var i=Ul.qb(t),e=0;i>e;e++){var n=Ul.fb(t,e);n instanceof es||Ul.k("Diagram.selectCollection given something that is not a Part: "+n),n.Za=!0}else for(t=t.i;t.next();)n=t.value,n instanceof es||Ul.k("Diagram.selectCollection given something that is not a Part: "+n),n.Za=!0;this.za("ChangedSelection")},Ge.prototype.clearHighlighteds=Ge.prototype.WC=function(){var t=this.bw;if(0<t.count){for(var i=t.Ke(),e=i.length,n=0;e>n;n++)i[n].Wg=!1;t.La(),t.clear(),t.freeze()}},Ge.prototype.highlight=function(t){null!==t&&t.layer.g===this&&(Ul.C(t,es,Ge,"highlight:part"),!t.Wg||1<this.bw.count)&&(this.WC(),t.Wg=!0)},Ge.prototype.highlightCollection=function(t){if(this.WC(),Ul.isArray(t))for(var i=Ul.qb(t),e=0;i>e;e++){var n=Ul.fb(t,e);n instanceof es||Ul.k("Diagram.highlightCollection given something that is not a Part: "+n),n.Wg=!0}else for(t=t.i;t.next();)n=t.value,n instanceof es||Ul.k("Diagram.highlightCollection given something that is not a Part: "+n),n.Wg=!0},Ge.prototype.scroll=Ge.prototype.scroll=function(t,i,e){void 0===e&&(e=1);var n="up"===i||"down"===i,r=0;"pixel"===t?r=e:"line"===t?r=e*(n?this.mt:this.lt):"page"===t?(t=n?this.ob.height:this.ob.width,t*=this.scale,0!==t&&(r=Math.max(t-(n?this.mt:this.lt),0),r*=e)):Ul.k("scrolling unit must be 'pixel', 'line', or 'page', not: "+t),r/=this.scale,e=this.position.copy(),"up"===i?e.y=this.position.y-r:"down"===i?e.y=this.position.y+r:"left"===i?e.x=this.position.x-r:"right"===i?e.x=this.position.x+r:Ul.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+i),this.position=e},Ge.prototype.scrollToRect=Ge.prototype.cI=function(t){var i=this.ob;i.Kj(t)||(t=t.Ok,t.x-=i.width/2,t.y-=i.height/2,this.position=t)},Ge.prototype.centerRect=function(t){var i=this.ob;t=t.Ok,t.x-=i.width/2,t.y-=i.height/2,this.position=t},Ge.prototype.transformDocToView=Ge.prototype.VE=function(t){var i=this.Sd;i.reset(),1!==this.$b&&i.scale(this.$b);var e=this.Ma;return(0!==e.x||0!==e.y)&&isFinite(e.x)&&isFinite(e.y)&&i.translate(-e.x,-e.y),t.copy().transform(this.Sd)},Ge.prototype.transformViewToDoc=Ge.prototype.XE=function(t){var i=this.Sd;i.reset(),1!==this.$b&&i.scale(this.$b);var e=this.Ma;return(0!==e.x||0!==e.y)&&isFinite(e.x)&&isFinite(e.y)&&i.translate(-e.x,-e.y),x(t.copy(),this.Sd)};var Nf;Ge.None=Nf=Ul.s(Ge,"None",0);var Df;Ge.Uniform=Df=Ul.s(Ge,"Uniform",1);var Af;Ge.UniformToFill=Af=Ul.s(Ge,"UniformToFill",2);var Lf;Ge.CycleAll=Lf=Ul.s(Ge,"CycleAll",10);var Ff;Ge.CycleNotDirected=Ff=Ul.s(Ge,"CycleNotDirected",11);var zf;Ge.CycleNotDirectedFast=zf=Ul.s(Ge,"CycleNotDirectedFast",12);var Bf;Ge.CycleNotUndirected=Bf=Ul.s(Ge,"CycleNotUndirected",13);var qf;Ge.CycleDestinationTree=qf=Ul.s(Ge,"CycleDestinationTree",14);var Of;Ge.CycleSourceTree=Of=Ul.s(Ge,"CycleSourceTree",15);var Ef;Ge.DocumentScroll=Ef=Ul.s(Ge,"DocumentScroll",1);var If;Ge.InfiniteScroll=If=Ul.s(Ge,"InfiniteScroll",2),Ul.defineProperty(Ge,{DI:"validCycle"},function(){return this.sv},function(t){var i=this.sv;i!==t&&(Ul.rb(t,Ge,Ge,"validCycle"),this.sv=t,this.h("validCycle",i,t))}),Ul.defineProperty(Ge,{ow:"linkSpacing"},function(){return this.gj},function(t){var i=this.gj;i!==t&&(Ul.ze(t,Ge,"linkSpacing"),0>t&&Ul.wa(t,">= zero",Ge,"linkSpacing"),this.gj=t,this.h("linkSpacing",i,t))}),Ul.u(Ge,{mw:"layers"},function(){return this.Zb.i}),Ul.defineProperty(Ge,{uf:"isModelReadOnly"},function(){var t=this.Od;return null===t?!1:t.nb},function(t){var i=this.Od;null!==i&&(i.nb=t)}),Ul.defineProperty(Ge,{nb:"isReadOnly"},function(){return this.vk},function(t){var i=this.vk;i!==t&&(Ul.j(t,"boolean",Ge,"isReadOnly"),this.vk=t,this.h("isReadOnly",i,t))}),Ul.defineProperty(Ge,{isEnabled:"isEnabled"},function(){return this.Ne},function(t){var i=this.Ne;i!==t&&(Ul.j(t,"boolean",Ge,"isEnabled"),this.Ne=t,this.h("isEnabled",i,t))}),Ul.defineProperty(Ge,{My:"allowClipboard"},function(){return this.Gt},function(t){var i=this.Gt;i!==t&&(Ul.j(t,"boolean",Ge,"allowClipboard"),this.Gt=t,this.h("allowClipboard",i,t))}),Ul.defineProperty(Ge,{Ij:"allowCopy"},function(){return this.Xj},function(t){var i=this.Xj;i!==t&&(Ul.j(t,"boolean",Ge,"allowCopy"),this.Xj=t,this.h("allowCopy",i,t))}),Ul.defineProperty(Ge,{lm:"allowDelete"},function(){return this.Yj},function(t){var i=this.Yj;i!==t&&(Ul.j(t,"boolean",Ge,"allowDelete"),this.Yj=t,this.h("allowDelete",i,t))}),Ul.defineProperty(Ge,{Av:"allowDragOut"},function(){return this.Ht},function(t){var i=this.Ht;i!==t&&(Ul.j(t,"boolean",Ge,"allowDragOut"),this.Ht=t,this.h("allowDragOut",i,t))}),Ul.defineProperty(Ge,{MC:"allowDrop"},function(){return this.It},function(t){var i=this.It;i!==t&&(Ul.j(t,"boolean",Ge,"allowDrop"),this.It=t,this.h("allowDrop",i,t))}),Ul.defineProperty(Ge,{Ev:"allowTextEdit"},function(){return this.gk},function(t){var i=this.gk;i!==t&&(Ul.j(t,"boolean",Ge,"allowTextEdit"),this.gk=t,this.h("allowTextEdit",i,t))}),Ul.defineProperty(Ge,{Bv:"allowGroup"},function(){return this.Zj},function(t){var i=this.Zj;i!==t&&(Ul.j(t,"boolean",Ge,"allowGroup"),this.Zj=t,this.h("allowGroup",i,t))}),Ul.defineProperty(Ge,{Fv:"allowUngroup"},function(){return this.hk},function(t){var i=this.hk;i!==t&&(Ul.j(t,"boolean",Ge,"allowUngroup"),this.hk=t,this.h("allowUngroup",i,t))}),Ul.defineProperty(Ge,{lo:"allowInsert"},function(){return this.Kt},function(t){var i=this.Kt;i!==t&&(Ul.j(t,"boolean",Ge,"allowInsert"),this.Kt=t,this.h("allowInsert",i,t))}),Ul.defineProperty(Ge,{gs:"allowLink"},function(){return this.$j},function(t){var i=this.$j;i!==t&&(Ul.j(t,"boolean",Ge,"allowLink"),this.$j=t,this.h("allowLink",i,t))}),Ul.defineProperty(Ge,{mm:"allowRelink"},function(){return this.bk},function(t){var i=this.bk;i!==t&&(Ul.j(t,"boolean",Ge,"allowRelink"),this.bk=t,this.h("allowRelink",i,t))}),Ul.defineProperty(Ge,{Nk:"allowMove"},function(){return this.ak},function(t){var i=this.ak;i!==t&&(Ul.j(t,"boolean",Ge,"allowMove"),this.ak=t,this.h("allowMove",i,t))}),Ul.defineProperty(Ge,{Cv:"allowReshape"},function(){return this.ck},function(t){var i=this.ck;i!==t&&(Ul.j(t,"boolean",Ge,"allowReshape"),this.ck=t,this.h("allowReshape",i,t))}),Ul.defineProperty(Ge,{hs:"allowResize"},function(){return this.dk},function(t){var i=this.dk;i!==t&&(Ul.j(t,"boolean",Ge,"allowResize"),this.dk=t,this.h("allowResize",i,t))}),Ul.defineProperty(Ge,{Dv:"allowRotate"},function(){return this.ek},function(t){var i=this.ek;i!==t&&(Ul.j(t,"boolean",Ge,"allowRotate"),this.ek=t,this.h("allowRotate",i,t))}),Ul.defineProperty(Ge,{of:"allowSelect"},function(){return this.fk},function(t){var i=this.fk;i!==t&&(Ul.j(t,"boolean",Ge,"allowSelect"),this.fk=t,this.h("allowSelect",i,t))}),Ul.defineProperty(Ge,{NC:"allowUndo"},function(){return this.Lt},function(t){var i=this.Lt;i!==t&&(Ul.j(t,"boolean",Ge,"allowUndo"),this.Lt=t,this.h("allowUndo",i,t))}),Ul.defineProperty(Ge,{Gv:"allowZoom"},function(){return this.Nt},function(t){var i=this.Nt;i!==t&&(Ul.j(t,"boolean",Ge,"allowZoom"),this.Nt=t,this.h("allowZoom",i,t))}),Ul.defineProperty(Ge,{lz:"hasVerticalScrollbar"},function(){return this.qu},function(t){var i=this.qu;i!==t&&(Ul.j(t,"boolean",Ge,"hasVerticalScrollbar"),this.qu=t,bn(this),this.ma(),this.h("hasVerticalScrollbar",i,t),Qe(this,!1))}),Ul.defineProperty(Ge,{kz:"hasHorizontalScrollbar"},function(){return this.pu},function(t){var i=this.pu;i!==t&&(Ul.j(t,"boolean",Ge,"hasHorizontalScrollbar"),this.pu=t,bn(this),this.ma(),this.h("hasHorizontalScrollbar",i,t),Qe(this,!1))}),Ul.defineProperty(Ge,{Re:"allowHorizontalScroll"},function(){return this.Jt},function(t){var i=this.Jt;i!==t&&(Ul.j(t,"boolean",Ge,"allowHorizontalScroll"),this.Jt=t,this.h("allowHorizontalScroll",i,t),Qe(this,!1))}),Ul.defineProperty(Ge,{Se:"allowVerticalScroll"},function(){return this.Mt},function(t){var i=this.Mt;i!==t&&(Ul.j(t,"boolean",Ge,"allowVerticalScroll"),this.Mt=t,this.h("allowVerticalScroll",i,t),Qe(this,!1))}),Ul.defineProperty(Ge,{lt:"scrollHorizontalLineChange"},function(){return this.$u},function(t){var i=this.$u;i!==t&&(Ul.j(t,"number",Ge,"scrollHorizontalLineChange"),0>t&&Ul.wa(t,">= 0",Ge,"scrollHorizontalLineChange"),this.$u=t,this.h("scrollHorizontalLineChange",i,t))}),Ul.defineProperty(Ge,{mt:"scrollVerticalLineChange"},function(){return this.av},function(t){var i=this.av;i!==t&&(Ul.j(t,"number",Ge,"scrollVerticalLineChange"),0>t&&Ul.wa(t,">= 0",Ge,"scrollVerticalLineChange"),this.av=t,this.h("scrollVerticalLineChange",i,t))}),Ul.defineProperty(Ge,{N:"lastInput"},function(){return this.Ob},function(t){this.Ob=t}),Ul.defineProperty(Ge,{wc:"firstInput"},function(){return this.nk},function(t){this.nk=t}),Ul.defineProperty(Ge,{ac:"currentCursor"},function(){return this.sx},function(t){""===t&&(t=this.Pp),this.sx!==t&&(Ul.j(t,"string",Ge,"currentCursor"),null!==this.ib&&(this.sx=t,this.ib.style.cursor=t,this.Jb.style.cursor=t))}),Ul.defineProperty(Ge,{mJ:"defaultCursor"},function(){return this.Pp},function(t){""===t&&(t="auto");var i=this.Pp;i!==t&&(Ul.j(t,"string",Ge,"defaultCursor"),this.Pp=t,this.h("defaultCursor",i,t))}),Ul.defineProperty(Ge,{AJ:"hasGestureZoom"},function(){return this.yn},function(t){var i=this.yn;i!==t&&(Ul.j(t,"boolean",Ge,"hasGestureZoom"),this.yn=t,this.h("hasGestureZoom",i,t))}),Ul.defineProperty(Ge,{click:"click"},function(){return this.Wh},function(t){var i=this.Wh;i!==t&&(null!==t&&Ul.j(t,"function",Ge,"click"),this.Wh=t,this.h("click",i,t))}),Ul.defineProperty(Ge,{ts:"doubleClick"},function(){return this.ci},function(t){var i=this.ci;i!==t&&(null!==t&&Ul.j(t,"function",Ge,"doubleClick"),this.ci=t,this.h("doubleClick",i,t))}),Ul.defineProperty(Ge,{Uy:"contextClick"},function(){return this.Yh},function(t){var i=this.Yh;i!==t&&(null!==t&&Ul.j(t,"function",Ge,"contextClick"),this.Yh=t,this.h("contextClick",i,t))}),Ul.defineProperty(Ge,{Fz:"mouseOver"},function(){return this.mi},function(t){var i=this.mi;i!==t&&(null!==t&&Ul.j(t,"function",Ge,"mouseOver"),this.mi=t,this.h("mouseOver",i,t))}),Ul.defineProperty(Ge,{Ez:"mouseHover"},function(){return this.li},function(t){var i=this.li;i!==t&&(null!==t&&Ul.j(t,"function",Ge,"mouseHover"),this.li=t,this.h("mouseHover",i,t))}),Ul.defineProperty(Ge,{Dz:"mouseHold"},function(){return this.ki},function(t){var i=this.ki;i!==t&&(null!==t&&Ul.j(t,"function",Ge,"mouseHold"),this.ki=t,this.h("mouseHold",i,t))}),Ul.defineProperty(Ge,{EH:"mouseDragOver"},function(){return this.Nu},function(t){var i=this.Nu;i!==t&&(null!==t&&Ul.j(t,"function",Ge,"mouseDragOver"),this.Nu=t,this.h("mouseDragOver",i,t))}),Ul.defineProperty(Ge,{Cz:"mouseDrop"},function(){return this.ji},function(t){var i=this.ji;i!==t&&(null!==t&&Ul.j(t,"function",Ge,"mouseDrop"),this.ji=t,this.h("mouseDrop",i,t))}),Ul.defineProperty(Ge,{lA:"toolTip"},function(){return this.ti},function(t){var i=this.ti;i!==t&&(null!==t&&Ul.C(t,ks,Ge,"toolTip"),this.ti=t,this.h("toolTip",i,t))}),Ul.defineProperty(Ge,{contextMenu:"contextMenu"},function(){return this.Zh},function(t){var i=this.Zh;i!==t&&(null!==t&&Ul.C(t,ks,Ge,"contextMenu"),this.Zh=t,this.h("contextMenu",i,t))}),Ul.defineProperty(Ge,{Eb:"commandHandler"},function(){return this.ix},function(t){var i=this.ix;i!==t&&(Ul.C(t,Mi,Ge,"commandHandler"),null!==t.g&&Ul.k("Cannot share CommandHandlers between Diagrams: "+t.toString()),null!==i&&i.Ec(null),this.ix=t,t.Ec(this))}),Ul.defineProperty(Ge,{tb:"toolManager"},function(){return this.Fy},function(t){var i=this.Fy;i!==t&&(Ul.C(t,Pe,Ge,"toolManager"),null!==t.g&&Ul.k("Cannot share ToolManagers between Diagrams: "+t.toString()),null!==i&&i.Ec(null),this.Fy=t,t.Ec(this))}),Ul.defineProperty(Ge,{$y:"defaultTool"},function(){return this.yx},function(t){var i=this.yx;i!==t&&(Ul.C(t,Ci,Ge,"defaultTool"),this.yx=t,this.Va===i&&(this.Va=t))}),Ul.defineProperty(Ge,{Va:"currentTool"},function(){return this.ux},function(t){var i=this.ux;if(null!==i)for(i.na&&i.doDeactivate(),i.cancelWaitAfter(),i.doStop(),i=this.Ul.i;i.next();)i.value.ma();null===t&&(t=this.$y),null!==t&&(Ul.C(t,Ci,Ge,"currentTool"),this.ux=t,t.Ec(this),t.doStart())}),Ul.u(Ge,{selection:"selection"},function(){return this.dv}),Ul.defineProperty(Ge,{wH:"maxSelectionCount"},function(){return this.Iu},function(t){var i=this.Iu;if(i!==t)if(Ul.j(t,"number",Ge,"maxSelectionCount"),t>=0&&!isNaN(t)){if(this.Iu=t,this.h("maxSelectionCount",i,t),!this.ha.gb&&(t=this.selection.count-t,t>0)){this.za("ChangingSelection");for(var i=this.selection.Ke(),e=0;t>e;e++)i[e].Za=!1;this.za("ChangedSelection")}}else Ul.wa(t,">= 0",Ge,"maxSelectionCount")}),Ul.defineProperty(Ge,{HH:"nodeSelectionAdornmentTemplate"},function(){return this.Pu},function(t){var i=this.Pu;i!==t&&(Ul.C(t,ks,Ge,"nodeSelectionAdornmentTemplate"),this.Pu=t,this.h("nodeSelectionAdornmentTemplate",i,t))}),Ul.defineProperty(Ge,{MG:"groupSelectionAdornmentTemplate"},function(){return this.mu},function(t){var i=this.mu;i!==t&&(Ul.C(t,ks,Ge,"groupSelectionAdornmentTemplate"),this.mu=t,this.h("groupSelectionAdornmentTemplate",i,t))}),Ul.defineProperty(Ge,{sH:"linkSelectionAdornmentTemplate"},function(){return this.Du},function(t){var i=this.Du;i!==t&&(Ul.C(t,ks,Ge,"linkSelectionAdornmentTemplate"),this.Du=t,this.h("linkSelectionAdornmentTemplate",i,t))}),Ul.u(Ge,{bw:"highlighteds"},function(){return this.ru}),Ul.defineProperty(Ge,{Rh:"isModified"},function(){var t=this.ha;return t.isEnabled?null!==t.Di?!0:this.Vx&&this.Ig!==t.Ii:this.Vx},function(t){if(this.Vx!==t){Ul.j(t,"boolean",Ge,"isModified"),this.Vx=t;var i=this.ha;!t&&i.isEnabled&&(this.Ig=i.Ii),t||jn(this)}}),Ul.defineProperty(Ge,{ga:"model"},function(){return this.Od},function(t){var i=this.Od;if(i!==t){Ul.C(t,ei,Ge,"model"),this.Va.doCancel(),null!==i&&i.ha!==t.ha&&i.ha.ND&&Ul.k("Do not replace a Diagram.model while a transaction is in progress."),this.Lb.Mi(),this.Lv(),this.lf=!1,this.un=!0,this.Ig=-2,this.Ef=!1;var e=this.vd;this.vd=!0,this.Lb.ml(),null!==i&&(i.Tz(this.GB),i instanceof yi&&Yn(this,i.Qj),Yn(this,i.ah)),this.Od=t,t.Jy(this.FB),En(this,t.ah),t instanceof yi&&Hn(this,t.Qj),t.Tz(this.FB),t.Jy(this.GB),this.vd=e,this.sc||this.ma(),null!==i&&(t.ha.isEnabled=i.ha.isEnabled)}}),Ul.defineProperty(Ge,{Na:null},function(){return this.yB},function(t){this.yB=t}),Ul.defineProperty(Ge,{Iw:"skipsModelSourceBindings"},function(){return this.eC},function(t){this.eC=t}),Ul.defineProperty(Ge,{tt:null},function(){return this.xy},function(t){this.xy=t}),Ge.prototype.clear=Ge.prototype.clear=function(){var t=null;null!==this.ad&&(t=this.ad.T),this.ga.clear();for(var i=this.Zb.length,e=0;i>e;e++)this.Zb.n[e].clear();this.Xf.clear(),this.El.clear(),this.Rn.clear(),this.Ik.clear(),this.Nn.clear(),this.Db.clear(),this.$h.clear(),this.lk.clear(),this.Ml.clear(),this.dv.La(),this.dv.clear(),this.dv.freeze(),this.ru.La(),this.ru.clear(),this.ru.freeze(),_u=this.en=null,tf="",this.eu=new k(0/0,0/0,0/0,0/0).freeze(),null!==t&&(this.add(t),this.Db.remove(t)),this.ma()},Ge.prototype.reset=Ge.prototype.reset=function(){this.sc=!0,this.clear(),this.Zb=new l(Ie),this.qE(),this.pE(),this.Ma=new m(0/0,0/0).freeze(),this.$b=1,this.tu=new m(0/0,0/0).freeze(),this.uu=0/0,this.Ku=1e-4,this.Hu=100,this.wv=new m(0/0,0/0).freeze(),this.ku=new k(0/0,0/0,0/0,0/0).freeze(),this.xl=Nf,this.dn=tu,this.tk=Nf,this.An=tu,this.vu=this.su=iu,this.Qt=new j(16,16,16,16).freeze(),this.yu=!0,this.sv=Lf,this.Pp="auto",this.Zh=this.ti=this.ji=this.Nu=this.ki=this.li=this.mi=this.Yh=this.ci=this.Wh=null,this.vk=!1,this.Yj=this.Xj=this.Gt=this.Ne=!0,this.It=this.Ht=!1,this.Mt=this.Jt=this.qu=this.pu=this.Nt=this.Lt=this.fk=this.ek=this.dk=this.ck=this.ak=this.bk=this.$j=this.Kt=this.hk=this.Zj=this.gk=!0,this.av=this.$u=16,this.Pe=new j(5).freeze(),this.Iu=999999999,this.Nd=null,Ve(this),this.ad=null,this.qi=!0,We(this),this.Qb=new Sa,this.qi=!1,this.ga=new yi,this.lf=!1,this.un=!0,this.sc=this.Ef=!1,this.ma()},Ge.prototype.rebuildParts=Ge.prototype.nl=function(){for(var t=this.Jz.i;t.next();){var i=t.value,e=t.key;(!i.Fd()||i instanceof xa)&&Ul.k('Invalid node template in Diagram.nodeTemplateMap: template for "'+e+'" must be a Node or a simple Part, not a Group or Link: '+i)}for(t=this.iz.i;t.next();)i=t.value,e=t.key,i instanceof xa||Ul.k('Invalid group template in Diagram.groupTemplateMap: template for "'+e+'" must be a Group, not a normal Node or Link: '+i);for(t=this.xz.i;t.next();)i=t.value,e=t.key,i instanceof Bs||Ul.k('Invalid link template in Diagram.linkTemplateMap: template for "'+e+'" must be a Link, not a normal Node or simple Part: '+i);for(t=Ul.eb(),i=this.selection.i;i.next();)(e=i.value.data)&&t.push(e);for(var i=Ul.eb(),n=this.bw.i;n.next();)(e=n.value.data)&&i.push(e);for(e=Ul.eb(),n=this.yg.i;n.next();){var r=n.value;null!==r.data&&(e.push(r.data),e.push(r.location))}for(n=this.links.i;n.next();)r=n.value,null!==r.data&&(e.push(r.data),e.push(r.location));for(n=this.Sj.i;n.next();)r=n.value,null!==r.data&&(e.push(r.data),e.push(r.location));for(n=this.ga,n instanceof yi&&Yn(this,n.Qj),Yn(this,n.ah),En(this,n.ah),n instanceof yi&&Hn(this,n.Qj),n=0;n<t.length;n++)r=this.Oh(t[n]),null!==r&&(r.Za=!0);for(n=0;n<i.length;n++)r=this.Oh(i[n]),null!==r&&(r.Wg=!0);for(n=0;n<e.length;n+=2)r=this.Oh(e[n]),null!==r&&(r.location=e[n+1]);Ul.ra(t),Ul.ra(i),Ul.ra(e)},Ge.prototype.fz=function(t){return this.ga.fz(t)};var Rf=!1,Gf=!1;Ge.prototype.Zv=function(t){var i=this.ga,e="";return i instanceof yi?e=i.Zv(t):i instanceof gi&&(e=i.HG(t)),e};var Vf=!1;Ge.prototype.findPartForKey=Ge.prototype.zG=function(t){return null===t||void 0===t?null:(t=this.ga.qf(t),null===t?null:this.$h.ta(t))},Ge.prototype.findNodeForKey=Ge.prototype.Xe=function(t){return null===t||void 0===t?null:(t=this.ga.qf(t),null===t?null:(t=this.$h.ta(t),t instanceof Ms?t:null))},Ge.prototype.findPartForData=Ge.prototype.Oh=function(t){if(null===t)return null;var i=this.$h.ta(t);return null!==i?i:i=this.lk.ta(t)},Ge.prototype.findNodeForData=Ge.prototype.Xv=function(t){return null===t?null:(t=this.$h.ta(t),t instanceof Ms?t:null)},Ge.prototype.findLinkForData=Ge.prototype.ng=function(t){return null===t?null:this.lk.ta(t)},Ge.prototype.findNodesByExample=function(){for(var t=new f,i=this.Rn.i;i.next();){var e=i.value,n=e.data;if(null!==n)for(var r=0;r<arguments.length;r++){var o=arguments[r];if(Ul.Sa(o)&&Wn(this,n,o)){t.add(e);break}}}return t.i},Ge.prototype.findLinksByExample=function(){for(var t=new f,i=this.Nn.i;i.next();){var e=i.value,n=e.data;if(null!==n)for(var r=0;r<arguments.length;r++){var o=arguments[r];if(Ul.Sa(o)&&Wn(this,n,o)){t.add(e);break}}}return t.i},Ul.defineProperty(Ge,{dK:"nodeTemplate"},function(){return this.ni.ta("")},function(t){var i=this.ni.ta("");i!==t&&(Ul.C(t,es,Ge,"nodeTemplate"),this.ni.add("",t),this.h("nodeTemplate",i,t),this.ha.gb||this.nl())}),Ul.defineProperty(Ge,{Jz:"nodeTemplateMap"},function(){return this.ni},function(t){var i=this.ni;i!==t&&(Ul.C(t,g,Ge,"nodeTemplateMap"),this.ni=t,this.h("nodeTemplateMap",i,t),this.ha.gb||this.nl())}),Ul.defineProperty(Ge,{zJ:"groupTemplate"},function(){return this.ok.ta("")},function(t){var i=this.ok.ta("");i!==t&&(Ul.C(t,xa,Ge,"groupTemplate"),this.ok.add("",t),this.h("groupTemplate",i,t),this.ha.gb||this.nl())}),Ul.defineProperty(Ge,{iz:"groupTemplateMap"},function(){return this.ok},function(t){var i=this.ok;i!==t&&(Ul.C(t,g,Ge,"groupTemplateMap"),this.ok=t,this.h("groupTemplateMap",i,t),this.ha.gb||this.nl())}),Ul.defineProperty(Ge,{SJ:"linkTemplate"},function(){return this.hj.ta("")},function(t){var i=this.hj.ta("");
i!==t&&(Ul.C(t,Bs,Ge,"linkTemplate"),this.hj.add("",t),this.h("linkTemplate",i,t),this.ha.gb||this.nl())}),Ul.defineProperty(Ge,{xz:"linkTemplateMap"},function(){return this.hj},function(t){var i=this.hj;i!==t&&(Ul.C(t,g,Ge,"linkTemplateMap"),this.hj=t,this.h("linkTemplateMap",i,t),this.ha.gb||this.nl())}),Ul.defineProperty(Ge,{fH:null},function(){return this.Jl},function(t){this.Jl=t}),Ul.defineProperty(Ge,{Ge:"isMouseCaptured"},function(){return this.uB},function(i){var e=this.ib;null!==e&&(i?(this.N.bubbles=!1,e.removeEventListener("mousemove",this.Qo,!1),e.removeEventListener("mousedown",this.Po,!1),e.removeEventListener("mouseup",this.So,!1),e.removeEventListener("mousewheel",this.Zg,!1),e.removeEventListener("DOMMouseScroll",this.Zg,!1),e.removeEventListener("mouseout",this.Ro,!1),t.addEventListener("mousemove",this.Qo,!0),t.addEventListener("mousedown",this.Po,!0),t.addEventListener("mouseup",this.So,!0),t.addEventListener("mousewheel",this.Zg,!0),t.addEventListener("DOMMouseScroll",this.Zg,!0),t.addEventListener("mouseout",this.Ro,!0),t.addEventListener("selectstart",this.preventDefault,!1)):(t.removeEventListener("mousemove",this.Qo,!0),t.removeEventListener("mousedown",this.Po,!0),t.removeEventListener("mouseup",this.So,!0),t.removeEventListener("mousewheel",this.Zg,!0),t.removeEventListener("DOMMouseScroll",this.Zg,!0),t.removeEventListener("mouseout",this.Ro,!0),t.removeEventListener("selectstart",this.preventDefault,!1),e.addEventListener("mousemove",this.Qo,!1),e.addEventListener("mousedown",this.Po,!1),e.addEventListener("mouseup",this.So,!1),e.addEventListener("mousewheel",this.Zg,!1),e.addEventListener("DOMMouseScroll",this.Zg,!1),e.addEventListener("mouseout",this.Ro,!1)),this.uB=i)}),Ul.defineProperty(Ge,{position:"position"},function(){return this.Ma},function(t){var i=this.Ma;if(!i.L(t)){Ul.C(t,m,Ge,"position");var e=this.ob.copy();if(t=t.copy(),!this.sc&&null!==this.ib){this.sc=!0;var n=this.scale;_e(this,t,this.Cd,this.Ab/n,this.zb/n,this.dn,!1),this.sc=!1}this.Ma=t.Z(),t=this.Lb,t.bd&&Oe(t,i,this.Ma),this.sc||this.dt(e,this.ob)}}),Ul.defineProperty(Ge,{TG:"initialPosition"},function(){return this.tu},function(t){this.tu.L(t)||(Ul.C(t,m,Ge,"initialPosition"),this.tu=t.Z())}),Ul.defineProperty(Ge,{UG:"initialScale"},function(){return this.uu},function(t){this.uu!==t&&(Ul.j(t,"number",Ge,"initialScale"),this.uu=t)}),Ul.defineProperty(Ge,{Gs:"grid"},function(){return null===this.ad&&Xe(this),this.ad},function(t){var i=this.ad;if(i!==t){null===i&&(Xe(this),i=this.ad),Ul.C(t,to,Ge,"grid"),t.type!==yc&&Ul.k("Diagram.grid must be a Panel of type Panel.Grid");var e=i.S;null!==e&&e.remove(i),this.ad=t,t.name="GRID",null!==e&&e.add(t),Sn(this),this.ma(),this.h("grid",i,t)}}),Ul.u(Ge,{ob:"viewportBounds"},function(){var t=this.CC;if(null===this.ib)return t;var i=this.Ma,e=this.$b;return t.m(i.x,i.y,Math.max(this.Ab,0)/e,Math.max(this.zb,0)/e),t}),Ul.defineProperty(Ge,{uD:"fixedBounds"},function(){return this.ku},function(t){var i=this.ku;i.L(t)||(Ul.C(t,k,Ge,"fixedBounds"),-1/0!==t.width&&1/0!==t.height&&-1/0!==t.height||Ul.k("fixedBounds width/height must not be Infinity"),this.ku=t=t.Z(),this.pc(),this.h("fixedBounds",i,t))}),Ul.defineProperty(Ge,{xE:"scrollMargin"},function(){return this.vy},function(t){"number"==typeof t?t=new j(t):Ul.C(t,j,Ge,"scrollMargin");var i=this.vy;i.L(t)||(this.vy=t=t.Z(),this.pc(),this.h("scrollMargin",i,t))}),Ul.defineProperty(Ge,{yE:"scrollMode"},function(){return this.wy},function(t){var i=this.wy;i!==t&&(Ul.rb(t,Ge,Ge,"scrollMode"),this.wy=t,t===Ef&&Qe(this,!1),this.h("scrollMode",i,t))}),Ul.defineProperty(Ge,{gE:"positionComputation"},function(){return this.oy},function(t){var i=this.oy;i!==t&&(null!==t&&Ul.j(t,"function",Ge,"positionComputation"),this.oy=t,Qe(this,!1),this.h("positionComputation",i,t))}),Ul.defineProperty(Ge,{wE:"scaleComputation"},function(){return this.qy},function(t){var i=this.qy;i!==t&&(null!==t&&Ul.j(t,"function",Ge,"scaleComputation"),this.qy=t,Tn(this,this.scale,this.scale),this.h("scaleComputation",i,t))}),Ul.u(Ge,{Cd:"documentBounds"},function(){return this.eu}),Ul.defineProperty(Ge,{scale:"scale"},function(){return this.$b},function(t){var i=this.$b;Ul.ze(t,Ge,"scale"),i!==t&&Tn(this,i,t)}),Ul.defineProperty(Ge,{no:"autoScale"},function(){return this.xl},function(t){var i=this.xl;i!==t&&(Ul.rb(t,Ge,Ge,"autoScale"),this.xl=t,this.h("autoScale",i,t),t!==Nf&&Qe(this,!1))}),Ul.defineProperty(Ge,{CJ:"initialAutoScale"},function(){return this.tk},function(t){var i=this.tk;i!==t&&(Ul.rb(t,Ge,Ge,"initialAutoScale"),this.tk=t,this.h("initialAutoScale",i,t))}),Ul.defineProperty(Ge,{VG:"initialViewportSpot"},function(){return this.vu},function(t){var i=this.vu;i!==t&&(Ul.C(t,D,Ge,"initialViewportSpot"),t.pd()||Ul.k("initialViewportSpot must be a real Spot: "+t),this.vu=t,this.h("initialViewportSpot",i,t))}),Ul.defineProperty(Ge,{SG:"initialDocumentSpot"},function(){return this.su},function(t){var i=this.su;i!==t&&(Ul.C(t,D,Ge,"initialDocumentSpot"),t.pd()||Ul.k("initialViewportSpot must be a real Spot: "+t),this.su=t,this.h("initialDocumentSpot",i,t))}),Ul.defineProperty(Ge,{Yg:"minScale"},function(){return this.Ku},function(t){Ul.ze(t,Ge,"minScale");var i=this.Ku;i!==t&&(t>0?(this.Ku=t,this.h("minScale",i,t),t>this.scale&&(this.scale=t)):Ul.wa(t,"> 0",Ge,"minScale"))}),Ul.defineProperty(Ge,{Xg:"maxScale"},function(){return this.Hu},function(t){Ul.ze(t,Ge,"maxScale");var i=this.Hu;i!==t&&(t>0?(this.Hu=t,this.h("maxScale",i,t),t<this.scale&&(this.scale=t)):Ul.wa(t,"> 0",Ge,"maxScale"))}),Ul.defineProperty(Ge,{Rm:"zoomPoint"},function(){return this.wv},function(t){this.wv.L(t)||(Ul.C(t,m,Ge,"zoomPoint"),this.wv=t=t.Z())}),Ul.defineProperty(Ge,{Ty:"contentAlignment"},function(){return this.dn},function(t){var i=this.dn;i.L(t)||(Ul.C(t,D,Ge,"contentAlignment"),this.dn=t=t.Z(),this.h("contentAlignment",i,t),Qe(this,!1))}),Ul.defineProperty(Ge,{DJ:"initialContentAlignment"},function(){return this.An},function(t){var i=this.An;i.L(t)||(Ul.C(t,D,Ge,"initialContentAlignment"),this.An=t=t.Z(),this.h("initialContentAlignment",i,t))}),Ul.defineProperty(Ge,{padding:"padding"},function(){return this.Pe},function(t){"number"==typeof t?t=new j(t):Ul.C(t,j,Ge,"padding");var i=this.Pe;i.L(t)||(this.Pe=t=t.Z(),this.pc(),this.h("padding",i,t))}),Ul.u(Ge,{yg:"nodes"},function(){return this.Rn.i}),Ul.u(Ge,{links:"links"},function(){return this.Nn.i}),Ul.u(Ge,{Sj:"parts"},function(){return this.Db.i}),Ge.prototype.findTopLevelNodesAndLinks=function(){for(var t=new f(es),i=this.Rn.i;i.next();){var e=i.value;e.Ho&&t.add(e)}for(i=this.Nn.i;i.next();)e=i.value,e.Ho&&t.add(e);return t.i},Ge.prototype.findTopLevelGroups=function(){return this.Ik.i},Ul.defineProperty(Ge,{Qb:"layout"},function(){return this.Nd},function(t){var i=this.Nd;i!==t&&(Ul.C(t,Sa,Ge,"layout"),null!==i&&(i.g=null,i.group=null),this.Nd=t,t.g=this,t.group=null,this.Ot=!0,this.h("layout",i,t),this.de())}),Ge.prototype.layoutDiagram=function(t){pn(this),t&&Qn(this,!0),_n(this,!1)},Ul.defineProperty(Ge,{qd:"isTreePathToChildren"},function(){return this.yu},function(t){var i=this.yu;if(i!==t&&(Ul.j(t,"boolean",Ge,"isTreePathToChildren"),this.yu=t,this.h("isTreePathToChildren",i,t),!this.ha.gb))for(t=this.yg;t.next();)js(t.value)}),Ge.prototype.findTreeRoots=function(){for(var t=new l(Ms),i=this.yg;i.next();){var e=i.value;e.Ho&&null===e.As()&&t.add(e)}return t.i},Ul.defineProperty(Ge,{me:null},function(){return this.mB},function(t){this.mB=t}),Ge.prototype.addDiagramListener=Ge.prototype.Ky=function(t,i){Ul.j(t,"string",Ge,"addDiagramListener:name"),Ul.j(i,"function",Ge,"addDiagramListener:listener");var e=nr(this,t);null!==e&&e.add(i)},Ge.prototype.removeDiagramListener=Ge.prototype.lE=function(t,i){Ul.j(t,"string",Ge,"removeDiagramListener:name"),Ul.j(i,"function",Ge,"addDiagramListener:listener");var e=nr(this,t);null!==e&&e.remove(i)},Ge.prototype.raiseDiagramEvent=Ge.prototype.za=function(t,i,e){var n=nr(this,t),r=new ti;if(r.g=this,r.name=er(this,t),void 0!==i&&(r.hA=i),void 0!==e&&(r.Mz=e),t=n.length,1===t)(n=n.ja(0))(r);else if(0!==t)for(i=n.Ke(),e=0;t>e;e++)(n=i[e])(r);return r.cancel},Ge.prototype.isUnoccupied=Ge.prototype.Jo=function(t,i){return void 0===i&&(i=null),or(this,!1,null,i).Jo(t.x,t.y,t.width,t.height)},Ge.prototype.simulatedMouseMove=Ge.prototype.Hw=function(t,i,e){if(null!==nf){var n=nf.g;e instanceof Ge||(e=null);var r=rf;return e!==r&&(null!==r&&r!==n&&null!==r.tb.Ed&&(ur(r),nf.fw=!1,r.tb.Ed.doSimulatedDragLeave()),rf=e,null!==e&&e!==n&&null!==e.tb.Ed&&(zi(),r=e.tb.Ed,ef.contains(r)||ef.add(r),e.tb.Ed.doSimulatedDragEnter())),null!==e&&e!==n&&e.MC&&!e.nb&&e.lo?(n=e.tb.Ed,null!==n&&(null!==t?i=e.$p(t):null===i&&(i=new m),e.Ob.da=i,e.Ob.Wk=!1,e.Ob.up=!1,n.doSimulatedDragOver()),!0):!1}return!1},Ge.prototype.simulatedMouseUp=Ge.prototype.JE=function(t,i,e,n){if(null!==nf){null===n&&(n=i),i=rf;var r=nf.g;if(n!==i){if(null!==i&&i!==r&&null!==i.tb.Ed)return ur(i),nf.fw=!1,i.tb.Ed.doSimulatedDragLeave(),!1;rf=n,null!==n&&null!==n.tb.Ed&&(zi(),i=n.tb.Ed,ef.contains(i)||ef.add(i),n.tb.Ed.doSimulatedDragEnter())}if(null===n)return nf.doCancel(),!0;if(n!==this)return null!==t&&(e=n.$p(t)),n.Ob.da=e,n.Ob.Wk=!1,n.Ob.up=!0,t=n.tb.Ed,null!==t&&t.doSimulatedDrop(),t=nf,null!==t&&(n=t.mayCopy(),t.zf=n?"Copy":"Move",t.stopTool()),!0}return!1},Ul.defineProperty(Ge,{SC:"autoScrollRegion"},function(){return this.Qt},function(t){"number"==typeof t?t=new j(t):Ul.C(t,j,Ge,"autoScrollRegion");var i=this.Qt;i.L(t)||(this.Qt=t=t.Z(),this.pc(),this.h("autoScrollRegion",i,t))}),Ge.prototype.makeSVG=Ge.prototype.makeSvg=function(t){return void 0===t&&(t=new n),t.context="svg",t=cr(this,t),null!==t?t.sl:null},Ge.prototype.makeImage=function(t){void 0===t&&(t=new n);var i=(t.document||document).createElement("img");return i.src=this.tH(t),i},Ge.prototype.makeImageData=Ge.prototype.tH=function(t){void 0===t&&(t=new n);var i=cr(this,t);return null!==i?i.toDataURL(t.type,t.details):""};var Hf=!1;Ge.inherit=function(t,i){Ul.j(t,"function",Ge,"inherit"),Ul.j(i,"function",Ge,"inherit"),i.AF&&Ul.k("Cannot inherit from "+Ul.rg(i)),Ul.Ga(t,i)},pr.prototype.wl=function(t){return t.Gg.setTransform(t.nf,0,0,t.nf,0,0),null===this.wh&&dr(this,!0),0<this.wh&&this!==this.BF?!0:!1},pr.prototype.t=function(){this.BF=null},Ul.Ga(vr,Ge),Ul.fa("Palette",vr),Ul.Ga(gr,Ge),Ul.fa("Overview",gr),gr.prototype.computePixelRatio=function(){return 1},gr.prototype.We=function(){if(null===this.Jb&&Ul.k("No div specified"),null===this.ib&&Ul.k("No canvas specified"),this.Md){var t=this.rj;if(null!==t&&!t.Lb.Vg&&!t.Lb.bd){if(!this.rF){var i=t.tb.Ed;if(null!==i&&i.na)return}wn(this),i=t.Gs,(null!==i&&i.visible&&isNaN(i.width)||isNaN(i.height))&&Sn(t);var e=this.ib,i=this.Gg,n=this.Cy,r=this.CF;n.width=e.width,n.height=e.height,i.Et="",i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,this.ib.width,this.ib.height),n=this.Sd,n.reset(),1!==this.$b&&n.scale(this.scale),0===this.position.x&&0===this.position.y||n.translate(-this.Ma.x,-this.Ma.y),i.setTransform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy);for(var n=this.hu,o=this.ob,s=t.Zb.n,a=s.length,t=0;a>t;t++){var h=s[t],l=i,u=o,f=n;if(h.visible&&0!==h.Ic&&(void 0===f&&(f=!0),f||!h.Ac)){1!==h.Ic&&(l.globalAlpha=h.Ic);for(var f=this.scale,h=h.Db.n,c=h.length,p=0;c>p;p++){var d=h[p],y=d.ba;y.sg(u)&&(1<y.width*f||1<y.height*f?d.We(l,this):fs(d,l))}l.globalAlpha=1}}for(r.drawImage(e.Dd,0,0),e=this.Zb.n,r=e.length,t=0;r>t;t++)e[t].We(i,this);this.Md=this.uk=!1}}},Ul.defineProperty(gr,{Lz:"observed"},function(){return this.rj},function(t){var i=this.rj;null!==t&&Ul.C(t,Ge,gr,"observed"),t instanceof gr&&Ul.k("Overview.observed Diagram may not be an Overview itself: "+t),i!==t&&(null!==i&&(this.remove(this.Tg),i.lE("ViewportBoundsChanged",this.dE),i.lE("DocumentBoundsChanged",this.cE),i.Ul.remove(this)),this.rj=t,null!==t&&(t.Ky("ViewportBoundsChanged",this.dE),t.Ky("DocumentBoundsChanged",this.cE),t.Ul.add(this),this.add(this.Tg),br(this)),this.pc(),this.h("observed",i,t))}),Ul.defineProperty(gr,{Tg:"box"},function(){return this.zl},function(t){var i=this.zl;i!==t&&(this.zl=t,this.remove(i),this.add(this.zl),br(this),this.h("box",i,t))}),Ul.defineProperty(gr,{wJ:"drawsTemporaryLayers"},function(){return this.hu},function(t){this.hu!==t&&(this.hu=t,this.Sz())}),gr.prototype.kg=function(){var t=this.rj;return null===t?Au.kF:t.Cd},gr.prototype.nz=function(){!0!==this.Md&&(this.Md=!0,mr(this))},gr.prototype.dt=function(t){this.sc||(xn(this),this.ma(),bn(this),this.pc(),br(this),this.za("ViewportBoundsChanged",null,t))},Ul.Ga(xr,Ni),xr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.Nk||!t.of)return!1;var i=t.Lz;if(null===i)return!1;if(null===this.findDraggablePart()){var e=i.ob;this.Ck=new m(e.width/2,e.height/2),t=t.wc.da,i.position=new m(t.x-this.Ck.x,t.y-this.Ck.y)}return!0},xr.prototype.doActivate=function(){this.Ck=null,Ni.prototype.doActivate.call(this)},xr.prototype.moveParts=function(){var t=this.g,i=t.Lz;if(null!==i){var e=t.Tg;if(null!==e){if(null===this.Ck){var n=t.wc.da,e=e.location;this.Ck=new m(n.x-e.x,n.y-e.y)}t=t.N.da,i.position=new m(t.x-this.Ck.x,t.y-this.Ck.y)}}},Ul.Ga(wr,ue),wr.prototype.resize=function(t){var i=this.g.Lz;if(null!==i){var e=i.ob.copy();i.position=t.position,(e.width!==t.width||e.height!==t.height)&&0<t.width&&0<t.height&&(i.scale=Math.min(e.width/t.width,e.height/t.height))}},Ul.fa("Brush",kr);var Kf;kr.Solid=Kf=Ul.s(kr,"Solid",0);var Uf;kr.Linear=Uf=Ul.s(kr,"Linear",1);var Yf;kr.Radial=Yf=Ul.s(kr,"Radial",2);var Jf;kr.Pattern=Jf=Ul.s(kr,"Pattern",4),kr.prototype.copy=function(){var t=new kr;return t.oa=this.oa,t.cn=this.cn,t.ao=this.ao.Z(),t.sn=this.sn.Z(),t.hv=this.hv,t.iu=this.iu,null!==this.Eg&&(t.Eg=this.Eg.copy()),t.Wu=this.Wu,t},kr.prototype.Ka=function(){return this.freeze(),Object.freeze(this),this},kr.prototype.freeze=function(){return this.Ca=!0,null!==this.Eg&&this.Eg.freeze(),this},kr.prototype.La=function(){return Object.isFrozen(this)&&Ul.k("cannot thaw constant: "+this),this.Ca=!1,null!==this.Eg&&this.Eg.La(),this},kr.prototype.toString=function(){var t="Brush(";if(this.type===Kf)t+=this.color;else if(t=this.type===Uf?t+"Linear ":this.type===Yf?t+"Radial ":this.type===Jf?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.os)for(var i=this.os.i;i.next();)t+=" "+i.key+":"+i.value;return t+")"},kr.prototype.addColorStop=kr.prototype.addColorStop=function(t,i){Ul.I(this),("number"!=typeof t||!isFinite(t)||t>1||0>t)&&Ul.wa(t,"0 <= loc <= 1",kr,"addColorStop:loc"),Ul.j(i,"string",kr,"addColorStop:color"),null===this.Eg&&(this.Eg=new g("number","string")),this.Eg.add(t,i),this.oa===Kf&&(this.type=Uf),this.Fg=null},Ul.defineProperty(kr,{type:"type"},function(){return this.oa},function(t){Ul.I(this,t),Ul.rb(t,kr,kr,"type"),this.oa=t,this.start.ne()&&(t===Uf?this.start=eu:t===Yf&&(this.start=ou)),this.end.ne()&&(t===Uf?this.end=hu:t===Yf&&(this.end=ou)),this.Fg=null}),Ul.defineProperty(kr,{color:"color"},function(){return this.cn},function(t){Ul.I(this,t),this.cn=t,this.Fg=null}),Ul.defineProperty(kr,{start:"start"},function(){return this.ao},function(t){Ul.I(this,t),Ul.C(t,D,kr,"start"),this.ao=t.Z(),this.Fg=null}),Ul.defineProperty(kr,{end:"end"},function(){return this.sn},function(t){Ul.I(this,t),Ul.C(t,D,kr,"end"),this.sn=t.Z(),this.Fg=null}),Ul.defineProperty(kr,{ut:"startRadius"},function(){return this.hv},function(t){Ul.I(this,t),Ul.ze(t,kr,"startRadius"),0>t&&Ul.wa(t,">= zero",kr,"startRadius"),this.hv=t,this.Fg=null}),Ul.defineProperty(kr,{us:"endRadius"},function(){return this.iu},function(t){Ul.I(this,t),Ul.ze(t,kr,"endRadius"),0>t&&Ul.wa(t,">= zero",kr,"endRadius"),this.iu=t,this.Fg=null}),Ul.defineProperty(kr,{os:"colorStops"},function(){return this.Eg},function(t){Ul.I(this,t),this.Eg=t,this.Fg=null}),Ul.defineProperty(kr,{pattern:"pattern"},function(){return this.Wu},function(t){Ul.I(this,t),this.Wu=t,this.Fg=null}),kr.randomColor=function(t,i){void 0===t&&(t=128),void 0===i&&(i=Math.max(t,255));var e=Math.abs(i-t),n=Math.floor(t+Math.random()*e).toString(16),r=Math.floor(t+Math.random()*e).toString(16),e=Math.floor(t+Math.random()*e).toString(16);return 2>n.length&&(n="0"+n),2>r.length&&(r="0"+r),2>e.length&&(e="0"+e),"#"+n+r+e};var Wf,Xf=Ul.createElement("canvas").getContext("2d");kr.isValidColor=Wf=function(t){if("black"===t)return!0;if(""===t)return!1;Xf.fillStyle="#000000";var i=Xf.fillStyle;return Xf.fillStyle=t,Xf.fillStyle!==i?!0:(Xf.fillStyle="#FFFFFF",i=Xf.fillStyle,Xf.fillStyle=t,Xf.fillStyle!==i)},Ul.Mh(Mr),Ul.fa("GraphObject",Mr),Mr.prototype.cloneProtected=function(t){if(t.ea=6144|this.ea,t.Ic=this.Ic,t.Ub=this.Ub,t.Ib=this.Ib,t.lc=this.lc,t.Ma.assign(this.Ma),t.jf.assign(this.jf),t.nj=this.nj.Z(),t.lj=this.lj.Z(),t.yk=this.yk.copy(),t.$b=this.$b,t.Ym=this.Ym,t.Ih=this.Ih,t.Gq=this.Gq.Z(),t.Pc.assign(this.Pc),t.Xb.assign(this.Xb),t.Hc.assign(this.Hc),t.ir=this.ir,t.Q=null!==this.Q?this.Q.copy():null,t.Wp=this.Wp,t.Xp=this.Xp,t.Sr=this.Sr,t.Tr=this.Tr,t.se=this.se.Z(),t.vp=this.vp.Z(),t.wr=this.wr,t.tj=this.tj,t.Cp=this.Cp,t.Wi=this.Wi,t.Ar=this.Ar,t.zr=this.zr,t.Br=this.Br.Z(),t.Cr=this.Cr,t.Jp=this.Jp,t.P=null!==this.P?this.P.copy():null,t.Gc=this.Gc,t.$m=this.$m,null!==this.Bl){t.Bl=Ul.Pk(this.Bl);for(var i=0;i<this.Bl.length;i++){var e=this.Bl[i];t[e]=this[e]}}null!==this.Xh&&(t.Xh=this.Xh.copy())},Mr.prototype.Nh=function(t){t.jr=null,t.Wl=null,t.R()},Mr.prototype.clone=function(){var t=new this.constructor;return this.cloneProtected(t),t},Mr.prototype.copy=function(){return this.clone()},Mr.prototype.toString=function(){return Ul.rg(Object.getPrototypeOf(this))+"#"+Ul.Uc(this)};var Zf;Mr.None=Zf=Ul.s(Mr,"None",0);var Qf;Mr.Default=Qf=Ul.s(Mr,"Default",0);var $f;Mr.Vertical=$f=Ul.s(Mr,"Vertical",4);var _f;Mr.Horizontal=_f=Ul.s(Mr,"Horizontal",5);var tc;Mr.Fill=tc=Ul.s(Mr,"Fill",3);var ic;Mr.Uniform=ic=Ul.s(Mr,"Uniform",1);var ec;Mr.UniformToFill=ec=Ul.s(Mr,"UniformToFill",2),Mr.prototype.Ee=function(){var t=new ba;t.cj=_l,t.Ej=_l,t.aj=10,t.Cj=10,t.$i=Uc,t.Bj=Uc,t.bj=0,t.Dj=0,this.Q=t},Mr.prototype.raiseChangedEvent=Mr.prototype.Dc=function(t,i,e,n,r,o,s){var a=this.T;null!==a&&(a.Lm(t,i,e,n,r,o,s),0!==(1024&this.ea)&&e===this&&t===Yu&&Sr(this,a,i))},Mr.prototype.Vv=function(t){return this.$m===t?this:null},Mr.prototype.raiseChanged=Mr.prototype.h=function(t,i,e){this.Dc(Yu,t,this,i,e)},Mr.prototype.sD=function(t,i,e){if(!1===this.Ag)return!1;var n=this.Ha;i=t.Lj(i);var r=!1;return e&&(r=Wl(t.x,t.y,0,0,0,n.height)<i||Wl(t.x,t.y,0,n.height,n.width,n.height)<i||Wl(t.x,t.y,n.width,n.height,n.width,0)<i||Wl(t.x,t.y,n.width,0,0,0)<i),e||(r=Wl(t.x,t.y,0,0,0,n.height)<i&&Wl(t.x,t.y,0,n.height,n.width,n.height)<i&&Wl(t.x,t.y,n.width,n.height,n.width,0)<i&&Wl(t.x,t.y,n.width,0,0,0)<i),r},Mr.prototype.Tf=function(){return!0},Mr.prototype.containsPoint=Mr.prototype.Aa=function(t){var i=Ul.K();i.assign(t),this.transform.ab(i);var e=this.ba;if(!e.J())return!1;var n=this.g;if(null!==n&&n.Xx){var r=n.gz("extraTouchThreshold"),o=n.gz("extraTouchArea"),s=o/2,a=this.Ha,n=this.Hi()*n.scale,h=1/n;if(a.width*n<r&&a.height*n<r)return t=Ql(e.x-s*h,e.y-s*h,e.width+o*h,e.height+o*h,i.x,i.y),Ul.v(i),t}return(this instanceof ks||this instanceof Po?Ql(e.x-5,e.y-5,e.width+10,e.height+10,i.x,i.y):e.Aa(i))?this.Xh&&!this.Xh.Aa(i)?!1:null!==this.lc&&e.Aa(i)||null!==this.Ib&&this.Hc.Aa(t)?!0:(Ul.v(i),this.Jj(t)):(Ul.v(i),!1)},Mr.prototype.Jj=function(t){var i=this.Ha;return Ql(0,0,i.width,i.height,t.x,t.y)},Mr.prototype.containsRect=Mr.prototype.Kj=function(t){if(0===this.angle)return this.ba.Kj(t);var i=this.Ha,i=Ul.Vj(0,0,i.width,i.height),e=this.transform,n=!1,r=Ul.fc(t.x,t.y);return i.Aa(e.Ph(r))&&(r.m(t.x,t.bottom),i.Aa(e.Ph(r))&&(r.m(t.right,t.bottom),i.Aa(e.Ph(r))&&(r.m(t.right,t.y),i.Aa(e.Ph(r))&&(n=!0)))),Ul.v(r),Ul.ic(i),n},Mr.prototype.containedInRect=Mr.prototype.sm=function(t,i){if(void 0===i)return t.Kj(this.ba);var e=this.Ha,n=!1,r=Ul.fc(0,0);return t.Aa(i.ab(r))&&(r.m(0,e.height),t.Aa(i.ab(r))&&(r.m(e.width,e.height),t.Aa(i.ab(r))&&(r.m(e.width,0),t.Aa(i.ab(r))&&(n=!0)))),n},Mr.prototype.intersectsRect=Mr.prototype.sg=function(t,i){if(void 0===i&&(i=this.transform,0===this.angle))return t.sg(this.ba);var e=this.Ha,n=i,r=Ul.fc(0,0),o=Ul.fc(0,e.height),s=Ul.fc(e.width,e.height),a=Ul.fc(e.width,0),h=!1;if(t.Aa(n.ab(r))||t.Aa(n.ab(o))||t.Aa(n.ab(s))||t.Aa(n.ab(a)))h=!0;else{var e=Ul.Vj(0,0,e.width,e.height),l=Ul.fc(t.x,t.y);e.Aa(n.Ph(l))?h=!0:(l.m(t.x,t.bottom),e.Aa(n.Ph(l))?h=!0:(l.m(t.right,t.bottom),e.Aa(n.Ph(l))?h=!0:(l.m(t.right,t.y),e.Aa(n.Ph(l))&&(h=!0)))),Ul.v(l),Ul.ic(e),!h&&(Au.dw(t,r,o)||Au.dw(t,o,s)||Au.dw(t,s,a)||Au.dw(t,a,r))&&(h=!0)}return Ul.v(r),Ul.v(o),Ul.v(s),Ul.v(a),h},Mr.prototype.getDocumentPoint=Mr.prototype.lb=function(t,i){void 0===i&&(i=new m),t.ne()&&Ul.k("getDocumentPoint:s Spot must be real: "+t.toString());var e=this.Ha;return i.m(t.x*e.width+t.offsetX,t.y*e.height+t.offsetY),this.Ff.ab(i),i},Mr.prototype.getDocumentAngle=Mr.prototype.Zk=function(){var t;return t=this.Ff,1===t.m11&&0===t.m12?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI,0>t&&(t+=360)),t},Mr.prototype.getDocumentScale=Mr.prototype.Hi=function(){if(0!==(4096&this.ea)==!1)return this.fu;var t=this.$b;return null!==this.S?t*this.S.Hi():t},Mr.prototype.getLocalPoint=Mr.prototype.zD=function(t,i){return void 0===i&&(i=new m),i.assign(t),this.Ff.Ph(i),i},Mr.prototype.getNearestIntersectionPoint=Mr.prototype.bl=function(t,i,e){return this.Co(t.x,t.y,i.x,i.y,e)},Hl=Mr.prototype,Hl.Co=function(t,i,e,n,r){var o=this.transform,s=1/(o.m11*o.m22-o.m12*o.m21),a=o.m22*s,h=-o.m12*s,l=-o.m21*s,u=o.m11*s,f=s*(o.m21*o.dy-o.m22*o.dx),c=s*(o.m12*o.dx-o.m11*o.dy);return null!==this.nm?(o=this.ba,Au.bl(o.left,o.top,o.right,o.bottom,t,i,e,n,r)):(s=t*a+i*l+f,t=t*h+i*u+c,i=e*a+n*l+f,e=e*h+n*u+c,r.m(0,0),n=this.Ha,e=Au.bl(0,0,n.width,n.height,s,t,i,e,r),r.transform(o),e)},Hl.zc=function(t,i,e,n,r){this.Jg();var o=Ul.Sf();if(o.assign(this.Xb),this.Xb.La(),!1===Jr(this)){var s=this.Xb;s.x=t,s.y=i,s.width=e,s.height=n}else this.xi(t,i,e,n);this.Xb.freeze(),this.Xh=void 0===r?null:r,e=!1,void 0!==r?e=!0:null!==this.S&&(r=this.S.Hc,n=this.Ba,null!==this.nm&&(n=this.Xb),e=i+n.height,n=t+n.width,e=!(t+.05>=0&&n<=r.width+.05&&i+.05>=0&&e<=r.height+.05),this instanceof Fo&&(t=this.Hc,this.Gu>t.height||this.ej.Oe>t.width))&&(e=!0),this.ea=e?256|this.ea:-257&this.ea,this.Xb.J()||Ul.k("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Xb.toString()),this.sw(o,this.Xb),Ul.ic(o)},Hl.xi=function(){},Hl.sw=function(){Wr(this,!1);var t=this.T;null!==t&&null!==t.g&&(t.dl(),this.Qu(t),this.ma(),t=this.T,null!==t&&(t.nt!==this&&t.sE!==this&&t.vE!==this||ys(t,!0)))},Hl.Qu=function(t){null!==this.Jd&&ys(t,!0)},Hl.We=function(t,i){if(this.visible){var e=this.opacity,n=1;if(1!==e){if(0===e)return;n=t.globalAlpha,t.globalAlpha=n*e}if(t instanceof z){t:if(this.visible){var r=null,o=t.kw;if(this instanceof to&&(this.type===cc||this.type===pc))Ar(this,t,i);else{var s=this.Xb;if(0!==s.width&&0!==s.height&&!isNaN(s.x)&&!isNaN(s.y)){var a=this.transform,h=this.S;0!==(4096&this.ea)==!0&&Br(this);var l=0!==(256&this.ea),u=!1;if(this instanceof Fo&&zo(this,t),l){if(u=h.Tf()?h.Ha:h.ba,this.Xh)var f=this.Xh,c=f.x,p=f.y,d=f.width,f=f.height;else c=Math.max(s.x,u.x),p=Math.max(s.y,u.y),d=Math.min(s.right,u.right)-c,f=Math.min(s.bottom,u.bottom)-p;if(c>s.width+s.x||s.x>u.width+u.x||p>s.height+s.y||s.y>u.height+u.y)break t;u=!0,G(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(c,p,d,f),t.clip()}if(c=!1,this instanceof es&&(c=!0,!this.Ea()))break t;if(p=!1,d=i.Qg,this.T&&d.drawShadows&&(p=this.T.il),t.Ei.$e=[1,0,0,1,0,0],null!==this.lc&&(zr(this,t,this.lc,!0,!0),this.lc instanceof kr&&this.lc.type===Yf?(t.beginPath(),t.rect(s.x,s.y,s.width,s.height),Lr(t,this.lc)):t.fillRect(s.x,s.y,s.width,s.height)),c&&this.il&&d.drawShadows&&(G(t,1,0,0,1,0,0),s=this.em,t.shadowOffsetX=s.x,t.shadowOffsetY=s.y,t.shadowColor=this.dm,t.shadowBlur=this.cm/i.scale,t.$a()),this instanceof to?G(t,a.m11,a.m12,a.m21,a.m22,a.dx,a.dy):t.Ei.$e=[a.m11,a.m12,a.m21,a.m22,a.dx,a.dy],null!==this.Ib){var f=this.Ha,s=a=0,d=f.width,f=f.height,y=0;this instanceof Po&&(f=this.Pa.kb,a=f.x,s=f.y,d=f.width,f=f.height,y=this.Sg),zr(this,t,this.Ib,!0,!1),this.Ib instanceof kr&&this.Ib.type===Yf?(t.beginPath(),t.rect(a-y/2,s-y/2,d+y,f+y),Lr(t,this.Ib)):t.fillRect(a-y/2,s-y/2,d+y,f+y)}d=s=a=0,p&&(null!==this.Ib||null!==this.lc||null!==h&&0!==(512&h.ea)||null!==h&&h.type===uc&&h.If()!==this)?(Gr(this,!0),a=t.shadowOffsetX,s=t.shadowOffsetY,d=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0):Gr(this,!1),this.Mj(t,i),p&&0!==(512&this.ea)==!0&&(t.shadowOffsetX=a,t.shadowOffsetY=s,t.shadowBlur=d),c&&p&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),l&&(t.restore(),u&&t.rf.pop(),Je(i,t)),this instanceof to&&(r=t.rf.pop()),c&&p&&t.rf.pop(),null!==t.nD&&(null===r&&(o===t.kw?(G(t,1,0,0,1,0,0),r=t.rf.pop()):r=t.kw),t.nD(this,r))}}}}else{if(this instanceof to&&(this.type===cc||this.type===pc))return Ar(this,t,i),void(1!==e&&(t.globalAlpha=n));if(c=this.Xb,0!==c.width&&0!==c.height&&!isNaN(c.x)&&!isNaN(c.y)){if(r=this.transform,o=this.S,0!==(4096&this.ea)==!0&&Br(this),h=0!==(256&this.ea),this instanceof Fo&&zo(this,t),h){if(l=o.Tf()?o.Ha:o.ba,this.Xh?(s=this.Xh,u=s.x,p=s.y,a=s.width,s=s.height):(u=Math.max(c.x,l.x),p=Math.max(c.y,l.y),a=Math.min(c.right,l.right)-u,s=Math.min(c.bottom,l.bottom)-p),u>c.width+c.x||c.x>l.width+l.x||p>c.height+c.y||c.y>l.height+l.y)return void(1!==e&&(t.globalAlpha=n));t.save(),t.beginPath(),t.rect(u,p,a,s),t.clip()}if(p=i.Qg,l=!1,this instanceof es){if(l=!0,!this.Ea())return void(1!==e&&(t.globalAlpha=n));this.il&&p.drawShadows&&(u=this.em,t.shadowOffsetX=u.x*i.scale*i.nf,t.shadowOffsetY=u.y*i.scale*i.nf,t.shadowColor=this.dm,t.shadowBlur=this.cm)}u=!1,this.T&&p.drawShadows&&(u=this.T.il),null!==this.lc&&(zr(this,t,this.lc,!0,!0),this.lc instanceof kr&&this.lc.type===Yf?(t.beginPath(),t.rect(c.x,c.y,c.width,c.height),Lr(t,this.lc)):t.fillRect(c.x,c.y,c.width,c.height)),r.Os()||t.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),null!==this.Ib&&(s=this.Ha,p=c=0,a=s.width,s=s.height,d=0,this instanceof Po&&(s=this.Pa.kb,c=s.x,p=s.y,a=s.width,s=s.height,d=this.Sg),zr(this,t,this.Ib,!0,!1),this.Ib instanceof kr&&this.Ib.type===Yf?(t.beginPath(),t.rect(c-d/2,p-d/2,a+d,s+d),Lr(t,this.Ib)):t.fillRect(c-d/2,p-d/2,a+d,s+d)),a=p=c=0,u&&(null!==this.Ib||null!==this.lc||null!==o&&0!==(512&o.ea)||null!==o&&(o.type===uc||o.type===lc)&&o.If()!==this)?(Gr(this,!0),c=t.shadowOffsetX,p=t.shadowOffsetY,a=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0):Gr(this,!1),this.Mj(t,i),u&&0!==(512&this.ea)==!0&&(t.shadowOffsetX=c,t.shadowOffsetY=p,t.shadowBlur=a),l&&u&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),h?(t.restore(),this instanceof to?Je(i,t,!0):Je(i,t,!1)):r.Os()||(o=1/(r.m11*r.m22-r.m12*r.m21),t.transform(r.m22*o,-r.m12*o,-r.m21*o,r.m11*o,o*(r.m21*r.dy-r.m22*r.dx),o*(r.m12*r.dx-r.m11*r.dy)))}}1!==e&&(t.globalAlpha=n)}},Hl.Mj=function(){},Mr.prototype.isContainedBy=Mr.prototype.gl=function(t){if(t instanceof to)t:{if(this!==t&&null!==t)for(var i=this.S;null!==i;){if(i===t){t=!0;break t}i=i.S}t=!1}else t=!1;return t},Mr.prototype.isVisibleObject=Mr.prototype.kl=function(){if(!this.visible)return!1;var t=this.S;return null!==t?t.kl():!0},Hl=Mr.prototype,Hl.R=function(t){if(void 0===t&&(t=!1),!0!==Ur(this)){Yr(this,!0),Wr(this,!0);var i=this.S;if(null!==i?t||i.R():(t=this.g,null!==t&&(t.Xf.add(this),this instanceof Ms&&(t.ha.gb||this.sf(),null!==this.ce&&Or(this.ce)),t.de(!0))),this instanceof to){(this.oa===uc||this.oa===dc)&&(t=this.If(),null!==t&&t.R(!0)),t=this.ya.n;for(var i=t.length,e=0;i>e;e++){var n=t[e];!0!==Ur(n)&&(n.xa.J()||(n instanceof Ta||n instanceof to||n instanceof Fo||Er(n,!1)!==Zf)&&n.R(!0))}}}},Hl.Fo=function(){!1===Ur(this)&&(Yr(this,!0),Wr(this,!0))},Hl.Jg=function(){0!==(2048&this.ea)==!1&&(Hr(this,!0),Kr(this,!0))},Hl.mz=function(){Kr(this,!0)},Hl.ma=function(){var t=this.T;null!==t&&t.ma()},Ul.defineProperty(Mr,{Cw:"segmentOrientation"},function(){return this.Cr},function(t){var i=this.Cr;i!==t&&(this.Cr=t,this.R(),this.h("segmentOrientation",i,t))}),Ul.defineProperty(Mr,{Pf:"segmentIndex"},function(){return this.Ar},function(t){t=Math.round(t);var i=this.Ar;i!==t&&(this.Ar=t,this.R(),this.h("segmentIndex",i,t))}),Ul.defineProperty(Mr,{Bw:"segmentFraction"},function(){return this.zr},function(t){isNaN(t)?t=0:0>t?t=0:t>1&&(t=1);var i=this.zr;i!==t&&(this.zr=t,this.R(),this.h("segmentFraction",i,t))}),Ul.defineProperty(Mr,{BE:"segmentOffset"},function(){return this.Br},function(t){var i=this.Br;i.L(t)||(this.Br=t=t.Z(),this.R(),this.h("segmentOffset",i,t))}),Ul.defineProperty(Mr,{stretch:"stretch"},function(){return this.Ih},function(t){var i=this.Ih;i!==t&&(this.Ih=t,this.R(),this.h("stretch",i,t))}),Ul.defineProperty(Mr,{name:"name"},function(){return this.Ub},function(t){var i=this.Ub;i!==t&&(this.Ub=t,null!==this.T&&(this.T.Bk=null),this.h("name",i,t))}),Ul.defineProperty(Mr,{opacity:"opacity"},function(){return this.Ic},function(t){var i=this.Ic;i!==t&&(Ul.j(t,"number",Mr,"opacity"),(0>t||t>1)&&Ul.wa(t,"0 <= value <= 1",Mr,"opacity"),this.Ic=t,this.h("opacity",i,t),t=this.g,i=this.T,null!==t&&null!==i&&t.ma(hs(i,i.ba)))}),Ul.defineProperty(Mr,{visible:"visible"},function(){return 0!==(1&this.ea)},function(t){var i=0!==(1&this.ea);i!==t&&(this.ea^=1,this.h("visible",i,t),i=this.S,null!==i?i.R():this instanceof es&&(this.dl(),this.He(t)),this.ma(),Qr(this))}),Ul.defineProperty(Mr,{Ag:"pickable"},function(){return 0!==(2&this.ea)},function(t){var i=0!==(2&this.ea);i!==t&&(this.ea^=2,this.h("pickable",i,t))}),Ul.defineProperty(Mr,{BG:"fromLinkableDuplicates"},function(){return 0!==(4&this.ea)},function(t){var i=0!==(4&this.ea);i!==t&&(this.ea^=4,this.h("fromLinkableDuplicates",i,t))}),Ul.defineProperty(Mr,{CG:"fromLinkableSelfNode"},function(){return 0!==(8&this.ea)},function(t){var i=0!==(8&this.ea);i!==t&&(this.ea^=8,this.h("fromLinkableSelfNode",i,t))}),Ul.defineProperty(Mr,{wI:"toLinkableDuplicates"},function(){return 0!==(16&this.ea)},function(t){var i=0!==(16&this.ea);i!==t&&(this.ea^=16,this.h("toLinkableDuplicates",i,t))}),Ul.defineProperty(Mr,{xI:"toLinkableSelfNode"},function(){return 0!==(32&this.ea)},function(t){var i=0!==(32&this.ea);i!==t&&(this.ea^=32,this.h("toLinkableSelfNode",i,t))}),Ul.defineProperty(Mr,{tg:"isPanelMain"},function(){return 0!==(64&this.ea)},function(t){var i=0!==(64&this.ea);i!==t&&(this.ea^=64,this.R(),this.h("isPanelMain",i,t))}),Ul.defineProperty(Mr,{pz:"isActionable"},function(){return 0!==(128&this.ea)},function(t){var i=0!==(128&this.ea);i!==t&&(this.ea^=128,this.h("isActionable",i,t))}),Ul.defineProperty(Mr,{nm:"areaBackground"},function(){return this.lc},function(t){var i=this.lc;i!==t&&(t instanceof kr&&t.freeze(),this.lc=t,this.ma(),this.h("areaBackground",i,t))}),Ul.defineProperty(Mr,{background:"background"},function(){return this.Ib},function(t){var i=this.Ib;i!==t&&(t instanceof kr&&t.freeze(),this.Ib=t,this.ma(),this.h("background",i,t))}),Ul.u(Mr,{T:"part"},function(){if(this instanceof es)return this;if(this.Wl)return this.Wl;var t;for(t=this.S;t;){if(t instanceof es)return this.Wl=t;t=t.S}return null}),Ul.u(Mr,{S:"panel"},function(){return this.Pg}),Mr.prototype.ql=function(t){this.Pg=t},Ul.u(Mr,{layer:"layer"},function(){var t=this.T;return null!==t?t.layer:null}),Ul.u(Mr,{g:"diagram"},function(){var t=this.T;return null!==t?t.g:null},{configurable:!0}),Ul.defineProperty(Mr,{position:"position"},function(){return this.Ma},function(t){var i=this.Ma;i.L(t)||(t=t.Z(),this.dA(t,i)&&this.h("position",i,t))}),Mr.prototype.dA=function(t){return this.Ma=t,Or(this),this.Jg(),!0},Mr.prototype.GE=function(t,i){this.Ma.m(t,i),os(this,!0),this.Jg()},Ul.u(Mr,{ba:"actualBounds"},function(){return this.Xb}),Ul.defineProperty(Mr,{scale:"scale"},function(){return this.$b},function(t){var i=this.$b;i!==t&&(0>=t&&Ul.k("GraphObject.scale must be greater than zero"),this.$b=t,this.Jg(),this.R(),this.h("scale",i,t))
}),Ul.defineProperty(Mr,{angle:"angle"},function(){return this.Ym},function(t){var i=this.Ym;i!==t&&(t%=360,0>t&&(t+=360),i!==t&&(this.Ym=t,this.R(),this.Jg(),this.h("angle",i,t)))}),Ul.defineProperty(Mr,{xa:"desiredSize"},function(){return this.jf},function(t){var i=this.jf;i.L(t)||(this.jf=t=t.Z(),this.R(),this instanceof Po&&this.le(),this.h("desiredSize",i,t),t=this.T,null!==t&&0!==(1024&this.ea)&&(Sr(this,t,"width"),Sr(this,t,"height")))}),Ul.defineProperty(Mr,{width:"width"},function(){return this.jf.width},function(t){if(this.jf.width!==t){var i=this.jf;this.jf=t=new w(t,this.jf.height).freeze(),this.R(),this instanceof Po&&this.le(),this.h("desiredSize",i,t),i=this.T,null!==i&&0!==(1024&this.ea)&&Sr(this,i,"width")}}),Ul.defineProperty(Mr,{height:"height"},function(){return this.jf.height},function(t){if(this.jf.height!==t){var i=this.jf;this.jf=t=new w(this.jf.width,t).freeze(),this.R(),this instanceof Po&&this.le(),this.h("desiredSize",i,t),i=this.T,null!==i&&0!==(1024&this.ea)&&Sr(this,i,"height")}}),Ul.defineProperty(Mr,{vg:"minSize"},function(){return this.nj},function(t){var i=this.nj;i.L(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.nj=t,this.R(),this.h("minSize",i,t))}),Ul.defineProperty(Mr,{af:"maxSize"},function(){return this.lj},function(t){var i=this.lj;i.L(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.lj=t,this.R(),this.h("maxSize",i,t))}),Ul.u(Mr,{Ba:"measuredBounds"},function(){return this.Pc}),Ul.u(Mr,{Ha:"naturalBounds"},function(){return this.Hc},{configurable:!0}),Ul.defineProperty(Mr,{margin:"margin"},function(){return this.Gq},function(t){"number"==typeof t&&(t=new j(t));var i=this.Gq;i.L(t)||(this.Gq=t=t.Z(),this.R(),this.h("margin",i,t))}),Ul.u(Mr,{transform:null},function(){return 0!==(2048&this.ea)==!0&&Br(this),this.Sd}),Ul.u(Mr,{Ff:null},function(){return 0!==(4096&this.ea)==!0&&Br(this),this.Xm}),Ul.defineProperty(Mr,{alignment:"alignment"},function(){return this.se},function(t){var i=this.se;i.L(t)||(t.ne()&&!t.Lc()&&Ul.k("alignment must be a real Spot or Spot.Default"),this.se=t=t.Z(),Or(this),this.h("alignment",i,t))}),Ul.defineProperty(Mr,{column:"column"},function(){return this.Cp},function(t){t=Math.round(t);var i=this.Cp;i!==t&&(0>t&&Ul.wa(t,">= 0",Mr,"column"),this.Cp=t,this.R(),this.h("column",i,t))}),Ul.defineProperty(Mr,{$F:"columnSpan"},function(){return this.Wi},function(t){t=Math.round(t);var i=this.Wi;i!==t&&(1>t&&Ul.wa(t,">= 1",Mr,"columnSpan"),this.Wi=t,this.R(),this.h("columnSpan",i,t))}),Ul.defineProperty(Mr,{rc:"row"},function(){return this.wr},function(t){t=Math.round(t);var i=this.wr;i!==t&&(0>t&&Ul.wa(t,">= 0",Mr,"row"),this.wr=t,this.R(),this.h("row",i,t))}),Ul.defineProperty(Mr,{rowSpan:"rowSpan"},function(){return this.tj},function(t){t=Math.round(t);var i=this.tj;i!==t&&(1>t&&Ul.wa(t,">= 1",Mr,"rowSpan"),this.tj=t,this.R(),this.h("rowSpan",i,t))}),Ul.defineProperty(Mr,{Hj:"alignmentFocus"},function(){return this.vp},function(t){var i=this.vp;i.L(t)||(t.ne()&&!t.Lc()&&Ul.k("alignmentFocus must be a real Spot or Spot.Default"),this.vp=t=t.Z(),this.R(),this.h("alignmentFocus",i,t))}),Ul.defineProperty(Mr,{Jd:"portId"},function(){return this.ir},function(t){var i=this.ir;if(i!==t){var e=this.T;if(null===e||e instanceof Ms||(Ul.k("portID being set on a Link: "+t),e=null),null!==i&&null!==e&&Ds(e,this),this.ir=t,null!==t&&e){e.yh=!0,null===e.Qd&&Ns(e);var n=this.Jd;null!==n&&e.Qd.add(n,this)}this.h("portId",i,t)}}),Ul.defineProperty(Mr,{xb:"toSpot"},function(){return null!==this.Q?this.Q.Ej:_l},function(t){null===this.Q&&this.Ee();var i=this.Q.Ej;i.L(t)||(t=t.Z(),this.Q.Ej=t,this.h("toSpot",i,t),Qr(this))}),Ul.defineProperty(Mr,{vl:"toEndSegmentLength"},function(){return null!==this.Q?this.Q.Cj:10},function(t){null===this.Q&&this.Ee();var i=this.Q.Cj;i!==t&&(0>t&&Ul.wa(t,">= 0",Mr,"toEndSegmentLength"),this.Q.Cj=t,this.h("toEndSegmentLength",i,t),Qr(this))}),Ul.defineProperty(Mr,{wt:"toEndSegmentDirection"},function(){return null!==this.Q?this.Q.Bj:Uc},function(t){null===this.Q&&this.Ee();var i=this.Q.Bj;i!==t&&(this.Q.Bj=t,this.h("toEndSegmentDirection",i,t),Qr(this))}),Ul.defineProperty(Mr,{yt:"toShortLength"},function(){return null!==this.Q?this.Q.Dj:0},function(t){null===this.Q&&this.Ee();var i=this.Q.Dj;i!==t&&(this.Q.Dj=t,this.h("toShortLength",i,t),Qr(this))}),Ul.defineProperty(Mr,{OE:"toLinkable"},function(){return this.Sr},function(t){var i=this.Sr;i!==t&&(this.Sr=t,this.h("toLinkable",i,t))}),Ul.defineProperty(Mr,{yI:"toMaxLinks"},function(){return this.Tr},function(t){var i=this.Tr;i!==t&&(0>t&&Ul.wa(t,">= 0",Mr,"toMaxLinks"),this.Tr=t,this.h("toMaxLinks",i,t))}),Ul.defineProperty(Mr,{vb:"fromSpot"},function(){return null!==this.Q?this.Q.cj:_l},function(t){null===this.Q&&this.Ee();var i=this.Q.cj;i.L(t)||(t=t.Z(),this.Q.cj=t,this.h("fromSpot",i,t),Qr(this))}),Ul.defineProperty(Mr,{Yk:"fromEndSegmentLength"},function(){return null!==this.Q?this.Q.aj:10},function(t){null===this.Q&&this.Ee();var i=this.Q.aj;i!==t&&(0>t&&Ul.wa(t,">= 0",Mr,"fromEndSegmentLength"),this.Q.aj=t,this.h("fromEndSegmentLength",i,t),Qr(this))}),Ul.defineProperty(Mr,{Es:"fromEndSegmentDirection"},function(){return null!==this.Q?this.Q.$i:Uc},function(t){null===this.Q&&this.Ee();var i=this.Q.$i;i!==t&&(this.Q.$i=t,this.h("fromEndSegmentDirection",i,t),Qr(this))}),Ul.defineProperty(Mr,{Fs:"fromShortLength"},function(){return null!==this.Q?this.Q.bj:0},function(t){null===this.Q&&this.Ee();var i=this.Q.bj;i!==t&&(this.Q.bj=t,this.h("fromShortLength",i,t),Qr(this))}),Ul.defineProperty(Mr,{vD:"fromLinkable"},function(){return this.Wp},function(t){var i=this.Wp;i!==t&&(this.Wp=t,this.h("fromLinkable",i,t))}),Ul.defineProperty(Mr,{DG:"fromMaxLinks"},function(){return this.Xp},function(t){var i=this.Xp;i!==t&&(0>t&&Ul.wa(t,">= 0",Mr,"fromMaxLinks"),this.Xp=t,this.h("fromMaxLinks",i,t))}),Ul.defineProperty(Mr,{cursor:"cursor"},function(){return this.Jp},function(t){var i=this.Jp;i!==t&&(Ul.j(t,"string",Mr,"cursor"),this.Jp=t,this.h("cursor",i,t))}),Ul.defineProperty(Mr,{click:"click"},function(){return null!==this.P?this.P.Wh:null},function(t){null===this.P&&Pr(this);var i=this.P.Wh;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"click"),this.P.Wh=t,this.h("click",i,t))}),Ul.defineProperty(Mr,{ts:"doubleClick"},function(){return null!==this.P?this.P.ci:null},function(t){null===this.P&&Pr(this);var i=this.P.ci;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"doubleClick"),this.P.ci=t,this.h("doubleClick",i,t))}),Ul.defineProperty(Mr,{Uy:"contextClick"},function(){return null!==this.P?this.P.Yh:null},function(t){null===this.P&&Pr(this);var i=this.P.Yh;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"contextClick"),this.P.Yh=t,this.h("contextClick",i,t))}),Ul.defineProperty(Mr,{ZD:"mouseEnter"},function(){return null!==this.P?this.P.Rq:null},function(t){null===this.P&&Pr(this);var i=this.P.Rq;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"mouseEnter"),this.P.Rq=t,this.h("mouseEnter",i,t))}),Ul.defineProperty(Mr,{$D:"mouseLeave"},function(){return null!==this.P?this.P.Sq:null},function(t){null===this.P&&Pr(this);var i=this.P.Sq;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"mouseLeave"),this.P.Sq=t,this.h("mouseLeave",i,t))}),Ul.defineProperty(Mr,{Fz:"mouseOver"},function(){return null!==this.P?this.P.mi:null},function(t){null===this.P&&Pr(this);var i=this.P.mi;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"mouseOver"),this.P.mi=t,this.h("mouseOver",i,t))}),Ul.defineProperty(Mr,{Ez:"mouseHover"},function(){return null!==this.P?this.P.li:null},function(t){null===this.P&&Pr(this);var i=this.P.li;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"mouseHover"),this.P.li=t,this.h("mouseHover",i,t))}),Ul.defineProperty(Mr,{Dz:"mouseHold"},function(){return null!==this.P?this.P.ki:null},function(t){null===this.P&&Pr(this);var i=this.P.ki;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"mouseHold"),this.P.ki=t,this.h("mouseHold",i,t))}),Ul.defineProperty(Mr,{CH:"mouseDragEnter"},function(){return null!==this.P?this.P.Pq:null},function(t){null===this.P&&Pr(this);var i=this.P.Pq;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"mouseDragEnter"),this.P.Pq=t,this.h("mouseDragEnter",i,t))}),Ul.defineProperty(Mr,{DH:"mouseDragLeave"},function(){return null!==this.P?this.P.Qq:null},function(t){null===this.P&&Pr(this);var i=this.P.Qq;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"mouseDragLeave"),this.P.Qq=t,this.h("mouseDragLeave",i,t))}),Ul.defineProperty(Mr,{Cz:"mouseDrop"},function(){return null!==this.P?this.P.ji:null},function(t){null===this.P&&Pr(this);var i=this.P.ji;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"mouseDrop"),this.P.ji=t,this.h("mouseDrop",i,t))}),Ul.defineProperty(Mr,{HC:"actionDown"},function(){return null!==this.P?this.P.qp:null},function(t){null===this.P&&Pr(this);var i=this.P.qp;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"actionDown"),this.P.qp=t,this.h("actionDown",i,t))}),Ul.defineProperty(Mr,{IC:"actionMove"},function(){return null!==this.P?this.P.rp:null},function(t){null===this.P&&Pr(this);var i=this.P.rp;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"actionMove"),this.P.rp=t,this.h("actionMove",i,t))}),Ul.defineProperty(Mr,{JC:"actionUp"},function(){return null!==this.P?this.P.sp:null},function(t){null===this.P&&Pr(this);var i=this.P.sp;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"actionUp"),this.P.sp=t,this.h("actionUp",i,t))}),Ul.defineProperty(Mr,{GC:"actionCancel"},function(){return null!==this.P?this.P.pp:null},function(t){null===this.P&&Pr(this);var i=this.P.pp;i!==t&&(null!==t&&Ul.j(t,"function",Mr,"actionCancel"),this.P.pp=t,this.h("actionCancel",i,t))}),Ul.defineProperty(Mr,{lA:"toolTip"},function(){return null!==this.P?this.P.ti:null},function(t){null===this.P&&Pr(this);var i=this.P.ti;i!==t&&(null!==t&&Ul.C(t,ks,Mr,"toolTip"),this.P.ti=t,this.h("toolTip",i,t))}),Ul.defineProperty(Mr,{contextMenu:"contextMenu"},function(){return null!==this.P?this.P.Zh:null},function(t){null===this.P&&Pr(this);var i=this.P.Zh;i!==t&&(null!==t&&Ul.C(t,ks,Mr,"contextMenu"),this.P.Zh=t,this.h("contextMenu",i,t))}),Mr.prototype.bind=Mr.prototype.bind=function(t){t.fg=this;var i=this.zo();null!==i&&vo(i)&&Ul.k("Cannot add a Binding to a template that has already been copied: "+t),null===this.Gc&&(this.Gc=new l(mi)),this.Gc.add(t)},Mr.prototype.findTemplateBinder=Mr.prototype.zo=function(){for(var t=this instanceof to?this:this.S;null!==t;){if(null!==t.yl)return t;t=t.S}return null},Mr.fromSvg=Mr.fromSVG=function(t){return Al(t)},Mr.prototype.setProperties=function(t){Ul.ot(this,t)};var nc;Mr.make=nc=function(i){var e=arguments,n=null,r=null;if("function"==typeof i)r=i;else if("string"==typeof i){var o=rc.ta(i);"function"==typeof o?(e=Ul.Pk(arguments),n=o(e)):r=Kl[i]}if(null===n&&(void 0===r&&(n=t.$,void 0!==n&&void 0!==n.noop&&Ul.k("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),Ul.k("GraphObject.make failed to complete, it may be conflicting with another var.")),null!==r&&r.constructor||Ul.k("GraphObject.make requires a class function or class name, not: "+i),n=new r),o=1,n instanceof Ge&&1<e.length){var s=n,r=e[1];("string"==typeof r||r instanceof HTMLDivElement)&&(yr(s,r),o++)}for(;o<e.length;o++)r=e[o],void 0===r?Ul.k("Undefined value at argument "+o+" for object being constructed by GraphObject.make: "+n):$r(n,r);return n};var rc=new g("string","function");Mr.getBuilders=function(){var t,i=new g("string","function");for(t in rc)if(t!==t.toLowerCase()){var e=rc[t];"function"==typeof e&&i.add(t,e)}return i.freeze(),i};var oc;Mr.defineBuilder=oc=function(t,i){Ul.j(t,"string",Mr,"defineBuilder:name"),Ul.j(i,"function",Mr,"defineBuilder:func");var e=t.toLowerCase();""!==t&&"none"!==e&&t!==e||Ul.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),rc.add(t,i)};var sc;Mr.takeBuilderArgument=sc=function(t,i,e){void 0===e&&(e=null);var n=t[1];if("function"==typeof e?e(n):"string"==typeof n)return t.splice(1,1),n;if(void 0===i)throw Error("no "+("function"==typeof e?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return i},oc("Button",function(){var t=new kr(Uf);t.addColorStop(0,"white"),t.addColorStop(1,"lightgray");var i=new kr(Uf);return i.addColorStop(0,"white"),i.addColorStop(1,"dodgerblue"),t=nc(to,uc,{pz:!0},{_buttonFillNormal:t,_buttonStrokeNormal:"gray",_buttonFillOver:i,_buttonStrokeOver:"blue"},nc(Po,{name:"ButtonBorder",Fb:"Rectangle",A:new D(0,0,2.761423749153968,2.761423749153968),B:new D(1,1,-2.761423749153968,-2.761423749153968),fill:t,stroke:"gray"})),t.ZD=function(t,i){var e=i.je("ButtonBorder");if(e instanceof Po){var n=i._buttonFillOver;i._buttonFillNormal=e.fill,e.fill=n,n=i._buttonStrokeOver,i._buttonStrokeNormal=e.stroke,e.stroke=n}},t.$D=function(t,i){var e=i.je("ButtonBorder");e instanceof Po&&(e.fill=i._buttonFillNormal,e.stroke=i._buttonStrokeNormal)},t}),oc("TreeExpanderButton",function(){var t=nc("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},nc(Po,{name:"ButtonIcon",Fb:"MinusLine",xa:Au.mp},new mi("figure","isTreeExpanded",function(t,i){var e=i.S;return t?e._treeExpandedFigure:e._treeCollapsedFigure}).rw()),{visible:!1},new mi("visible","isTreeLeaf",function(t){return!t}).rw());return t.click=function(t,i){var e=i.T;if(e instanceof ks&&(e=e.Lh),e instanceof Ms){var n=e.g;if(null!==n){if(n=n.Eb,e.Vc){if(!n.canCollapseTree(e))return}else if(!n.canExpandTree(e))return;t.Tc=!0,e.Vc?n.collapseTree(e):n.expandTree(e)}}},t}),oc("SubGraphExpanderButton",function(){var t=nc("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},nc(Po,{name:"ButtonIcon",Fb:"MinusLine",xa:Au.mp},new mi("figure","isSubGraphExpanded",function(t,i){var e=i.S;return t?e._subGraphExpandedFigure:e._subGraphCollapsedFigure}).rw()));return t.click=function(t,i){var e=i.T;if(e instanceof ks&&(e=e.Lh),e instanceof xa){var n=e.g;if(null!==n){if(n=n.Eb,e.be){if(!n.canCollapseSubGraph(e))return}else if(!n.canExpandSubGraph(e))return;t.Tc=!0,e.be?n.collapseSubGraph(e):n.expandSubGraph(e)}}},t}),oc("ContextMenuButton",function(){var t=nc("Button");t.stretch=_f;var i=t.je("ButtonBorder");return i instanceof Po&&(i.Fb="Rectangle",i.A=new D(0,0,2,3),i.B=new D(1,1,-2,-2)),t}),oc("PanelExpanderButton",function(t){var i=sc(t,"COLLAPSIBLE");t=nc("Button",nc(Po,"TriangleUp",{xa:new w(6,4)},new mi("figure","visible",function(t){return t?"TriangleUp":"TriangleDown"}).rw(i)));var e=t.je("ButtonBorder");return e instanceof Po&&(e.stroke=null,e.fill="transparent"),t.click=function(t,e){var n=e.g;if(null!==n){var r=e.T.je(i);null!==r&&(n.Wb("Collapse/Expand Panel"),r.visible=!r.visible,n.Wd("Collapse/Expand Panel"))}},t}),_r.prototype.copy=function(){var t=new _r;return t.Wh=this.Wh,t.ci=this.ci,t.Yh=this.Yh,t.Rq=this.Rq,t.Sq=this.Sq,t.mi=this.mi,t.li=this.li,t.ki=this.ki,t.Pq=this.Pq,t.Qq=this.Qq,t.ji=this.ji,t.qp=this.qp,t.rp=this.rp,t.sp=this.sp,t.pp=this.pp,t.ti=this.ti,t.Zh=this.Zh,t},Ul.Ga(to,Mr),Ul.Mh(to),Ul.fa("Panel",to),to.prototype.cloneProtected=function(t){if(Mr.prototype.cloneProtected.call(this,t),t.oa=this.oa,t.Pe=this.Pe.Z(),t.Kg=this.Kg,t.gq=this.gq,t.Mp=this.Mp.Z(),t.bi=this.bi,t.oa===fc){t.Xi=this.Xi.Z(),t.uh=this.uh,t.ai=this.ai,t.Dl=this.Dl,t.th=this.th,t.sh=this.sh,t.Cl=this.Cl;var i=[];if(0<this.yd.length)for(var e=this.yd,n=e.length,r=0;n>r;r++)if(void 0!==e[r]){var o=e[r].copy();o.ql(t),i[r]=o}if(t.yd=i,i=[],0<this.rd.length)for(e=this.rd,n=e.length,r=0;n>r;r++)void 0!==e[r]&&(o=e[r].copy(),o.ql(t),i[r]=o);t.rd=i,t.am=this.am,t.Al=this.Al,t.ui=this.ui,t.hi=this.hi}t.jo=this.jo,t.aq.assign(this.aq),t.bq=this.bq.Z(),t.rh=this.rh,t.yl=this.yl,t.uq=this.uq,t.gi=this.gi,t.Zf=this.Zf,t.Hn=this.Hn,t.vi.assign(this.vi),t.yh=this.yh,null!==this.xr&&(t.xr=this.xr)},to.prototype.Nh=function(t){Mr.prototype.Nh.call(this,t),t.ya=this.ya;for(var i=t.ya.n,e=i.length,n=0;e>n;n++)i[n].Pg=t;t.hm=null},to.prototype.copy=function(){var t=Mr.prototype.copy.call(this);if(null!==t){for(var i=this.ya.n,e=i.length,n=0;e>n;n++){var r=i[n].copy(),o=t;r.ql(o),r.Wl=null;var s=o.ya,a=s.count;if(s.Yd(a,r),s=o.T,null!==s){s.Bk=null,null!==r.Jd&&s instanceof Ms&&(s.yh=!0);var h=o.g;null!==h&&h.ha.gb||s.Dc(Ju,"elements",o,null,r,null,a)}}return t}return null},to.prototype.toString=function(){return"Panel("+this.type+")#"+Ul.Uc(this)};var ac;to.Position=ac=Ul.s(to,"Position",0),to.Horizontal=Ul.s(to,"Horizontal",1);var hc;to.Vertical=hc=Ul.s(to,"Vertical",2);var lc;to.Spot=lc=Ul.s(to,"Spot",3);var uc;to.Auto=uc=Ul.s(to,"Auto",4);var fc;to.Table=fc=Ul.s(to,"Table",5),to.Viewbox=Ul.s(to,"Viewbox",6);var cc;to.TableRow=cc=Ul.s(to,"TableRow",7);var pc;to.TableColumn=pc=Ul.s(to,"TableColumn",8);var dc;to.Link=dc=Ul.s(to,"Link",9);var yc;to.Grid=yc=Ul.s(to,"Grid",10),Ul.defineProperty(to,{type:"type"},function(){return this.oa},function(t){var i=this.oa;i!==t&&(i!==cc&&i!==pc||Ul.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+t),this.oa=t,this.oa===yc?this.Kg=!0:this.oa===fc&&io(this),this.R(),this.h("type",i,t))}),Ul.u(to,{elements:"elements"},function(){return this.ya.i}),Ul.u(to,{Ha:"naturalBounds"},function(){return this.Hc}),Ul.defineProperty(to,{padding:"padding"},function(){return this.Pe},function(t){"number"==typeof t?(0>t&&Ul.wa(t,">= 0",to,"padding"),t=new j(t)):(Ul.C(t,j,to,"padding"),0>t.left&&Ul.wa(t.left,">= 0",to,"padding:value.left"),0>t.right&&Ul.wa(t.right,">= 0",to,"padding:value.right"),0>t.top&&Ul.wa(t.top,">= 0",to,"padding:value.top"),0>t.bottom&&Ul.wa(t.bottom,">= 0",to,"padding:value.bottom"));var i=this.Pe;i.L(t)||(this.Pe=t=t.Z(),this.R(),this.h("padding",i,t))}),Ul.defineProperty(to,{Tk:"defaultAlignment"},function(){return this.Mp},function(t){var i=this.Mp;i.L(t)||(this.Mp=t=t.Z(),this.R(),this.h("defaultAlignment",i,t))}),Ul.defineProperty(to,{Bd:"defaultStretch"},function(){return this.bi},function(t){var i=this.bi;i!==t&&(Ul.rb(t,Mr,to,"defaultStretch"),this.bi=t,this.R(),this.h("defaultStretch",i,t))}),Ul.defineProperty(to,{sJ:"defaultSeparatorPadding"},function(){return void 0===this.Xi?Au.np:this.Xi},function(t){if(void 0!==this.Xi){"number"==typeof t&&(t=new j(t));var i=this.Xi;i.L(t)||(this.Xi=t=t.Z(),this.h("defaultSeparatorPadding",i,t))}}),Ul.defineProperty(to,{qJ:"defaultRowSeparatorStroke"},function(){return void 0===this.ai?null:this.ai},function(t){var i=this.ai;i!==t&&(null===t||"string"==typeof t||t instanceof kr)&&(t instanceof kr&&t.freeze(),this.ai=t,this.h("defaultRowSeparatorStroke",i,t))}),Ul.defineProperty(to,{rJ:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.uh?1:this.uh},function(t){if(void 0!==this.uh){var i=this.uh;i!==t&&isFinite(t)&&t>=0&&(this.uh=t,this.h("defaultRowSeparatorStrokeWidth",i,t))}}),Ul.defineProperty(to,{pJ:"defaultRowSeparatorDashArray"},function(){return void 0===this.Dl?null:this.Dl},function(t){if(void 0!==this.Dl){var i=this.Dl;if(i!==t){if(null===t||Array.isArray(t)||Ul.Kd(t,"Array",to,"defaultRowSeparatorDashArray:value"),null!==t){for(var e=t.length,n=0,r=0;e>r;r++){var o=t[r];"number"==typeof o&&o>=0&&isFinite(o)||Ul.k("defaultRowSeparatorDashArray:value "+o+" must be a positive number or zero."),n+=o}if(0===n){if(null===i)return;t=null}}this.Dl=t,this.ma(),this.h("defaultRowSeparatorDashArray",i,t)}}}),Ul.defineProperty(to,{kJ:"defaultColumnSeparatorStroke"},function(){return void 0===this.sh?null:this.sh},function(t){if(void 0!==this.sh){var i=this.sh;i!==t&&(null===t||"string"==typeof t||t instanceof kr)&&(t instanceof kr&&t.freeze(),this.sh=t,this.h("defaultColumnSeparatorStroke",i,t))}}),Ul.defineProperty(to,{lJ:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.th?1:this.th},function(t){if(void 0!==this.th){var i=this.th;i!==t&&isFinite(t)&&t>=0&&(this.th=t,this.h("defaultColumnSeparatorStrokeWidth",i,t))}}),Ul.defineProperty(to,{jJ:"defaultColumnSeparatorDashArray"},function(){return void 0===this.Cl?null:this.Cl},function(t){if(void 0!==this.Cl){var i=this.Cl;if(i!==t){if(null===t||Array.isArray(t)||Ul.Kd(t,"Array",to,"defaultColumnSeparatorDashArray:value"),null!==t){for(var e=t.length,n=0,r=0;e>r;r++){var o=t[r];"number"==typeof o&&o>=0&&isFinite(o)||Ul.k("defaultColumnSeparatorDashArray:value "+o+" must be a positive number or zero."),n+=o}if(0===n){if(null===i)return;t=null}}this.Cl=t,this.ma(),this.h("defaultColumnSeparatorDashArray",i,t)}}}),Ul.defineProperty(to,{HK:"viewboxStretch"},function(){return this.jo},function(t){var i=this.jo;i!==t&&(Ul.rb(t,Mr,to,"viewboxStretch"),this.jo=t,this.h("viewboxStretch",i,t))}),Ul.defineProperty(to,{aw:"gridCellSize"},function(){return this.aq},function(t){var i=this.aq;i.L(t)||(Ul.C(t,w,to,"gridCellSize"),t.J()&&0!==t.width&&0!==t.height||Ul.k("Invalid Panel.gridCellSize: "+t),this.aq=t.Z(),null!==this.g&&this===this.g.Gs&&Sn(this.g),this.ma(),this.h("gridCellSize",i,t))}),Ul.defineProperty(to,{CD:"gridOrigin"},function(){return this.bq},function(t){var i=this.bq;i.L(t)||(Ul.C(t,m,to,"gridOrigin"),t.J()||Ul.k("Invalid Panel.gridOrigin: "+t),this.bq=t.Z(),null!==this.g&&Sn(this.g),this.ma(),this.h("gridOrigin",i,t))}),Hl=to.prototype,Hl.Qu=function(t){Mr.prototype.Qu.call(this,t);for(var i=this.ya.n,e=i.length,n=0;e>n;n++)i[n].Qu(t)},Hl.Mj=function(t,i){if(this.oa===yc){var e=this.Hi()*i.scale;0>=e&&(e=1);var n=this.aw,r=n.width,n=n.height,o=this.Ha,s=o.width,o=o.height,a=Math.ceil(s/r),h=Math.ceil(o/n),l=this.CD;t.save(),t.beginPath(),t.rect(0,0,s,o),t.clip();for(var u=[],f=this.ya.n,c=f.length,p=0;c>p;p++){var d=f[p],y=[];if(u.push(y),d.visible)for(var d=oo(d.Fb),v=p+1;c>v;v++){var g=f[v];g.visible&&oo(g.Fb)===d&&(g=g.interval,g>=2&&y.push(g))}}for(f=this.ya.n,c=f.length,p=0;c>p;p++){var m=f[p];if(m.visible){var y=u[p],d=m.interval,v=!1,b=!0,x=m.gA;if(null!==x&&(v=!0,void 0!==t.setLineDash?(t.setLineDash(x),t.lineDashOffset=m.dd):void 0!==t.webkitLineDash?(t.webkitLineDash=x,t.webkitLineDashOffset=m.dd):void 0!==t.mozDash?(t.mozDash=x,t.mozDashOffset=m.dd):b=!1),"LineV"===m.Fb){t.lineWidth=m.hb,zr(this,t,m.stroke,!1,!1),t.beginPath();for(var w=g=Math.floor(-l.x/r);g+a>=w;w++){var k=w*r+l.x;if(k>=0&&s>k&&ro(w,d,y)&&(v&&!b?Tr(t,k,0,k,o,x,m.dd):(t.moveTo(k,0),t.lineTo(k,o)),2>r*d*e))break}t.stroke()}else if("LineH"===m.Fb){for(t.lineWidth=m.hb,zr(this,t,m.stroke,!1,!1),t.beginPath(),w=g=Math.floor(-l.y/n);g+h>=w&&(k=w*n+l.y,!(k>=0&&o>=k&&ro(w,d,y)&&(v&&!b?Tr(t,0,k,s,k,x,m.dd):(t.moveTo(0,k),t.lineTo(s,k)),2>n*d*e)));w++);t.stroke()}else if("BarV"===m.Fb)for(zr(this,t,m.fill,!0,!1),m=m.width,isNaN(m)&&(m=r),w=g=Math.floor(-l.x/r);g+a>=w&&(k=w*r+l.x,!(k>=0&&s>k&&ro(w,d,y)&&(t.fillRect(k,0,m,o),2>r*d*e)));w++);else if("BarH"===m.Fb)for(zr(this,t,m.fill,!0,!1),m=m.height,isNaN(m)&&(m=n),w=g=Math.floor(-l.y/n);g+h>=w&&(k=w*n+l.y,!(k>=0&&o>=k&&ro(w,d,y)&&(t.fillRect(0,k,s,m),2>n*d*e)));w++);v&&(void 0!==t.setLineDash?(t.setLineDash(Ul.mh),t.lineDashOffset=0):void 0!==t.webkitLineDash?(t.webkitLineDash=Ul.mh,t.webkitLineDashOffset=0):void 0!==t.mozDash&&(t.mozDash=null,t.mozDashOffset=0))}}t.restore(),Je(i,t,!1)}else{for(this.oa===fc&&(t.lineCap="butt",no(this,t,!0,this.yd,!0),no(this,t,!1,this.rd,!0),eo(this,t,!0,this.yd),eo(this,t,!1,this.rd),no(this,t,!0,this.yd,!1),no(this,t,!1,this.rd,!1)),(e=this.LD)&&t.save(),r=this.If(),n=this.ya.n,s=n.length,o=0;s>o;o++)a=n[o],e&&a===r&&(t.Ft=!0),a.We(t,i),e&&a===r&&(t.Ft=!1);e&&(t.restore(),Je(i,t,!1))}},Hl.Co=function(t,i,e,n,r){var o=this.Tf(),s=this.transform,a=1/(s.m11*s.m22-s.m12*s.m21),h=s.m22*a,l=-s.m12*a,u=-s.m21*a,f=s.m11*a,c=a*(s.m21*s.dy-s.m22*s.dx),p=a*(s.m12*s.dx-s.m11*s.dy);if(null!==this.nm)return s=this.ba,Au.bl(s.left,s.top,s.right,s.bottom,t,i,e,n,r);if(null!==this.background)o=t*h+i*u+c,a=t*l+i*f+p,t=e*h+n*u+c,e=e*l+n*f+p,r.m(0,0),n=this.Ha,e=Au.bl(0,0,n.width,n.height,o,a,t,e,r),r.transform(s);else{for(o||(h=1,u=l=0,f=1,p=c=0),a=t*h+i*u+c,t=t*l+i*f+p,h=e*h+n*u+c,n=e*l+n*f+p,r.m(h,n),l=(h-a)*(h-a)+(n-t)*(n-t),e=!1,f=this.ya.n,p=f.length,u=Ul.K(),c=0;p>c;c++)i=f[c],i.visible&&i.Co(a,t,h,n,u)&&(e=!0,i=(a-u.x)*(a-u.x)+(t-u.y)*(t-u.y),l>i&&(l=i,r.set(u)));Ul.v(u),o&&r.transform(s)}return e},Hl.R=function(t){Mr.prototype.R.call(this,t),this.oa===uc&&(t=this.If(),null!==t&&t.R(!0)),t=this.ya.n;for(var i=t.length,e=0;i>e;e++){var n=t[e];!0!==Ur(n)&&(n.xa.J()||(n instanceof Ta||n instanceof to||n instanceof Fo||Er(n,!1)!==Zf)&&n.R(!0))}},Hl.Fo=function(){if(!1===Ur(this)){Yr(this,!0),Wr(this,!0);for(var t=this.ya.n,i=t.length,e=0;i>e;e++)t[e].Fo()}},Hl.Jg=function(){if(0!==(2048&this.ea)==!1){Hr(this,!0),Kr(this,!0);for(var t=this.ya.n,i=t.length,e=0;i>e;e++)t[e].mz()}},Hl.mz=function(){Kr(this,!0);for(var t=this.ya.n,i=t.length,e=0;i>e;e++)t[e].mz()},Hl.Oo=function(t,i,e,n){var r=this.vi;r.width=0,r.height=0;var o=this.xa,s=this.vg;void 0===e&&(e=s.width,n=s.height),e=Math.max(e,s.width),n=Math.max(n,s.height);var a=this.af;isNaN(o.width)||(t=Math.min(o.width,a.width)),isNaN(o.height)||(i=Math.min(o.height,a.height)),t=Math.max(e,t),i=Math.max(n,i);var h=this.padding;t=Math.max(t-h.left-h.right,0),i=Math.max(i-h.top-h.bottom,0);var l=this.ya.n;if(0!==l.length){var u=this.oa.Ub;switch(u){case"Position":var f=t,c=i,p=e,d=n,y=l.length;r.x=0,r.y=0,r.width=0;for(var v=r.height=0;y>v;v++){var g=l[v];if(g.visible||g===this.ec){var m=g.margin,b=m.right+m.left,x=m.top+m.bottom;Nr(g,f,c,p,d);var w=g.Ba,P=Math.max(w.width+b,0),T=Math.max(w.height+x,0),S=g.position.x,j=g.position.y;if(isFinite(S)||(S=0),isFinite(j)||(j=0),g instanceof Po){var N=g;if(N.rz)var D=N.hb/2,S=S-D,j=j-D}C(r,S,j,P,T)}}break;case"Vertical":for(var A=t,L=e,F=l.length,z=Ul.eb(),B=0;F>B;B++){var q=l[B];if(q.visible||q===this.ec){var O=Er(q,!1);if(O!==Zf&&O!==$f)z.push(q);else{var E=q.margin,I=E.right+E.left,R=E.top+E.bottom;Nr(q,A,1/0,L,0);var G=q.Ba,V=Math.max(G.width+I,0),H=Math.max(G.height+R,0);r.width=Math.max(r.width,V),r.height+=H}}}var K=z.length;if(0!==K){for(this.xa.width?A=Math.min(this.xa.width,this.af.width):0!==r.width&&(A=Math.min(r.width,this.af.width)),B=0;K>B;B++)q=z[B],(q.visible||q===this.ec)&&(E=q.margin,I=E.right+E.left,R=E.top+E.bottom,Nr(q,A,1/0,L,0),G=q.Ba,V=Math.max(G.width+I,0),H=Math.max(G.height+R,0),r.width=Math.max(r.width,V),r.height+=H);Ul.ra(z)}break;case"Horizontal":for(var U=i,Y=n,J=l.length,W=Ul.eb(),X=0;J>X;X++){var Z=l[X];if(Z.visible||Z===this.ec){var Q=Er(Z,!1);if(Q!==Zf&&Q!==_f)W.push(Z);else{var $=Z.margin,_=$.right+$.left,ti=$.top+$.bottom;Nr(Z,1/0,U,0,Y);var ii=Z.Ba,ei=Math.max(ii.width+_,0),ni=Math.max(ii.height+ti,0);r.width+=ei,r.height=Math.max(r.height,ni)}}}var ri=W.length;if(0!==ri){for(this.xa.height?U=Math.min(this.xa.height,this.af.height):0!==r.height&&(U=Math.min(r.height,this.af.height)),X=0;ri>X;X++)Z=W[X],(Z.visible||Z===this.ec)&&($=Z.margin,_=$.right+$.left,ti=$.top+$.bottom,Nr(Z,1/0,U,0,Y),ii=Z.Ba,ei=Math.max(ii.width+_,0),ni=Math.max(ii.height+ti,0),r.width+=ei,r.height=Math.max(r.height,ni));Ul.ra(W)}break;case"Spot":t:{var oi=t,si=i,ai=e,hi=n,li=l.length,ui=this.If(),fi=ui.margin,ci=0,pi=0,di=fi.right+fi.left,yi=fi.top+fi.bottom;Nr(ui,oi,si,ai,hi);var vi=ui.Ba,gi=vi.width,mi=vi.height,bi=Math.max(gi+di,0),xi=Math.max(mi+yi,0);r.x=-fi.left,r.y=-fi.top,r.width=bi,r.height=xi;for(var wi=0;li>wi;wi++){var ki=l[wi];if(ki!==ui&&(ki.visible||ki===this.ec)){fi=ki.margin,ci=fi.right+fi.left,pi=fi.top+fi.bottom,Nr(ki,oi,si,0,0);var vi=ki.Ba,bi=Math.max(vi.width+ci,0),xi=Math.max(vi.height+pi,0),Mi=ki.alignment;Mi.Lc()&&(Mi=this.Tk),Mi.pd()||(Mi=ou);var Pi=ki.Hj;Pi.Lc()&&(Pi=ou),C(r,Mi.x*gi+Mi.offsetX-(Pi.x*vi.width-Pi.offsetX)-fi.left,Mi.y*mi+Mi.offsetY-(Pi.y*vi.height-Pi.offsetY)-fi.top,bi,xi)}}var Ti=ui.stretch;switch(Ti===Qf&&(Ti=Er(ui,!1)),Ti){case Zf:break t;case tc:if(!isFinite(oi)&&!isFinite(si))break t;break;case _f:if(!isFinite(oi))break t;break;case $f:if(!isFinite(si))break t}for(vi=ui.Ba,gi=vi.width,mi=vi.height,bi=Math.max(gi+di,0),xi=Math.max(mi+yi,0),fi=ui.margin,r.x=-fi.left,r.y=-fi.top,r.width=bi,r.height=xi,wi=0;li>wi;wi++)ki=l[wi],ki===ui||!ki.visible&&ki!==this.ec||(fi=ki.margin,ci=fi.right+fi.left,pi=fi.top+fi.bottom,vi=ki.Ba,bi=Math.max(vi.width+ci,0),xi=Math.max(vi.height+pi,0),Mi=ki.alignment,Mi.Lc()&&(Mi=this.Tk),Mi.pd()||(Mi=ou),Pi=ki.Hj,Pi.Lc()&&(Pi=ou),C(r,Mi.x*gi+Mi.offsetX-(Pi.x*vi.width-Pi.offsetX)-fi.left,Mi.y*mi+Mi.offsetY-(Pi.y*vi.height-Pi.offsetY)-fi.top,bi,xi))}break;case"Auto":var Si=t,Ci=i,ji=e,Ni=n,Di=l.length,Ai=this.If(),Li=Ai.margin,Fi=Li.right+Li.left,zi=Li.top+Li.bottom;Nr(Ai,Si,Ci,ji,Ni);var Bi=Ai.Ba,qi=Math.max(Bi.width+Fi,0),Oi=Math.max(Bi.height+zi,0),Ei=po(Ai),Ii=Ei.x*qi+Ei.offsetX,Ri=Ei.y*Oi+Ei.offsetY,Ei=yo(Ai),Gi=Ei.x*qi+Ei.offsetX,Vi=Ei.y*Oi+Ei.offsetY,Hi=Si,Ki=Ci;isFinite(Si)&&(Hi=Math.abs(Ii-Gi)),isFinite(Ci)&&(Ki=Math.abs(Ri-Vi));var Ui=Ul.ul();Ui.m(0,0);for(var Yi=0;Di>Yi;Yi++){var Ji=l[Yi];if(Ji!==Ai&&(Ji.visible||Ji===this.ec)){var Li=Ji.margin,Wi=Li.right+Li.left,Xi=Li.top+Li.bottom;Nr(Ji,Hi,Ki,0,0),Bi=Ji.Ba,qi=Math.max(Bi.width+Wi,0),Oi=Math.max(Bi.height+Xi,0),Ui.m(Math.max(qi,Ui.width),Math.max(Oi,Ui.height))}}if(1===Di)r.width=qi,r.height=Oi,Ul.Oj(Ui);else{var Zi=po(Ai),Qi=yo(Ai),$i=0,_i=0;Qi.x!==Zi.x&&Qi.y!==Zi.y&&($i=Ui.width/Math.abs(Qi.x-Zi.x),_i=Ui.height/Math.abs(Qi.y-Zi.y)),Ul.Oj(Ui);var te=0;if(Ai instanceof Po){var ie=Ai,te=ie.hb*ie.scale;jo(ie)===ic&&($i=_i=Math.max($i,_i))}var $i=$i+(Math.abs(Zi.offsetX)+Math.abs(Qi.offsetX)+te),_i=_i+(Math.abs(Zi.offsetY)+Math.abs(Qi.offsetY)+te),ee=Ai.stretch;switch(ee===Qf&&(ee=Er(Ai,!1)),ee){case Zf:Ni=ji=0;break;case tc:isFinite(Si)&&($i=Si),isFinite(Ci)&&(_i=Ci);break;case _f:isFinite(Si)&&($i=Si),Ni=0;break;case $f:ji=0,isFinite(Ci)&&(_i=Ci)}Ai instanceof Po&&!Ai.xa.J()&&(ie=Ai,ie.Rg?ie.jk=null:ie.Pa=null),Ai.Fo(),Nr(Ai,$i,_i,ji,Ni),r.width=Ai.Ba.width+Fi,r.height=Ai.Ba.height+zi}break;case"Table":for(var ne=t,re=i,oe=e,se=n,ae=l.length,he=Ul.eb(),le=Ul.eb(),ue=0;ae>ue;ue++){var fe=l[ue],ce=fe instanceof to?fe:null;if(null===ce||ce.type!==cc&&ce.type!==pc||!fe.visible)he.push(fe);else{le.push(fe);for(var pe=ce.ya.n,de=pe.length,ye=0;de>ye;ye++){var ve=pe[ye];ce.type===cc?ve.rc=fe.rc:ce.type===pc&&(ve.column=fe.column),he.push(ve)}}}ae=he.length,0===ae&&(this.gd(0),this.fd(0));for(var ge=[],ue=0;ae>ue;ue++)fe=he[ue],Yr(fe,!0),Wr(fe,!0),ge[fe.rc]||(ge[fe.rc]=[]),ge[fe.rc][fe.column]||(ge[fe.rc][fe.column]=[]),ge[fe.rc][fe.column].push(fe);Ul.ra(he);for(var me=Ul.eb(),be=Ul.eb(),xe=Ul.eb(),we={count:0},ke={count:0},Me=ne,Pe=re,Te=this.yd,ae=Te.length,ue=0;ae>ue;ue++){var Se=Te[ue];void 0!==Se&&(Se.Qa=0)}for(Te=this.rd,ae=Te.length,ue=0;ae>ue;ue++)Se=Te[ue],void 0!==Se&&(Se.Qa=0);for(var Ce=ge.length,je=0,ue=0;Ce>ue;ue++)ge[ue]&&(je=Math.max(je,ge[ue].length));for(var Ne=Math.min(this.ui,Ce-1),De=Math.min(this.hi,je-1),Ae=0,Ce=ge.length,ue=Ne;Ce>ue;ue++)if(ge[ue]){var je=ge[ue].length,Le=this.gd(ue);for(Le.Qa=0,ye=De;je>ye;ye++)if(ge[ue][ye]){var Fe=this.fd(ye);void 0===me[ye]&&(Fe.Qa=0,me[ye]=!0);for(var ze=ge[ue][ye],Be=ze.length,qe=0;Be>qe;qe++)if(fe=ze[qe],fe.visible||fe===this.ec){var Oe=1<fe.tj||1<fe.Wi;Oe&&be.push(fe);var Ee=fe.margin,Ie=Ee.right+Ee.left,Re=Ee.top+Ee.bottom,Ge=Ir(fe,Le,Fe,!1),Ve=fe.xa,He=!isNaN(Ve.height),Ke=!isNaN(Ve.width)&&He;Oe||Ge===Zf||Ke||(void 0===we[ye]&&(we[ye]=-1,we.count++),void 0===ke[ue]&&(ke[ue]=-1,ke.count++),xe.push(fe)),Nr(fe,1/0,1/0,0,0);var Ue=fe.Ba,Ye=Math.max(Ue.width+Ie,0),Je=Math.max(Ue.height+Re,0);1!==fe.tj||Ge!==Zf&&Ge!==_f||(Se=this.gd(ue),Ae=Math.max(Je-Se.Qa,0),Ae>Pe&&(Ae=Pe),Se.Qa+=Ae,Pe=Math.max(Pe-Ae,0)),1!==fe.Wi||Ge!==Zf&&Ge!==$f||(Se=this.fd(ye),Ae=Math.max(Ye-Se.Qa,0),Ae>Me&&(Ae=Me),Se.Qa+=Ae,Me=Math.max(Me-Ae,0)),Oe&&fe.Fo()}}}Ul.ra(me);for(var We=0,Xe=0,ae=this.ps,ue=0;ae>ue;ue++)void 0!==this.rd[ue]&&(We+=this.fd(ue).yb);for(ae=this.kt,ue=0;ae>ue;ue++)void 0!==this.yd[ue]&&(Xe+=this.gd(ue).yb);for(var Me=Math.max(ne-We,0),Ze=Pe=Math.max(re-Xe,0),Qe=Me,ae=xe.length,ue=0;ae>ue;ue++){var fe=xe[ue],Le=this.gd(fe.rc),Fe=this.fd(fe.column),$e=fe.Ba,Ee=fe.margin,Ie=Ee.right+Ee.left,Re=Ee.top+Ee.bottom;we[fe.column]=0===Fe.Qa?Math.max($e.width+Ie,we[fe.column]):null,ke[fe.rc]=0===Le.Qa?Math.max($e.height+Re,ke[fe.rc]):null}var _e=0,tn=0;
for(ue in ke)"count"!==ue&&(_e+=ke[ue]);for(ue in we)"count"!==ue&&(tn+=we[ue]);for(var en=Ul.ul(),ue=0;ae>ue;ue++)if(fe=xe[ue],fe.visible||fe===this.ec){var Le=this.gd(fe.rc),Fe=this.fd(fe.column),nn=0;isFinite(Fe.width)?nn=Fe.width:(nn=isFinite(Me)&&null!==we[fe.column]?0===tn?Fe.Qa+Me:we[fe.column]/tn*Qe:null!==we[fe.column]?Me:Fe.Qa||Me,nn=Math.max(0,nn-Fe.lg()));var rn=0;switch(isFinite(Le.height)?rn=Le.height:(rn=isFinite(Pe)&&null!==ke[fe.rc]?0===_e?Le.Qa+Pe:ke[fe.rc]/_e*Ze:null!==ke[fe.rc]?Pe:Le.Qa||Pe,rn=Math.max(0,rn-Le.lg())),en.m(Math.max(Fe.Ki,Math.min(nn,Fe.Kf)),Math.max(Le.Ki,Math.min(rn,Le.Kf))),Ge=Ir(fe,Le,Fe,!1)){case _f:en.height=1/0;break;case $f:en.width=1/0}Ee=fe.margin,Ie=Ee.right+Ee.left,Re=Ee.top+Ee.bottom,fe.Fo(),Nr(fe,en.width,en.height,Fe.Ki,Le.Ki),Ue=fe.Ba,Ye=Math.max(Ue.width+Ie,0),Je=Math.max(Ue.height+Re,0),isFinite(Me)&&(Ye=Math.min(Ye,en.width)),isFinite(Pe)&&(Je=Math.min(Je,en.height));var on=0,on=Le.Qa;Le.Qa=Math.max(Le.Qa,Je),Ae=Le.Qa-on,Pe=Math.max(Pe-Ae,0),on=Fe.Qa,Fe.Qa=Math.max(Fe.Qa,Ye),Ae=Fe.Qa-on,Me=Math.max(Me-Ae,0)}Ul.ra(xe);for(var sn=Ul.ul(),ae=be.length,ue=0;ae>ue;ue++)if(fe=be[ue],fe.visible||fe===this.ec){switch(Le=this.gd(fe.rc),Fe=this.fd(fe.column),en.m(Math.max(Fe.Ki,Math.min(ne,Fe.Kf)),Math.max(Le.Ki,Math.min(re,Le.Kf))),Ge=Ir(fe,Le,Fe,!1)){case tc:0!==Fe.Qa&&(en.width=Math.min(en.width,Fe.Qa)),0!==Le.Qa&&(en.height=Math.min(en.height,Le.Qa));break;case _f:0!==Fe.Qa&&(en.width=Math.min(en.width,Fe.Qa));break;case $f:0!==Le.Qa&&(en.height=Math.min(en.height,Le.Qa))}isFinite(Fe.width)&&(en.width=Fe.width),isFinite(Le.height)&&(en.height=Le.height),sn.m(0,0);for(var an=1;an<fe.tj&&!(fe.rc+an>=this.kt);an++)Se=this.gd(fe.rc+an),sn.height+=Math.max(Se.Ki,isNaN(Se.Qe)?Se.Kf:Math.min(Se.Qe,Se.Kf));for(an=1;an<fe.Wi&&!(fe.column+an>=this.ps);an++)Se=this.fd(fe.column+an),sn.width+=Math.max(Se.Ki,isNaN(Se.Qe)?Se.Kf:Math.min(Se.Qe,Se.Kf));en.width+=sn.width,en.height+=sn.height,Ee=fe.margin,Ie=Ee.right+Ee.left,Re=Ee.top+Ee.bottom,Nr(fe,en.width,en.height,oe,se);for(var Ue=fe.Ba,Ye=Math.max(Ue.width+Ie,0),Je=Math.max(Ue.height+Re,0),hn=0,an=0;an<fe.tj&&!(fe.rc+an>=this.kt);an++)Se=this.gd(fe.rc+an),hn+=Se.total||0;if(Je>hn)for(var ln=Je-hn;ln>0;){var un=Se.yb||0;if(isNaN(Se.height)&&Se.Kf>un&&(Se.Qa=Math.min(Se.Kf,un+ln),Se.yb!==un&&(ln-=Se.yb-un)),-1===Se.index-1)break;Se=this.gd(Se.index-1)}for(var fn=0,an=0;an<fe.Wi&&!(fe.column+an>=this.ps);an++)Se=this.fd(fe.column+an),fn+=Se.total||0;if(Ye>fn)for(ln=Ye-fn;ln>0&&(un=Se.yb||0,isNaN(Se.width)&&Se.Kf>un&&(Se.Qa=Math.min(Se.Kf,un+ln),Se.yb!==un&&(ln-=Se.yb-un)),-1!==Se.index-1);)Se=this.fd(Se.index-1)}Ul.ra(be),Ul.Oj(sn),Ul.Oj(en);for(var cn=0,pn=0,Ge=Er(this,!0),dn=this.xa,yn=this.af,vn=Xe=We=0,gn=0,ae=this.ps,ue=0;ae>ue;ue++)void 0!==this.rd[ue]&&(Se=this.fd(ue),isFinite(Se.width)?(vn+=Se.width,vn+=Se.lg()):Mo(Se)===bc?(vn+=Se.yb,vn+=Se.lg()):0!==Se.yb&&(We+=Se.yb,We+=Se.lg()));var cn=isFinite(dn.width)?Math.min(dn.width,yn.width):Ge!==Zf&&isFinite(ne)?ne:We,cn=Math.max(cn,this.vg.width),cn=Math.max(cn-vn,0),mn=Math.max(cn/We,1);for(isFinite(mn)||(mn=1),ue=0;ae>ue;ue++)void 0!==this.rd[ue]&&(Se=this.fd(ue),isFinite(Se.width)||Mo(Se)===bc||(Se.Qa=Se.yb*mn),Se.position=r.width,0!==Se.yb&&(r.width+=Se.yb,r.width+=Se.lg()));for(ae=this.kt,ue=0;ae>ue;ue++)void 0!==this.yd[ue]&&(Se=this.gd(ue),isFinite(Se.height)?(gn+=Se.height,gn+=Se.lg()):Mo(Se)===bc?(gn+=Se.yb,gn+=Se.lg()):0!==Se.yb&&(Xe+=Se.yb,Xe+=Se.lg()));var pn=isFinite(dn.height)?Math.min(dn.height,yn.height):Ge!==Zf&&isFinite(re)?re:Xe,pn=Math.max(pn,this.vg.height),pn=Math.max(pn-gn,0),bn=Math.max(pn/Xe,1);for(isFinite(bn)||(bn=1),ue=0;ae>ue;ue++)void 0!==this.yd[ue]&&(Se=this.gd(ue),isFinite(Se.height)||Mo(Se)===bc||(Se.Qa=Se.yb*bn),Se.position=r.height,0!==Se.yb&&(r.height+=Se.yb,r.height+=Se.lg()));for(ae=le.length,ue=0;ae>ue;ue++){var xn=le[ue];xn.type===cc?(nn=r.width,Se=this.gd(xn.rc),rn=Se.Qa):(Se=this.fd(xn.column),nn=Se.Qa,rn=r.height),xn.Pc.m(0,0,nn,rn),Yr(xn,!1),ge[xn.rc]||(ge[xn.rc]=[]),ge[xn.rc][xn.column]||(ge[xn.rc][xn.column]=[]),ge[xn.rc][xn.column].push(xn)}Ul.ra(le),this.xr=ge;break;case"Viewbox":var wn=t,kn=i,Mn=e,Pn=n;1<l.length&&Ul.k("Viewbox Panel cannot contain more than one GraphObject.");var Tn=l[0];Tn.$b=1,Tn.Fo(),Nr(Tn,1/0,1/0,Mn,Pn);var Sn=Tn.Ba,Cn=Tn.margin,jn=Cn.right+Cn.left,Nn=Cn.top+Cn.bottom;if(isFinite(wn)||isFinite(kn)){var Dn=Tn.scale,An=Sn.width,Ln=Sn.height,Fn=Math.max(wn-jn,0),zn=Math.max(kn-Nn,0),Bn=1;this.jo===ic?0!==An&&0!==Ln&&(Bn=Math.min(Fn/An,zn/Ln)):0!==An&&0!==Ln&&(Bn=Math.max(Fn/An,zn/Ln)),0===Bn&&(Bn=1e-4),Tn.$b*=Bn,Dn!==Tn.scale&&(Yr(Tn,!0),Nr(Tn,1/0,1/0,Mn,Pn))}Sn=Tn.Ba,r.width=isFinite(wn)?wn:Math.max(Sn.width+jn,0),r.height=isFinite(kn)?kn:Math.max(Sn.height+Nn,0);break;case"Link":var qn=l.length,On=this instanceof ks?this.Lh:this;if(On instanceof Bs)if(0===qn){var En=this.Hc;M(En,0,0);var In=this.Ba;In.m(0,0,0,0)}else{var Rn=this instanceof ks?null:On.path,Gn=On.Mm,Vn=this.vi;Vn.assign(Gn),Vn.x=0;var Hn=Vn.y=0,Kn=On.points,Hn=void 0!==this.ka?this.ka:Kn.count;this.Mg.m(Gn.x,Gn.y),this.Vi.clear(),null!==Rn&&(Co(Rn,Gn.width,Gn.height),In=Rn.Ba,Vn.Th(In),this.Vi.add(In));for(var Un=Ul.jh(),Yn=Ul.K(),Jn=Ul.K(),Wn=0;qn>Wn;Wn++){var Xn=l[Wn];if(Xn!==Rn)if(Xn.tg&&Xn instanceof Po)Co(Xn,Gn.width,Gn.height),In=Xn.Ba,Vn.Th(In),this.Vi.add(In);else if(2>Hn)Nr(Xn,1/0,1/0),In=Xn.Ba,Vn.Th(In),this.Vi.add(In);else{var Zn=Xn.Pf,Qn=Xn.Bw,$n=Xn.Hj;$n.ne()&&($n=ou);var _n=Xn.Cw,tr=Xn.BE,ir=0,er=0,nr=0;if(-Hn>Zn||Zn>=Hn){var rr=On.XD,or=On.WD;_n!==Zc&&(nr=On.computeAngle(Xn,_n,or),Xn.angle=nr),ir=rr.x-Gn.x,er=rr.y-Gn.y}else{var sr,ar;if(Zn>=0)sr=Kn.ja(Zn),ar=Hn-1>Zn?Kn.ja(Zn+1):sr;else{var hr=Hn+Zn;sr=Kn.ja(hr),ar=hr>0?Kn.ja(hr-1):sr}or=Zn>=0?sr.Fi(ar):ar.Fi(sr),_n!==Zc&&(nr=On.computeAngle(Xn,_n,or),Xn.Ym=nr),ir=sr.x+(ar.x-sr.x)*Qn-Gn.x,er=sr.y+(ar.y-sr.y)*Qn-Gn.y}Nr(Xn,1/0,1/0);var In=Xn.Ba,En=Xn.Ha,lr=0;Xn instanceof Po&&(lr=Xn.hb);var ur=En.width+lr,fr=En.height+lr;Un.reset(),Un.translate(-In.x,-In.y),Un.scale(Xn.scale,Xn.scale),Un.rotate(_n===Zc?Xn.angle:or,ur/2,fr/2);var cr=new k(0,0,ur,fr);Yn.pt(cr,$n),Un.ab(Yn);var pr=-Yn.x+lr/2,dr=-Yn.y+lr/2;Jn.assign(tr),isNaN(Jn.x)&&(Jn.x=Zn>=0?ur/2+3:-(ur/2+3)),isNaN(Jn.y)&&(Jn.y=-(fr/2+3)),Jn.rotate(or),ir+=Jn.x,er+=Jn.y,cr.set(In),cr.x=ir+pr,cr.y=er+dr,this.Vi.add(cr),Vn.Th(cr)}}if(this.ue)for(var yr=this.ug;yr.next();)Nr(yr.value,1/0,1/0);this.vi=Vn;var vr=this.Mg;vr.m(vr.x+Vn.x,vr.y+Vn.y),M(r,Vn.width||0,Vn.height||0),Ul.Ye(Un),Ul.v(Yn),Ul.v(Jn)}break;case"Grid":break;case"TableRow":case"TableColumn":Ul.k(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:Ul.k("Unknown panel type: "+u)}}var gr=r.width,mr=r.height,br=this.padding,xr=br.top+br.bottom,gr=gr+(br.left+br.right),mr=mr+xr;isFinite(o.width)&&(gr=o.width),isFinite(o.height)&&(mr=o.height),gr=Math.min(a.width,gr),mr=Math.min(a.height,mr),gr=Math.max(s.width,gr),mr=Math.max(s.height,mr),gr=Math.max(e,gr),mr=Math.max(n,mr),r.width=gr,r.height=mr,M(this.Hc,gr,mr),Cr(this,0,0,gr,mr)},to.prototype.findMainElement=to.prototype.If=function(){if(null===this.hm){var t=this.ya.n,i=t.length;if(0===i)return null;for(var e=0;i>e;e++){var n=t[e];if(!0===n.tg)return this.hm=n}this.hm=t[0]}return this.hm},to.prototype.xi=function(t,i,e,n){var r=this.vi,o=this.ya.n,s=Ul.Vj(0,0,0,0);if(0===o.length){var a=this.ba;a.x=t,a.y=i,a.width=e,a.height=n}else{if(!this.xa.J()){var h=Er(this,!0),l=this.Pc,u=l.width,f=l.height,c=this.margin,p=c.left+c.right,d=c.top+c.bottom;switch(u===e&&f===n&&(h=Zf),h){case Zf:(u>e||f>n)&&(this.R(),Nr(this,u>e?e:u,f>n?n:f));break;case tc:this.R(!0),Nr(this,e+p,n+d,0,0);break;case _f:this.R(!0),Nr(this,e+p,f+d,0,0);break;case $f:this.R(!0),Nr(this,u+p,n+d,0,0)}}a=this.ba,a.x=t,a.y=i,a.width=e,a.height=n;var y=this.oa.Ub;switch(y){case"Position":for(var v=o.length,g=r.x-this.padding.left,m=r.y-this.padding.top,b=0;v>b;b++){var x=o[b],w=x.Ba,M=x.margin,P=x.position.x,T=x.position.y;if(s.x=isNaN(P)?-g:P-g,s.y=isNaN(T)?-m:T-m,x instanceof Po){var S=x;if(S.rz){var j=S.hb/2;s.x-=j,s.y-=j}}s.x+=M.left,s.y+=M.top,s.width=w.width,s.height=w.height,x.visible&&x.zc(s.x,s.y,s.width,s.height)}break;case"Vertical":for(var N=o.length,D=this.padding.left,A=this.padding.top,L=0;N>L;L++){var F=D,z=o[L];if(z.visible){var B=z.Ba,q=z.margin,O=q.left+q.right,E=D+this.padding.right,I=B.width,R=Er(z,!1);(isNaN(z.xa.width)&&R===tc||R===_f)&&(I=Math.max(r.width-O-E,0));var G=I+O+E,V=z.alignment;V.Lc()&&(V=this.Tk),V.pd()||(V=ou),z.zc(F+V.offsetX+q.left+(r.width*V.x-G*V.x),A+V.offsetY+q.top,I,B.height),A+=B.height+q.bottom+q.top}}break;case"Horizontal":for(var H=o.length,K=this.padding.top,U=this.padding.left,Y=0;H>Y;Y++){var J=K,W=o[Y];if(W.visible){var X=W.Ba,Z=W.margin,Q=Z.top+Z.bottom,$=K+this.padding.bottom,_=X.height,ti=Er(W,!1);(isNaN(W.xa.height)&&ti===tc||ti===$f)&&(_=Math.max(r.height-Q-$,0));var ii=_+Q+$,ei=W.alignment;ei.Lc()&&(ei=this.Tk),ei.pd()||(ei=ou),W.zc(U+ei.offsetX+Z.left,J+ei.offsetY+Z.top+(r.height*ei.y-ii*ei.y),X.width,_),U+=X.width+Z.left+Z.right}}break;case"Spot":var ni=o.length,ri=this.If(),oi=ri.Ba,si=oi.width,ai=oi.height,hi=this.padding,li=hi.left,ui=hi.top;s.x=li-r.x,s.y=ui-r.y,ri.zc(s.x,s.y,si,ai);for(var fi=0;ni>fi;fi++){var ci=o[fi];if(ci!==ri){var pi=ci.Ba,di=pi.width,yi=pi.height,vi=ci.alignment;vi.Lc()&&(vi=this.Tk),vi.pd()||(vi=ou);var gi=ci.Hj;gi.Lc()&&(gi=ou),s.x=vi.x*si+vi.offsetX-(gi.x*di-gi.offsetX),s.y=vi.y*ai+vi.offsetY-(gi.y*yi-gi.offsetY),s.x-=r.x,s.y-=r.y,ci.visible&&ci.zc(li+s.x,ui+s.y,di,yi)}}break;case"Auto":var mi=o.length,bi=this.If(),xi=bi.Ba,wi=Ul.Sf();wi.m(0,0,1,1);var ki=bi.margin,Mi=ki.left,Pi=ki.top,Ti=this.padding,Si=Ti.left,Ci=Ti.top;s.x=Mi,s.y=Pi,s.width=xi.width,s.height=xi.height,bi.zc(Si+s.x,Ci+s.y,s.width,s.height);var ji=po(bi),Ni=yo(bi),Di=0+ji.y*xi.height+ji.offsetY,Ai=0+Ni.x*xi.width+Ni.offsetX,Li=0+Ni.y*xi.height+Ni.offsetY;wi.x=0+ji.x*xi.width+ji.offsetX,wi.y=Di,C(wi,Ai,Li,0,0),wi.x+=Mi+Si,wi.y+=Pi+Ci;for(var Fi=0;mi>Fi;Fi++){var zi=o[Fi];if(zi!==bi){var Bi=zi.Ba,ki=zi.margin,qi=Math.max(Bi.width+ki.right+ki.left,0),Oi=Math.max(Bi.height+ki.top+ki.bottom,0),Ei=zi.alignment;Ei.Lc()&&(Ei=this.Tk),Ei.pd()||(Ei=ou),s.x=wi.width*Ei.x+Ei.offsetX-qi*Ei.x+ki.left+wi.x,s.y=wi.height*Ei.y+Ei.offsetY-Oi*Ei.y+ki.top+wi.y,s.width=wi.width,s.height=wi.height,zi.visible&&(Ql(wi.x,wi.y,wi.width,wi.height,s.x,s.y,Bi.width,Bi.height)?zi.zc(s.x,s.y,Bi.width,Bi.height):zi.zc(s.x,s.y,Bi.width,Bi.height,new k(wi.x,wi.y,wi.width,wi.height)))}}Ul.ic(wi);break;case"Table":for(var Ii=o.length,Ri=this.padding,Gi=Ri.left,Vi=Ri.top,Hi=this.xr,Ki=0,Ui=0,Yi=Hi.length,Ji=0,Wi=0;Yi>Wi;Wi++)Hi[Wi]&&(Ji=Math.max(Ji,Hi[Wi].length));for(var Xi=Math.min(this.ui,Yi-1);Xi!==Yi&&(void 0===this.yd[Xi]||0===this.yd[Xi].yb);)Xi++;for(var Xi=Math.min(Xi,Yi-1),Zi=-this.yd[Xi].Ma,Qi=Math.min(this.hi,Ji-1);Qi!==Ji&&(void 0===this.rd[Qi]||0===this.rd[Qi].yb);)Qi++;for(var Qi=Math.min(Qi,Ji-1),$i=-this.rd[Qi].Ma,_i=Ul.ul(),Wi=0;Yi>Wi;Wi++)if(Hi[Wi])for(var Ji=Hi[Wi].length,te=this.gd(Wi),Ui=te.Ma+Zi+Vi+te.$C(),ie=0;Ji>ie;ie++)if(Hi[Wi][ie])for(var ee=this.fd(ie),Ki=ee.Ma+$i+Gi+ee.$C(),ne=Hi[Wi][ie],re=ne.length,oe=0;re>oe;oe++){var se=ne[oe],ae=se.Ba,he=se instanceof to?se:null;if(null===he||he.type!==cc&&he.type!==pc){_i.m(0,0);for(var le=1;le<se.rowSpan&&!(Wi+le>=this.kt);le++){var ue=this.gd(Wi+le);_i.height+=ue.total}for(le=1;le<se.$F&&!(ie+le>=this.ps);le++){var fe=this.fd(ie+le);_i.width+=fe.total}var ce=ee.yb+_i.width,pe=te.yb+_i.height;s.x=Ki,s.y=Ui,s.width=ce,s.height=pe;var de=Ki,ye=Ui,ve=ce,ge=pe;Ki+ce>r.width&&(ve=Math.max(r.width-Ki,0)),Ui+pe>r.height&&(ge=Math.max(r.height-Ui,0));var me=se.alignment,be=0,xe=0,we=0,ke=0;if(me.Lc()){me=this.Tk,me.pd()||(me=ou);var be=me.x,xe=me.y,we=me.offsetX,ke=me.offsetY,Me=ee.alignment,Pe=te.alignment;Me.pd()&&(be=Me.x,we=Me.offsetX),Pe.pd()&&(xe=Pe.y,ke=Pe.offsetY)}else be=me.x,xe=me.y,we=me.offsetX,ke=me.offsetY;(isNaN(be)||isNaN(xe))&&(xe=be=.5,ke=we=0);var Te=ae.width,Se=ae.height,Ce=se.margin,je=Ce.left+Ce.right,Ne=Ce.top+Ce.bottom,De=Ir(se,te,ee,!1);!isNaN(se.xa.width)||De!==tc&&De!==_f||(Te=Math.max(ce-je,0)),!isNaN(se.xa.height)||De!==tc&&De!==$f||(Se=Math.max(pe-Ne,0));var Ae=se.af,Le=se.vg,Te=Math.min(Ae.width,Te),Se=Math.min(Ae.height,Se),Te=Math.max(Le.width,Te),Se=Math.max(Le.height,Se),Fe=Se+Ne;s.x+=s.width*be-(Te+je)*be+we+Ce.left,s.y+=s.height*xe-Fe*xe+ke+Ce.top,se.visible&&(Ql(de,ye,ve,ge,s.x,s.y,ae.width,ae.height)?se.zc(s.x,s.y,Te,Se):se.zc(s.x,s.y,Te,Se,new k(de,ye,ve,ge)))}else{se.Jg(),se.Xb.La();var ze=se.Xb;ze.x=he.type===cc?Gi:Ki,ze.y=he.type===pc?Vi:Ui,ze.width=ae.width,ze.height=ae.height,se.Xb.freeze(),Wr(se,!1)}}for(Ul.Oj(_i),Wi=0;Ii>Wi;Wi++)se=o[Wi],he=se instanceof to?se:null,null===he||he.type!==cc&&he.type!==pc||(ze=se.Xb,se.Hc.La(),se.Hc.m(0,0,ze.width,ze.height),se.Hc.freeze());break;case"Viewbox":var Be=o[0],qe=Be.Ba,Oe=Be.margin,Ee=Oe.top+Oe.bottom,Ie=Math.max(qe.width+(Oe.right+Oe.left),0),Re=Math.max(qe.height+Ee,0),Ge=Be.alignment;Ge.Lc()&&(Ge=this.Tk),Ge.pd()||(Ge=ou),s.x=r.width*Ge.x-Ie*Ge.x+Ge.offsetX,s.y=r.height*Ge.y-Re*Ge.y+Ge.offsetY,s.width=qe.width,s.height=qe.height,Be.zc(s.x,s.y,s.width,s.height);break;case"Link":var Ve=o.length,He=this instanceof ks?this.Lh:this;if(He instanceof Bs){var Ke=this instanceof ks?null:He.path,Ue=this.Vi.n,Ye=0;if(null!==Ke&&Ye<this.Vi.count){var Je=Ue[Ye];Ye++,Ke.zc(Je.x-this.vi.x,Je.y-this.vi.y,Je.width,Je.height)}for(var We=0;Ve>We;We++){var Xe=o[We];Xe!==Ke&&Ye<this.Vi.count&&(Je=Ue[Ye],Ye++,Xe.zc(Je.x-this.vi.x,Je.y-this.vi.y,Je.width,Je.height))}var Ze=He.points,Qe=Ze.count;if(Qe>=2&&this.ue)for(var $e=this.ug;$e.next();){var _e=$e.value,tn=Qe,en=Ze,nn=_e.Pf,rn=_e.Bw,on=_e.Hj;on.ne()&&(on=ou);var sn=_e.Cw,an=_e.BE,hn=0,ln=0,un=0;if(-tn>nn||nn>=tn){var fn=this.XD,cn=this.WD;sn!==Zc&&(un=this.computeAngle(_e,sn,cn),_e.angle=un),hn=fn.x,ln=fn.y}else{var pn=void 0,dn=void 0;if(nn>=0)pn=en.n[nn],dn=tn-1>nn?en.n[nn+1]:pn;else var yn=tn+nn,pn=en.n[yn],dn=yn>0?en.n[yn-1]:pn;cn=nn>=0?pn.Fi(dn):dn.Fi(pn),sn!==Zc&&(un=this.computeAngle(_e,sn,cn),_e.angle=un),hn=pn.x+(dn.x-pn.x)*rn,ln=pn.y+(dn.y-pn.y)*rn}var vn=Ul.jh();vn.reset(),vn.scale(_e.scale,_e.scale),vn.rotate(_e.angle,0,0);var gn=_e.Ha,mn=Ul.Vj(0,0,gn.width,gn.height),bn=Ul.K();bn.pt(mn,on),vn.ab(bn);var xn=-bn.x,wn=-bn.y,kn=an.copy();isNaN(kn.x)&&(kn.x=nn>=0?bn.x+3:-(bn.x+3)),isNaN(kn.y)&&(kn.y=-(bn.y+3)),kn.rotate(cn),hn+=kn.x,ln+=kn.y,vn.WE(mn);var xn=xn+mn.x,wn=wn+mn.y,Mn=Ul.fc(hn+xn,ln+wn);_e.move(Mn),Ul.v(Mn),Ul.v(bn),Ul.ic(mn),Ul.Ye(vn)}this instanceof ks?this.Xs():He.Xs()}break;case"Grid":break;case"TableRow":case"TableColumn":Ul.k(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:Ul.k("Unknown panel type: "+y)}Ul.ic(s)}},to.prototype.Jj=function(t){var i=this.Ha;if(Ql(0,0,i.width,i.height,t.x,t.y)){for(var i=this.ya.n,e=i.length,n=Ul.fc(0,0);e--;){var r=i[e];if((r.visible||r===this.ec)&&(x(n.set(t),r.transform),r.Aa(n)))return Ul.v(n),!0}return Ul.v(n),null===this.Ib&&null===this.lc?!1:!0}return!1},to.prototype.Vv=function(t){if(this.$m===t)return this;for(var i=this.ya.n,e=i.length,n=0;e>n;n++){var r=i[n].Vv(t);if(null!==r)return r}return null},to.prototype.walkVisualTree=function(t){lo(this,this,t)},to.prototype.findInVisualTree=to.prototype.vs=function(t){return uo(this,this,t)},to.prototype.findObject=to.prototype.je=function(t){if(this.name===t)return this;for(var i=this.ya.n,e=i.length,n=0;e>n;n++){var r=i[n];if(r.name===t)return r;if(r instanceof to)if(null===r.gi&&null===r.Zf){if(r=r.je(t),null!==r)return r}else if(mo(r)&&(r=r.ya.first(),null!==r&&(r=r.je(t),null!==r)))return r}return null},Hl=to.prototype,Hl.Tf=function(){return!(this.type===cc||this.type===pc)},Hl.ke=function(t,i,e){if(!1===this.Ag)return null;if(void 0===i&&(i=null),void 0===e&&(e=null),Jr(this))return null;var n=this.Ha,r=1/this.Hi(),o=this.Tf(),s=o?t:x(Ul.fc(t.x,t.y),this.transform),a=this.g,h=10,l=5;if(null!==a&&(h=a.gz("extraTouchArea"),l=h/2),Ql(-(l*r),-(l*r),n.width+h*r,n.height+h*r,s.x,s.y)){if(!this.Kg){var r=this.ya.n,u=r.length,a=Ul.K(),l=(h=this.LD)?this.If():null;if(h&&(l.Tf()?x(a.set(t),l.transform):a.set(t),!l.Aa(a)))return Ul.v(a),o||Ul.v(s),null;for(;u--;){var f=r[u];if((f.visible||f===this.ec)&&(f.Tf()?x(a.set(t),f.transform):a.set(t),!h||f!==l)){var c=null;if(f instanceof to?c=f.ke(a,i,e):!0===f.Ag&&f.Aa(a)&&(c=f),null!==c&&(null!==i&&(c=i(c)),null!==c&&(null===e||e(c))))return Ul.v(a),o||Ul.v(s),c}}Ul.v(a)}return null===this.background&&null===this.nm?(o||Ul.v(s),null):(t=Ql(0,0,n.width,n.height,s.x,s.y)?this:null,o||Ul.v(s),t)}return o||Ul.v(s),null},Hl.ys=function(t,i,e,n){if(!1===this.Ag)return!1;void 0===i&&(i=null),void 0===e&&(e=null),n instanceof l||n instanceof f||(n=new l(Mr));var r=this.Ha,o=this.Tf(),s=o?t:x(Ul.fc(t.x,t.y),this.transform);if(Ql(0,0,r.width,r.height,s.x,s.y)){if(!this.Kg){for(var r=this.ya.n,a=r.length,h=Ul.K();a--;){var u=r[a];if(u.visible||u===this.ec){u.Tf()?x(h.set(t),u.transform):h.set(t);var c=u,u=u instanceof to?u:null;(null!==u?u.ys(h,i,e,n):c.Aa(h))&&!1!==c.Ag&&(null!==i&&(c=i(c)),null===c||null!==e&&!e(c)||n.add(c))}}Ul.v(h)}return o||Ul.v(s),null!==this.background||null!==this.nm}return o||Ul.v(s),!1},Hl.Nj=function(t,i,e,n,r,o){if(!1===this.Ag)return!1;void 0===i&&(i=null),void 0===e&&(e=null);var s=o;if(void 0===o&&(s=Ul.jh(),s.reset()),s.multiply(this.transform),this.sm(t,s))return co(this,i,e,r),void 0===o&&Ul.Ye(s),!0;if(this.sg(t,s)){if(!this.Kg)for(var a=this.ya.n,h=a.length;h--;){var l=a[h];if(l.visible||l===this.ec){var u=l.ba,f=this.Ha;u.x>f.width||u.y>f.height||0>u.x+u.width||0>u.y+u.height||(u=l,l=l instanceof to?l:null,f=Ul.jh(),f.set(s),(null!==l?l.Nj(t,i,e,n,r,f):jr(u,t,n,f))&&(null!==i&&(u=i(u)),null===u||null!==e&&!e(u)||r.add(u)),Ul.Ye(f))}}return void 0===o&&Ul.Ye(s),n}return void 0===o&&Ul.Ye(s),!1},Hl.ym=function(t,i,e,n,r,o){if(!1===this.Ag)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var s=this.Ha,a=this.Tf(),h=a?t:x(Ul.fc(t.x,t.y),this.transform),l=a?i:x(Ul.fc(i.x,i.y),this.transform),u=h.Lj(l),f=0<h.x&&h.x<s.width&&0<h.y&&h.y<s.height||Wl(h.x,h.y,0,0,0,s.height)<u||Wl(h.x,h.y,0,s.height,s.width,s.height)<u||Wl(h.x,h.y,s.width,s.height,s.width,0)<u||Wl(h.x,h.y,s.width,0,0,0)<u,s=0<h.x&&h.x<s.width&&0<h.y&&h.y<s.height&&Wl(h.x,h.y,0,0,0,s.height)<u&&Wl(h.x,h.y,0,s.height,s.width,s.height)<u&&Wl(h.x,h.y,s.width,s.height,s.width,0)<u&&Wl(h.x,h.y,s.width,0,0,0)<u;if(a||(Ul.v(h),Ul.v(l)),f){if(!this.Kg){for(a=Ul.K(),h=Ul.K(),l=this.ya.n,u=l.length;u--;){var c=l[u];if(c.visible||c===this.ec){var p=c.ba,d=this.Ha;p.x>d.width||p.y>d.height||0>p.x+p.width||0>p.y+p.height||(c.Tf()?(p=c.transform,x(a.set(t),p),x(h.set(i),p)):(a.set(t),h.set(i)),p=c,c=c instanceof to?c:null,null!==c?!c.ym(a,h,e,n,r,o):!p.sD(a,h,r))||(null!==e&&(p=e(p)),null===p||null!==n&&!n(p)||o.add(p))}}Ul.v(a),Ul.v(h)}return r?f:s}return!1},to.prototype.add=to.prototype.add=function(t){Ul.C(t,Mr,to,"add:element"),this.Yd(this.ya.count,t)},to.prototype.elt=to.prototype.ja=function(t){return this.ya.ja(t)},to.prototype.insertAt=to.prototype.Yd=function(t,i){i instanceof es&&Ul.k("Cannot add a Part to a Panel: "+i),(this===i||this.gl(i))&&(this===i&&Ul.k("Cannot make a Panel contain itself: "+this.toString()),Ul.k("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+i.toString()));var e=i.S;if(null!==e&&e!==this&&Ul.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+i.toString()+", already contained by "+e.toString()+", cannot be shared by this Panel: "+this.toString()),this.oa!==yc||i instanceof Po||Ul.k("Can only add Shapes to a Grid Panel, not: "+i),i.ql(this),i.Wl=null,null!==this.QD){var n=i.data;null!==n&&"object"==typeof n&&(null===this.Yf&&(this.Yf=new g(Object,to)),this.Yf.add(n,i))}var r=this.ya,n=-1;if(e===this){for(var o=-1,s=this.ya.n,a=s.length,h=0;a>h;h++)if(s[h]===i){o=h;break}if(-1!==o){if(o===t||o+1>=r.count&&t>=r.count)return;r.jd(o),n=o}else Ul.k("element "+i.toString()+" has panel "+e.toString()+" but is not contained by it.")}(0>t||t>r.count)&&(t=r.count),r.Yd(t,i),this.R(),i.R(),null!==i.Jd?this.yh=!0:i instanceof to&&!0===i.yh&&(this.yh=!0),e=this.T,null!==e&&(e.Bk=null,e.kj=0/0,this.yh&&e instanceof Ms&&(e.yh=!0),e.yh&&(e.Qd=null),r=this.g,null!==r&&r.ha.gb||(-1!==n&&e.Dc(Wu,"elements",this,i,null,n,null),e.Dc(Ju,"elements",this,null,i,null,t)))},to.prototype.remove=to.prototype.remove=function(t){Ul.C(t,Mr,to,"remove:element");for(var i=this.ya.n,e=i.length,n=-1,r=0;e>r;r++)if(i[r]===t){n=r;break}-1!==n&&this.Fe(n)},to.prototype.removeAt=to.prototype.jd=function(t){t>=0&&this.Fe(t)},to.prototype.Fe=function(t){var i=this.ya,e=i.ja(t);if(e.Wl=null,e.ql(null),null!==this.Yf){var n=e.data;"object"==typeof n&&this.Yf.remove(n)}i.jd(t),Yr(this,!1),this.R(),this.hm===e&&(this.hm=null),i=this.T,null!==i&&(i.Bk=null,i.kj=0/0,n=this.g,null!==n&&n.ha.gb||i.Dc(Wu,"elements",this,e,null,t,null))},Ul.u(to,{kt:"rowCount"},function(){return void 0===this.yd?0:this.yd.length}),to.prototype.getRowDefinition=to.prototype.gd=function(t){0>t&&Ul.wa(t,">= 0",to,"getRowDefinition:idx"),t=Math.round(t);var i=this.yd;if(void 0===i[t]){var e=new ko;e.ql(this),e.ae=!0,e.index=t,i[t]=e}return i[t]},to.prototype.removeRowDefinition=to.prototype.oE=function(t){0>t&&Ul.wa(t,">= 0",to,"removeRowDefinition:idx"),t=Math.round(t);var i=this.yd;this.Dc(Wu,"coldefs",this,i[t],null,t,null),i[t]&&delete i[t],this.R()},Ul.u(to,{ps:"columnCount"},function(){return void 0===this.rd?0:this.rd.length}),to.prototype.getColumnDefinition=to.prototype.fd=function(t){0>t&&Ul.wa(t,">= 0",to,"getColumnDefinition:idx"),t=Math.round(t);var i=this.rd;if(void 0===i[t]){var e=new ko;e.ql(this),e.ae=!1,e.index=t,i[t]=e}return i[t]},to.prototype.removeColumnDefinition=to.prototype.kE=function(t){0>t&&Ul.wa(t,">= 0",to,"removeColumnDefinition:idx"),t=Math.round(t);var i=this.rd;this.Dc(Wu,"coldefs",this,i[t],null,t,null),i[t]&&delete i[t],this.R()},Ul.defineProperty(to,{bI:"rowSizing"},function(){return void 0===this.am?xc:this.am},function(t){if(void 0!==this.am){var i=this.am;i!==t&&(t!==xc&&t!==bc&&Ul.k("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.am=t,this.R(),this.h("rowSizing",i,t))}}),Ul.defineProperty(to,{ZF:"columnSizing"},function(){return void 0===this.Al?xc:this.Al},function(t){if(void 0!==this.Al){var i=this.Al;i!==t&&(t!==xc&&t!==bc&&Ul.k("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Al=t,this.R(),this.h("columnSizing",i,t))}}),Ul.defineProperty(to,{EK:"topIndex"},function(){return void 0===this.ui?0:this.ui},function(t){if(void 0!==this.ui){var i=this.ui;i!==t&&((!isFinite(t)||0>t)&&Ul.k("topIndex must be greater than zero and a real number. Was "+t),this.ui=t,this.R(),this.h("topIndex",i,t))}}),Ul.defineProperty(to,{QJ:"leftIndex"},function(){return void 0===this.hi?0:this.hi},function(t){if(void 0!==this.hi){var i=this.hi;i!==t&&((!isFinite(t)||0>t)&&Ul.k("leftIndex must be greater than zero and a real number. Was "+t),this.hi=t,this.R(),this.h("leftIndex",i,t))}}),to.prototype.findRowForLocalY=function(t){if(0>t)return-1;if(this.type!==fc)return 0/0;for(var i=0,e=this.yd,n=e.length,r=this.ui;n>r;r++){var o=e[r];if(void 0!==o&&(i+=o.total,i>t))return r}return-1},to.prototype.findColumnForLocalX=function(t){if(0>t)return-1;if(this.type!==fc)return 0/0;for(var i=0,e=this.rd,n=e.length,r=this.hi;n>r;r++){var o=e[r];if(void 0!==o&&(i+=o.total,i>t))return r}return-1},Ul.defineProperty(to,{data:"data"},function(){return this.rh},function(t){var i=this.rh;if(i!==t){var e=this instanceof es&&!(this instanceof ks);e&&Ul.j(t,"object",to,"data"),go(this),this.rh=t;var n=this.g;null!==n&&(e?this instanceof Bs?(null!==i&&n.lk.remove(i),null!==t&&n.lk.add(t,this)):(null!==i&&n.$h.remove(i),null!==t&&n.$h.add(t,this)):(e=this.S,null!==e&&null!==e.Yf&&(null!==i&&e.Yf.remove(i),null!==t&&e.Yf.add(t,this)))),this.h("data",i,t),null!==n&&n.ha.gb||null!==t&&this.Nb()}}),Ul.defineProperty(to,{iH:"itemIndex"},function(){return this.uq},function(t){var i=this.uq;i!==t&&(this.uq=t,this.h("itemIndex",i,t))}),to.prototype.updateTargetBindings=to.prototype.Nb=function(t){var i=this.yl;if(null!==i)for(void 0===t&&(t=""),i=i.i;i.next();){var e=i.value,n=e.LE;if((""===t||""===n||n===t)&&(n=e.Lw,null!==e.eG||""!==n)){var n=this.data,r=e.Nm;if(null!==r)n=""===r?this:"."===r?this:".."===r?this:this.je(r);else{var o=this.g;null!==o&&e.xt&&(n=o.ga.Zs)}if(null!==n){var o=this,s=e.tl;if(-1!==s){if(o=this.Vv(s),null===o)continue}else null!==e.fg&&(o=e.fg);if("."===r?n=o:".."===r&&(n=o.S),r=e.Ay,0!==r){if(!(o instanceof to))continue;s=o,1===r?o=s.fd(e.mv):2===r&&(o=s.gd(e.mv))}void 0!==o&&e.ZE(o,n)}}}},Ul.defineProperty(to,{QD:"itemArray"},function(){return this.gi},function(t){var i=this.gi;if(i!==t){var e=this.g;null!==e&&null!==i&&Fn(e,this),this.gi=t,null!==e&&null!==t&&Ln(e,this),this.h("itemArray",i,t),null!==e&&e.ha.gb||this.Rz()}}),to.prototype.rebuildItemElements=to.prototype.Rz=function(){var t=0;for(mo(this)&&(t=1);this.ya.length>t;)this.Fe(t);if(t=this.QD,null!==t)for(var i=Ul.qb(t),e=0;i>e;e++)bo(this,Ul.fb(t,e),e)},Ul.defineProperty(to,{NJ:"itemTemplate"},function(){return null===this.Zf?null:this.Zf.ta("")},function(t){if(null===this.Zf){if(null===t)return;this.Zf=new g("string",to)}var i=this.Zf.ta("");i!==t&&(Ul.C(t,to,to,"itemTemplate"),(t instanceof es||t.tg)&&Ul.k("itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.Zf.add("",t),this.h("itemTemplate",i,t),t=this.g,null!==t&&t.ha.gb||this.Rz())}),Ul.defineProperty(to,{jH:"itemTemplateMap"},function(){return this.Zf},function(t){var i=this.Zf;if(i!==t){Ul.C(t,g,to,"itemTemplateMap");for(var e=t.i;e.next();){var n=e.value;(n instanceof es||n.tg)&&Ul.k("Template in itemTemplateMap must not be a Part or be Panel.isPanelMain: "+n)}this.Zf=t,this.h("itemTemplateMap",i,t),t=this.g,null!==t&&t.ha.gb||this.Rz()}}),Ul.defineProperty(to,{MJ:"itemCategoryProperty"},function(){return this.Hn},function(t){var i=this.Hn;i!==t&&("string"!=typeof t&&"function"!=typeof t&&Ul.Kd(t,"string or function",to,"itemCategoryProperty"),this.Hn=t,this.h("itemCategoryProperty",i,t))}),to.prototype.getCategoryForItemData=function(t){if(null===t)return"";var i=this.Hn,e="";if("function"==typeof i)e=i(t);else{if("string"!=typeof i||"object"!=typeof t)return"";if(""===i)return"";e=Ul.sb(t,i)}return void 0===e?"":"string"==typeof e?e:(Ul.k("Panel.getCategoryForItemData found a non-string category for "+t+": "+e),"")};var vc=!1,gc=null;to.prototype.findTemplateForItemData=function(t,i,e){return t=this.jH,i=null,null!==t&&(i=t.ta(e)),null===i&&(vc||(vc=!0,Ul.trace('No item template Panel found for category "'+e+'" on '+this),Ul.trace("  Using default item template."),e=new to,t=new Fo,t.bind(new mi("text","",$u)),e.add(t),gc=e),i=gc),i},Ul.defineProperty(to,{EJ:"isAtomic"},function(){return this.Kg},function(t){var i=this.Kg;i!==t&&(Ul.j(t,"boolean",to,"isAtomic"),this.Kg=t,this.h("isAtomic",i,t))}),Ul.defineProperty(to,{LD:"isClipping"},function(){return this.gq},function(t){var i=this.gq;i!==t&&(Ul.j(t,"boolean",to,"isClipping"),this.gq=t,this.h("isClipping",i,t))}),Ul.fa("RowColumnDefinition",ko),ko.prototype.copy=function(){var t=new ko;return t.xu=this.xu,t.ud=this.ud,t.Qe=this.Qe,t.oj=this.oj,t.mj=this.mj,t.se=this.se,t.yb=this.yb,t.Ma=this.Ma,t.Ih=this.Ih,t.Jr=this.Jr,t.wj=null===this.wj?null:this.wj.Z(),t.Gr=this.Gr,t.Hr=this.Hr,t.Eh=null,null!==this.Eh&&(t.Eh=Ul.Pk(this.Eh)),t.Ib=this.Ib,t.Ip=this.Ip,t.Gc=this.Gc,t},ko.prototype.qs=function(t){Ul.C(t,ko,ko,"copyFrom:pd"),t.ae?this.height=t.height:this.width=t.width,this.Ki=t.Ki,this.Kf=t.Kf,this.alignment=t.alignment,this.stretch=t.stretch,this.st=t.st,this.wj=null===t.wj?null:t.wj.Z(),this.dp=t.dp,this.ep=t.ep,this.Eh=null,t.Eh&&(this.Eh=Ul.Pk(t.Eh)),this.background=t.background,this.Zy=t.Zy,this.Gc=t.Gc},ko.prototype.toString=function(){return"RowColumnDefinition "+(this.ae?"(Row ":"(Column ")+this.index+") #"+Ul.Uc(this)};var mc;ko.Default=mc=Ul.s(ko,"Default",0);var bc;ko.None=bc=Ul.s(ko,"None",1);var xc;ko.ProportionalExtra=xc=Ul.s(ko,"ProportionalExtra",2),ko.prototype.ql=function(t){this.Pg=t},ko.prototype.computeEffectiveSpacingTop=ko.prototype.$C=function(){var t=0;if(0!==this.index){var i=this.Pg,e=this.dp;null===e&&null!==i&&(e=this.ae?i.ai:i.sh),null!==e&&(t=this.ep,isNaN(t)&&(t=null!==i?this.ae?i.uh:i.th:0))}if(i=this.DE,null===i){if(i=this.Pg,null===i)return t;i=i.Xi}return t+(this.ae?i.top:i.left)},ko.prototype.computeEffectiveSpacing=ko.prototype.lg=function(){var t=0;if(0!==this.index){var i=this.Pg,e=this.dp;null===e&&null!==i&&(e=this.ae?i.ai:i.sh),null!==e&&(t=this.ep,isNaN(t)&&(t=null!==i?this.ae?i.uh:i.th:0))}if(i=this.DE,null===i){if(i=this.Pg,null===i)return t;i=i.Xi}return t+(this.ae?i.top+i.bottom:i.left+i.right)},ko.prototype.Rc=function(t,i,e,n,r){var o=this.Pg;if(null!==o&&(o.Dc(Yu,t,this,i,e,n,r),null!==this.Gc&&(i=o.zo(),null!==i&&(i=i.data,null!==i))))for(e=this.Gc.i;e.next();)e.value.Mw(this,i,t,null)},Ul.u(ko,{S:"panel"},function(){return this.Pg}),Ul.defineProperty(ko,{ae:"isRow"},function(){return this.xu},function(t){this.xu=t}),Ul.defineProperty(ko,{index:"index"},function(){return this.ud},function(t){this.ud=t}),Ul.defineProperty(ko,{height:"height"},function(){return this.Qe},function(t){var i=this.Qe;i!==t&&(0>t&&Ul.wa(t,">= 0",ko,"height"),this.Qe=t,this.Qa=this.yb,null!==this.S&&this.S.R(),this.Rc("height",i,t))}),Ul.defineProperty(ko,{width:"width"},function(){return this.Qe},function(t){var i=this.Qe;i!==t&&(0>t&&Ul.wa(t,">= 0",ko,"width"),this.Qe=t,this.Qa=this.yb,null!==this.S&&this.S.R(),this.Rc("width",i,t))}),Ul.defineProperty(ko,{Ki:"minimum"},function(){return this.oj},function(t){var i=this.oj;i!==t&&((0>t||!isFinite(t))&&Ul.wa(t,">= 0",ko,"minimum"),this.oj=t,this.Qa=this.yb,null!==this.S&&this.S.R(),this.Rc("minimum",i,t))}),Ul.defineProperty(ko,{Kf:"maximum"},function(){return this.mj},function(t){var i=this.mj;i!==t&&(0>t&&Ul.wa(t,">= 0",ko,"maximum"),this.mj=t,this.Qa=this.yb,null!==this.S&&this.S.R(),this.Rc("maximum",i,t))}),Ul.defineProperty(ko,{alignment:"alignment"},function(){return this.se},function(t){var i=this.se;i.L(t)||(this.se=t.Z(),null!==this.S&&this.S.R(),this.Rc("alignment",i,t))}),Ul.defineProperty(ko,{stretch:"stretch"},function(){return this.Ih},function(t){var i=this.Ih;i!==t&&(this.Ih=t,null!==this.S&&this.S.R(),this.Rc("stretch",i,t))}),Ul.defineProperty(ko,{DE:"separatorPadding"},function(){return this.wj},function(t){"number"==typeof t&&(t=new j(t));var i=this.wj;null!==t&&null!==i&&i.L(t)||(null!==t&&(t=t.Z()),this.wj=t,null!==this.S&&this.S.R(),this.Rc("separatorPadding",i,t))}),Ul.defineProperty(ko,{dp:"separatorStroke"},function(){return this.Gr},function(t){var i=this.Gr;i!==t&&(null===t||"string"==typeof t||t instanceof kr)&&(t instanceof kr&&t.freeze(),this.Gr=t,null!==this.S&&this.S.R(),this.Rc("separatorStroke",i,t))}),Ul.defineProperty(ko,{ep:"separatorStrokeWidth"},function(){return this.Hr},function(t){var i=this.Hr;i!==t&&(this.Hr=t,null!==this.S&&this.S.R(),this.Rc("separatorStrokeWidth",i,t))}),Ul.defineProperty(ko,{gI:"separatorDashArray"},function(){return this.Eh},function(t){var i=this.Eh;if(i!==t){if(null===t||Array.isArray(t)||Ul.Kd(t,"Array",ko,"separatorDashArray:value"),null!==t){for(var e=t.length,n=0,r=0;e>r;r++){var o=t[r];"number"==typeof o&&o>=0&&isFinite(o)||Ul.k("separatorDashArray:value "+o+" must be a positive number or zero."),n+=o}if(0===n){if(null===i)return;t=null}}this.Eh=t,null!==this.S&&this.S.ma(),this.Rc("separatorDashArray",i,t)}}),Ul.defineProperty(ko,{background:"background"},function(){return this.Ib},function(t){var i=this.Ib;i!==t&&(null===t||"string"==typeof t||t instanceof kr)&&(t instanceof kr&&t.freeze(),this.Ib=t,null!==this.S&&this.S.ma(),this.Rc("background",i,t))
}),Ul.defineProperty(ko,{Zy:"coversSeparators"},function(){return this.Ip},function(t){var i=this.Ip;i!==t&&(Ul.j(t,"boolean",ko,"coversSeparators"),this.Ip=t,null!==this.S&&this.S.ma(),this.Rc("coversSeparators",i,t))}),Ul.defineProperty(ko,{st:"sizing"},function(){return this.Jr},function(t){var i=this.Jr;i!==t&&(this.Jr=t,null!==this.S&&this.S.R(),this.Rc("sizing",i,t))}),Ul.defineProperty(ko,{Qa:"actual"},function(){return this.yb},function(t){this.yb=isNaN(this.Qe)?Math.max(Math.min(this.mj,t),this.oj):Math.max(Math.min(this.mj,this.Qe),this.oj)}),Ul.defineProperty(ko,{total:"total"},function(){return this.yb+this.lg()},function(t){this.yb=isNaN(this.Qe)?Math.max(Math.min(this.mj,t),this.oj):Math.max(Math.min(this.mj,this.Qe),this.oj),this.yb=Math.max(0,this.yb-this.lg())}),Ul.defineProperty(ko,{position:"position"},function(){return this.Ma},function(t){this.Ma=t}),ko.prototype.bind=ko.prototype.bind=function(t){t.fg=this;var i=this.S;null!==i&&(i=i.zo(),null!==i&&vo(i)&&Ul.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t)),null===this.Gc&&(this.Gc=new l(mi)),this.Gc.add(t)},Ul.Ga(Po,Mr),Ul.fa("Shape",Po),Po.prototype.cloneProtected=function(t){Mr.prototype.cloneProtected.call(this,t),t.Pa=this.Pa,t.tn=this.tn,t.Rg=this.Rg,t.Zp=this.Zp,t.jk=this.jk,t.kd=this.kd,t.yc=this.yc,t.Sg=this.Sg,t.co=this.co,t.eo=this.eo,t.gm=this.gm,t.fm=null,null!==this.fm&&(t.fm=Ul.Pk(this.fm)),t.dd=this.dd,t.ri=this.ri.Z(),t.si=this.si.Z(),t.cr=this.cr,t.dr=this.dr,t.hq=this.hq,t.nq=this.nq,t.gr=this.gr,t.fo=this.fo,t.wn=this.wn,t.eq=this.eq},Po.prototype.toString=function(){return"Shape("+("None"!==this.Fb?this.Fb:"None"!==this.jp?this.jp:this.ez)+")#"+Ul.Uc(this)},Po.prototype.Mj=function(t,i){if(null!==this.yc||null!==this.kd){null!==this.kd&&zr(this,t,this.kd,!0,!1),null!==this.yc&&zr(this,t,this.yc,!1,!1);var e=this.Sg;if(0===e){var n=this.T;n instanceof ks&&n.type===dc&&n.vc instanceof Po&&(e=n.vc.hb)}t.lineWidth=e,t.lineJoin=this.eo,t.lineCap=this.co,t.miterLimit=this.gm;var r=!1;this.T&&i.Qg.drawShadows&&(r=this.T.il);var o=!0;null!==this.yc&&null===this.kd&&(o=!1);var n=!1,s=!0,a=this.gA;null!==a&&(n=!0,void 0!==t.setLineDash?(t.setLineDash(a),t.lineDashOffset=this.dd):void 0!==t.webkitLineDash?(t.webkitLineDash=a,t.webkitLineDashOffset=this.dd):void 0!==t.mozDash?(t.mozDash=a,t.mozDashOffset=this.dd):s=!1);var h=this.Pa;if(null!==h){if(h.oa===Lu)t.beginPath(),n&&!s?Tr(t,h.nc,h.uc,h.pb,h.Bb,a,this.dd):(t.moveTo(h.nc,h.uc),t.lineTo(h.pb,h.Bb)),null!==this.kd&&Lr(t,this.kd),0!==e&&null!==this.yc&&Fr(t);else if(h.oa===Fu){var l=h.nc,u=h.uc,f=h.pb,c=h.Bb,h=Math.min(l,f),p=Math.min(u,c),l=Math.abs(f-l),u=Math.abs(c-u);if(null!==this.kd&&(t.beginPath(),t.rect(h,p,l,u),Lr(t,this.kd)),null!==this.yc){var d=f=0,y=0;o&&r&&(f=t.shadowOffsetX,d=t.shadowOffsetY,y=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),n&&!s?(s=Ul.eb(),s.push(h),s.push(p),s.push(h+l),s.push(p),s.push(h+l),s.push(p+u),s.push(h),s.push(p+u),s.push(h),s.push(p),t.beginPath(),So(t,s,a,this.dd),Fr(t),Ul.ra(s)):0!==e&&(t.beginPath(),t.rect(h,p,l,u),Fr(t)),o&&r&&(t.shadowOffsetX=f,t.shadowOffsetY=d,t.shadowBlur=y)}}else if(h.oa===zu)l=h.nc,u=h.uc,f=h.pb,c=h.Bb,h=Math.abs(f-l)/2,p=Math.abs(c-u)/2,l=Math.min(l,f)+h,u=Math.min(u,c)+p,t.beginPath(),t.moveTo(l,u-p),t.bezierCurveTo(l+Au.sa*h,u-p,l+h,u-Au.sa*p,l+h,u),t.bezierCurveTo(l+h,u+Au.sa*p,l+Au.sa*h,u+p,l,u+p),t.bezierCurveTo(l-Au.sa*h,u+p,l-h,u+Au.sa*p,l-h,u),t.bezierCurveTo(l-h,u-Au.sa*p,l-Au.sa*h,u-p,l,u-p),t.closePath(),null!==this.kd&&Lr(t,this.kd),n&&!s&&(s=Ul.eb(),Au.ye(l,u-p,l+Au.sa*h,u-p,l+h,u-Au.sa*p,l+h,u,.5,s),Au.ye(l+h,u,l+h,u+Au.sa*p,l+Au.sa*h,u+p,l,u+p,.5,s),Au.ye(l,u+p,l-Au.sa*h,u+p,l-h,u+Au.sa*p,l-h,u,.5,s),Au.ye(l-h,u,l-h,u-Au.sa*p,l-Au.sa*h,u-p,l,u-p,.5,s),t.beginPath(),So(t,s,a,this.dd),Ul.ra(s)),0!==e&&null!==this.yc&&(y=d=f=0,o&&r&&(f=t.shadowOffsetX,d=t.shadowOffsetY,y=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),Fr(t),o&&r&&(t.shadowOffsetX=f,t.shadowOffsetY=d,t.shadowBlur=y));else if(h.oa===Bu){for(p=h.Zi,u=p.length,c=0;u>c;c++){l=p.n[c],t.beginPath(),t.moveTo(l.ua,l.va);for(var f=l.Fa.n,d=f.length,v=null,y=0;d>y;y++){var g=f[y];switch(g.oa){case Iu:t.moveTo(g.F,g.G);break;case Ru:t.lineTo(g.F,g.G);break;case Gu:t.bezierCurveTo(g.cd,g.xe,g.dg,g.eg,g.pb,g.Bb);break;case Vu:t.quadraticCurveTo(g.cd,g.xe,g.pb,g.Bb);break;case Hu:if(g.radiusX===g.radiusY)v=Math.PI/180,t.arc(g.cd,g.xe,g.radiusX,g.Je*v,(g.Je+g.Qf)*v,0>g.Qf);else for(var v=Q(g,l),m=v.length,b=0;m>b;b++){var x=v[b];0===b&&t.lineTo(x[0],x[1]),t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7])}break;case Ku:for(b=m=0,null!==v&&v.type===Hu?(v=Q(v,l),v=v[v.length-1]||null,null!==v&&(m=v[6],b=v[7])):(m=null!==v?v.F:l.ua,b=null!==v?v.G:l.va),v=$(g,l,m,b),m=v.length,b=0;m>b;b++)x=v[b],t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]);break;default:Ul.k("Segment not of valid type")}g.Ah&&t.closePath(),v=g}r?(y=d=f=0,l.En?(!0===l.Il&&null!==this.kd?(Lr(t,this.kd),o=!0):o=!1,0!==e&&null!==this.yc&&(o&&(f=t.shadowOffsetX,d=t.shadowOffsetY,y=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),n&&!s||Fr(t),o&&(t.shadowOffsetX=f,t.shadowOffsetY=d,t.shadowBlur=y))):(o&&(f=t.shadowOffsetX,d=t.shadowOffsetY,y=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),!0===l.Il&&null!==this.kd&&Lr(t,this.kd),0!==e&&null!==this.yc&&(n&&!s||Fr(t)),o&&(t.shadowOffsetX=f,t.shadowOffsetY=d,t.shadowBlur=y))):(!0===l.Il&&null!==this.kd&&Lr(t,this.kd),0===e||null===this.yc||n&&!s||Fr(t))}if(n&&!s)for(e=o,o=h.Zi,s=o.length,h=0;s>h;h++){for(p=o.n[h],t.beginPath(),u=Ul.eb(),u.push(p.ua),u.push(p.va),c=p.ua,l=p.va,f=c,d=l,y=p.Fa.n,g=y.length,v=0;g>v;v++){switch(m=y[v],m.oa){case Iu:So(t,u,a,this.dd),u.length=0,u.push(m.F),u.push(m.G),c=m.F,l=m.G,f=c,d=l;break;case Ru:u.push(m.F),u.push(m.G),c=m.F,l=m.G;break;case Gu:Au.ye(c,l,m.cd,m.xe,m.dg,m.eg,m.pb,m.Bb,.5,u),c=m.F,l=m.G;break;case Vu:Au.Xo(c,l,m.cd,m.xe,m.pb,m.Bb,.5,u),c=m.F,l=m.G;break;case Hu:for(var b=Q(m,p),x=b.length,w=0;x>w;w++){var k=b[w];Au.ye(c,l,k[2],k[3],k[4],k[5],k[6],k[7],.5,u),c=k[6],l=k[7]}break;case Ku:for(b=$(m,p,c,l),x=b.length,w=0;x>w;w++)k=b[w],Au.ye(c,l,k[2],k[3],k[4],k[5],k[6],k[7],.5,u),c=k[6],l=k[7];break;default:Ul.k("Segment not of valid type")}m.Ah&&(u.push(f),u.push(d),So(t,u,a,this.dd))}So(t,u,a,this.dd),Ul.ra(u),null!==this.yc&&(c=u=p=0,e&&r&&(p=t.shadowOffsetX,u=t.shadowOffsetY,c=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),Fr(t),e&&r&&(t.shadowOffsetX=p,t.shadowOffsetY=u,t.shadowBlur=c))}}if(n&&(void 0!==t.setLineDash?(t.setLineDash(Ul.mh),t.lineDashOffset=0):void 0!==t.webkitLineDash?(t.webkitLineDash=Ul.mh,t.webkitLineDashOffset=0):void 0!==t.mozDash&&(t.mozDash=null,t.mozDashOffset=0)),null!==this.eE){for(n=this.eE,Nr(n,1/0,1/0),a=n.Ba,n.zc(0,0,a.width,a.height),t.save(),a=this.ed.ub.first(),t.beginPath(),e=Ul.eb(),e.push(a.ua),e.push(a.va),r=a.ua,o=a.va,s=r,h=o,p=a.Fa.n,u=p.length,c=0;u>c;c++){switch(l=p[c],l.oa){case Iu:To(t,i,e,n),e.length=0,e.push(l.F),e.push(l.G),r=l.F,o=l.G,s=r,h=o;break;case Ru:e.push(l.F),e.push(l.G),r=l.F,o=l.G;break;case Gu:Au.ye(r,o,l.cd,l.xe,l.dg,l.eg,l.pb,l.Bb,.5,e),r=l.F,o=l.G;break;case Vu:Au.Xo(r,o,l.cd,l.xe,l.pb,l.Bb,.5,e),r=l.F,o=l.G;break;case Hu:for(f=Q(l,a),d=f.length,y=0;d>y;y++)g=f[y],Au.ye(r,o,g[2],g[3],g[4],g[5],g[6],g[7],.5,e),r=g[6],o=g[7];break;case Ku:for(f=$(l,a,r,o),d=f.length,y=0;d>y;y++)g=f[y],Au.ye(r,o,g[2],g[3],g[4],g[5],g[6],g[7],.5,e),r=g[6],o=g[7];break;default:Ul.k("Segment not of valid type")}l.Ah&&(e.push(s),e.push(h),To(t,i,e,n))}To(t,i,e,n),Ul.ra(e),t.restore()}}}},Po.prototype.getDocumentPoint=Po.prototype.lb=function(t,i){void 0===i&&(i=new m),t.ne()&&Ul.k("getDocumentPoint:s Spot must be real: "+t.toString());var e=this.Ha,n=this.hb;return i.m(t.x*(e.width+n)-n/2+e.x+t.offsetX,t.y*(e.height+n)-n/2+e.y+t.offsetY),this.Ff.ab(i),i},Po.prototype.Jj=function(t,i){var e=this.Pa;if(null===e||null===this.fill&&null===this.stroke)return!1;var n=e.kb,r=this.hb/2;e.type!==Lu||i||(r+=2);var o=Ul.Sf();if(o.assign(n),o.Jf(r+2,r+2),!o.Aa(t))return Ul.ic(o),!1;if(n=r+1e-4,e.type===Lu)return null===this.stroke?!1:(n=(e.F-e.ua)*(t.x-e.ua)+(e.G-e.va)*(t.y-e.va),0>(e.ua-e.F)*(t.x-e.F)+(e.va-e.G)*(t.y-e.G)||0>n?!1:(Ul.ic(o),Au.Hd(e.ua,e.va,e.F,e.G,r,t.x,t.y)));if(e.type===Fu){var s=e.ua,a=e.va,h=e.F,l=e.G,e=Math.min(s,h),u=Math.min(a,l),s=Math.abs(h-s),a=Math.abs(l-a);if(o.x=e,o.y=u,o.width=s,o.height=a,null===this.fill){if(o.Jf(-n,-n),o.Aa(t))return Ul.ic(o),!1;o.Jf(n,n)}return null!==this.stroke&&o.Jf(r,r),r=o.Aa(t),Ul.ic(o),r}if(e.type===zu){if(s=e.ua,a=e.va,h=e.F,l=e.G,e=Math.min(s,h),u=Math.min(a,l),s=Math.abs(h-s),a=Math.abs(l-a),s/=2,a/=2,e=t.x-(e+s),u=t.y-(u+a),null===this.fill){if(s-=n,a-=n,0>=s||0>=a||1>=e*e/(s*s)+u*u/(a*a))return Ul.ic(o),!1;s+=n,a+=n}return null!==this.stroke&&(s+=r,a+=r),Ul.ic(o),0>=s||0>=a?!1:1>=e*e/(s*s)+u*u/(a*a)}return e.type===Bu?(Ul.ic(o),null===this.fill?W(e,t.x,t.y,r):e.Aa(t,r,1<this.hb,i)):(Ul.k("Unknown Geometry type"),!1)},Po.prototype.Oo=function(t,i,e,n){var r=this.xa,o=this.Sg;t=Math.max(t,0),i=Math.max(i,0);var s;if(this.Rg)s=this.Pa.kb;else{var a=this.Fb,h=Au.Uw[a];if(void 0===h){var l=Au.qg[a];"string"==typeof l&&(l=Au.qg[l]),"function"==typeof l?(h=l(null,100,100),Au.Uw[a]=h):Ul.k("Unsupported Figure:"+a)}s=h.kb}var a=s.width,h=s.height,l=s.width,u=s.height;switch(Er(this,!0)){case Zf:n=e=0;break;case tc:l=Math.max(t-o,0),u=Math.max(i-o,0);break;case _f:l=Math.max(t-o,0),n=0;break;case $f:e=0,u=Math.max(i-o,0)}switch(isFinite(r.width)&&(l=r.width),isFinite(r.height)&&(u=r.height),r=this.af,s=this.vg,e=Math.max(e,s.width)-o,n=Math.max(n,s.height)-o,l=Math.min(r.width,l),u=Math.min(r.height,u),l=isFinite(l)?Math.max(e,l):Math.max(a,e),u=isFinite(u)?Math.max(n,u):Math.max(h,n),e=jo(this)){case Zf:break;case tc:a=l,h=u;break;case ic:e=Math.min(l/a,u/h),isFinite(e)||(e=1),a*=e,h*=e;break;default:Ul.k(e+" is not a valid geometryStretch.")}this.Rg?(s=this.ed,r=a,n=h,e=s.copy(),s=s.kb,r/=s.width,n/=s.height,isFinite(r)||(r=1),isFinite(n)||(n=1),1===r&&1===n||e.scale(r,n),this.Pa=e):(null===this.Pa||this.Pa.Dn!==t-o||this.Pa.Cn!==i-o)&&(this.Pa=Au.makeGeometry(this,a,h)),s=this.Pa.kb,1/0===t||1/0===i?Cr(this,s.x-o/2,s.y-o/2,0===t&&0===a?0:s.width+o,0===i&&0===h?0:s.height+o):Cr(this,-(o/2),-(o/2),l+o,u+o)},Po.prototype.xi=function(t,i,e,n){Dr(this,t,i,e,n)},Po.prototype.getNearestIntersectionPoint=Po.prototype.bl=function(t,i,e){return this.Co(t.x,t.y,i.x,i.y,e)},Po.prototype.Co=function(t,i,e,n,r){var o=this.transform,s=1/(o.m11*o.m22-o.m12*o.m21),a=o.m22*s,h=-o.m12*s,l=-o.m21*s,u=o.m11*s,f=s*(o.m21*o.dy-o.m22*o.dx),c=s*(o.m12*o.dx-o.m11*o.dy),o=t*a+i*l+f,s=t*h+i*u+c,a=e*a+n*l+f,h=e*h+n*u+c,l=this.hb/2,f=this.Pa;if(null===f&&(Nr(this,1/0,1/0),f=this.Pa),c=f.kb,u=!1,f.type===Lu)if(1.5>=this.hb)u=Au.$g(f.nc,f.uc,f.pb,f.Bb,o,s,a,h,r);else{var p=0,d=0;if(f.nc===f.pb?(p=l,d=0):(i=(f.Bb-f.uc)/(f.pb-f.nc),d=l/Math.sqrt(1+i*i),p=d*i),n=Ul.eb(),i=new m,Au.$g(f.nc+p,f.uc+d,f.pb+p,f.Bb+d,o,s,a,h,i)&&n.push(i),i=new m,Au.$g(f.nc-p,f.uc-d,f.pb-p,f.Bb-d,o,s,a,h,i)&&n.push(i),i=new m,Au.$g(f.nc+p,f.uc+d,f.nc-p,f.uc-d,o,s,a,h,i)&&n.push(i),i=new m,Au.$g(f.pb+p,f.Bb+d,f.pb-p,f.Bb-d,o,s,a,h,i)&&n.push(i),i=n.length,0===i)return Ul.ra(n),!1;for(u=!0,d=1/0,p=0;i>p;p++){var a=n[p],y=(a.x-o)*(a.x-o)+(a.y-s)*(a.y-s);d>y&&(d=y,r.x=a.x,r.y=a.y)}Ul.ra(n)}else if(f.type===Fu)i=c.x-l,u=Au.bl(i,c.y-l,c.x+c.width+l,c.y+c.height+l,o,s,a,h,r);else if(f.type===zu)t:if(i=c.copy().Jf(l,l),0===i.width)u=Au.$g(i.x,i.y,i.x,i.y+i.height,o,s,a,h,r);else if(0===i.height)u=Au.$g(i.x,i.y,i.x+i.width,i.y,o,s,a,h,r);else{t=i.width/2;var v=i.height/2;if(n=i.x+t,i=i.y+v,e=9999,o!==a&&(e=(s-h)/(o-a)),9999>Math.abs(e)){if(u=s-i-e*(o-n),0>t*t*e*e+v*v-u*u){r.x=0/0,r.y=0/0,u=!1;break t}l=Math.sqrt(t*t*e*e+v*v-u*u),a=(-(t*t*e*u)+t*v*l)/(v*v+t*t*e*e)+n,t=(-(t*t*e*u)-t*v*l)/(v*v+t*t*e*e)+n,h=e*(a-n)+u+i,i=e*(t-n)+u+i,n=Math.abs((o-a)*(o-a))+Math.abs((s-h)*(s-h)),s=Math.abs((o-t)*(o-t))+Math.abs((s-i)*(s-i)),s>n?(r.x=a,r.y=h):(r.x=t,r.y=i)}else{if(a=v*v,h=o-n,a-=a/(t*t)*h*h,0>a){r.x=0/0,r.y=0/0,u=!1;break t}l=Math.sqrt(a),h=i+l,i-=l,n=Math.abs(h-s),s=Math.abs(i-s),s>n?(r.x=o,r.y=h):(r.x=o,r.y=i)}u=!0}else if(f.type===Bu){var g=0,b=0,x=y=0,c=Ul.K(),p=a-o,d=h-s,d=p*p+d*d;for(r.x=a,r.y=h,p=0;p<f.ub.count;p++)for(var w=f.ub.n[p],k=w.Fa,g=w.ua,b=w.va,M=g,P=b,T=0;T<k.count;T++){var S=k.n[T],C=S.type,y=S.F,x=S.G,j=!1;switch(C){case Iu:M=y,P=x;break;case Ru:j=Do(g,b,y,x,o,s,a,h,c);break;case Gu:var j=S.Rb,C=S.jc,N=S.df,D=S.ef,j=Au.js(g,b,j,C,N,D,y,x,o,s,a,h,.5,c);break;case Vu:j=(g+2*S.Rb)/3,C=(b+2*S.jc)/3,N=(2*S.Rb+y)/3,D=(2*S.Rb+y)/3,j=Au.js(g,b,j,C,N,D,y,x,o,s,a,h,.5,c);break;case Hu:case Ku:for(x=S.type===Hu?Q(S,w):$(S,w,g,b),C=x.length,N=0;C>N;N++)v=x[N],0===N&&Do(g,b,v[0],v[1],o,s,a,h,c)&&(y=No(o,s,c,d,r),d>y&&(d=y,u=!0)),Au.js(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],o,s,a,h,.5,c)&&(y=No(o,s,c,d,r),d>y&&(d=y,u=!0));y=v[6],x=v[7];break;default:Ul.k("Unknown Segment type: "+S.type)}g=y,b=x,j&&(y=No(o,s,c,d,r),d>y&&(d=y,u=!0)),S.ew&&(y=M,x=P,Do(g,b,y,x,o,s,a,h,c)&&(y=No(o,s,c,d,r),d>y&&(d=y,u=!0)))}o=e-t,s=n-i,i=Math.sqrt(o*o+s*s),0!==i&&(o/=i,s/=i),r.x-=o*l,r.y-=s*l,Ul.v(c)}else Ul.k("Invalid Geometry type");return u?(this.transform.ab(r),!0):!1},Po.prototype.containedInRect=Po.prototype.sm=function(t,i){if(void 0===i)return t.Kj(this.ba);var e=this.Pa;null===e&&(Nr(this,1/0,1/0),e=this.Pa);var e=e.kb,n=this.hb/2,r=!1,o=Ul.K();return o.m(e.x-n,e.y-n),t.Aa(i.ab(o))&&(o.m(e.x-n,e.bottom+n),t.Aa(i.ab(o))&&(o.m(e.right+n,e.bottom+n),t.Aa(i.ab(o))&&(o.m(e.right+n,e.y-n),t.Aa(i.ab(o))&&(r=!0)))),Ul.v(o),r},Po.prototype.intersectsRect=Po.prototype.sg=function(t,i){if(this.sm(t,i)||void 0===i&&(i=this.transform,t.Kj(this.ba)))return!0;var e=Ul.jh();e.set(i),e.oz();var n=t.left,r=t.right,o=t.top,s=t.bottom,a=Ul.K();if(a.m(n,o),e.ab(a),this.Jj(a,!0))return Ul.v(a),!0;if(a.m(r,o),e.ab(a),this.Jj(a,!0))return Ul.v(a),!0;if(a.m(n,s),e.ab(a),this.Jj(a,!0))return Ul.v(a),!0;if(a.m(r,s),e.ab(a),this.Jj(a,!0))return Ul.v(a),!0;var h=Ul.K(),l=Ul.K();e.set(i),e.aE(this.transform),e.oz(),h.x=r,h.y=o,h.transform(e),a.x=n,a.y=o,a.transform(e);var u=!1;return Ao(this,a,h,l)?u=!0:(a.x=r,a.y=s,a.transform(e),Ao(this,a,h,l)?u=!0:(h.x=n,h.y=s,h.transform(e),Ao(this,a,h,l)?u=!0:(a.x=n,a.y=o,a.transform(e),Ao(this,a,h,l)&&(u=!0)))),Ul.v(a),Ul.Ye(e),Ul.v(h),Ul.v(l),u},Po.prototype.sD=function(t,i,e){function n(t,i){for(var e=t.length,n=0;e>n;n+=2)if(i.ss(t[n],t[n+1])>r)return!0;return!1}if(e&&null!==this.fill&&this.Jj(t,!0))return!0;var r=t.Lj(i);i=r,1.5<this.hb&&(r=this.hb/2+Math.sqrt(r),r*=r);var o=this.Pa;if(null===o&&(Nr(this,1/0,1/0),o=this.Pa),!e){var s=o.kb,a=s.x,h=s.y,l=s.x+s.width,s=s.y+s.height;if(Xl(t.x,t.y,a,h)<=r&&Xl(t.x,t.y,l,h)<=r&&Xl(t.x,t.y,a,s)<=r&&Xl(t.x,t.y,l,s)<=r)return!0}if(a=o.nc,h=o.uc,l=o.pb,s=o.Bb,o.type===Lu){if(e=Wl(t.x,t.y,a,h,l,s),o=(a-l)*(t.x-l)+(h-s)*(t.y-s),e<=(0<=(l-a)*(t.x-a)+(s-h)*(t.y-h)&&o>=0?r:i))return!0}else{if(o.type===Fu)return i=!1,e&&(i=Wl(t.x,t.y,a,h,a,s)<=r||Wl(t.x,t.y,a,h,l,h)<=r||Wl(t.x,t.y,l,h,l,s)<=r||Wl(t.x,t.y,a,s,l,s)<=r),i;if(o.type===zu){i=t.x-(a+l)/2;var o=t.y-(h+s)/2,u=Math.abs(l-a)/2,f=Math.abs(s-h)/2;if(0===u||0===f)return e=Wl(t.x,t.y,a,h,l,s),r>=e?!0:!1;if(!e)return Xl(i,o,-u,0)>=r||Xl(i,o,0,-f)>=r||Xl(i,o,0,f)>=r||Xl(i,o,u,0)>=r?!1:!0;if(t=Au.sG(u,f,i,o),r>=t*t)return!0}else if(o.type===Bu){if(s=o.kb,a=s.x,h=s.y,l=s.x+s.width,s=s.y+s.height,t.x>l&&t.x<a&&t.y>s&&t.y<h&&Wl(t.x,t.y,a,h,a,s)>r&&Wl(t.x,t.y,a,h,l,h)>r&&Wl(t.x,t.y,l,s,a,s)>r&&Wl(t.x,t.y,l,s,l,h)>r)return!1;if(i=Math.sqrt(r),!e){for(e=o.ub,i=0;i<e.count;i++){if(a=e.n[i],u=a.ua,f=a.va,t.ss(u,f)>r)return!1;for(h=a.Fa.n,l=h.length,s=0;l>s;s++){var c=h[s];switch(c.type){case Iu:case Ru:if(u=c.F,f=c.G,t.ss(u,f)>r)return!1;break;case Gu:if(o=Ul.eb(),Au.ye(u,f,c.Rb,c.jc,c.df,c.ef,c.F,c.G,.8,o),u=n(o,t),Ul.ra(o),u)return!1;if(u=c.F,f=c.G,t.ss(u,f)>r)return!1;break;case Vu:if(o=Ul.eb(),Au.Xo(u,f,c.Rb,c.jc,c.F,c.G,.8,o),u=n(o,t),Ul.ra(o),u)return!1;if(u=c.F,f=c.G,t.ss(u,f)>r)return!1;break;case Hu:case Ku:var c=c.type===Hu?Q(c,a):$(c,a,u,f),p=c.length,d=null,o=Ul.eb();for(i=0;p>i;i++)if(d=c[i],o.length=0,Au.ye(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.8,o),n(o,t))return Ul.ra(o),!1;Ul.ra(o),null!==d&&(u=d[6],f=d[7]);break;default:Ul.k("Unknown Segment type: "+c.type)}}}return!0}if(null===this.fill?W(o,t.x,t.y,i):o.Aa(t,i,!0))return!0}}return!1},Ul.defineProperty(Po,{ed:"geometry"},function(){return this.jk?this.jk:this.Pa},function(t){var i=this.Pa;if(i!==t){this.jk=this.Pa=null!==t?t.freeze():null;var e=this.T;null!==e&&(e.kj=0/0),this.Rg=!0,this.R(),this.h("geometry",i,t),t=this.T,null!==t&&0!==(1024&this.ea)&&Sr(this,t,"geometryString")}}),Ul.defineProperty(Po,{EG:"geometryString"},function(){return null===this.ed?"":this.ed.toString()},function(t){var i=Eu(t);t=i.normalize(),this.ed=i;var i=Ul.K(),e=this.position;e.J()?i.m(e.x-t.x,e.y-t.y):i.m(-t.x,-t.y),this.position=i,Ul.v(i)}),Ul.defineProperty(Po,{rz:"isGeometryPositioned"},function(){return this.hq},function(t){var i=this.hq;i!==t&&(this.hq=t,this.R(),this.h("isGeometryPositioned",i,t))}),Po.prototype.le=function(){this.Rg?this.jk=null:this.Pa=null,this.R()},Ul.defineProperty(Po,{fill:"fill"},function(){return this.kd},function(t){var i=this.kd;i!==t&&(t instanceof kr&&t.freeze(),this.kd=t,this.ma(),this.h("fill",i,t))}),Ul.defineProperty(Po,{stroke:"stroke"},function(){return this.yc},function(t){var i=this.yc;i!==t&&(t instanceof kr&&t.freeze(),this.yc=t,this.ma(),this.h("stroke",i,t))}),Ul.defineProperty(Po,{hb:"strokeWidth"},function(){return this.Sg},function(t){var i=this.Sg;if(i!==t)if(t>=0){this.Sg=t,this.R();var e=this.T;null!==e&&(e.kj=0/0),this.h("strokeWidth",i,t)}else Ul.wa(t,"value >= 0",Po,"strokeWidth:value")}),Ul.defineProperty(Po,{qI:"strokeCap"},function(){return this.co},function(t){var i=this.co;i!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?Ul.wa(t,'"butt", "round", or "square"',Po,"strokeCap"):(this.co=t,this.ma(),this.h("strokeCap",i,t)))}),Ul.defineProperty(Po,{yK:"strokeJoin"},function(){return this.eo},function(t){var i=this.eo;i!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?Ul.wa(t,'"miter", "bevel", or "round"',Po,"strokeJoin"):(this.eo=t,this.ma(),this.h("strokeJoin",i,t)))}),Ul.defineProperty(Po,{zK:"strokeMiterLimit"},function(){return this.gm},function(t){var i=this.gm;if(i!==t)if(t>0){this.gm=t,this.ma();var e=this.T;null!==e&&(e.kj=0/0),this.h("strokeMiterLimit",i,t)}else Ul.wa(t,"value > 0",Po,"strokeWidth:value")}),Ul.defineProperty(Po,{gA:"strokeDashArray"},function(){return this.fm},function(t){var i=this.fm;if(i!==t){if(null===t||Array.isArray(t)||Ul.Kd(t,"Array",Po,"strokeDashArray:value"),null!==t){for(var e=t.length,n=0,r=0;e>r;r++){var o=t[r];"number"==typeof o&&o>=0&&isFinite(o)||Ul.k("strokeDashArray:value "+o+" must be a positive number or zero."),n+=o}if(0===n){if(null===i)return;t=null}}this.fm=t,this.ma(),this.h("strokeDashArray",i,t)}}),Ul.defineProperty(Po,{rI:"strokeDashOffset"},function(){return this.dd},function(t){var i=this.dd;i!==t&&t>=0&&(this.dd=t,this.ma(),this.h("strokeDashOffset",i,t))}),Ul.defineProperty(Po,{Fb:"figure"},function(){return this.tn},function(t){var i=this.tn;if(i!==t){var e=Au.qg[t];"function"==typeof e?e=t:(e=Au.qg[t.toLowerCase()])||Ul.k("Unknown Shape.figure: "+t),i!==e&&(t=this.T,null!==t&&(t.kj=0/0),this.tn=e,this.Rg=!1,this.le(),this.h("figure",i,e))}}),Ul.defineProperty(Po,{jp:"toArrow"},function(){return this.fo},function(t){var i=this.fo;if(!0===t?t="Standard":!1===t&&(t=""),i!==t){var e=Au.UC(t);null===e?Ul.k("Unknown Shape.toArrow: "+t):i!==e&&(this.fo=e,this.Rg=!1,this.le(),Lo(this),this.h("toArrow",i,e))}}),Ul.defineProperty(Po,{ez:"fromArrow"},function(){return this.wn},function(t){var i=this.wn;if(!0===t?t="Standard":!1===t&&(t=""),i!==t){var e=Au.UC(t);null===e?Ul.k("Unknown Shape.fromArrow: "+t):i!==e&&(this.wn=e,this.Rg=!1,this.le(),Lo(this),this.h("fromArrow",i,e))}}),Ul.defineProperty(Po,{A:"spot1"},function(){return this.ri},function(t){Ul.C(t,D,Po,"spot1");var i=this.ri;i.L(t)||(this.ri=t=t.Z(),this.R(),this.h("spot1",i,t))}),Ul.defineProperty(Po,{B:"spot2"},function(){return this.si},function(t){Ul.C(t,D,Po,"spot2");var i=this.si;i.L(t)||(this.si=t=t.Z(),this.R(),this.h("spot2",i,t))}),Ul.defineProperty(Po,{xc:"parameter1"},function(){return this.cr},function(t){var i=this.cr;i!==t&&(this.cr=t,this.le(),this.h("parameter1",i,t))}),Ul.defineProperty(Po,{et:"parameter2"},function(){return this.dr},function(t){var i=this.dr;i!==t&&(this.dr=t,this.le(),this.h("parameter2",i,t))}),Ul.u(Po,{Ha:"naturalBounds"},function(){if(null!==this.Pa)return this.Hc.assign(this.Pa.kb),this.Hc;var t=this.xa;return new k(0,0,t.width,t.height)}),Ul.defineProperty(Po,{HJ:"isRectangular"},function(){return this.nq},function(t){var i=this.nq;i!==t&&(this.nq=t,this.R(),this.h("isRectangular",i,t))}),Ul.defineProperty(Po,{eE:"pathObject"},function(){return this.gr},function(t){var i=this.gr;i!==t&&(this.gr=t,this.ma(),this.h("pathObject",i,t))}),Ul.defineProperty(Po,{yD:"geometryStretch"},function(){return this.Zp},function(t){var i=this.Zp;i!==t&&(Ul.rb(t,Mr,Po,"geometryStretch"),this.Zp=t,this.h("geometryStretch",i,t))}),Ul.defineProperty(Po,{interval:"interval"},function(){return this.eq},function(t){var i=this.eq;t=Math.floor(t),i!==t&&t>=0&&(this.eq=t,null!==this.g&&Sn(this.g),this.R(),this.h("interval",i,t))}),Po.getFigureGenerators=function(){var t,i=new g("string","function");for(t in Au.qg)if(t!==t.toLowerCase()){var e=Au.qg[t];"function"==typeof e&&i.add(t,e)}return i.freeze(),i},Po.defineFigureGenerator=function(t,i){Ul.j(t,"string",Po,"defineFigureGenerator:name"),"string"==typeof i?""!==i&&Au.qg[i]||Ul.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+i):Ul.j(i,"function",Po,"defineFigureGenerator:func");var e=t.toLowerCase();""!==t&&"none"!==e&&t!==e||Ul.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t);var n=Au.qg;n[t]=i,n[e]=t},Po.getArrowheadGeometries=function(){var t,i=new g("string",H);for(t in Au.Qi)if(t!==t.toLowerCase()){var e=Au.Qi[t];e instanceof H&&i.add(t,e)}return i.freeze(),i},Po.defineArrowheadGeometry=function(t,i){Ul.j(t,"string",Po,"defineArrowheadGeometry:name");var e=null;"string"==typeof i?(Ul.j(i,"string",Po,"defineArrowheadGeometry:pathstr"),e=Eu(i,!1)):(Ul.C(i,H,Po,"defineArrowheadGeometry:pathstr"),e=i);var n=t.toLowerCase();""!==t&&"none"!==n&&t!==n||Ul.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var r=Au.Qi;r[t]=e,r[n]=t},Ul.Ga(Fo,Mr),Ul.fa("TextBlock",Fo);var wc=new n,kc=0,Mc=new n,Pc=0,Tc="...",Sc="",Cc=Ul.createElement("canvas").getContext("2d");Fo.getEllipsis=function(){return Tc},Fo.setEllipsis=function(t){Tc=t,Mc=new n,Pc=0},Fo.prototype.cloneProtected=function(t){Mr.prototype.cloneProtected.call(this,t),t.ie=this.ie,t.yc=this.yc,t.Hg=this.Hg,t.Rd=this.Rd,t.kq=this.kq,t.Ll=this.Ll,t.Kl=this.Kl,t.jm=this.jm,t.Ek=this.Ek,t.ve=this.ve,t.Gu=this.Gu,t.by=this.by,t.ay=this.ay,t.vn=this.vn,t.ej.qs(this.ej),t.Tp=this.Tp,t.Rr=this.Rr,t.Hk=this.Hk,t.kf=this.kf,t.yj=this.yj,t.zj=this.zj,t.ii=this.ii},Fo.prototype.toString=function(){return 22<this.ie.length?'TextBlock("'+this.ie.substring(0,20)+'"...)':'TextBlock("'+this.ie+'")'};var jc;Fo.None=jc=Ul.s(Fo,"None",0);var Nc;Fo.WrapFit=Nc=Ul.s(Fo,"WrapFit",1);var Dc;Fo.WrapDesiredSize=Dc=Ul.s(Fo,"WrapDesiredSize",2);var Ac;Fo.OverflowClip=Ac=Ul.s(Fo,"OverflowClip",0);var Lc;Fo.OverflowEllipsis=Lc=Ul.s(Fo,"OverflowEllipsis",1),Fo.prototype.R=function(){Mr.prototype.R.call(this),this.ay=this.by=null},Ul.defineProperty(Fo,{font:"font"},function(){return this.Hg},function(t){var i=this.Hg;i!==t&&(this.Hg=t,this.vn=null,this.R(),this.h("font",i,t))}),Fo.isValidFont=function(t){var i=Cc.font;if(t===i||"10px sans-serif"===t)return!0;Cc.font="10px sans-serif";var e;Cc.font=t;var n=Cc.font;return"10px sans-serif"!==n?(Cc.font=i,!0):(Cc.font="19px serif",e=Cc.font,Cc.font=t,n=Cc.font,Cc.font=i,n!==e)},Ul.defineProperty(Fo,{text:"text"},function(){return this.ie},function(t){var i=this.ie;t=null!==t&&void 0!==t?t.toString():"",i!==t&&(this.ie=t,this.R(),this.h("text",i,t))}),Ul.defineProperty(Fo,{textAlign:"textAlign"},function(){return this.Rd},function(t){var i=this.Rd;i!==t&&("start"===t||"end"===t||"left"===t||"right"===t||"center"===t?(this.Rd=t,this.ma(),this.h("textAlign",i,t)):Ul.wa(t,'"start", "end", "left", "right", or "center"',Fo,"textAlign"))}),Ul.u(Fo,{Ha:"naturalBounds"},function(){if(!this.Hc.J()){var t=Bo(this,this.ie,this.ej,999999).width,i=Ro(this,t,this.ej),e=this.xa;isNaN(e.width)||(t=e.width),isNaN(e.height)||(i=e.height),M(this.Hc,t,i)}return this.Hc}),Ul.defineProperty(Fo,{iw:"isMultiline"},function(){return this.kq},function(t){var i=this.kq;i!==t&&(this.kq=t,this.R(),this.h("isMultiline",i,t))}),Ul.defineProperty(Fo,{LJ:"isUnderline"},function(){return this.Ll},function(t){var i=this.Ll;i!==t&&(this.Ll=t,this.ma(),this.h("isUnderline",i,t))}),Ul.defineProperty(Fo,{IJ:"isStrikethrough"},function(){return this.Kl},function(t){var i=this.Kl;i!==t&&(this.Kl=t,this.ma(),this.h("isStrikethrough",i,t))}),Ul.defineProperty(Fo,{bF:"wrap"},function(){return this.jm},function(t){var i=this.jm;i!==t&&(this.jm=t,this.R(),this.h("wrap",i,t))}),Ul.defineProperty(Fo,{overflow:"overflow"},function(){return this.Ek},function(t){var i=this.Ek;i!==t&&(this.Ek=t,this.R(),this.h("overflow",i,t))}),Ul.defineProperty(Fo,{stroke:"stroke"},function(){return this.yc},function(t){var i=this.yc;i!==t&&(t instanceof kr&&t.freeze(),this.yc=t,this.ma(),this.h("stroke",i,t))}),Ul.u(Fo,{oH:"lineCount"},function(){return this.ve}),Ul.defineProperty(Fo,{bz:"editable"},function(){return this.Tp},function(t){var i=this.Tp;i!==t&&(this.Tp=t,this.h("editable",i,t))}),Ul.defineProperty(Fo,{NE:"textEditor"},function(){return this.Rr},function(t){var i=this.Rr;i!==t&&(t instanceof HTMLElement||Ul.k("textEditor must be an HTMLElement"),this.Rr=t,this.h("textEditor",i,t))}),Ul.defineProperty(Fo,{cz:"errorFunction"},function(){return this.kf},function(t){var i=this.kf;i!==t&&(null!==t&&Ul.j(t,"function",Fo,"errorFunction"),this.kf=t,this.h("errorFunction",i,t))}),Fo.prototype.Mj=function(t,i){if(null!==this.yc&&0!==this.ie.length&&null!==this.Hg){var e=this.Ha.width,n=Eo(this);t.textAlign=this.Rd,zr(this,t,this.yc,!0,!1),(this.Ll||this.Kl)&&zr(this,t,this.yc,!1,!1);var r=this.ej,o=0,s=!1,a=Ul.fc(0,0);this.Ff.ab(a);var h=Ul.fc(0,n);this.Ff.ab(h);var l=a.Lj(h);Ul.v(a),Ul.v(h),a=i.scale,8>l*a*a&&(s=!0),i.Gg!==t&&(s=!1),!1===i.$v("textGreeking")&&(s=!1);for(var l=this.yj,a=this.zj,h=this.ve,u=0;h>u;u++){var f=r.gf[u],c=r.te[u];f>e&&(f=e);var o=o+l,p=c,c=t,d=o,y=e,v=n,g=0;s?("start"===this.Rd||"left"===this.Rd?g=0:"end"===this.Rd||"right"===this.Rd?g=y-f:"center"===this.Rd?g=(y-f)/2:Ul.k("textAlign must be start, end, left, right, or center"),c.fillRect(0+g,d+.25*v,f,1)):("start"===this.Rd||"left"===this.Rd?g=0:"end"===this.Rd||"right"===this.Rd?g=y:"center"===this.Rd?g=y/2:Ul.k("textAlign must be start, end, left, right, or center"),c.fillText(p,0+g,d+v-.25*v),p=v/20|0,0===p&&(p=1),"end"===this.Rd||"right"===this.Rd?g-=f:"center"===this.Rd&&(g-=f/2),this.Ll&&(c.beginPath(),c.lineWidth=p,c.moveTo(0+g,d+v-.2*v),c.lineTo(0+g+f,d+v-.2*v),c.stroke()),this.Kl&&(c.beginPath(),c.lineWidth=p,d=d+v-v/2.2|0,0!==p%2&&(d+=.5),c.moveTo(0+g,d),c.lineTo(0+g+f,d),c.stroke())),o+=n+a}}},Fo.prototype.Oo=function(t,i,e,n){var r=this.ej;r.reset();var o=0,s=0;if(isNaN(this.xa.width)){if(o=this.ie.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),0===o.length)o=0;else if(this.iw){for(var a=s=0,h=!1;!h;){var l=o.indexOf("\n",a);-1===l&&(l=o.length,h=!0),a=Oo(o.substr(a,l-a).replace(/^\s+|\s+$/g,""),this.Hg),a>s&&(s=a),a=l+1}o=s}else s=o.indexOf("\n",0),s>=0&&(o=o.substr(0,s)),o=a=Oo(o,this.Hg);o=Math.min(o,t/this.scale),o=Math.max(8,o)}else o=this.xa.width;if(null!==this.S&&(o=Math.min(o,this.S.af.width),o=Math.max(o,this.S.vg.width)),s=Ro(this,o,r),l=s=isNaN(this.xa.height)?Math.min(s,i/this.scale):this.xa.height,0!==r.Oe&&1!==r.te.length&&this.Ek===Lc&&(i=this.Hg,h=this.Ek===Lc?Io(i):0,a=this.yj+this.zj,a=Math.max(0,Eo(this)+a),l=Math.max(Math.floor(l/a)-1,0),!(l+1>=r.te.length))){for(a=r.te[l],t=Math.max(1,t-h);Oo(a,i)>t&&1<a.length;)a=a.substr(0,a.length-1);a+=Tc,t=Oo(a,i),r.te[l]=a,r.te=r.te.slice(0,l+1),r.gf[l]=t,r.gf=r.gf.slice(0,l+1),r.wi=r.te.length,r.Oe=Math.max(r.Oe,t),this.ve=r.wi}(this.bF===Nc||isNaN(this.xa.width))&&(o=r.Oe,isNaN(this.xa.width)&&(o=Math.max(8,o))),o=Math.max(e,o),s=Math.max(n,s),M(this.Hc,o,s),Cr(this,0,0,o,s)},Fo.prototype.xi=function(t,i,e,n){Dr(this,t,i,e,n)},Ul.defineProperty(Fo,{jA:"textValidation"},function(){return this.Hk},function(t){var i=this.Hk;i!==t&&(null!==t&&Ul.j(t,"function",Fo,"textValidation"),this.Hk=t,this.h("textValidation",i,t))}),Ul.defineProperty(Fo,{vK:"spacingAbove"},function(){return this.yj},function(t){var i=this.yj;i!==t&&(this.yj=t,this.h("spacingAbove",i,t))}),Ul.defineProperty(Fo,{wK:"spacingBelow"},function(){return this.zj},function(t){var i=this.zj;i!==t&&(this.zj=t,this.h("spacingBelow",i,t))}),Ul.defineProperty(Fo,{YJ:"maxLines"},function(){return this.ii},function(t){var i=this.ii;i!==t&&(t=Math.floor(t),0>=t&&Ul.wa(t,"> 0",Fo,"maxLines"),this.ii=t,this.h("maxLines",i,t),this.R())}),Ul.u(Fo,{ZJ:"metrics"},function(){return this.ej}),Go.prototype.reset=function(){this.Oe=this.wi=0,this.gf=[],this.te=[]},Go.prototype.qs=function(t){this.wi=t.wi,this.Oe=t.Oe,this.gf=Ul.Pk(t.gf),this.te=Ul.Pk(t.te)},Ul.u(Go,{bJ:"arrSize"},function(){return this.gf}),Ul.u(Go,{cJ:"arrText"},function(){return this.te}),Ul.u(Go,{XJ:"maxLineWidth"},function(){return this.Oe}),Ul.Ga(Vo,Mr),Ul.fa("Picture",Vo);var Fc,zc=new n,Bc=0,qc=[];Vo.clearCache=Fc=function(t){void 0===t&&(t=""),Ul.j(t,"string",Vo,"clearCache:url"),""!==t?zc[t]&&(delete zc[t],Bc--):(zc=new n,Bc=0)},Vo.prototype.cloneProtected=function(t){Mr.prototype.cloneProtected.call(this,t),t.element=this.Me,t.Lr=this.Lr,t.xj.assign(this.xj),t.zn=this.zn,t.kf=this.kf,t.Aj=this.Aj,t.Zn=this.Zn},Vo.prototype.toString=function(){return"Picture("+this.source+")#"+Ul.Uc(this)},Ul.defineProperty(Vo,{element:"element"},function(){return this.Me},function(t){var i=this.Me;i!==t&&(t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||Ul.k("Picture.element must be an instance of Image, Canvas, or Video."),this.Sx=t instanceof HTMLCanvasElement,this.Me=t,!0===t.complete||void 0===t.complete?(t.ou instanceof Event&&null!==this.kf&&this.kf(this,t.ou),!0===t.Ux&&null!==this.Aj&&this.Aj(this,null),t.Ux=!0,this.xa.J()||(Yr(this,!1),this.R())):t.iB||(t.addEventListener("load",function(i){Ko(t,i)}),t.addEventListener("error",function(i){Uo(t,i)}),t.iB=!0),this.h("element",i,t),this.ma())}),Ul.defineProperty(Vo,{source:"source"},function(){return this.Lr},function(t){var i=this.Lr;if(i!==t){Ul.j(t,"string",Vo,"source"),this.Lr=t;var e=zc,n=this.g;if(void 0!==e[t])var r=e[t].mo[0].source;else{Bc>30&&(Fc(),e=zc),r=Ul.createElement("img"),r.addEventListener("load",function(t){Ko(r,t)}),r.addEventListener("error",function(t){Uo(r,t)}),r.iB=!0,r.src=t;var o=this.Zn;null!==o&&(r.crossOrigin=o(this)),e[t]=new Yo(r),Bc++}null!==n&&On(n,this),this.element=r,null!==n&&Bn(n,this),this.ma(),this.h("source",i,t)}}),Ul.defineProperty(Vo,{uK:"sourceCrossOrigin"},function(){return this.Zn},function(t){if(this.Zn!==t&&(null!==t&&Ul.j(t,"function",Vo,"sourceCrossOrigin"),this.Zn=t,null!==this.element)){var i=this.element.src;null===t&&"string"==typeof i?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this))}}),Ul.defineProperty(Vo,{Li:"sourceRect"},function(){return this.xj},function(t){var i=this.xj;i.L(t)||(Ul.C(t,k,Vo,"sourceRect"),this.xj=t=t.Z(),this.ma(),this.h("sourceRect",i,t))}),Ul.defineProperty(Vo,{RG:"imageStretch"},function(){return this.zn},function(t){var i=this.zn;i!==t&&(Ul.rb(t,Mr,Vo,"imageStretch"),this.zn=t,this.ma(),this.h("imageStretch",i,t))
}),Ul.defineProperty(Vo,{cz:"errorFunction"},function(){return this.kf},function(t){var i=this.kf;i!==t&&(null!==t&&Ul.j(t,"function",Vo,"errorFunction"),this.kf=t,this.h("errorFunction",i,t))}),Ul.defineProperty(Vo,{CK:"successFunction"},function(){return this.Aj},function(t){var i=this.Aj;i!==t&&(null!==t&&Ul.j(t,"function",Vo,"successFunction"),this.Aj=t,this.h("successFunction",i,t))}),Vo.prototype.Mj=function(t,i){var e=this.Me;if(null!==e){var n=e.src;if(null!==n&&""!==n||Ul.k("Element has no source attribute: "+e),!(e.ou instanceof Event)&&!0===e.Ux){var n=this.Ha,r=0,o=0,s=this.Sx,a=s?+e.width:e.naturalWidth,s=s?+e.height:e.naturalHeight;if(void 0===a&&e.videoWidth&&(a=e.videoWidth),void 0===s&&e.videoHeight&&(s=e.videoHeight),a=a||n.width,s=s||n.height,0!==a&&0!==s){var h=a,l=s;this.Li.J()&&(r=this.xj.x,o=this.xj.y,a=this.xj.width,s=this.xj.height);var u=a,f=s,c=this.zn;switch(c){case Zf:if(this.Li.J())break;r+=Math.max((u-n.width)/2,0),o+=Math.max((f-n.height)/2,0),a=Math.min(n.width,u),s=Math.min(n.height,f);break;case tc:u=n.width,f=n.height;break;case ic:case ec:var p=0;c===ic?(p=Math.min(n.height/f,n.width/u),u*=p,f*=p):c===ec&&(p=Math.max(n.height/f,n.width/u),u*=p,f*=p,r+=(u-n.width)/2,o+=(f-n.height)/2,a*=1/(u/n.width),s*=1/(f/n.height),u=n.width,f=n.height)}this.JB=a*s;var c=this.Hi()*i.scale,d=this.JB/(u*c*f*c),p=zc[this.source],c=null;if(void 0!==p&&d>16){2>p.mo.length&&(Jo(p,4,h,l),Jo(p,16,h,l));for(var h=p.mo,l=h.length,c=h[0],y=0;l>y&&h[y].Yo*h[y].Yo<d;y++)c=h[y]}if(!i.qn){if(null===this.Qr)if(null===this.Me)this.Qr=!1;else{h=Ul.createElement("canvas").getContext("2d"),h.drawImage(this.Me,0,0);try{h.getImageData(0,0,1,1),this.Qr=!1}catch(v){this.Qr=!0}}if(this.Qr)return}if(i.$v("pictureRatioOptimization")&&!i.Tx&&void 0!==p&&null!==c&&1!==c.Yo){t.save(),p=c.Yo;try{t.drawImage(c.source,r/p,o/p,Math.min(c.source.width,a/p),Math.min(c.source.height,s/p),Math.max((n.width-u)/2,0),Math.max((n.height-f)/2,0),Math.min(n.width,u),Math.min(n.height,f))}catch(g){}t.restore()}else try{t.drawImage(e,r,o,a,s,Math.max((n.width-u)/2,0),Math.max((n.height-f)/2,0),Math.min(n.width,u),Math.min(n.height,f))}catch(m){}}}}},Ul.u(Vo,{Ha:"naturalBounds"},function(){return this.Hc}),Vo.prototype.Oo=function(t,i,e,n){var r=this.xa,o=Er(this,!0),s=this.Me,a=this.Sx;(a||!this.$x&&s&&s.complete)&&(this.$x=!0),null===s&&(isFinite(t)||(t=0),isFinite(i)||(i=0)),isFinite(r.width)||o===tc||o===_f?(isFinite(t)||(t=this.Li.J()?this.Li.width:a?+s.width:s.naturalWidth),e=0):null!==s&&!1!==this.$x&&(t=this.Li.J()?this.Li.width:a?+s.width:s.naturalWidth),isFinite(r.height)||o===tc||o===$f?(isFinite(i)||(i=this.Li.J()?this.Li.height:a?+s.height:s.naturalHeight),n=0):null!==s&&!1!==this.$x&&(i=this.Li.J()?this.Li.height:a?+s.height:s.naturalHeight),isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(i=r.height),r=this.af,o=this.vg,e=Math.max(e,o.width),n=Math.max(n,o.height),t=Math.min(r.width,t),i=Math.min(r.height,i),t=Math.max(e,t),i=Math.max(n,i),null===s||s.complete||(isFinite(t)||(t=0),isFinite(i)||(i=0)),M(this.Hc,t,i),Cr(this,0,0,t,i)},Vo.prototype.xi=function(t,i,e,n){Dr(this,t,i,e,n)},Hl=Xo.prototype,Hl.reset=function(){this.o=new H,this.Tb=null},Hl.$a=function(t){null===this.o&&Ul.k("StreamGeometryContext has been closed"),null===this.Tb&&Ul.k("Need to call beginFigure first"),this.Tb.il=t},Hl.moveTo=function(t,i,e){void 0===e&&(e=!1),null===this.o&&Ul.k("StreamGeometryContext has been closed"),null===this.Tb&&Ul.k("Need to call beginFigure first");var n=new Z(Iu);n.F=t,n.G=i,e&&n.close(),this.Tb.Fa.add(n)},Hl.lineTo=function(t,i,e){void 0===e&&(e=!1),null===this.o&&Ul.k("StreamGeometryContext has been closed"),null===this.Tb&&Ul.k("Need to call beginFigure first");var n=new Z(Ru);n.F=t,n.G=i,e&&n.close(),this.Tb.Fa.add(n)},Hl.arcTo=function(t,i,e,n,r,o,s){void 0===o&&(o=0),void 0===s&&(s=!1),null===this.o&&Ul.k("StreamGeometryContext has been closed"),null===this.Tb&&Ul.k("Need to call beginFigure first");var a=new Z(Hu);a.Je=t,a.Qf=i,a.Ja=e,a.Ua=n,a.radiusX=r,a.radiusY=0!==o?o:r,s&&a.close(),this.Tb.Fa.add(a)},Au.makeGeometry=function(t,i,e){var n=t.xa,r=n.width,n=n.height;return void 0!==i&&!isNaN(i)&&isFinite(i)&&(r=i),void 0!==e&&!isNaN(e)&&isFinite(e)&&(n=e),isFinite(r)||(r=100),isFinite(n)||(n=100),i=null,"None"!==t.jp?i=Au.Qi[t.jp]:"None"!==t.ez?i=Au.Qi[t.ez]:(e=Au.qg[t.Fb],"string"==typeof e&&(e=Au.qg[e]),void 0===e&&Ul.k("Unknown Shape.figure: "+t.Fb),i=e(t,r,n),i.Dn=r,i.Cn=n),null===i&&(e=Au.qg.Rectangle,"function"==typeof e&&(i=e(t,r,n))),i},Au.Ai=function(t,i,e,n,r,o,s,a,h,l,u,f,c,p){var d=1-h;t=t*d+e*h,i=i*d+n*h,e=e*d+r*h,n=n*d+o*h,r=r*d+s*h,o=o*d+a*h,a=t*d+e*h,s=i*d+n*h,e=e*d+r*h,n=n*d+o*h,l.x=t,l.y=i,u.x=a,u.y=s,f.x=a*d+e*h,f.y=s*d+n*h,c.x=e,c.y=n,p.x=r,p.y=o},Au.uo=function(t){t=Au.wm(t);var i=Ul.eb();i[0]=t[0];for(var e=1,n=1;n<t.length;)i[e]=t[n],i[e+1]=t[n],i[e+2]=t[n+1],n+=2,e+=3;return Ul.ra(t),i},Au.wm=function(t){var i=Au.Qk(t),e=Ul.eb(),n=Math.floor(i.length/2),r=i.length-1;t=0===t%2?2:1;for(var o=0;r>o;o++){var s=i[o],a=i[o+1],h=i[(n+o-1)%r],l=i[(n+o+t)%r];e[2*o]=s,e[2*o+1]=Au.al(s.x,s.y,h.x,h.y,a.x,a.y,l.x,l.y,new m)}return e[e.length]=e[0],Ul.ra(i),e},Au.al=function(t,i,e,n,r,o,s,a,h){e=t-e;var l=r-s,u=s=0;return 0===e||0===l?0===e?(a=(o-a)/l,s=t,u=a*s+(o-a*r)):(n=(i-n)/e,s=r,u=n*s+(i-n*t)):(n=(i-n)/e,a=(o-a)/l,t=i-n*t,s=(o-a*r-t)/(n-a),u=n*s+t),h.m(s,u),h},Au.Qk=function(t){for(var i=Ul.eb(),e=1.5*Math.PI,n=0,r=0;t>r;r++)n=2*Math.PI/t*r+e,i[r]=new m(.5+.5*Math.cos(n),.5+.5*Math.sin(n));return i.push(i[0]),i},Au.sA=new D(.156,.156).Ka(),Au.tA=new D(.844,.844).Ka(),Au.qg={None:"Rectangle",Rectangle:function(t,i,e){return t=new H,t.type=Fu,t.ua=0,t.va=0,t.F=i,t.G=e,t},Square:function(t,i,e){return t=new H,t.Bd=ic,t.type=Fu,t.ua=0,t.va=0,t.F=Math.min(i,e),t.G=Math.min(i,e),t},Ellipse:function(t,i,e){return t=new H,t.type=zu,t.ua=0,t.va=0,t.F=i,t.G=e,t.A=Au.sA,t.B=Au.tA,t},Circle:function(t,i,e){return t=new H,t.Bd=ic,t.type=zu,t.ua=0,t.va=0,t.F=Math.min(i,e),t.G=Math.min(i,e),t.A=Au.sA,t.B=Au.tA,t},Connector:"Ellipse",TriangleRight:function(t,i,e){t=new H;var n=new X,r=new Z;return r.F=i,r.G=.5*e,n.Fa.add(r),i=new Z,i.F=0,i.G=e,n.Fa.add(i.close()),t.ub.add(n),t.A=new D(0,.25),t.B=new D(.5,.75),t},TriangleDown:function(t,i,e){t=new H;var n=new X,r=new Z;return r.F=i,r.G=0,n.Fa.add(r),r=new Z,r.F=.5*i,r.G=e,n.Fa.add(r.close()),t.ub.add(n),t.A=new D(.25,0),t.B=new D(.75,.5),t},TriangleLeft:function(t,i,e){t=new H;var n=new X;n.ua=i,n.va=e;var r=new Z;return r.F=0,r.G=.5*e,n.Fa.add(r),e=new Z,e.F=i,e.G=0,n.Fa.add(e.close()),t.ub.add(n),t.A=new D(.5,.25),t.B=new D(1,.75),t},TriangleUp:function(t,i,e){t=new H;var n=new X;n.ua=i,n.va=e;var r=new Z;return r.F=0,r.G=e,n.Fa.add(r),e=new Z,e.F=.5*i,e.G=0,n.Fa.add(e.close()),t.ub.add(n),t.A=new D(.25,.5),t.B=new D(.75,1),t},Line1:function(t,i,e){return t=new H,t.type=Lu,t.ua=0,t.va=0,t.F=i,t.G=e,t},Line2:function(t,i,e){return t=new H,t.type=Lu,t.ua=i,t.va=0,t.F=0,t.G=e,t},MinusLine:"LineH",LineH:function(t,i,e){return t=new H,t.type=Lu,t.ua=0,t.va=e/2,t.F=i,t.G=e/2,t},LineV:function(t,i,e){return t=new H,t.type=Lu,t.ua=i/2,t.va=0,t.F=i/2,t.G=e,t},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(t,i,e){var n=Au.sa;return t=Ul.p(),Zo(t,0,0,!1),_o(t,n*i,0,1*i,(1-n)*e,i,e),i=t.o,Ul.q(t),i},Curve2:function(t,i,e){var n=Au.sa;return t=Ul.p(),Zo(t,0,0,!1),_o(t,0,n*e,(1-n)*i,e,i,e),i=t.o,Ul.q(t),i},Curve3:function(t,i,e){var n=Au.sa;return t=Ul.p(),Zo(t,1*i,0,!1),_o(t,1*i,n*e,n*i,1*e,0,1*e),i=t.o,Ul.q(t),i},Curve4:function(t,i,e){var n=Au.sa;return t=Ul.p(),Zo(t,1*i,0,!1),_o(t,(1-n)*i,0,0,(1-n)*e,0,1*e),i=t.o,Ul.q(t),i},Alternative:"Triangle",Merge:"Triangle",Triangle:function(t,i,e){return t=Ul.p(),Zo(t,.5*i,0*e,!0),t.lineTo(0*i,1*e),t.lineTo(1*i,1*e,!0),i=t.o,i.A=new D(.25,.5),i.B=new D(.75,1),Ul.q(t),i},Decision:"Diamond",Diamond:function(t,i,e){return t=Ul.p(),Zo(t,.5*i,0,!0),t.lineTo(0,.5*e),t.lineTo(.5*i,1*e),t.lineTo(1*i,.5*e,!0),i=t.o,i.A=new D(.25,.25),i.B=new D(.75,.75),Ul.q(t),i},Pentagon:function(t,i,e){var n=Au.Qk(5);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;5>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.2,.22),i.B=new D(.8,.9),Ul.q(t),i},DataTransmission:"Hexagon",Hexagon:function(t,i,e){var n=Au.Qk(6);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;6>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.07,.25),i.B=new D(.93,.75),Ul.q(t),i},Heptagon:function(t,i,e){var n=Au.Qk(7);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;7>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.2,.15),i.B=new D(.8,.85),Ul.q(t),i},Octagon:function(t,i,e){var n=Au.Qk(8);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;8>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.15,.15),i.B=new D(.85,.85),Ul.q(t),i},Nonagon:function(t,i,e){var n=Au.Qk(9);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;9>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.17,.13),i.B=new D(.82,.82),Ul.q(t),i},Decagon:function(t,i,e){var n=Au.Qk(10);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;10>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.16,.16),i.B=new D(.84,.84),Ul.q(t),i},Dodecagon:function(t,i,e){var n=Au.Qk(12);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;12>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.16,.16),i.B=new D(.84,.84),Ul.q(t),i},FivePointedStar:function(t,i,e){var n=Au.wm(5);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;10>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.312,.383),i.B=new D(.693,.765),Ul.q(t),i},SixPointedStar:function(t,i,e){var n=Au.wm(6);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;12>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.17,.251),i.B=new D(.833,.755),Ul.q(t),i},SevenPointedStar:function(t,i,e){var n=Au.wm(7);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;14>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.363,.361),i.B=new D(.641,.709),Ul.q(t),i},EightPointedStar:function(t,i,e){var n=Au.wm(8);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;16>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.252,.255),i.B=new D(.75,.75),Ul.q(t),i},NinePointedStar:function(t,i,e){var n=Au.wm(9);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;18>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.355,.361),i.B=new D(.645,.651),Ul.q(t),i},TenPointedStar:function(t,i,e){var n=Au.wm(10);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;20>r;r++)t.lineTo(n[r].x*i,n[r].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.281,.261),i.B=new D(.723,.748),Ul.q(t),i},FivePointedBurst:function(t,i,e){var n=Au.uo(5);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;r<n.length;r+=3)_o(t,n[r].x*i,n[r].y*e,n[r+1].x*i,n[r+1].y*e,n[r+2].x*i,n[r+2].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.312,.383),i.B=new D(.693,.765),Ul.q(t),i},SixPointedBurst:function(t,i,e){var n=Au.uo(6);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;r<n.length;r+=3)_o(t,n[r].x*i,n[r].y*e,n[r+1].x*i,n[r+1].y*e,n[r+2].x*i,n[r+2].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.17,.251),i.B=new D(.833,.755),Ul.q(t),i},SevenPointedBurst:function(t,i,e){var n=Au.uo(7);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;r<n.length;r+=3)_o(t,n[r].x*i,n[r].y*e,n[r+1].x*i,n[r+1].y*e,n[r+2].x*i,n[r+2].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.363,.361),i.B=new D(.641,.709),Ul.q(t),i},EightPointedBurst:function(t,i,e){var n=Au.uo(8);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;r<n.length;r+=3)_o(t,n[r].x*i,n[r].y*e,n[r+1].x*i,n[r+1].y*e,n[r+2].x*i,n[r+2].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.252,.255),i.B=new D(.75,.75),Ul.q(t),i},NinePointedBurst:function(t,i,e){var n=Au.uo(9);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;r<n.length;r+=3)_o(t,n[r].x*i,n[r].y*e,n[r+1].x*i,n[r+1].y*e,n[r+2].x*i,n[r+2].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.355,.361),i.B=new D(.645,.651),Ul.q(t),i},TenPointedBurst:function(t,i,e){var n=Au.uo(10);t=Ul.p(),Zo(t,n[0].x*i,n[0].y*e,!0);for(var r=1;r<n.length;r+=3)_o(t,n[r].x*i,n[r].y*e,n[r+1].x*i,n[r+1].y*e,n[r+2].x*i,n[r+2].y*e);return Ul.ra(n),Qo(t),i=t.o,i.A=new D(.281,.261),i.B=new D(.723,.748),Ul.q(t),i},Cloud:function(t,i,e){return t=Ul.p(),Zo(t,.08034461*i,.1944299*e,!0),_o(t,-.09239631*i,.07836421*e,.1406031*i,-.0542823*e,.2008615*i,.05349299*e),_o(t,.2450511*i,-.00697547*e,.3776197*i,-.01112067*e,.4338609*i,.074219*e),_o(t,.4539471*i,0,.6066018*i,-.02526587*e,.6558228*i,.07004196*e),_o(t,.6914277*i,-.01904177*e,.8921095*i,-.01220843*e,.8921095*i,.08370865*e),_o(t,1.036446*i,.04105738*e,1.020377*i,.3022052*e,.9147671*i,.3194596*e),_o(t,1.04448*i,.360238*e,.992256*i,.5219009*e,.9082935*i,.562044*e),_o(t,1.032337*i,.5771781*e,1.018411*i,.8120651*e,.9212406*i,.8217117*e),_o(t,1.028411*i,.9571472*e,.8556702*i,1.052487*e,.7592566*i,.9156953*e),_o(t,.7431877*i,1.009325*e,.5624123*i,1.021761*e,.5101666*i,.9310455*e),_o(t,.4820677*i,1.031761*e,.3030112*i,1.002796*e,.2609328*i,.9344623*e),_o(t,.2329994*i,1.01518*e,.03213784*i,1.01518*e,.08034461*i,.870098*e),_o(t,-.02812061*i,.9032597*e,-.01205169*i,.6835638*e,.06829292*i,.6545475*e),_o(t,-.01812061*i,.6089503*e,-.00606892*i,.4555777*e,.06427569*i,.4265613*e),_o(t,-.01606892*i,.3892545*e,-.01205169*i,.1944299*e,.08034461*i,.1944299*e),Qo(t),i=t.o,i.A=new D(.1,.1),i.B=new D(.9,.9),Ul.q(t),i},Gate:"Crescent",Crescent:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!0),_o(t,1*i,0,1*i,1*e,0,1*e),_o(t,.5*i,.75*e,.5*i,.25*e,0,0),Qo(t),i=t.o,i.A=new D(.511,.19),i.B=new D(.776,.76),Ul.q(t),i},FramedRectangle:function(t,i,e){var n=Ul.p(),r=t?t.xc:0/0;return t=t?t.et:0/0,isNaN(r)&&(r=.1),isNaN(t)&&(t=.1),Zo(n,0,0,!0),n.lineTo(1*i,0),n.lineTo(1*i,1*e),n.lineTo(0,1*e,!0),Zo(n,r*i,t*e,!1,!0),n.lineTo(r*i,(1-t)*e),n.lineTo((1-r)*i,(1-t)*e),n.lineTo((1-r)*i,t*e,!0),i=n.o,i.A=new D(r,t),i.B=new D(1-r,1-t),Ul.q(n),i},Delay:"HalfEllipse",HalfEllipse:function(t,i,e){var n=Au.sa;return t=Ul.p(),Zo(t,0,0,!0),_o(t,n*i,0,1*i,(.5-n/2)*e,1*i,.5*e),_o(t,1*i,(.5+n/2)*e,n*i,1*e,0,1*e),Qo(t),i=t.o,i.A=new D(0,.2),i.B=new D(.75,.8),Ul.q(t),i},Heart:function(t,i,e){return t=Ul.p(),Zo(t,.5*i,1*e,!0),_o(t,.1*i,.8*e,0,.5*e,0*i,.3*e),_o(t,0*i,0,.45*i,0,.5*i,.3*e),_o(t,.55*i,0,1*i,0,1*i,.3*e),_o(t,i,.5*e,.9*i,.8*e,.5*i,1*e),Qo(t),i=t.o,i.A=new D(.15,.29),i.B=new D(.86,.68),Ul.q(t),i},Spade:function(t,i,e){return t=Ul.p(),Zo(t,.5*i,0,!0),t.lineTo(.51*i,.01*e),_o(t,.6*i,.2*e,i,.25*e,i,.5*e),_o(t,i,.8*e,.6*i,.8*e,.55*i,.7*e),_o(t,.5*i,.75*e,.55*i,.95*e,.75*i,e),t.lineTo(.25*i,e),_o(t,.45*i,.95*e,.5*i,.75*e,.45*i,.7*e),_o(t,.4*i,.8*e,0,.8*e,0,.5*e),_o(t,0,.25*e,.4*i,.2*e,.49*i,.01*e),Qo(t),i=t.o,i.A=new D(.19,.26),i.B=new D(.8,.68),Ul.q(t),i},Club:function(t,i,e){t=Ul.p(),Zo(t,.4*i,.6*e,!0),_o(t,.5*i,.75*e,.45*i,.95*e,.15*i,1*e),t.lineTo(.85*i,e),_o(t,.55*i,.95*e,.5*i,.75*e,.6*i,.6*e);var n=.2,r=.3,o=0,s=4*(Math.SQRT2-1)/3*n;return _o(t,(.5-n+r)*i,(.5+s+o)*e,(.5-s+r)*i,(.5+n+o)*e,(.5+r)*i,(.5+n+o)*e),_o(t,(.5+s+r)*i,(.5+n+o)*e,(.5+n+r)*i,(.5+s+o)*e,(.5+n+r)*i,(.5+o)*e),_o(t,(.5+n+r)*i,(.5-s+o)*e,(.5+s+r)*i,(.5-n+o)*e,(.5+r)*i,(.5-n+o)*e),_o(t,(.5-s+r)*i,(.5-n+o)*e,(.5-n+r+.05)*i,(.5-s+o-.02)*e,.65*i,.36771243*e),n=.2,r=0,o=-.3,s=4*(Math.SQRT2-1)/3*n,_o(t,(.5+s+r)*i,(.5+n+o)*e,(.5+n+r)*i,(.5+s+o)*e,(.5+n+r)*i,(.5+o)*e),_o(t,(.5+n+r)*i,(.5-s+o)*e,(.5+s+r)*i,(.5-n+o)*e,(.5+r)*i,(.5-n+o)*e),_o(t,(.5-s+r)*i,(.5-n+o)*e,(.5-n+r)*i,(.5-s+o)*e,(.5-n+r)*i,(.5+o)*e),_o(t,(.5-n+r)*i,(.5+s+o)*e,(.5-s+r)*i,(.5+n+o)*e,.35*i,.36771243*e),n=.2,r=-.3,o=0,s=4*(Math.SQRT2-1)/3*n,_o(t,(.5+n+r-.05)*i,(.5-s+o-.02)*e,(.5+s+r)*i,(.5-n+o)*e,(.5+r)*i,(.5-n+o)*e),_o(t,(.5-s+r)*i,(.5-n+o)*e,(.5-n+r)*i,(.5-s+o)*e,(.5-n+r)*i,(.5+o)*e),_o(t,(.5-n+r)*i,(.5+s+o)*e,(.5-s+r)*i,(.5+n+o)*e,(.5+r)*i,(.5+n+o)*e),_o(t,(.5+s+r)*i,(.5+n+o)*e,(.5+n+r)*i,(.5+s+o)*e,.4*i,.6*e),Qo(t),i=t.o,i.A=new D(.06,.39),i.B=new D(.93,.58),Ul.q(t),i},Ring:function(t,i,e){t=Ul.p();var n=4*(Math.SQRT2-1)/3*.5;return Zo(t,i,.5*e,!0),_o(t,i,(.5-n)*e,(.5+n)*i,0,.5*i,0),_o(t,(.5-n)*i,0,0,(.5-n)*e,0,.5*e),_o(t,0,(.5+n)*e,(.5-n)*i,e,.5*i,e),_o(t,(.5+n)*i,e,i,(.5+n)*e,i,.5*e),n=4*(Math.SQRT2-1)/3*.4,Zo(t,.5*i,.1*e,!0,!0),_o(t,(.5+n)*i,.1*e,.9*i,(.5-n)*e,.9*i,.5*e),_o(t,.9*i,(.5+n)*e,(.5+n)*i,.9*e,.5*i,.9*e),_o(t,(.5-n)*i,.9*e,.1*i,(.5+n)*e,.1*i,.5*e),_o(t,.1*i,(.5-n)*e,(.5-n)*i,.1*e,.5*i,.1*e),i=t.o,i.A=new D(.146,.146),i.B=new D(.853,.853),i.Bd=ic,Ul.q(t),i},YinYang:function(t,i,e){var n=.5;t=Ul.p(),n=.5,Zo(t,.5*i,0,!0),t.arcTo(270,180,.5*i,.5*i,.5*i),_o(t,1*i,n*e,0,n*e,n*i,0,!0);var n=.1,r=.25;return Zo(t,(.5+n)*i,r*e,!0,!0),t.arcTo(0,-360,.5*i,e*r,n*i),Qo(t),Zo(t,.5*i,0,!1),t.arcTo(270,-180,.5*i,.5*i,.5*i),t.$a(!1),r=.75,Zo(t,(.5+n)*i,r*e,!0),t.arcTo(0,360,.5*i,e*r,n*i),Qo(t),i=t.o,i.Bd=ic,Ul.q(t),i},Peace:function(t,i,e){t=Ul.p();var n=4*(Math.SQRT2-1)/3*.5;Zo(t,i,.5*e,!0),_o(t,i,(.5-n)*e,(.5+n)*i,0,.5*i,0),_o(t,(.5-n)*i,0,0,(.5-n)*e,0,.5*e),_o(t,0,(.5+n)*e,(.5-n)*i,e,.5*i,e),_o(t,(.5+n)*i,e,i,(.5+n)*e,i,.5*e),n=4*(Math.SQRT2-1)/3*.4,Zo(t,.5*i,.1*e,!0,!0),_o(t,(.5+n)*i,.1*e,.9*i,(.5-n)*e,.9*i,.5*e),_o(t,.9*i,(.5+n)*e,(.5+n)*i,.9*e,.5*i,.9*e),_o(t,(.5-n)*i,.9*e,.1*i,(.5+n)*e,.1*i,.5*e),_o(t,.1*i,(.5-n)*e,(.5-n)*i,.1*e,.5*i,.1*e);var n=.07,r=0,o=.11*-.707,s=4*(Math.SQRT2-1)/3*n;return Zo(t,(.5+n+r)*i,(.5+o)*e,!0),_o(t,(.5+n+r)*i,(.5-s+o)*e,(.5+s+r)*i,(.5-n+o)*e,(.5+r)*i,(.5-n+o)*e),_o(t,(.5-s+r)*i,(.5-n+o)*e,(.5-n+r)*i,(.5-s+o)*e,(.5-n+r)*i,(.5+o)*e),_o(t,(.5-n+r)*i,(.5+s+o)*e,(.5-s+r)*i,(.5+n+o)*e,(.5+r)*i,(.5+n+o)*e),_o(t,(.5+s+r)*i,(.5+n+o)*e,(.5+n+r)*i,(.5+s+o)*e,(.5+n+r)*i,(.5+o)*e),n=.07,r=.11*-.707,o=.707*.11,s=4*(Math.SQRT2-1)/3*n,Zo(t,(.5+n+r)*i,(.5+o)*e,!0),_o(t,(.5+n+r)*i,(.5-s+o)*e,(.5+s+r)*i,(.5-n+o)*e,(.5+r)*i,(.5-n+o)*e),_o(t,(.5-s+r)*i,(.5-n+o)*e,(.5-n+r)*i,(.5-s+o)*e,(.5-n+r)*i,(.5+o)*e),_o(t,(.5-n+r)*i,(.5+s+o)*e,(.5-s+r)*i,(.5+n+o)*e,(.5+r)*i,(.5+n+o)*e),_o(t,(.5+s+r)*i,(.5+n+o)*e,(.5+n+r)*i,(.5+s+o)*e,(.5+n+r)*i,(.5+o)*e),n=.07,r=.707*.11,o=.707*.11,s=4*(Math.SQRT2-1)/3*n,Zo(t,(.5+n+r)*i,(.5+o)*e,!0),_o(t,(.5+n+r)*i,(.5-s+o)*e,(.5+s+r)*i,(.5-n+o)*e,(.5+r)*i,(.5-n+o)*e),_o(t,(.5-s+r)*i,(.5-n+o)*e,(.5-n+r)*i,(.5-s+o)*e,(.5-n+r)*i,(.5+o)*e),_o(t,(.5-n+r)*i,(.5+s+o)*e,(.5-s+r)*i,(.5+n+o)*e,(.5+r)*i,(.5+n+o)*e),_o(t,(.5+s+r)*i,(.5+n+o)*e,(.5+n+r)*i,(.5+s+o)*e,(.5+n+r)*i,(.5+o)*e),i=t.o,i.A=new D(.146,.146),i.B=new D(.853,.853),i.Bd=ic,Ul.q(t),i},NotAllowed:function(t,i,e){var n=Au.sa,r=.5*n,o=.5;t=Ul.p(),Zo(t,.5*i,(.5-o)*e,!0),_o(t,(.5-r)*i,(.5-o)*e,(.5-o)*i,(.5-r)*e,(.5-o)*i,.5*e),_o(t,(.5-o)*i,(.5+r)*e,(.5-r)*i,(.5+o)*e,.5*i,(.5+o)*e),_o(t,(.5+r)*i,(.5+o)*e,(.5+o)*i,(.5+r)*e,(.5+o)*i,.5*e),_o(t,(.5+o)*i,(.5-r)*e,(.5+r)*i,(.5-o)*e,.5*i,(.5-o)*e);var o=.4,r=.4*n,n=Ul.K(),s=Ul.K(),a=Ul.K(),h=Ul.K();Au.Ai(.5,.5-o,.5+r,.5-o,.5+o,.5-r,.5+o,.5,.42,n,s,a,h,h);var l=Ul.K(),u=Ul.K(),f=Ul.K();Au.Ai(.5,.5-o,.5+r,.5-o,.5+o,.5-r,.5+o,.5,.58,h,h,f,l,u);var c=Ul.K(),p=Ul.K(),d=Ul.K();Au.Ai(.5,.5+o,.5-r,.5+o,.5-o,.5+r,.5-o,.5,.42,c,p,d,h,h);var y=Ul.K(),v=Ul.K(),g=Ul.K();return Au.Ai(.5,.5+o,.5-r,.5+o,.5-o,.5+r,.5-o,.5,.58,h,h,g,y,v),Zo(t,g.x*i,g.y*e,!0,!0),_o(t,y.x*i,y.y*e,v.x*i,v.y*e,(.5-o)*i,.5*e),_o(t,(.5-o)*i,(.5-r)*e,(.5-r)*i,(.5-o)*e,.5*i,(.5-o)*e),_o(t,n.x*i,n.y*e,s.x*i,s.y*e,a.x*i,a.y*e),t.lineTo(g.x*i,g.y*e),Qo(t),Zo(t,d.x*i,d.y*e,!0,!0),t.lineTo(f.x*i,f.y*e),_o(t,l.x*i,l.y*e,u.x*i,u.y*e,(.5+o)*i,.5*e),_o(t,(.5+o)*i,(.5+r)*e,(.5+r)*i,(.5+o)*e,.5*i,(.5+o)*e),_o(t,c.x*i,c.y*e,p.x*i,p.y*e,d.x*i,d.y*e),Qo(t),Ul.v(n),Ul.v(s),Ul.v(a),Ul.v(h),Ul.v(l),Ul.v(u),Ul.v(f),Ul.v(c),Ul.v(p),Ul.v(d),Ul.v(y),Ul.v(v),Ul.v(g),i=t.o,Ul.q(t),i.Bd=ic,i},Fragile:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!0),t.lineTo(.25*i,0),t.lineTo(.2*i,.15*e),t.lineTo(.3*i,.25*e),t.lineTo(.29*i,.33*e),t.lineTo(.35*i,.25*e),t.lineTo(.3*i,.15*e),t.lineTo(.4*i,0),t.lineTo(1*i,0),_o(t,1*i,.25*e,.75*i,.5*e,.55*i,.5*e),t.lineTo(.55*i,.9*e),t.lineTo(.7*i,.9*e),t.lineTo(.7*i,1*e),t.lineTo(.3*i,1*e),t.lineTo(.3*i,.9*e),t.lineTo(.45*i,.9*e),t.lineTo(.45*i,.5*e),_o(t,.25*i,.5*e,0,.25*e,0,0),Qo(t),i=t.o,i.A=new D(.25,0),i.B=new D(.75,.4),Ul.q(t),i},HourGlass:function(t,i,e){return t=Ul.p(),Zo(t,.65*i,.5*e,!0),t.lineTo(1*i,1*e),t.lineTo(0,1*e),t.lineTo(.35*i,.5*e),t.lineTo(0,0),t.lineTo(1*i,0),Qo(t),i=t.o,Ul.q(t),i},Lightning:function(t,i,e){return t=Ul.p(),Zo(t,0*i,.55*e,!0),t.lineTo(.75*i,0),t.lineTo(.25*i,.45*e),t.lineTo(.9*i,.48*e),t.lineTo(.4*i,1*e),t.lineTo(.65*i,.55*e),Qo(t),i=t.o,Ul.q(t),i},Parallelogram1:function(t,i,e){t=t?t.xc:0/0,isNaN(t)&&(t=.1);var n=Ul.p();return Zo(n,t*i,0,!0),n.lineTo(1*i,0),n.lineTo((1-t)*i,1*e),n.lineTo(0,1*e),Qo(n),i=n.o,i.A=new D(t,0),i.B=new D(1-t,1),Ul.q(n),i},Input:"Output",Output:function(t,i,e){return t=Ul.p(),Zo(t,0,1*e,!0),t.lineTo(.1*i,0),t.lineTo(1*i,0),t.lineTo(.9*i,1*e),Qo(t),i=t.o,i.A=new D(.1,0),i.B=new D(.9,1),Ul.q(t),i},Parallelogram2:function(t,i,e){t=t?t.xc:0/0,isNaN(t)&&(t=.25);var n=Ul.p();return Zo(n,t*i,0,!0),n.lineTo(1*i,0),n.lineTo((1-t)*i,1*e),n.lineTo(0,1*e),Qo(n),i=n.o,i.A=new D(t,0),i.B=new D(1-t,1),Ul.q(n),i},ThickCross:function(t,i,e){t=t?t.xc:0/0,isNaN(t)&&(t=.25);var n=Ul.p();return Zo(n,(.5-t/2)*i,0,!0),n.lineTo((.5+t/2)*i,0),n.lineTo((.5+t/2)*i,(.5-t/2)*e),n.lineTo(1*i,(.5-t/2)*e),n.lineTo(1*i,(.5+t/2)*e),n.lineTo((.5+t/2)*i,(.5+t/2)*e),n.lineTo((.5+t/2)*i,1*e),n.lineTo((.5-t/2)*i,1*e),n.lineTo((.5-t/2)*i,(.5+t/2)*e),n.lineTo(0,(.5+t/2)*e),n.lineTo(0,(.5-t/2)*e),n.lineTo((.5-t/2)*i,(.5-t/2)*e),Qo(n),i=n.o,i.A=new D(.5-t/2,.5-t/2),i.B=new D(.5+t/2,.5+t/2),Ul.q(n),i},ThickX:function(t,i,e){t=.25/Math.SQRT2;var n=Ul.p();return Zo(n,.3*i,0,!0),n.lineTo(.5*i,.2*e),n.lineTo(.7*i,0),n.lineTo(1*i,.3*e),n.lineTo(.8*i,.5*e),n.lineTo(1*i,.7*e),n.lineTo(.7*i,1*e),n.lineTo(.5*i,.8*e),n.lineTo(.3*i,1*e),n.lineTo(0,.7*e),n.lineTo(.2*i,.5*e),n.lineTo(0,.3*e),Qo(n),i=n.o,i.A=new D(.5-t,.5-t),i.B=new D(.5+t,.5+t),Ul.q(n),i},ThinCross:function(t,i,e){var n=t?t.xc:0/0;return isNaN(n)&&(n=.1),t=Ul.p(),Zo(t,(.5-n/2)*i,0,!0),t.lineTo((.5+n/2)*i,0),t.lineTo((.5+n/2)*i,(.5-n/2)*e),t.lineTo(1*i,(.5-n/2)*e),t.lineTo(1*i,(.5+n/2)*e),t.lineTo((.5+n/2)*i,(.5+n/2)*e),t.lineTo((.5+n/2)*i,1*e),t.lineTo((.5-n/2)*i,1*e),t.lineTo((.5-n/2)*i,(.5+n/2)*e),t.lineTo(0,(.5+n/2)*e),t.lineTo(0,(.5-n/2)*e),t.lineTo((.5-n/2)*i,(.5-n/2)*e),Qo(t),i=t.o,Ul.q(t),i},ThinX:function(t,i,e){return t=Ul.p(),Zo(t,.1*i,0,!0),t.lineTo(.5*i,.4*e),t.lineTo(.9*i,0),t.lineTo(1*i,.1*e),t.lineTo(.6*i,.5*e),t.lineTo(1*i,.9*e),t.lineTo(.9*i,1*e),t.lineTo(.5*i,.6*e),t.lineTo(.1*i,1*e),t.lineTo(0,.9*e),t.lineTo(.4*i,.5*e),t.lineTo(0,.1*e),Qo(t),t.o},RightTriangle:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!0),t.lineTo(1*i,1*e),t.lineTo(0,1*e),Qo(t),i=t.o,i.A=new D(0,.5),i.B=new D(.5,1),Ul.q(t),i},RoundedIBeam:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!0),t.lineTo(1*i,0),_o(t,.5*i,.25*e,.5*i,.75*e,1*i,1*e),t.lineTo(0,1*e),_o(t,.5*i,.75*e,.5*i,.25*e,0,0),Qo(t),i=t.o,Ul.q(t),i},RoundedRectangle:function(t,i,e){var n=t?t.xc:0/0;isNaN(n)&&(n=5),n=Math.min(n,i/3),n=Math.min(n,e/3),t=n*Au.sa;var r=Ul.p();return Zo(r,n,0,!0),r.lineTo(i-n,0),_o(r,i-t,0,i,t,i,n),r.lineTo(i,e-n),_o(r,i,e-t,i-t,e,i-n,e),r.lineTo(n,e),_o(r,t,e,0,e-t,0,e-n),r.lineTo(0,n),_o(r,0,t,t,0,n,0),Qo(r),i=r.o,t>1?(i.A=new D(0,0,t,t),i.B=new D(1,1,-t,-t)):(i.A=iu,i.B=lu),Ul.q(r),i},Border:function(t,i,e){var n=t?t.xc:0/0;return isNaN(n)&&(n=5),n=Math.min(n,i/3),n=Math.min(n,e/3),t=Ul.p(),Zo(t,n,0,!0),t.lineTo(i-n,0),_o(t,i-0,0,i,0,i,n),t.lineTo(i,e-n),_o(t,i,e-0,i-0,e,i-n,e),t.lineTo(n,e),_o(t,0,e,0,e-0,0,e-n),t.lineTo(0,n),_o(t,0,0,0,0,n,0),Qo(t),i=t.o,i.A=iu,i.B=lu,Ul.q(t),i},SquareIBeam:function(t,i,e){var n=t?t.xc:0/0;return isNaN(n)&&(n=.2),t=Ul.p(),Zo(t,0,0,!0),t.lineTo(1*i,0),t.lineTo(1*i,n*e),t.lineTo((.5+n/2)*i,n*e),t.lineTo((.5+n/2)*i,(1-n)*e),t.lineTo(1*i,(1-n)*e),t.lineTo(1*i,1*e),t.lineTo(0,1*e),t.lineTo(0,(1-n)*e),t.lineTo((.5-n/2)*i,(1-n)*e),t.lineTo((.5-n/2)*i,n*e),t.lineTo(0,n*e),Qo(t),i=t.o,Ul.q(t),i},Trapezoid:function(t,i,e){t=t?t.xc:0/0,isNaN(t)&&(t=.2);var n=Ul.p();return Zo(n,t*i,0,!0),n.lineTo((1-t)*i,0),n.lineTo(1*i,1*e),n.lineTo(0,1*e),Qo(n),i=n.o,i.A=new D(t,0),i.B=new D(1-t,1),Ul.q(n),i},ManualLoop:"ManualOperation",ManualOperation:function(t,i,e){var n=t?t.xc:0/0;return isNaN(n)&&(n=0),t=Ul.p(),Zo(t,n,0,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(.9*i,1*e),t.lineTo(.1*i,1*e),Qo(t),i=t.o,i.A=new D(.1,0),i.B=new D(.9,1),Ul.q(t),i},GenderMale:function(t,i,e){t=Ul.p();var n=Au.sa,r=.4*n,o=.4,s=Ul.K(),a=Ul.K(),h=Ul.K(),l=Ul.K();Zo(t,(.5-o)*i,.5*e,!0),_o(t,(.5-o)*i,(.5-r)*e,(.5-r)*i,(.5-o)*e,.5*i,(.5-o)*e),Au.Ai(.5,.5-o,.5+r,.5-o,.5+o,.5-r,.5+o,.5,.44,h,l,a,s,s),_o(t,h.x*i,h.y*e,l.x*i,l.y*e,a.x*i,a.y*e);var u=Ul.fc(a.x,a.y);Au.Ai(.5,.5-o,.5+r,.5-o,.5+o,.5-r,.5+o,.5,.56,s,s,a,h,l);var f=Ul.fc(a.x,a.y);return t.lineTo((.1*u.x+.855)*i,.1*u.y*e),t.lineTo(.85*i,.1*u.y*e),t.lineTo(.85*i,0),t.lineTo(1*i,0),t.lineTo(1*i,.15*e),t.lineTo((.1*f.x+.9)*i,.15*e),t.lineTo((.1*f.x+.9)*i,(.1*f.y+.05*.9)*e),t.lineTo(f.x*i,f.y*e),_o(t,h.x*i,h.y*e,l.x*i,l.y*e,(.5+o)*i,.5*e),_o(t,(.5+o)*i,(.5+r)*e,(.5+r)*i,(.5+o)*e,.5*i,(.5+o)*e),_o(t,(.5-r)*i,(.5+o)*e,(.5-o)*i,(.5+r)*e,(.5-o)*i,.5*e),o=.35,r=.35*n,Zo(t,.5*i,(.5-o)*e,!0,!0),_o(t,(.5-r)*i,(.5-o)*e,(.5-o)*i,(.5-r)*e,(.5-o)*i,.5*e),_o(t,(.5-o)*i,(.5+r)*e,(.5-r)*i,(.5+o)*e,.5*i,(.5+o)*e),_o(t,(.5+r)*i,(.5+o)*e,(.5+o)*i,(.5+r)*e,(.5+o)*i,.5*e),_o(t,(.5+o)*i,(.5-r)*e,(.5+r)*i,(.5-o)*e,.5*i,(.5-o)*e),Zo(t,(.5-o)*i,.5*e,!0),Ul.v(s),Ul.v(a),Ul.v(h),Ul.v(l),Ul.v(u),Ul.v(f),i=t.o,i.A=new D(.202,.257),i.B=new D(.692,.839),i.Bd=ic,Ul.q(t),i},GenderFemale:function(t,i,e){t=Ul.p();var n=.375,r=0,o=-.125,s=4*(Math.SQRT2-1)/3*n;return Zo(t,(.525+r)*i,(.5+n+o)*e,!0),_o(t,(.5+s+r)*i,(.5+n+o)*e,(.5+n+r)*i,(.5+s+o)*e,(.5+n+r)*i,(.5+o)*e),_o(t,(.5+n+r)*i,(.5-s+o)*e,(.5+s+r)*i,(.5-n+o)*e,(.5+r)*i,(.5-n+o)*e),_o(t,(.5-s+r)*i,(.5-n+o)*e,(.5-n+r)*i,(.5-s+o)*e,(.5-n+r)*i,(.5+o)*e),_o(t,(.5-n+r)*i,(.5+s+o)*e,(.5-s+r)*i,(.5+n+o)*e,(.475+r)*i,(.5+n+o)*e),t.lineTo(.475*i,.85*e),t.lineTo(.425*i,.85*e),t.lineTo(.425*i,.9*e),t.lineTo(.475*i,.9*e),t.lineTo(.475*i,1*e),t.lineTo(.525*i,1*e),t.lineTo(.525*i,.9*e),t.lineTo(.575*i,.9*e),t.lineTo(.575*i,.85*e),t.lineTo(.525*i,.85*e),Qo(t),n=.325,r=0,o=-.125,s=4*(Math.SQRT2-1)/3*n,Zo(t,(.5+n+r)*i,(.5+o)*e,!0,!0),_o(t,(.5+n+r)*i,(.5+s+o)*e,(.5+s+r)*i,(.5+n+o)*e,(.5+r)*i,(.5+n+o)*e),_o(t,(.5-s+r)*i,(.5+n+o)*e,(.5-n+r)*i,(.5+s+o)*e,(.5-n+r)*i,(.5+o)*e),_o(t,(.5-n+r)*i,(.5-s+o)*e,(.5-s+r)*i,(.5-n+o)*e,(.5+r)*i,(.5-n+o)*e),_o(t,(.5+s+r)*i,(.5-n+o)*e,(.5+n+r)*i,(.5-s+o)*e,(.5+n+r)*i,(.5+o)*e),Zo(t,(.525+r)*i,(.5+n+o)*e,!0),i=t.o,i.A=new D(.232,.136),i.B=new D(.782,.611),i.Bd=ic,Ul.q(t),i},PlusLine:function(t,i,e){return t=Ul.p(),Zo(t,0,.5*e,!1),t.lineTo(1*i,.5*e),t.moveTo(.5*i,0),t.lineTo(.5*i,1*e),i=t.o,Ul.q(t),i},XLine:function(t,i,e){return t=Ul.p(),Zo(t,0,1*e,!1),t.lineTo(1*i,0),t.moveTo(0,0),t.lineTo(1*i,1*e),i=t.o,Ul.q(t),i},AsteriskLine:function(t,i,e){t=Ul.p();var n=.2/Math.SQRT2;return Zo(t,n*i,(1-n)*e,!1),t.lineTo((1-n)*i,n*e),t.moveTo(n*i,n*e),t.lineTo((1-n)*i,(1-n)*e),t.moveTo(0*i,.5*e),t.lineTo(1*i,.5*e),t.moveTo(.5*i,0*e),t.lineTo(.5*i,1*e),i=t.o,Ul.q(t),i},CircleLine:function(t,i,e){var n=.5*Au.sa;return t=Ul.p(),Zo(t,1*i,.5*e,!1),_o(t,1*i,(.5+n)*e,(.5+n)*i,1*e,.5*i,1*e),_o(t,(.5-n)*i,1*e,0,(.5+n)*e,0,.5*e),_o(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),_o(t,(.5+n)*i,0,1*i,(.5-n)*e,1*i,.5*e),i=t.o,i.A=new D(.146,.146),i.B=new D(.853,.853),i.Bd=ic,Ul.q(t),i},Pie:function(t,i,e){t=Ul.p();var n=4*(Math.SQRT2-1)/3*.5;return Zo(t,(.5*Math.SQRT2/2+.5)*i,(.5-.5*Math.SQRT2/2)*e,!0),_o(t,.7*i,0*e,.5*i,0*e,.5*i,0*e),_o(t,(.5-n+0)*i,0*e,0*i,(.5-n+0)*e,0*i,.5*e),_o(t,0*i,(.5+n+0)*e,(.5-n+0)*i,1*e,.5*i,1*e),_o(t,(.5+n+0)*i,1*e,1*i,(.5+n+0)*e,1*i,.5*e),t.lineTo(.5*i,.5*e),Qo(t),i=t.o,Ul.q(t),i},PiePiece:function(t,i,e){var n=Au.sa/Math.SQRT2*.5,r=Math.SQRT2/2,o=1-Math.SQRT2/2;return t=Ul.p(),Zo(t,i,e,!0),_o(t,i,(1-n)*e,(r+n)*i,(o+n)*e,r*i,o*e),t.lineTo(0,e),Qo(t),i=t.o,Ul.q(t),i},StopSign:function(t,i,e){t=1/(Math.SQRT2+2);var n=Ul.p();return Zo(n,t*i,0,!0),n.lineTo((1-t)*i,0),n.lineTo(1*i,t*e),n.lineTo(1*i,(1-t)*e),n.lineTo((1-t)*i,1*e),n.lineTo(t*i,1*e),n.lineTo(0,(1-t)*e),n.lineTo(0,t*e),Qo(n),i=n.o,i.A=new D(t/2,t/2),i.B=new D(1-t/2,1-t/2),Ul.q(n),i},LogicImplies:function(t,i,e){var n=t?t.xc:0/0;return isNaN(n)&&(n=.2),t=Ul.p(),Zo(t,(1-n)*i,0*e,!1),t.lineTo(1*i,.5*e),t.lineTo((1-n)*i,e),t.moveTo(0,.5*e),t.lineTo(i,.5*e),i=t.o,i.A=iu,i.B=new D(.8,.5),Ul.q(t),i},LogicIff:function(t,i,e){var n=t?t.xc:0/0;return isNaN(n)&&(n=.2),t=Ul.p(),Zo(t,(1-n)*i,0*e,!1),t.lineTo(1*i,.5*e),t.lineTo((1-n)*i,e),t.moveTo(0,.5*e),t.lineTo(i,.5*e),t.moveTo(n*i,0),t.lineTo(0,.5*e),t.lineTo(n*i,e),i=t.o,i.A=new D(.2,0),i.B=new D(.8,.5),Ul.q(t),i},LogicNot:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!1),t.lineTo(1*i,0),t.lineTo(1*i,1*e),i=t.o,Ul.q(t),i},LogicAnd:function(t,i,e){return t=Ul.p(),Zo(t,0,1*e,!1),t.lineTo(.5*i,0),t.lineTo(1*i,1*e),i=t.o,i.A=new D(.25,.5),i.B=new D(.75,1),Ul.q(t),i},LogicOr:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!1),t.lineTo(.5*i,1*e),t.lineTo(1*i,0),i=t.o,i.A=new D(.219,0),i.B=new D(.78,.409),Ul.q(t),i},LogicXor:function(t,i,e){t=Ul.p(),Zo(t,.5*i,0,!1),t.lineTo(.5*i,1*e),t.moveTo(0,.5*e),t.lineTo(1*i,.5*e);var n=.5*Au.sa;return _o(t,1*i,(.5+n)*e,(.5+n)*i,1*e,.5*i,1*e),_o(t,(.5-n)*i,1*e,0,(.5+n)*e,0,.5*e),_o(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),_o(t,(.5+n)*i,0,1*i,(.5-n)*e,1*i,.5*e),i=t.o,i.Bd=ic,Ul.q(t),i},LogicTruth:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!1),t.lineTo(1*i,0),t.moveTo(.5*i,0),t.lineTo(.5*i,1*e),i=t.o,Ul.q(t),i},LogicFalsity:function(t,i,e){return t=Ul.p(),Zo(t,0,1*e,!1),t.lineTo(1*i,1*e),t.moveTo(.5*i,1*e),t.lineTo(.5*i,0),i=t.o,Ul.q(t),i},LogicThereExists:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!1),t.lineTo(1*i,0),t.lineTo(1*i,.5*e),t.lineTo(0,.5*e),t.moveTo(1*i,.5*e),t.lineTo(1*i,1*e),t.lineTo(0,1*e),i=t.o,Ul.q(t),i},LogicForAll:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!1),t.lineTo(.5*i,1*e),t.lineTo(1*i,0),t.moveTo(.25*i,.5*e),t.lineTo(.75*i,.5*e),i=t.o,i.A=new D(.25,0),i.B=new D(.75,.5),Ul.q(t),i},LogicIsDefinedAs:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!1),t.lineTo(i,0),t.moveTo(0,.5*e),t.lineTo(i,.5*e),t.moveTo(0,e),t.lineTo(i,e),i=t.o,i.A=new D(.01,.01),i.B=new D(.99,.49),Ul.q(t),i},LogicIntersect:function(t,i,e){var n=.5*Au.sa;return t=Ul.p(),Zo(t,0,1*e,!1),t.lineTo(0,.5*e),_o(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),_o(t,(.5+n)*i,0,1*i,(.5-n)*e,1*i,.5*e),t.lineTo(1*i,1*e),i=t.o,i.A=new D(0,.5),i.B=lu,Ul.q(t),i},LogicUnion:function(t,i,e){var n=.5*Au.sa;return t=Ul.p(),Zo(t,1*i,0,!1),t.lineTo(1*i,.5*e),_o(t,1*i,(.5+n)*e,(.5+n)*i,1*e,.5*i,1*e),_o(t,(.5-n)*i,1*e,0,(.5+n)*e,0,.5*e),t.lineTo(0,0),i=t.o,i.A=iu,i.B=new D(1,.5),Ul.q(t),i},Arrow:function(t,i,e){var n=t?t.xc:0/0,r=t?t.et:0/0;return isNaN(n)&&(n=.3),isNaN(r)&&(r=.3),t=Ul.p(),Zo(t,0,(.5-r/2)*e,!0),t.lineTo((1-n)*i,(.5-r/2)*e),t.lineTo((1-n)*i,0),t.lineTo(1*i,.5*e),t.lineTo((1-n)*i,1*e),t.lineTo((1-n)*i,(.5+r/2)*e),t.lineTo(0,(.5+r/2)*e),Qo(t),i=t.o,i.A=new D(0,.5-r/2),n=Au.al(0,.5+r/2,1,.5+r/2,1-n,1,1,.5,Ul.K()),i.B=new D(n.x,n.y),Ul.v(n),Ul.q(t),i},ISOProcess:"Chevron",Chevron:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!0),t.lineTo(.5*i,0),t.lineTo(1*i,.5*e),t.lineTo(.5*i,1*e),t.lineTo(0,1*e),t.lineTo(.5*i,.5*e),Qo(t),i=t.o,Ul.q(t),i},DoubleArrow:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!0),t.lineTo(.3*i,.214*e),t.lineTo(.3*i,0),t.lineTo(1*i,.5*e),t.lineTo(.3*i,1*e),t.lineTo(.3*i,.786*e),t.lineTo(0,1*e),Qo(t),Zo(t,.3*i,.214*e,!1),t.lineTo(.3*i,.786*e),t.$a(!1),i=t.o,Ul.q(t),i},DoubleEndArrow:function(t,i,e){return t=Ul.p(),Zo(t,1*i,.5*e,!0),t.lineTo(.7*i,1*e),t.lineTo(.7*i,.7*e),t.lineTo(.3*i,.7*e),t.lineTo(.3*i,1*e),t.lineTo(0,.5*e),t.lineTo(.3*i,0),t.lineTo(.3*i,.3*e),t.lineTo(.7*i,.3*e),t.lineTo(.7*i,0),Qo(t),i=t.o,e=Au.al(0,.5,.3,0,0,.3,.3,.3,Ul.K()),i.A=new D(e.x,e.y),e=Au.al(.7,1,1,.5,.7,.7,1,.7,e),i.B=new D(e.x,e.y),Ul.v(e),Ul.q(t),i},IBeamArrow:function(t,i,e){return t=Ul.p(),Zo(t,1*i,.5*e,!0),t.lineTo(.7*i,1*e),t.lineTo(.7*i,.7*e),t.lineTo(.2*i,.7*e),t.lineTo(.2*i,1*e),t.lineTo(0,1*e),t.lineTo(0,0),t.lineTo(.2*i,0),t.lineTo(.2*i,.3*e),t.lineTo(.7*i,.3*e),t.lineTo(.7*i,0),Qo(t),i=t.o,i.A=new D(0,.3),e=Au.al(.7,1,1,.5,.7,.7,1,.7,Ul.K()),i.B=new D(e.x,e.y),Ul.v(e),Ul.q(t),i
},Pointer:function(t,i,e){return t=Ul.p(),Zo(t,1*i,.5*e,!0),t.lineTo(0,1*e),t.lineTo(.2*i,.5*e),t.lineTo(0,0),Qo(t),i=t.o,i.A=new D(.2,.35),e=Au.al(.2,.65,1,.65,0,1,1,.5,Ul.K()),i.B=new D(e.x,e.y),Ul.v(e),Ul.q(t),i},RoundedPointer:function(t,i,e){return t=Ul.p(),Zo(t,1*i,.5*e,!0),t.lineTo(0,1*e),_o(t,.5*i,.75*e,.5*i,.25*e,0,0),Qo(t),i=t.o,i.A=new D(.4,.35),e=Au.al(.2,.65,1,.65,0,1,1,.5,Ul.K()),i.B=new D(e.x,e.y),Ul.v(e),Ul.q(t),i},SplitEndArrow:function(t,i,e){return t=Ul.p(),Zo(t,1*i,.5*e,!0),t.lineTo(.7*i,1*e),t.lineTo(.7*i,.7*e),t.lineTo(0,.7*e),t.lineTo(.2*i,.5*e),t.lineTo(0,.3*e),t.lineTo(.7*i,.3*e),t.lineTo(.7*i,0),Qo(t),i=t.o,i.A=new D(.2,.3),e=Au.al(.7,1,1,.5,.7,.7,1,.7,Ul.K()),i.B=new D(e.x,e.y),Ul.v(e),Ul.q(t),i},MessageToUser:"SquareArrow",SquareArrow:function(t,i,e){return t=Ul.p(),Zo(t,1*i,.5*e,!0),t.lineTo(.7*i,1*e),t.lineTo(0,1*e),t.lineTo(0,0),t.lineTo(.7*i,0),Qo(t),i=t.o,i.A=iu,i.B=new D(.7,1),Ul.q(t),i},Cone1:function(t,i,e){var n=Au.sa;t=.5*n;var r=.1*n,n=Ul.p();return Zo(n,0,.9*e,!0),n.lineTo(.5*i,0),n.lineTo(1*i,.9*e),_o(n,1*i,(.9+r)*e,(.5+t)*i,1*e,.5*i,1*e),_o(n,(.5-t)*i,1*e,0,(.9+r)*e,0,.9*e),Qo(n),i=n.o,i.A=new D(.25,.5),i.B=new D(.75,.97),Ul.q(n),i},Cone2:function(t,i,e){return t=Ul.p(),Zo(t,0,.9*e,!0),_o(t,(1-.85/.9)*i,1*e,.85/.9*i,1*e,1*i,.9*e),t.lineTo(.5*i,0),t.lineTo(0,.9*e),Qo(t),Zo(t,0,.9*e,!1),_o(t,(1-.85/.9)*i,.8*e,.85/.9*i,.8*e,1*i,.9*e),t.$a(!1),i=t.o,i.A=new D(.25,.5),i.B=new D(.75,.82),Ul.q(t),i},Cube1:function(t,i,e){return t=Ul.p(),Zo(t,.5*i,1*e,!0),t.lineTo(1*i,.85*e),t.lineTo(1*i,.15*e),t.lineTo(.5*i,0*e),t.lineTo(0*i,.15*e),t.lineTo(0*i,.85*e),Qo(t),Zo(t,.5*i,1*e,!1),t.lineTo(.5*i,.3*e),t.lineTo(0,.15*e),t.moveTo(.5*i,.3*e),t.lineTo(1*i,.15*e),t.$a(!1),i=t.o,i.A=new D(0,.3),i.B=new D(.5,.85),Ul.q(t),i},Cube2:function(t,i,e){return t=Ul.p(),Zo(t,0,.3*e,!0),t.lineTo(0*i,1*e),t.lineTo(.7*i,e),t.lineTo(1*i,.7*e),t.lineTo(1*i,0*e),t.lineTo(.3*i,0*e),Qo(t),Zo(t,0,.3*e,!1),t.lineTo(.7*i,.3*e),t.lineTo(1*i,0*e),t.moveTo(.7*i,.3*e),t.lineTo(.7*i,1*e),t.$a(!1),i=t.o,i.A=new D(0,.3),i.B=new D(.7,1),Ul.q(t),i},MagneticData:"Cylinder1",Cylinder1:function(t,i,e){var n=Au.sa;t=.5*n;var r=.1*n,n=Ul.p();return Zo(n,0,.1*e,!0),_o(n,0,(.1-r)*e,(.5-t)*i,0,.5*i,0),_o(n,(.5+t)*i,0,1*i,(.1-r)*e,1*i,.1*e),n.lineTo(i,.9*e),_o(n,1*i,(.9+r)*e,(.5+t)*i,1*e,.5*i,1*e),_o(n,(.5-t)*i,1*e,0,(.9+r)*e,0,.9*e),n.lineTo(0,.1*e),Zo(n,0,.1*e,!1),_o(n,0,(.1+r)*e,(.5-t)*i,.2*e,.5*i,.2*e),_o(n,(.5+t)*i,.2*e,1*i,(.1+r)*e,1*i,.1*e),n.$a(!1),i=n.o,i.A=new D(0,.2),i.B=new D(1,.9),Ul.q(n),i},Cylinder2:function(t,i,e){var n=Au.sa;t=.5*n;var r=.1*n,n=Ul.p();return Zo(n,0,.9*e,!0),n.lineTo(0,.1*e),_o(n,0,(.1-r)*e,(.5-t)*i,0,.5*i,0),_o(n,(.5+t)*i,0,1*i,(.1-r)*e,1*i,.1*e),n.lineTo(1*i,.9*e),_o(n,1*i,(.9+r)*e,(.5+t)*i,1*e,.5*i,1*e),_o(n,(.5-t)*i,1*e,0,(.9+r)*e,0,.9*e),Zo(n,0,.9*e,!1),_o(n,0,(.9-r)*e,(.5-t)*i,.8*e,.5*i,.8*e),_o(n,(.5+t)*i,.8*e,1*i,(.9-r)*e,1*i,.9*e),n.$a(!1),i=n.o,i.A=new D(0,.1),i.B=new D(1,.8),Ul.q(n),i},Cylinder3:function(t,i,e){var n=Au.sa;t=.1*n;var r=.5*n,n=Ul.p();return Zo(n,.1*i,0,!0),n.lineTo(.9*i,0),_o(n,(.9+t)*i,0,1*i,(.5-r)*e,1*i,.5*e),_o(n,1*i,(.5+r)*e,(.9+t)*i,1*e,.9*i,1*e),n.lineTo(.1*i,1*e),_o(n,(.1-t)*i,1*e,0,(.5+r)*e,0,.5*e),_o(n,0,(.5-r)*e,(.1-t)*i,0,.1*i,0),Zo(n,.1*i,0,!1),_o(n,(.1+t)*i,0,.2*i,(.5-r)*e,.2*i,.5*e),_o(n,.2*i,(.5+r)*e,(.1+t)*i,1*e,.1*i,1*e),n.$a(!1),i=n.o,i.A=new D(.2,0),i.B=new D(.9,1),Ul.q(n),i},DirectData:"Cylinder4",Cylinder4:function(t,i,e){var n=Au.sa;t=.1*n;var r=.5*n,n=Ul.p();return Zo(n,.9*i,0,!0),_o(n,(.9+t)*i,0,1*i,(.5-r)*e,1*i,.5*e),_o(n,1*i,(.5+r)*e,(.9+t)*i,1*e,.9*i,1*e),n.lineTo(.1*i,1*e),_o(n,(.1-t)*i,1*e,0,(.5+r)*e,0,.5*e),_o(n,0,(.5-r)*e,(.1-t)*i,0,.1*i,0),n.lineTo(.9*i,0),Zo(n,.9*i,0,!1),_o(n,(.9-t)*i,0,.8*i,(.5-r)*e,.8*i,.5*e),_o(n,.8*i,(.5+r)*e,(.9-t)*i,1*e,.9*i,1*e),n.$a(!1),i=n.o,i.A=new D(.1,0),i.B=new D(.8,1),Ul.q(n),i},Prism1:function(t,i,e){return t=Ul.p(),Zo(t,.25*i,.25*e,!0),t.lineTo(.75*i,0),t.lineTo(i,.5*e),t.lineTo(.5*i,e),t.lineTo(0,e),Qo(t),Zo(t,.25*i,.25*e,!1),t.lineTo(.5*i,e),t.$a(!1),i=t.o,i.A=new D(.408,.172),i.B=new D(.833,.662),Ul.q(t),i},Prism2:function(t,i,e){return t=Ul.p(),Zo(t,0,.25*e,!0),t.lineTo(.75*i,0),t.lineTo(1*i,.25*e),t.lineTo(.75*i,.75*e),t.lineTo(0,1*e),Qo(t),Zo(t,0,e,!1),t.lineTo(.25*i,.5*e),t.lineTo(i,.25*e),t.moveTo(0,.25*e),t.lineTo(.25*i,.5*e),t.$a(!1),i=t.o,i.A=new D(.25,.5),i.B=new D(.75,.75),Ul.q(t),i},Pyramid1:function(t,i,e){return t=Ul.p(),Zo(t,.5*i,0,!0),t.lineTo(i,.75*e),t.lineTo(.5*i,1*e),t.lineTo(0,.75*e),Qo(t),Zo(t,.5*i,0,!1),t.lineTo(.5*i,1*e),t.$a(!1),i=t.o,i.A=new D(.25,.367),i.B=new D(.75,.875),Ul.q(t),i},Pyramid2:function(t,i,e){return t=Ul.p(),Zo(t,.5*i,0,!0),t.lineTo(i,.85*e),t.lineTo(.5*i,1*e),t.lineTo(0,.85*e),Qo(t),Zo(t,.5*i,0,!1),t.lineTo(.5*i,.7*e),t.lineTo(0,.85*e),t.moveTo(.5*i,.7*e),t.lineTo(1*i,.85*e),t.$a(!1),i=t.o,i.A=new D(.25,.367),i.B=new D(.75,.875),Ul.q(t),i},Actor:function(t,i,e){var n=Au.sa,r=.2*n,o=.1*n,s=.5,a=.1;return t=Ul.p(),Zo(t,s*i,(a+.1)*e,!0),_o(t,(s-r)*i,(a+.1)*e,(s-.2)*i,(a+o)*e,(s-.2)*i,a*e),_o(t,(s-.2)*i,(a-o)*e,(s-r)*i,(a-.1)*e,s*i,(a-.1)*e),_o(t,(s+r)*i,(a-.1)*e,(s+.2)*i,(a-o)*e,(s+.2)*i,a*e),_o(t,(s+.2)*i,(a+o)*e,(s+r)*i,(a+.1)*e,s*i,(a+.1)*e),r=.05,o=n*r,Zo(t,.5*i,.2*e,!0),t.lineTo(.95*i,.2*e),s=.95,a=.25,_o(t,(s+o)*i,(a-r)*e,(s+r)*i,(a-o)*e,(s+r)*i,a*e),t.lineTo(1*i,.6*e),t.lineTo(.85*i,.6*e),t.lineTo(.85*i,.35*e),r=.025,o=n*r,s=.825,a=.35,_o(t,(s+r)*i,(a-o)*e,(s+o)*i,(a-r)*e,s*i,(a-r)*e),_o(t,(s-o)*i,(a-r)*e,(s-r)*i,(a-o)*e,(s-r)*i,a*e),t.lineTo(.8*i,1*e),t.lineTo(.55*i,1*e),t.lineTo(.55*i,.7*e),r=.05,o=n*r,s=.5,a=.7,_o(t,(s+r)*i,(a-o)*e,(s+o)*i,(a-r)*e,s*i,(a-r)*e),_o(t,(s-o)*i,(a-r)*e,(s-r)*i,(a-o)*e,(s-r)*i,a*e),t.lineTo(.45*i,1*e),t.lineTo(.2*i,1*e),t.lineTo(.2*i,.35*e),r=.025,o=n*r,s=.175,a=.35,_o(t,(s+r)*i,(a-o)*e,(s+o)*i,(a-r)*e,s*i,(a-r)*e),_o(t,(s-o)*i,(a-r)*e,(s-r)*i,(a-o)*e,(s-r)*i,a*e),t.lineTo(.15*i,.6*e),t.lineTo(0*i,.6*e),t.lineTo(0*i,.25*e),r=.05,o=n*r,s=.05,a=.25,_o(t,(s-r)*i,(a-o)*e,(s-o)*i,(a-r)*e,s*i,(a-r)*e),t.lineTo(.5*i,.2*e),i=t.o,i.A=new D(.2,.2),i.B=new D(.8,.65),Ul.q(t),i},Card:function(t,i,e){return t=Ul.p(),Zo(t,1*i,0*e,!0),t.lineTo(1*i,1*e),t.lineTo(0*i,1*e),t.lineTo(0*i,.2*e),t.lineTo(.2*i,0*e),Qo(t),i=t.o,i.A=new D(0,.2),i.B=lu,Ul.q(t),i},Collate:function(t,i,e){return t=Ul.p(),Zo(t,.5*i,.5*e,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(.5*i,.5*e),Zo(t,.5*i,.5*e,!0),t.lineTo(1*i,1*e),t.lineTo(0,1*e),t.lineTo(.5*i,.5*e),i=t.o,i.A=new D(.25,0),i.B=new D(.75,.25),Ul.q(t),i},CreateRequest:function(t,i,e){t=t?t.xc:0/0,isNaN(t)&&(t=.1);var n=Ul.p();return Zo(n,0,0,!0),n.lineTo(1*i,0),n.lineTo(1*i,1*e),n.lineTo(0,1*e),Qo(n),Zo(n,0,t*e,!1),n.lineTo(1*i,t*e),n.moveTo(0,(1-t)*e),n.lineTo(1*i,(1-t)*e),n.$a(!1),i=n.o,i.A=new D(0,t),i.B=new D(1,1-t),Ul.q(n),i},Database:function(t,i,e){t=Ul.p();var n=Au.sa,r=.5*n,n=.1*n;return Zo(t,1*i,.1*e,!0),t.lineTo(1*i,.9*e),_o(t,1*i,(.9+n)*e,(.5+r)*i,1*e,.5*i,1*e),_o(t,(.5-r)*i,1*e,0,(.9+n)*e,0,.9*e),t.lineTo(0,.1*e),_o(t,0,(.1-n)*e,(.5-r)*i,0,.5*i,0),_o(t,(.5+r)*i,0,1*i,(.1-n)*e,1*i,.1*e),Zo(t,1*i,.1*e,!1),_o(t,1*i,(.1+n)*e,(.5+r)*i,.2*e,.5*i,.2*e),_o(t,(.5-r)*i,.2*e,0,(.1+n)*e,0,.1*e),t.moveTo(1*i,.2*e),_o(t,1*i,(.2+n)*e,(.5+r)*i,.3*e,.5*i,.3*e),_o(t,(.5-r)*i,.3*e,0,(.2+n)*e,0,.2*e),t.moveTo(1*i,.3*e),_o(t,1*i,(.3+n)*e,(.5+r)*i,.4*e,.5*i,.4*e),_o(t,(.5-r)*i,.4*e,0,(.3+n)*e,0,.3*e),t.$a(!1),i=t.o,i.A=new D(0,.4),i.B=new D(1,.9),Ul.q(t),i},StoredData:"DataStorage",DataStorage:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!0),t.lineTo(.75*i,0),_o(t,1*i,0,1*i,1*e,.75*i,1*e),t.lineTo(0,1*e),_o(t,.25*i,.9*e,.25*i,.1*e,0,0),Qo(t),i=t.o,i.A=new D(.226,0),i.B=new D(.81,1),Ul.q(t),i},DiskStorage:function(t,i,e){t=Ul.p();var n=Au.sa,r=.5*n,n=.1*n;return Zo(t,1*i,.1*e,!0),t.lineTo(1*i,.9*e),_o(t,1*i,(.9+n)*e,(.5+r)*i,1*e,.5*i,1*e),_o(t,(.5-r)*i,1*e,0,(.9+n)*e,0,.9*e),t.lineTo(0,.1*e),_o(t,0,(.1-n)*e,(.5-r)*i,0,.5*i,0),_o(t,(.5+r)*i,0,1*i,(.1-n)*e,1*i,.1*e),Zo(t,1*i,.1*e,!1),_o(t,1*i,(.1+n)*e,(.5+r)*i,.2*e,.5*i,.2*e),_o(t,(.5-r)*i,.2*e,0,(.1+n)*e,0,.1*e),t.moveTo(1*i,.2*e),_o(t,1*i,(.2+n)*e,(.5+r)*i,.3*e,.5*i,.3*e),_o(t,(.5-r)*i,.3*e,0,(.2+n)*e,0,.2*e),t.$a(!1),i=t.o,i.A=new D(0,.3),i.B=new D(1,.9),Ul.q(t),i},Display:function(t,i,e){return t=Ul.p(),Zo(t,.25*i,0,!0),t.lineTo(.75*i,0),_o(t,1*i,0,1*i,1*e,.75*i,1*e),t.lineTo(.25*i,1*e),t.lineTo(0,.5*e),Qo(t),i=t.o,i.A=new D(.25,0),i.B=new D(.75,1),Ul.q(t),i},DividedEvent:function(t,i,e){t=t?t.xc:0/0,isNaN(t)?t=.2:.15>t&&(t=.15);var n=Ul.p(),r=.2*Au.sa;return Zo(n,0,.2*e,!0),_o(n,0,(.2-r)*e,(.2-r)*i,0,.2*i,0),n.lineTo(.8*i,0),_o(n,(.8+r)*i,0,1*i,(.2-r)*e,1*i,.2*e),n.lineTo(1*i,.8*e),_o(n,1*i,(.8+r)*e,(.8+r)*i,1*e,.8*i,1*e),n.lineTo(.2*i,1*e),_o(n,(.2-r)*i,1*e,0,(.8+r)*e,0,.8*e),n.lineTo(0,.2*e),Zo(n,0,t*e,!1),n.lineTo(1*i,t*e),n.$a(!1),i=n.o,i.A=new D(0,t),i.B=new D(1,1-t),Ul.q(n),i},DividedProcess:function(t,i,e){t=t?t.xc:0/0,(isNaN(t)||.1>t)&&(t=.1);var n=Ul.p();return Zo(n,0,0,!0),n.lineTo(1*i,0),n.lineTo(1*i,1*e),n.lineTo(0,1*e),Qo(n),Zo(n,0,t*e,!1),n.lineTo(1*i,t*e),n.$a(!1),i=n.o,i.A=new D(0,t),i.B=lu,Ul.q(n),i},Document:function(t,i,e){return e/=.8,t=Ul.p(),Zo(t,0,.7*e,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(1*i,.7*e),_o(t,.5*i,.4*e,.5*i,1*e,0,.7*e),Qo(t),i=t.o,i.A=iu,i.B=new D(1,.6),Ul.q(t),i},ExternalOrganization:function(t,i,e){t=t?t.xc:0/0,(isNaN(t)||.2>t)&&(t=.2);var n=Ul.p();return Zo(n,0,0,!0),n.lineTo(1*i,0),n.lineTo(1*i,1*e),n.lineTo(0,1*e),Qo(n),Zo(n,t*i,0,!1),n.lineTo(0,t*e),n.moveTo(1*i,t*e),n.lineTo((1-t)*i,0),n.moveTo(0,(1-t)*e),n.lineTo(t*i,1*e),n.moveTo((1-t)*i,1*e),n.lineTo(1*i,(1-t)*e),n.$a(!1),i=n.o,i.A=new D(t/2,t/2),i.B=new D(1-t/2,1-t/2),Ul.q(n),i},ExternalProcess:function(t,i,e){return t=Ul.p(),Zo(t,.5*i,0,!0),t.lineTo(1*i,.5*e),t.lineTo(.5*i,1*e),t.lineTo(0,.5*e),Qo(t),Zo(t,.1*i,.4*e,!1),t.lineTo(.1*i,.6*e),t.moveTo(.9*i,.6*e),t.lineTo(.9*i,.4*e),t.moveTo(.6*i,.1*e),t.lineTo(.4*i,.1*e),t.moveTo(.4*i,.9*e),t.lineTo(.6*i,.9*e),t.$a(!1),i=t.o,i.A=new D(.25,.25),i.B=new D(.75,.75),Ul.q(t),i},File:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!0),t.lineTo(.75*i,0),t.lineTo(1*i,.25*e),t.lineTo(1*i,1*e),t.lineTo(0,1*e),Qo(t),Zo(t,.75*i,0,!1),t.lineTo(.75*i,.25*e),t.lineTo(1*i,.25*e),t.$a(!1),i=t.o,i.A=new D(0,.25),i.B=lu,Ul.q(t),i},Interrupt:function(t,i,e){return t=Ul.p(),Zo(t,1*i,.5*e,!0),t.lineTo(0,1*e),t.lineTo(0,0),t.lineTo(1*i,.5*e),Zo(t,1*i,.5*e,!1),t.lineTo(1*i,1*e),Zo(t,1*i,.5*e,!1),t.lineTo(1*i,0),i=t.o,i.A=new D(0,.25),i.B=new D(.5,.75),Ul.q(t),i},InternalStorage:function(t,i,e){var n=t?t.xc:0/0;t=t?t.et:0/0,isNaN(n)&&(n=.1),isNaN(t)&&(t=.1);var r=Ul.p();return Zo(r,0,0,!0),r.lineTo(1*i,0),r.lineTo(1*i,1*e),r.lineTo(0,1*e),Qo(r),Zo(r,n*i,0,!1),r.lineTo(n*i,1*e),r.moveTo(0,t*e),r.lineTo(1*i,t*e),r.$a(!1),i=r.o,i.A=new D(n,t),i.B=lu,Ul.q(r),i},Junction:function(t,i,e){t=Ul.p();var n=1/Math.SQRT2,r=(1-1/Math.SQRT2)/2,o=.5*Au.sa;return Zo(t,1*i,.5*e,!0),_o(t,1*i,(.5+o)*e,(.5+o)*i,1*e,.5*i,1*e),_o(t,(.5-o)*i,1*e,0,(.5+o)*e,0,.5*e),_o(t,0,(.5-o)*e,(.5-o)*i,0,.5*i,0),_o(t,(.5+o)*i,0,1*i,(.5-o)*e,1*i,.5*e),Zo(t,(r+n)*i,(r+n)*e,!1),t.lineTo(r*i,r*e),t.moveTo(r*i,(r+n)*e),t.lineTo((r+n)*i,r*e),t.$a(!1),i=t.o,i.Bd=ic,Ul.q(t),i},LinedDocument:function(t,i,e){return e/=.8,t=Ul.p(),Zo(t,0,.7*e,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(1*i,.7*e),_o(t,.5*i,.4*e,.5*i,1*e,0,.7*e),Qo(t),Zo(t,.1*i,0,!1),t.lineTo(.1*i,.75*e),t.$a(!1),i=t.o,i.A=new D(.1,0),i.B=new D(1,.6),Ul.q(t),i},LoopLimit:function(t,i,e){return t=Ul.p(),Zo(t,0,1*e,!0),t.lineTo(0,.25*e),t.lineTo(.25*i,0),t.lineTo(.75*i,0),t.lineTo(1*i,.25*e),t.lineTo(1*i,1*e),Qo(t),i=t.o,i.A=new D(0,.25),i.B=lu,Ul.q(t),i},SequentialData:"MagneticTape",MagneticTape:function(t,i,e){t=Ul.p();var n=.5*Au.sa;return Zo(t,.5*i,1*e,!0),_o(t,(.5-n)*i,1*e,0,(.5+n)*e,0,.5*e),_o(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),_o(t,(.5+n)*i,0,1*i,(.5-n)*e,1*i,.5*e),_o(t,1*i,(.5+n)*e,(.5+n)*i,.9*e,.6*i,.9*e),t.lineTo(1*i,.9*e),t.lineTo(1*i,1*e),t.lineTo(.5*i,1*e),i=t.o,i.A=new D(.15,.15),i.B=new D(.85,.8),Ul.q(t),i},ManualInput:function(t,i,e){return t=Ul.p(),Zo(t,1*i,0,!0),t.lineTo(1*i,1*e),t.lineTo(0,1*e),t.lineTo(0,.25*e),Qo(t),i=t.o,i.A=new D(0,.25),i.B=lu,Ul.q(t),i},MessageFromUser:function(t,i,e){t=t?t.xc:0/0,isNaN(t)&&(t=.7);var n=Ul.p();return Zo(n,0,0,!0),n.lineTo(1*i,0),n.lineTo(t*i,.5*e),n.lineTo(1*i,1*e),n.lineTo(0,1*e),Qo(n),i=n.o,i.A=iu,i.B=new D(t,1),Ul.q(n),i},MicroformProcessing:function(t,i,e){t=t?t.xc:0/0,isNaN(t)&&(t=.25);var n=Ul.p();return Zo(n,0,0,!0),n.lineTo(.5*i,t*e),n.lineTo(1*i,0),n.lineTo(1*i,1*e),n.lineTo(.5*i,(1-t)*e),n.lineTo(0,1*e),Qo(n),i=n.o,i.A=new D(0,t),i.B=new D(1,1-t),Ul.q(n),i},MicroformRecording:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!0),t.lineTo(.75*i,.25*e),t.lineTo(1*i,.15*e),t.lineTo(1*i,.85*e),t.lineTo(.75*i,.75*e),t.lineTo(0,1*e),Qo(t),i=t.o,i.A=new D(0,.25),i.B=new D(1,.75),Ul.q(t),i},MultiDocument:function(t,i,e){return e/=.8,t=Ul.p(),Zo(t,i,0,!0),t.lineTo(i,.5*e),_o(t,.96*i,.47*e,.93*i,.45*e,.9*i,.44*e),t.lineTo(.9*i,.6*e),_o(t,.86*i,.57*e,.83*i,.55*e,.8*i,.54*e),t.lineTo(.8*i,.7*e),_o(t,.4*i,.4*e,.4*i,1*e,0,.7*e),t.lineTo(0,.2*e),t.lineTo(.1*i,.2*e),t.lineTo(.1*i,.1*e),t.lineTo(.2*i,.1*e),t.lineTo(.2*i,0),Qo(t),Zo(t,.1*i,.2*e,!1),t.lineTo(.8*i,.2*e),t.lineTo(.8*i,.54*e),t.moveTo(.2*i,.1*e),t.lineTo(.9*i,.1*e),t.lineTo(.9*i,.44*e),t.$a(!1),i=t.o,i.A=new D(0,.25),i.B=new D(.8,.77),Ul.q(t),i},MultiProcess:function(t,i,e){return t=Ul.p(),Zo(t,.1*i,.1*e,!0),t.lineTo(.2*i,.1*e),t.lineTo(.2*i,0),t.lineTo(1*i,0),t.lineTo(1*i,.8*e),t.lineTo(.9*i,.8*e),t.lineTo(.9*i,.9*e),t.lineTo(.8*i,.9*e),t.lineTo(.8*i,1*e),t.lineTo(0,1*e),t.lineTo(0,.2*e),t.lineTo(.1*i,.2*e),Qo(t),Zo(t,.2*i,.1*e,!1),t.lineTo(.9*i,.1*e),t.lineTo(.9*i,.8*e),t.moveTo(.1*i,.2*e),t.lineTo(.8*i,.2*e),t.lineTo(.8*i,.9*e),t.$a(!1),i=t.o,i.A=new D(0,.2),i.B=new D(.8,1),Ul.q(t),i},OfflineStorage:function(t,i,e){t=t?t.xc:0/0,isNaN(t)&&(t=.1);var n=1-t,r=Ul.p();return Zo(r,0,0,!0),r.lineTo(1*i,0),r.lineTo(.5*i,1*e),Qo(r),Zo(r,.5*t*i,t*e,!1),r.lineTo((1-.5*t)*i,t*e),r.$a(!1),i=r.o,i.A=new D(n/4+.5*t,t),i.B=new D(3*n/4+.5*t,t+.5*n),Ul.q(r),i},OffPageConnector:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!0),t.lineTo(.75*i,0),t.lineTo(1*i,.5*e),t.lineTo(.75*i,1*e),t.lineTo(0,1*e),Qo(t),i=t.o,i.A=iu,i.B=new D(.75,1),Ul.q(t),i},Or:function(t,i,e){t=Ul.p();var n=.5*Au.sa;return Zo(t,1*i,.5*e,!0),_o(t,1*i,(.5+n)*e,(.5+n)*i,1*e,.5*i,1*e),_o(t,(.5-n)*i,1*e,0,(.5+n)*e,0,.5*e),_o(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),_o(t,(.5+n)*i,0,1*i,(.5-n)*e,1*i,.5*e),Zo(t,1*i,.5*e,!1),t.lineTo(0,.5*e),t.moveTo(.5*i,1*e),t.lineTo(.5*i,0),t.$a(!1),i=t.o,i.Bd=ic,Ul.q(t),i},PaperTape:function(t,i,e){return e/=.8,t=Ul.p(),Zo(t,0,.7*e,!0),t.lineTo(0,.3*e),_o(t,.5*i,.6*e,.5*i,0,1*i,.3*e),t.lineTo(1*i,.7*e),_o(t,.5*i,.4*e,.5*i,1*e,0,.7*e),Qo(t),i=t.o,i.A=new D(0,.49),i.B=new D(1,.75),Ul.q(t),i},PrimitiveFromCall:function(t,i,e){var n=t?t.xc:0/0;t=t?t.et:0/0,isNaN(n)&&(n=.1),isNaN(t)&&(t=.3);var r=Ul.p();return Zo(r,0,0,!0),r.lineTo(1*i,0),r.lineTo((1-t)*i,.5*e),r.lineTo(1*i,1*e),r.lineTo(0,1*e),Qo(r),i=r.o,i.A=new D(n,0),i.B=new D(1-t,1),Ul.q(r),i},PrimitiveToCall:function(t,i,e){var n=t?t.xc:0/0;t=t?t.et:0/0,isNaN(n)&&(n=.1),isNaN(t)&&(t=.3);var r=Ul.p();return Zo(r,0,0,!0),r.lineTo((1-t)*i,0),r.lineTo(1*i,.5*e),r.lineTo((1-t)*i,1*e),r.lineTo(0,1*e),Qo(r),i=r.o,i.A=new D(n,0),i.B=new D(1-t,1),Ul.q(r),i},Subroutine:"Procedure",Procedure:function(t,i,e){t=t?t.xc:0/0,isNaN(t)&&(t=.1);var n=Ul.p();return Zo(n,0,0,!0),n.lineTo(1*i,0),n.lineTo(1*i,1*e),n.lineTo(0,1*e),Qo(n),Zo(n,(1-t)*i,0,!1),n.lineTo((1-t)*i,1*e),n.moveTo(t*i,0),n.lineTo(t*i,1*e),n.$a(!1),i=n.o,i.A=new D(t,0),i.B=new D(1-t,1),Ul.q(n),i},Process:function(t,i,e){t=t?t.xc:0/0,isNaN(t)&&(t=.1);var n=Ul.p();return Zo(n,0,0,!0),n.lineTo(1*i,0),n.lineTo(1*i,1*e),n.lineTo(0,1*e),Qo(n),Zo(n,t*i,0,!1),n.lineTo(t*i,1*e),n.$a(!1),i=n.o,i.A=new D(t,0),i.B=lu,Ul.q(n),i},Sort:function(t,i,e){return t=Ul.p(),Zo(t,.5*i,0,!0),t.lineTo(1*i,.5*e),t.lineTo(.5*i,1*e),t.lineTo(0,.5*e),Qo(t),Zo(t,0,.5*e,!1),t.lineTo(1*i,.5*e),t.$a(!1),i=t.o,i.A=new D(.25,.25),i.B=new D(.75,.5),Ul.q(t),i},Start:function(t,i,e){return t=Ul.p(),Zo(t,.25*i,0,!0),Zo(t,.25*i,0,!0),t.arcTo(270,180,.75*i,.5*e,.25*i,.5*e),t.arcTo(90,180,.25*i,.5*e,.25*i,.5*e),Zo(t,.25*i,0,!1),t.lineTo(.25*i,1*e),t.moveTo(.75*i,0),t.lineTo(.75*i,1*e),t.$a(!1),i=t.o,i.A=new D(.25,0),i.B=new D(.75,1),Ul.q(t),i},Terminator:function(t,i,e){return t=Ul.p(),Zo(t,.25*i,0,!0),t.arcTo(270,180,.75*i,.5*e,.25*i,.5*e),t.arcTo(90,180,.25*i,.5*e,.25*i,.5*e),i=t.o,i.A=new D(.23,0),i.B=new D(.77,1),Ul.q(t),i},TransmittalTape:function(t,i,e){t=t?t.xc:0/0,isNaN(t)&&(t=.1);var n=Ul.p();return Zo(n,0,0,!0),n.lineTo(1*i,0),n.lineTo(1*i,1*e),n.lineTo(.75*i,(1-t)*e),n.lineTo(0,(1-t)*e),Qo(n),i=n.o,i.A=iu,i.B=new D(1,1-t),Ul.q(n),i},AndGate:function(t,i,e){t=Ul.p();var n=.5*Au.sa;return Zo(t,0,0,!0),t.lineTo(.5*i,0),_o(t,(.5+n)*i,0,1*i,(.5-n)*e,1*i,.5*e),_o(t,1*i,(.5+n)*e,(.5+n)*i,1*e,.5*i,1*e),t.lineTo(0,1*e),Qo(t),i=t.o,i.A=iu,i.B=new D(.55,1),Ul.q(t),i},Buffer:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!0),t.lineTo(1*i,.5*e),t.lineTo(0,1*e),Qo(t),i=t.o,i.A=new D(0,.25),i.B=new D(.5,.75),Ul.q(t),i},Clock:function(t,i,e){t=Ul.p();var n=.5*Au.sa;return Zo(t,1*i,.5*e,!0),_o(t,1*i,(.5+n)*e,(.5+n)*i,1*e,.5*i,1*e),_o(t,(.5-n)*i,1*e,0,(.5+n)*e,0,.5*e),_o(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),_o(t,(.5+n)*i,0,1*i,(.5-n)*e,1*i,.5*e),Zo(t,1*i,.5*e,!1),t.lineTo(1*i,.5*e),Zo(t,.8*i,.75*e,!1),t.lineTo(.8*i,.25*e),t.lineTo(.6*i,.25*e),t.lineTo(.6*i,.75*e),t.lineTo(.4*i,.75*e),t.lineTo(.4*i,.25*e),t.lineTo(.2*i,.25*e),t.lineTo(.2*i,.75*e),t.$a(!1),i=t.o,i.Bd=ic,Ul.q(t),i},Ground:function(t,i,e){return t=Ul.p(),Zo(t,.5*i,0,!1),t.lineTo(.5*i,.4*e),t.moveTo(.2*i,.6*e),t.lineTo(.8*i,.6*e),t.moveTo(.3*i,.8*e),t.lineTo(.7*i,.8*e),t.moveTo(.4*i,1*e),t.lineTo(.6*i,1*e),i=t.o,Ul.q(t),i},Inverter:function(t,i,e){t=Ul.p();var n=.1*Au.sa;return Zo(t,.8*i,.5*e,!0),t.lineTo(0,1*e),t.lineTo(0,0),t.lineTo(.8*i,.5*e),Zo(t,1*i,.5*e,!0),_o(t,1*i,(.5+n)*e,(.9+n)*i,.6*e,.9*i,.6*e),_o(t,(.9-n)*i,.6*e,.8*i,(.5+n)*e,.8*i,.5*e),_o(t,.8*i,(.5-n)*e,(.9-n)*i,.4*e,.9*i,.4*e),_o(t,(.9+n)*i,.4*e,1*i,(.5-n)*e,1*i,.5*e),i=t.o,i.A=new D(0,.25),i.B=new D(.4,.75),Ul.q(t),i},NandGate:function(t,i,e){t=Ul.p();var n=Au.sa,r=.5*n,o=.4*n,n=.1*n;return Zo(t,.8*i,.5*e,!0),_o(t,.8*i,(.5+o)*e,(.4+r)*i,1*e,.4*i,1*e),t.lineTo(0,1*e),t.lineTo(0,0),t.lineTo(.4*i,0),_o(t,(.4+r)*i,0,.8*i,(.5-o)*e,.8*i,.5*e),Zo(t,1*i,.5*e,!0),_o(t,1*i,(.5+n)*e,(.9+n)*i,.6*e,.9*i,.6*e),_o(t,(.9-n)*i,.6*e,.8*i,(.5+n)*e,.8*i,.5*e),_o(t,.8*i,(.5-n)*e,(.9-n)*i,.4*e,.9*i,.4*e),_o(t,(.9+n)*i,.4*e,1*i,(.5-n)*e,1*i,.5*e),i=t.o,i.A=new D(0,.05),i.B=new D(.55,.95),Ul.q(t),i},NorGate:function(t,i,e){t=Ul.p();var n=Au.sa,r=.5,o=n*r,s=0,a=.5;return Zo(t,.8*i,.5*e,!0),_o(t,.7*i,(a+o)*e,(s+o)*i,(a+r)*e,0,1*e),_o(t,.25*i,.75*e,.25*i,.25*e,0,0),_o(t,(s+o)*i,(a-r)*e,.7*i,(a-o)*e,.8*i,.5*e),r=.1,o=.1*n,s=.9,a=.5,Zo(t,(s-r)*i,a*e,!0),_o(t,(s-r)*i,(a-o)*e,(s-o)*i,(a-r)*e,s*i,(a-r)*e),_o(t,(s+o)*i,(a-r)*e,(s+r)*i,(a-o)*e,(s+r)*i,a*e),_o(t,(s+r)*i,(a+o)*e,(s+o)*i,(a+r)*e,s*i,(a+r)*e),_o(t,(s-o)*i,(a+r)*e,(s-r)*i,(a+o)*e,(s-r)*i,a*e),i=t.o,i.A=new D(.2,.25),i.B=new D(.6,.75),Ul.q(t),i},OrGate:function(t,i,e){t=Ul.p();var n=.5*Au.sa;return Zo(t,0,0,!0),_o(t,(0+n+n)*i,0*e,.8*i,(.5-n)*e,1*i,.5*e),_o(t,.8*i,(.5+n)*e,(0+n+n)*i,1*e,0,1*e),_o(t,.25*i,.75*e,.25*i,.25*e,0,0),Qo(t),i=t.o,i.A=new D(.2,.25),i.B=new D(.75,.75),Ul.q(t),i},XnorGate:function(t,i,e){t=Ul.p();var n=Au.sa,r=.5,o=n*r,s=.2,a=.5;return Zo(t,.1*i,0,!1),_o(t,.35*i,.25*e,.35*i,.75*e,.1*i,1*e),Zo(t,.8*i,.5*e,!0),_o(t,.7*i,(a+o)*e,(s+o)*i,(a+r)*e,.2*i,1*e),_o(t,.45*i,.75*e,.45*i,.25*e,.2*i,0),_o(t,(s+o)*i,(a-r)*e,.7*i,(a-o)*e,.8*i,.5*e),r=.1,o=.1*n,s=.9,a=.5,Zo(t,(s-r)*i,a*e,!0),_o(t,(s-r)*i,(a-o)*e,(s-o)*i,(a-r)*e,s*i,(a-r)*e),_o(t,(s+o)*i,(a-r)*e,(s+r)*i,(a-o)*e,(s+r)*i,a*e),_o(t,(s+r)*i,(a+o)*e,(s+o)*i,(a+r)*e,s*i,(a+r)*e),_o(t,(s-o)*i,(a+r)*e,(s-r)*i,(a+o)*e,(s-r)*i,a*e),i=t.o,i.A=new D(.4,.25),i.B=new D(.65,.75),Ul.q(t),i},XorGate:function(t,i,e){t=Ul.p();var n=.5*Au.sa;return Zo(t,.1*i,0,!1),_o(t,.35*i,.25*e,.35*i,.75*e,.1*i,1*e),Zo(t,.2*i,0,!0),_o(t,(.2+n)*i,0*e,.9*i,(.5-n)*e,1*i,.5*e),_o(t,.9*i,(.5+n)*e,(.2+n)*i,1*e,.2*i,1*e),_o(t,.45*i,.75*e,.45*i,.25*e,.2*i,0),Qo(t),i=t.o,i.A=new D(.4,.25),i.B=new D(.8,.75),Ul.q(t),i},Capacitor:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!1),t.lineTo(0,1*e),t.moveTo(1*i,0),t.lineTo(1*i,1*e),i=t.o,Ul.q(t),i},Resistor:function(t,i,e){return t=Ul.p(),Zo(t,0,.5*e,!1),t.lineTo(.1*i,0),t.lineTo(.2*i,1*e),t.lineTo(.3*i,0),t.lineTo(.4*i,1*e),t.lineTo(.5*i,0),t.lineTo(.6*i,1*e),t.lineTo(.7*i,.5*e),i=t.o,Ul.q(t),i},Inductor:function(t,i,e){t=Ul.p();var n=.1*Au.sa,r=.1;return Zo(t,(r-.5*n)*i,e,!1),_o(t,(r-n)*i,e,(r-.1)*i,0,(r+.1)*i,0),r=.3,_o(t,(r+.1)*i,0,(r+n)*i,e,r*i,e),_o(t,(r-n)*i,e,(r-.1)*i,0,(r+.1)*i,0),r=.5,_o(t,(r+.1)*i,0,(r+n)*i,e,r*i,e),_o(t,(r-n)*i,e,(r-.1)*i,0,(r+.1)*i,0),r=.7,_o(t,(r+.1)*i,0,(r+n)*i,e,r*i,e),_o(t,(r-n)*i,e,(r-.1)*i,0,(r+.1)*i,0),r=.9,_o(t,(r+.1)*i,0,(r+n)*i,e,(r+.5*n)*i,e),i=t.o,Ul.q(t),i},ACvoltageSource:function(t,i,e){t=Ul.p();var n=.5*Au.sa;return Zo(t,0*i,.5*e,!1),_o(t,0*i,(.5-n)*e,(.5-n)*i,0*e,.5*i,0*e),_o(t,(.5+n)*i,0*e,1*i,(.5-n)*e,1*i,.5*e),_o(t,1*i,(.5+n)*e,(.5+n)*i,1*e,.5*i,1*e),_o(t,(.5-n)*i,1*e,0*i,(.5+n)*e,0*i,.5*e),t.moveTo(.1*i,.5*e),_o(t,.5*i,0*e,.5*i,1*e,.9*i,.5*e),i=t.o,i.Bd=ic,Ul.q(t),i},DCvoltageSource:function(t,i,e){return t=Ul.p(),Zo(t,0,.75*e,!1),t.lineTo(0,.25*e),t.moveTo(1*i,0),t.lineTo(1*i,1*e),i=t.o,Ul.q(t),i},Diode:function(t,i,e){return t=Ul.p(),Zo(t,1*i,0,!1),t.lineTo(1*i,.5*e),t.lineTo(0,1*e),t.lineTo(0,0),t.lineTo(1*i,.5*e),t.lineTo(1*i,1*e),i=t.o,i.A=new D(0,.25),i.B=new D(.5,.75),Ul.q(t),i},Wifi:function(t,i,e){var n=i,r=e;i*=.38,e*=.6,t=Ul.p();var o=Au.sa,s=.8*o,a=.8,h=0,l=.5,n=(n-i)/2,r=(r-e)/2;return Zo(t,h*i+n,(l+a)*e+r,!0),_o(t,(h-s)*i+n,(l+a)*e+r,(h-a)*i+n,(l+s)*e+r,(h-a)*i+n,l*e+r),_o(t,(h-a)*i+n,(l-s)*e+r,(h-s)*i+n,(l-a)*e+r,h*i+n,(l-a)*e+r),_o(t,h*i+n,(l-a)*e+r,(h-a+.5*s)*i+n,(l-s)*e+r,(h-a+.5*s)*i+n,l*e+r),_o(t,(h-a+.5*s)*i+n,(l+s)*e+r,h*i+n,(l+a)*e+r,h*i+n,(l+a)*e+r),Qo(t),s=.4*o,a=.4,h=.2,l=.5,Zo(t,h*i+n,(l+a)*e+r,!0),_o(t,(h-s)*i+n,(l+a)*e+r,(h-a)*i+n,(l+s)*e+r,(h-a)*i+n,l*e+r),_o(t,(h-a)*i+n,(l-s)*e+r,(h-s)*i+n,(l-a)*e+r,h*i+n,(l-a)*e+r),_o(t,h*i+n,(l-a)*e+r,(h-a+.5*s)*i+n,(l-s)*e+r,(h-a+.5*s)*i+n,l*e+r),_o(t,(h-a+.5*s)*i+n,(l+s)*e+r,h*i+n,(l+a)*e+r,h*i+n,(l+a)*e+r),Qo(t),s=.2*o,a=.2,l=h=.5,Zo(t,(h-a)*i+n,l*e+r,!0),_o(t,(h-a)*i+n,(l-s)*e+r,(h-s)*i+n,(l-a)*e+r,h*i+n,(l-a)*e+r),_o(t,(h+s)*i+n,(l-a)*e+r,(h+a)*i+n,(l-s)*e+r,(h+a)*i+n,l*e+r),_o(t,(h+a)*i+n,(l+s)*e+r,(h+s)*i+n,(l+a)*e+r,h*i+n,(l+a)*e+r),_o(t,(h-s)*i+n,(l+a)*e+r,(h-a)*i+n,(l+s)*e+r,(h-a)*i+n,l*e+r),s=.4*o,a=.4,h=.8,l=.5,Zo(t,h*i+n,(l-a)*e+r,!0),_o(t,(h+s)*i+n,(l-a)*e+r,(h+a)*i+n,(l-s)*e+r,(h+a)*i+n,l*e+r),_o(t,(h+a)*i+n,(l+s)*e+r,(h+s)*i+n,(l+a)*e+r,h*i+n,(l+a)*e+r),_o(t,h*i+n,(l+a)*e+r,(h+a-.5*s)*i+n,(l+s)*e+r,(h+a-.5*s)*i+n,l*e+r),_o(t,(h+a-.5*s)*i+n,(l-s)*e+r,h*i+n,(l-a)*e+r,h*i+n,(l-a)*e+r),Qo(t),s=.8*o,a=.8,h=1,l=.5,Zo(t,h*i+n,(l-a)*e+r,!0),_o(t,(h+s)*i+n,(l-a)*e+r,(h+a)*i+n,(l-s)*e+r,(h+a)*i+n,l*e+r),_o(t,(h+a)*i+n,(l+s)*e+r,(h+s)*i+n,(l+a)*e+r,h*i+n,(l+a)*e+r),_o(t,h*i+n,(l+a)*e+r,(h+a-.5*s)*i+n,(l+s)*e+r,(h+a-.5*s)*i+n,l*e+r),_o(t,(h+a-.5*s)*i+n,(l-s)*e+r,h*i+n,(l-a)*e+r,h*i+n,(l-a)*e+r),Qo(t),i=t.o,Ul.q(t),i},Email:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!0),t.lineTo(1*i,0),t.lineTo(1*i,1*e),t.lineTo(0,1*e),t.lineTo(0,0),Qo(t),Zo(t,0,0,!1),t.lineTo(.5*i,.6*e),t.lineTo(1*i,0),t.moveTo(0,1*e),t.lineTo(.45*i,.54*e),t.moveTo(1*i,1*e),t.lineTo(.55*i,.54*e),t.$a(!1),i=t.o,Ul.q(t),i},Ethernet:function(t,i,e){return t=Ul.p(),Zo(t,.35*i,0,!0),t.lineTo(.65*i,0),t.lineTo(.65*i,.4*e),t.lineTo(.35*i,.4*e),t.lineTo(.35*i,0),Qo(t),Zo(t,.1*i,1*e,!0,!0),t.lineTo(.4*i,1*e),t.lineTo(.4*i,.6*e),t.lineTo(.1*i,.6*e),t.lineTo(.1*i,1*e),Qo(t),Zo(t,.6*i,1*e,!0,!0),t.lineTo(.9*i,1*e),t.lineTo(.9*i,.6*e),t.lineTo(.6*i,.6*e),t.lineTo(.6*i,1*e),Qo(t),Zo(t,0,.5*e,!1),t.lineTo(1*i,.5*e),t.moveTo(.5*i,.5*e),t.lineTo(.5*i,.4*e),t.moveTo(.75*i,.5*e),t.lineTo(.75*i,.6*e),t.moveTo(.25*i,.5*e),t.lineTo(.25*i,.6*e),t.$a(!1),i=t.o,Ul.q(t),i},Power:function(t,i,e){t=Ul.p();var n=Au.sa,r=.4*n,o=.4,s=Ul.K(),a=Ul.K(),h=Ul.K(),l=Ul.K();Au.Ai(.5,.5-o,.5+r,.5-o,.5+o,.5-r,.5+o,.5,.5,s,s,a,h,l);var u=Ul.fc(a.x,a.y);return Zo(t,a.x*i,a.y*e,!0),_o(t,h.x*i,h.y*e,l.x*i,l.y*e,(.5+o)*i,.5*e),_o(t,(.5+o)*i,(.5+r)*e,(.5+r)*i,(.5+o)*e,.5*i,(.5+o)*e),_o(t,(.5-r)*i,(.5+o)*e,(.5-o)*i,(.5+r)*e,(.5-o)*i,.5*e),Au.Ai(.5-o,.5,.5-o,.5-r,.5-r,.5-o,.5,.5-o,.5,h,l,a,s,s),_o(t,h.x*i,h.y*e,l.x*i,l.y*e,a.x*i,a.y*e),r=.3*n,o=.3,Au.Ai(.5-o,.5,.5-o,.5-r,.5-r,.5-o,.5,.5-o,.5,h,l,a,s,s),t.lineTo(a.x*i,a.y*e),_o(t,l.x*i,l.y*e,h.x*i,h.y*e,(.5-o)*i,.5*e),_o(t,(.5-o)*i,(.5+r)*e,(.5-r)*i,(.5+o)*e,.5*i,(.5+o)*e),_o(t,(.5+r)*i,(.5+o)*e,(.5+o)*i,(.5+r)*e,(.5+o)*i,.5*e),Au.Ai(.5,.5-o,.5+r,.5-o,.5+o,.5-r,.5+o,.5,.5,s,s,a,h,l),_o(t,l.x*i,l.y*e,h.x*i,h.y*e,a.x*i,a.y*e),Qo(t),Zo(t,.45*i,0,!0),t.lineTo(.45*i,.5*e),t.lineTo(.55*i,.5*e),t.lineTo(.55*i,0),Qo(t),Ul.v(s),Ul.v(a),Ul.v(h),Ul.v(l),Ul.v(u),i=t.o,i.A=new D(.25,.55),i.B=new D(.75,.8),Ul.q(t),i},Fallout:function(t,i,e){t=Ul.p();var n=.5*Au.sa;Zo(t,0*i,.5*e,!0),_o(t,0*i,(.5-n)*e,(.5-n)*i,0*e,.5*i,0*e),_o(t,(.5+n)*i,0*e,1*i,(.5-n)*e,1*i,.5*e),_o(t,1*i,(.5+n)*e,(.5+n)*i,1*e,.5*i,1*e),_o(t,(.5-n)*i,1*e,0*i,(.5+n)*e,0*i,.5*e);var r=n=0;return Zo(t,(.3+n)*i,(.8+r)*e,!0,!0),t.lineTo((.5+n)*i,(.5+r)*e),t.lineTo((.1+n)*i,(.5+r)*e),t.lineTo((.3+n)*i,(.8+r)*e),n=.4,r=0,Qo(t),Zo(t,(.3+n)*i,(.8+r)*e,!0,!0),t.lineTo((.5+n)*i,(.5+r)*e),t.lineTo((.1+n)*i,(.5+r)*e),t.lineTo((.3+n)*i,(.8+r)*e),n=.2,r=-.3,Qo(t),Zo(t,(.3+n)*i,(.8+r)*e,!0,!0),t.lineTo((.5+n)*i,(.5+r)*e),t.lineTo((.1+n)*i,(.5+r)*e),t.lineTo((.3+n)*i,(.8+r)*e),Qo(t),i=t.o,i.Bd=ic,Ul.q(t),i},IrritationHazard:function(t,i,e){return t=Ul.p(),Zo(t,.2*i,0*e,!0),t.lineTo(.5*i,.3*e),t.lineTo(.8*i,0*e),t.lineTo(1*i,.2*e),t.lineTo(.7*i,.5*e),t.lineTo(1*i,.8*e),t.lineTo(.8*i,1*e),t.lineTo(.5*i,.7*e),t.lineTo(.2*i,1*e),t.lineTo(0*i,.8*e),t.lineTo(.3*i,.5*e),t.lineTo(0*i,.2*e),Qo(t),i=t.o,i.A=new D(.3,.3),i.B=new D(.7,.7),Ul.q(t),i},ElectricalHazard:function(t,i,e){return t=Ul.p(),Zo(t,.37*i,0*e,!0),t.lineTo(.5*i,.11*e),t.lineTo(.77*i,.04*e),t.lineTo(.33*i,.49*e),t.lineTo(1*i,.37*e),t.lineTo(.63*i,.86*e),t.lineTo(.77*i,.91*e),t.lineTo(.34*i,1*e),t.lineTo(.34*i,.78*e),t.lineTo(.44*i,.8*e),t.lineTo(.65*i,.56*e),t.lineTo(0*i,.68*e),Qo(t),i=t.o,Ul.q(t),i},FireHazard:function(t,i,e){return t=Ul.p(),Zo(t,.1*i,1*e,!0),_o(t,-.25*i,.63*e,.45*i,.44*e,.29*i,0*e),_o(t,.48*i,.17*e,.54*i,.35*e,.51*i,.42*e),_o(t,.59*i,.29*e,.58*i,.28*e,.59*i,.18*e),_o(t,.8*i,.34*e,.88*i,.43*e,.75*i,.6*e),_o(t,.87*i,.48*e,.88*i,.43*e,.88*i,.31*e),_o(t,1.17*i,.76*e,.82*i,.8*e,.9*i,1*e),Qo(t),i=t.o,i.A=new D(.05,.645),i.B=new D(.884,.908),Ul.q(t),i},BpmnActivityLoop:function(t,i,e){t=Ul.p();var n=4*(Math.SQRT2-1)/3*.5;return Zo(t,.65*i,1*e,!1),_o(t,(1-n+0)*i,1*e,1*i,(.5+n+0)*e,1*i,.5*e),_o(t,1*i,(.5-n+0)*e,(.5+n+0)*i,0*e,.5*i,0*e),_o(t,(.5-n+0)*i,0*e,0*i,(.5-n+0)*e,0*i,.5*e),_o(t,0*i,(.5+n+0)*e,(.5-n+0)*i,1*e,.35*i,.98*e),t.moveTo(.25*i,.8*e),t.lineTo(.35*i,1*e),t.lineTo(.1*i,1*e),i=t.o,Ul.q(t),i},BpmnActivityParallel:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!1),t.lineTo(0,1*e),t.moveTo(.5*i,0),t.lineTo(.5*i,1*e),t.moveTo(1*i,0),t.lineTo(1*i,1*e),i=t.o,Ul.q(t),i},BpmnActivitySequential:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!1),t.lineTo(1*i,0),t.moveTo(0,.5*e),t.lineTo(1*i,.5*e),t.moveTo(0,1*e),t.lineTo(1*i,1*e),i=t.o,Ul.q(t),i},BpmnActivityAdHoc:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!1),Zo(t,1*i,1*e,!1),Zo(t,0,.5*e,!1),_o(t,.2*i,.35*e,.3*i,.35*e,.5*i,.5*e),_o(t,.7*i,.65*e,.8*i,.65*e,1*i,.5*e),i=t.o,Ul.q(t),i},BpmnActivityCompensation:function(t,i,e){return t=Ul.p(),Zo(t,0,.5*e,!0),t.lineTo(.5*i,0),t.lineTo(.5*i,.5*e),t.lineTo(1*i,1*e),t.lineTo(1*i,0),t.lineTo(.5*i,.5*e),t.lineTo(.5*i,1*e),Qo(t),i=t.o,Ul.q(t),i},BpmnTaskMessage:function(t,i,e){return t=Ul.p(),Zo(t,0,.2*e,!0),t.lineTo(1*i,.2*e),t.lineTo(1*i,.8*e),t.lineTo(0,.8*e),t.lineTo(0,.8*e),Qo(t),Zo(t,0,.2*e,!1),t.lineTo(.5*i,.5*e),t.lineTo(1*i,.2*e),t.$a(!1),i=t.o,Ul.q(t),i},BpmnTaskScript:function(t,i,e){return t=Ul.p(),Zo(t,.7*i,1*e,!0),t.lineTo(.3*i,1*e),_o(t,.6*i,.5*e,0,.5*e,.3*i,0),t.lineTo(.7*i,0),_o(t,.4*i,.5*e,1*i,.5*e,.7*i,1*e),Qo(t),Zo(t,.45*i,.73*e,!1),t.lineTo(.7*i,.73*e),t.moveTo(.38*i,.5*e),t.lineTo(.63*i,.5*e),t.moveTo(.31*i,.27*e),t.lineTo(.56*i,.27*e),t.$a(!1),i=t.o,Ul.q(t),i},BpmnTaskUser:function(t,i,e){t=Ul.p(),Zo(t,0,0,!1),Zo(t,.335*i,(1-.555)*e,!0),t.lineTo(.335*i,.595*e),t.lineTo(.665*i,.595*e),t.lineTo(.665*i,(1-.555)*e),_o(t,.88*i,.46*e,.98*i,.54*e,1*i,.68*e),t.lineTo(1*i,1*e),t.lineTo(0,1*e),t.lineTo(0,.68*e),_o(t,.02*i,.54*e,.12*i,.46*e,.335*i,(1-.555)*e),t.lineTo(.365*i,.405*e);var n=.5-.285,r=Math.PI/4,o=4*(1-Math.cos(r))/(3*Math.sin(r)),r=o*n,o=o*n;return _o(t,(.5-(r+n)/2)*i,(n+(n+o)/2)*e,(.5-n)*i,(n+o)*e,(.5-n)*i,n*e),_o(t,(.5-n)*i,(n-o)*e,(.5-r)*i,(n-n)*e,.5*i,(n-n)*e),_o(t,(.5+r)*i,(n-n)*e,(.5+n)*i,(n-o)*e,(.5+n)*i,n*e),_o(t,(.5+n)*i,(n+o)*e,(.5+(r+n)/2)*i,(n+(n+o)/2)*e,.635*i,.405*e),t.lineTo(.635*i,.405*e),t.lineTo(.665*i,(1-.555)*e),t.lineTo(.665*i,.595*e),t.lineTo(.335*i,.595*e),Zo(t,.2*i,1*e,!1),t.lineTo(.2*i,.8*e),Zo(t,.8*i,1*e,!1),t.lineTo(.8*i,.8*e),i=t.o,Ul.q(t),i},BpmnEventConditional:function(t,i,e){return t=Ul.p(),Zo(t,.1*i,0,!0),t.lineTo(.9*i,0),t.lineTo(.9*i,1*e),t.lineTo(.1*i,1*e),Qo(t),Zo(t,.2*i,.2*e,!1),t.lineTo(.8*i,.2*e),t.moveTo(.2*i,.4*e),t.lineTo(.8*i,.4*e),t.moveTo(.2*i,.6*e),t.lineTo(.8*i,.6*e),t.moveTo(.2*i,.8*e),t.lineTo(.8*i,.8*e),t.$a(!1),i=t.o,Ul.q(t),i},BpmnEventError:function(t,i,e){return t=Ul.p(),Zo(t,0,1*e,!0),t.lineTo(.33*i,0),t.lineTo(.66*i,.5*e),t.lineTo(1*i,0),t.lineTo(.66*i,1*e),t.lineTo(.33*i,.5*e),Qo(t),i=t.o,Ul.q(t),i},BpmnEventEscalation:function(t,i,e){return t=Ul.p(),Zo(t,0,0,!1),Zo(t,1*i,1*e,!1),Zo(t,.1*i,1*e,!0),t.lineTo(.5*i,0),t.lineTo(.9*i,1*e),t.lineTo(.5*i,.5*e),Qo(t),i=t.o,Ul.q(t),i},BpmnEventTimer:function(t,i,e){t=Ul.p();var n=.5*Au.sa;return Zo(t,1*i,.5*e,!0),_o(t,1*i,(.5+n)*e,(.5+n)*i,1*e,.5*i,1*e),_o(t,(.5-n)*i,1*e,0,(.5+n)*e,0,.5*e),_o(t,0,(.5-n)*e,(.5-n)*i,0,.5*i,0),_o(t,(.5+n)*i,0,1*i,(.5-n)*e,1*i,.5*e),Zo(t,.5*i,0,!1),t.lineTo(.5*i,.15*e),t.moveTo(.5*i,1*e),t.lineTo(.5*i,.85*e),t.moveTo(0,.5*e),t.lineTo(.15*i,.5*e),t.moveTo(1*i,.5*e),t.lineTo(.85*i,.5*e),t.moveTo(.5*i,.5*e),t.lineTo(.58*i,.1*e),t.moveTo(.5*i,.5*e),t.lineTo(.78*i,.54*e),t.$a(!1),i=t.o,i.Bd=ic,Ul.q(t),i}};for(var Oc in Au.qg)Au.qg[Oc.toLowerCase()]=Oc;Au.Hv={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},Au.jI=function(){if(null!==Au.Hv){for(var t in Au.Hv){var i=Eu(Au.Hv[t],!1);
Au.Qi[t]=i,t.toLowerCase()!==t&&(Au.Qi[t.toLowerCase()]=t)}Au.Hv=null}},Au.UC=function(t){Au.jI();var i=Au.Qi[t];if(void 0===i){if(i=t.toLowerCase(),"none"===i)return"None";i=Au.Qi[i]}return"string"==typeof i?i:i instanceof H?t:null},Ul.Ga(es,to),Ul.fa("Part",es),es.prototype.cloneProtected=function(t){to.prototype.cloneProtected.call(this,t),t.O=-4097&this.O|49152,t.Vh=this.Vh,t.wk=this.wk,t.xq=this.xq,t.Dr=this.Dr,t.rr=this.rr,t.ur=this.ur,t.Fr=this.Fr,t.Er=this.Er,t.Uh=null,t.tr=this.tr,t.sr.assign(this.sr),t.vr=this.vr,t.ie=this.ie,t.Gp=this.Gp,t.Mg.assign(this.Mg),t.Eq=this.Eq,t.Fq=this.Fq.Z(),t.Oq=this.Oq.Z(),t.Hq=this.Hq.Z(),t.Qp=this.Qp,t.yq=this.yq,t.em.assign(this.em),t.dm=this.dm,t.cm=this.cm},es.prototype.Nh=function(t){to.prototype.Nh.call(this,t),t.dl(),t.bm=null,t.Vn=null,t.Wn=null,t.zk=null,t.Bk=null},es.prototype.toString=function(){var t=Ul.rg(Object.getPrototypeOf(this))+"#"+Ul.Uc(this);return null!==this.data&&(t+="("+$u(this.data)+")"),t},es.LayoutNone=0;var Ec;es.LayoutAdded=Ec=1;var Ic;es.LayoutRemoved=Ic=2,es.LayoutShown=4,es.LayoutHidden=8,es.LayoutNodeSized=16;var Rc;es.LayoutGroupLayout=Rc=32,es.LayoutNodeReplaced=64;var Gc;es.LayoutStandard=Gc=Ec|Ic|28|Rc|64,es.LayoutAll=16777215,es.prototype.Lm=function(t,i,e,n,r,o,s){var a=this.g;null!==a&&(t===Ju&&"elements"===i?r instanceof to?ao(r,function(t){Ln(a,t),zn(a,t)}):r instanceof Vo&&Bn(a,r):t===Wu&&"elements"===i&&(r instanceof to?ao(r,function(t){Fn(a,t),qn(a,t)}):r instanceof Vo&&On(a,r)),a.Dc(t,i,e,n,r,o,s))},es.prototype.updateTargetBindings=es.prototype.Nb=function(t){if(to.prototype.Nb.call(this,t),null!==this.data){t=this.ya.n;for(var i=t.length,e=0;i>e;e++){var n=t[e];n instanceof to&&ao(n,function(t){null!==t.data&&t.Nb()})}}},es.prototype.updateRelationshipsFromData=function(){var t=this.data;if(null!==t){var i=this.g;if(null!==i){var e=i.ga;if(e instanceof yi){var n=e.Bm(t),i=i.zG(n),r=this.Ra;i!==r&&(i=null!==r?e.wb(r.data):void 0,r=e.Vo,"function"==typeof r?r(t,i):t[r]=i,e.Fw(t,n))}}}},Ul.u(es,{zv:"adornments"},function(){return null===this.Uh?Jl:this.Uh.RD}),es.prototype.findAdornment=es.prototype.xo=function(t){var i=this.Uh;return null===i?null:i.ta(t)},es.prototype.addAdornment=es.prototype.Kk=function(t,i){if(null!==i){var e=null,n=this.Uh;if(null!==n&&(e=n.ta(t)),e!==i){if(null!==e){var r=e.g;null!==r&&r.remove(e)}null===n&&(this.Uh=n=new g("string",ks)),i.Vh!==t&&(i.Kc=t),n.add(t,i),e=this.g,null!==e&&(e.add(i),i.data=this.data)}}},es.prototype.removeAdornment=es.prototype.ol=function(t){var i=this.Uh;if(null!==i){var e=i.ta(t);if(null!==e){var n=e.g;null!==n&&n.remove(e)}i.remove(t),0===i.count&&(this.Uh=null)}},es.prototype.clearAdornments=es.prototype.ls=function(){var t=this.Uh;if(null!==t){for(var i=Ul.eb(),t=t.i;t.next();)i.push(t.key);for(var t=i.length,e=0;t>e;e++)this.ol(i[e]);Ul.ra(i)}},es.prototype.updateAdornments=function(){var t=this.g;if(null!==t){t:{if(this.Za&&this.dI){var i=this.nt;if(!(null!==i&&this.ba.J()&&this.Ea()&&i.kl()&&i.ba.J()))break t;var e=this.xo("Selection");if(null===e){if(e=this.eI,null===e&&(e=this instanceof Bs?t.sH:this instanceof xa?t.MG:t.HH),!(e instanceof ks))break t;go(e),e=e.copy(),null!==e&&(e.Kc="Selection",e.vc=i)}if(null!==e){var n=e.placeholder;if(null!==n){var r=i.Hi(),o=0;i instanceof Po&&(o=i.hb);var s=Ul.ul();s.m((i.Ha.width+o)*r,(i.Ha.height+o)*r),n.xa=s,Ul.Oj(s)}e.angle=i.Zk(),e.type!==dc&&(n=Ul.K(),e.location=i.lb(iu,n),Ul.v(n)),this.Kk("Selection",e);break t}}this.ol("Selection")}for(ns(this,t),t=this.zv;t.next();)i=t.value,i.Nb(),i.R()}},Ul.u(es,{layer:"layer"},function(){return this.Bu}),Ul.u(es,{g:"diagram"},function(){var t=this.Bu;return null!==t?t.g:null}),Ul.defineProperty(es,{wf:"layerName"},function(){return this.wk},function(t){var i=this.wk;if(i!==t){Ul.j(t,"string",es,"layerName");var e=this.g;if((null===e||null!==e.ws(t)&&!e.Vm)&&(this.wk=t,null!==e&&e.pc(),this.h("layerName",i,t),i=this.layer,null!==i&&i.name!==t&&(e=i.g,null!==e&&(t=e.ws(t),null!==t&&t!==i)))){var n=i.Fe(-1,this,!0);if(n>=0&&e.Dc(Wu,"parts",i,this,null,n,!0),n=t.Eo(99999999,this,!0),n>=0&&e.Dc(Ju,"parts",t,null,this,!0,n),n=this.Rs,null!==n){var r=e.Na;e.Na=!0,n(this,i,t),e.Na=r}}}}),Ul.defineProperty(es,{Rs:"layerChanged"},function(){return this.xq},function(t){var i=this.xq;i!==t&&(null!==t&&Ul.j(t,"function",es,"layerChanged"),this.xq=t,this.h("layerChanged",i,t))}),es.prototype.invalidateAdornments=es.prototype.Zd=function(){var t=this.g;null!==t&&(xn(t),0!==(16384&this.O)!=!0&&(this.O|=16384,t.de()))},Ul.defineProperty(es,{location:"location"},function(){return this.Mg},function(t){var i=this.Mg;if(!(i.L(t)||this instanceof Bs)){t=t.Z();var e=this.g;if(this.Mg=t,!1===Jr(this)){var n=this.Ma,r=t.x-i.x,o=t.y-i.y,s=n.copy();n.m(s.x+r,s.y+o),os(this,!1),n.L(s)||null===e||this.h("position",s,n),null===e||this instanceof ks||this instanceof Bs||(e=this.g.nh,e.bd&&Ne(e,this,"position",s.copy(),n.copy()))}this.h("location",i,t)}}),Ul.u(es,{ec:"locationObject"},function(){if(null===this.zk){var t=this.zz;""!==t?(t=this.je(t),this.zk=null!==t?t:this):this.zk=this instanceof ks&&this.type!==dc&&null!==this.placeholder?this.placeholder:this}return this.zk.visible?this.zk:this}),Ul.defineProperty(es,{AH:"minLocation"},function(){return this.Oq},function(t){var i=this.Oq;i.L(t)||(this.Oq=t=t.Z(),this.h("minLocation",i,t))}),Ul.defineProperty(es,{vH:"maxLocation"},function(){return this.Hq},function(t){var i=this.Hq;i.L(t)||(this.Hq=t=t.Z(),this.h("maxLocation",i,t))}),Ul.defineProperty(es,{zz:"locationObjectName"},function(){return this.Eq},function(t){var i=this.Eq;i!==t&&(this.Eq=t,this.zk=null,Or(this),this.h("locationObjectName",i,t))}),Ul.defineProperty(es,{Ze:"locationSpot"},function(){return this.Fq},function(t){var i=this.Fq;i.L(t)||(this.Fq=t=t.Z(),Or(this),this.h("locationSpot",i,t))}),es.prototype.move=es.prototype.move=function(t){this.position=t},es.prototype.moveTo=es.prototype.moveTo=function(t,i){var e=Ul.fc(t,i);this.move(e),Ul.v(e)},es.prototype.isVisible=es.prototype.Ea=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t&&!t.visible)return!1;if(t=this.Ra,!(null===t||t.be&&t.Ea()))return!1;if(this instanceof Ms){if(t=this.zm(),null!==t&&!t.Vc)return!1;if(t=this.ce,null!==t)return t.Ea()}else if(this instanceof Bs){var i=!0,e=this.g;if(null!==e&&(i=e.qd),e=this.W,null!==e){if(this.Bc&&i&&!e.Vc)return!1;if(e===t)return!0;if(e=e.findVisibleNode(),null===e||e===t)return!1}if(e=this.ca,null!==e){if(this.Bc&&!i&&!e.Vc)return!1;if(e===t)return!0;if(i=e.findVisibleNode(),null===i||i===t)return!1}}return!0},es.prototype.He=function(t){var i=this.g;t?(this.H(4),this.Zd(),null!==i&&i.Xf.add(this)):(this.H(8),this.ls()),null!==i&&(i.pc(),i.ma())},es.prototype.findObject=es.prototype.je=function(t){if(this.name===t)return this;var i=this.Bk;if(null===i&&(this.Bk=i=new n),void 0!==i[t])return i[t];for(var e=this.ya.n,r=e.length,o=0;r>o;o++){var s=e[o];if(s.name===t)return i[t]=s;if(s instanceof to)if(null===s.gi&&null===s.Zf){if(s=s.je(t),null!==s)return i[t]=s}else if(mo(s)&&(s=s.ya.first(),null!==s&&s.name===t))return i[t]=s}return i[t]=null},es.prototype.ensureBounds=es.prototype.pf=function(){Nr(this,1/0,1/0),this.zc()},Hl=es.prototype,Hl.zc=function(){if(this.Jg(),!1===Jr(this))ss(this);else{var t=Ul.Sf();t.assign(this.Xb),Br(this),this.Xb.La();var i=vs(this);this.xi(0,0,this.Pc.width,this.Pc.height);var e=this.position;ls(this,e,this.location);var n=this.Xb;n.x=e.x,n.y=e.y,n.freeze(),this.Jg(),this.sw(t,n),t.L(n)?this.xf(i):!this.Fd()||Au.D(t.width,n.width)&&Au.D(t.height,n.height)||0<=this.BB&&this.H(16),Ul.ic(t),ds(this,!1)}},Hl.sw=function(t,i){Wr(this,!1);var e=this.g;if(null!==e){this.dl();var n=!1,r=t.J();if(!1===e.ei){var o=e.Cd,s=e.padding,a=o.x+s.left,h=o.y+s.top,l=o.width-2*s.right,o=o.height-2*s.bottom;r&&t.x>a&&t.y>h&&t.right<l&&t.bottom<o&&i.x>a&&i.y>h&&i.right<l&&i.bottom<o&&(n=!0)}0!==(65536&this.O)!=!0&&t.L(i)||us(this,n,e),e.ma()}},Hl.dA=function(t,i){if(!t.J()||this instanceof Bs)return!1;var e=this.g;if(null!==e&&!(this instanceof ks)){var n=this.g.nh;n.bd&&Ne(n,this,"position",i.copy(),t.copy())}return null!==e&&!0===e.ha.gb?!0:(e=this.Mg,n=e.copy(),e.m(e.x+(t.x-i.x),e.y+(t.y-i.y)),this.Ma=t,!1===ps(this)&&!1===Jr(this)&&(os(this,!1),this.Jg(),ss(this)),e.L(n)||this.h("location",n,e),!0)},Hl.GE=function(t,i){var e=this.Mg;!1===ps(this)&&!1===Jr(this)?(this.Mg.m(e.x+t-this.Ma.x,e.y+i-this.Ma.y),this.Ma.m(t,i),os(this,!0),this.Jg()):(e.m(0/0,0/0),this.Ma.m(t,i))},Hl.hl=function(){return!0},Hl.Fd=function(){return!0},Ul.defineProperty(es,{Kc:"category"},function(){return this.Vh},function(t){var i=this.Vh;if(i!==t){Ul.j(t,"string",es,"category");var e=this.g,n=this.data,r=null;if(null!==e&&null!==n&&!(this instanceof ks)){var o=e.ga.ha;o.isEnabled&&!o.gb&&(r=this.clone(),r.ya.Td(this.ya))}this.Vh=t,this.h("category",i,t),null===e||null===n||this instanceof ks?(r=this.Lh,null!==r&&(t=r.Uh,null!==t&&t.remove(i),r.Kk(this.Kc,this))):(o=e.ga,o.ha.gb||(this instanceof Bs?(o instanceof yi?o.EE(n,t):o instanceof gi&&o.hI(n,t),e=Un(e,t),null!==e&&(go(e),e=e.copy(),null!==e&&cs(this,e,i,t))):(null!==o&&o.Dw(n,t),e=Rn(e,n,t),null!==e&&(go(e),e=e.copy(),null===e||e instanceof Bs||(e.location=this.location,cs(this,e,i,t)))),null!==r&&(i=this.clone(),i.ya.Td(this.ya),this.h("self",r,i))))}}),Ul.defineProperty(es,{self:"self"},function(){return this},function(t){cs(this,t,this.Kc,t.Kc)});var Vc=!1;es.prototype.canCopy=function(){if(!this.iG)return!1;var t=this.layer;return null===t?!0:t.Ij?(t=t.g,null===t?!0:t.Ij?!0:!1):!1},es.prototype.canDelete=function(){if(!this.pG)return!1;var t=this.layer;return null===t?!0:t.lm?(t=t.g,null===t?!0:t.lm?!0:!1):!1},es.prototype.canEdit=function(){if(!this.uI)return!1;var t=this.layer;return null===t?!0:t.Ev?(t=t.g,null===t?!0:t.Ev?!0:!1):!1},es.prototype.canGroup=function(){if(!this.NG)return!1;var t=this.layer;return null===t?!0:t.Bv?(t=t.g,null===t?!0:t.Bv?!0:!1):!1},es.prototype.canMove=function(){if(!this.FH)return!1;var t=this.layer;return null===t?!0:t.Nk?(t=t.g,null===t?!0:t.Nk?!0:!1):!1},es.prototype.canReshape=function(){if(!this.TH)return!1;var t=this.layer;return null===t?!0:t.Cv?(t=t.g,null===t?!0:t.Cv?!0:!1):!1},es.prototype.canResize=function(){if(!this.UH)return!1;var t=this.layer;return null===t?!0:t.hs?(t=t.g,null===t?!0:t.hs?!0:!1):!1},es.prototype.canRotate=function(){if(!this.XH)return!1;var t=this.layer;return null===t?!0:t.Dv?(t=t.g,null===t?!0:t.Dv?!0:!1):!1},es.prototype.canSelect=function(){if(!this.pl)return!1;var t=this.layer;return null===t?!0:t.of?(t=t.g,null===t?!0:t.of?!0:!1):!1},Ul.defineProperty(es,{iG:"copyable"},function(){return 0!==(1&this.O)},function(t){var i=0!==(1&this.O);i!==t&&(this.O^=1,this.h("copyable",i,t))}),Ul.defineProperty(es,{pG:"deletable"},function(){return 0!==(2&this.O)},function(t){var i=0!==(2&this.O);i!==t&&(this.O^=2,this.h("deletable",i,t))}),Ul.defineProperty(es,{uI:"textEditable"},function(){return 0!==(4&this.O)},function(t){var i=0!==(4&this.O);i!==t&&(this.O^=4,this.h("textEditable",i,t),this.Zd())}),Ul.defineProperty(es,{NG:"groupable"},function(){return 0!==(8&this.O)},function(t){var i=0!==(8&this.O);i!==t&&(this.O^=8,this.h("groupable",i,t))}),Ul.defineProperty(es,{FH:"movable"},function(){return 0!==(16&this.O)},function(t){var i=0!==(16&this.O);i!==t&&(this.O^=16,this.h("movable",i,t))}),Ul.defineProperty(es,{dI:"selectionAdorned"},function(){return 0!==(32&this.O)},function(t){var i=0!==(32&this.O);i!==t&&(this.O^=32,this.h("selectionAdorned",i,t),this.Zd())}),Ul.defineProperty(es,{uz:"isInDocumentBounds"},function(){return 0!==(64&this.O)},function(t){var i=0!==(64&this.O);if(i!==t){this.O^=64;var e=this.g;null!==e&&e.pc(),this.h("isInDocumentBounds",i,t)}}),Ul.defineProperty(es,{OD:"isLayoutPositioned"},function(){return 0!==(128&this.O)},function(t){var i=0!==(128&this.O);i!==t&&(this.O^=128,this.h("isLayoutPositioned",i,t),this.H(t?4:8))}),Ul.defineProperty(es,{pl:"selectable"},function(){return 0!==(256&this.O)},function(t){var i=0!==(256&this.O);i!==t&&(this.O^=256,this.h("selectable",i,t),this.Zd())}),Ul.defineProperty(es,{TH:"reshapable"},function(){return 0!==(512&this.O)},function(t){var i=0!==(512&this.O);i!==t&&(this.O^=512,this.h("reshapable",i,t),this.Zd())}),Ul.defineProperty(es,{UH:"resizable"},function(){return 0!==(1024&this.O)},function(t){var i=0!==(1024&this.O);i!==t&&(this.O^=1024,this.h("resizable",i,t),this.Zd())}),Ul.defineProperty(es,{XH:"rotatable"},function(){return 0!==(2048&this.O)},function(t){var i=0!==(2048&this.O);i!==t&&(this.O^=2048,this.h("rotatable",i,t),this.Zd())}),Ul.defineProperty(es,{Za:"isSelected"},function(){return 0!==(4096&this.O)},function(t){var i=0!==(4096&this.O);if(i!==t){var e=this.g;if(!t||this.canSelect()&&!(null!==e&&e.selection.count>=e.wH)){this.O^=4096;var n=!1;if(null!==e){n=e.cb,e.cb=!0;var r=e.selection;r.La(),t?r.add(this):r.remove(this),r.freeze()}this.h("isSelected",i,t),this.Zd(),t=this.fI,null!==t&&t(this),null!==e&&(e.de(),e.cb=n)}}}),Ul.defineProperty(es,{Wg:"isHighlighted"},function(){return 0!==(524288&this.O)},function(t){var i=0!==(524288&this.O);if(i!==t){this.O^=524288;var e=this.g;null!==e&&(e=e.bw,e.La(),t?e.add(this):e.remove(this),e.freeze()),this.h("isHighlighted",i,t),this.ma()}}),Ul.defineProperty(es,{il:"isShadowed"},function(){return 0!==(8192&this.O)},function(t){var i=0!==(8192&this.O);i!==t&&(this.O^=8192,this.h("isShadowed",i,t),this.ma())}),es.prototype.xf=function(t){this.O=t?131072|this.O:-131073&this.O},Ul.defineProperty(es,{JD:"isAnimated"},function(){return 0!==(262144&this.O)},function(t){var i=0!==(262144&this.O);i!==t&&(this.O^=262144,this.h("isAnimated",i,t))}),Ul.defineProperty(es,{Zz:"selectionObjectName"},function(){return this.Fr},function(t){var i=this.Fr;i!==t&&(this.Fr=t,this.bm=null,this.h("selectionObjectName",i,t))}),Ul.defineProperty(es,{eI:"selectionAdornmentTemplate"},function(){return this.Dr},function(t){var i=this.Dr;i!==t&&(this instanceof Bs&&(t.type=dc),this.Dr=t,this.h("selectionAdornmentTemplate",i,t))}),Ul.u(es,{nt:"selectionObject"},function(){if(null===this.bm){var t=this.Zz;null!==t&&""!==t?(t=this.je(t),this.bm=null!==t?t:this):this instanceof Bs?(t=this.path,this.bm=null!==t?t:this):this.bm=this}return this.bm}),Ul.defineProperty(es,{fI:"selectionChanged"},function(){return this.Er},function(t){var i=this.Er;i!==t&&(null!==t&&Ul.j(t,"function",es,"selectionChanged"),this.Er=t,this.h("selectionChanged",i,t))}),Ul.defineProperty(es,{rE:"resizeAdornmentTemplate"},function(){return this.rr},function(t){var i=this.rr;i!==t&&(this.rr=t,this.h("resizeAdornmentTemplate",i,t))}),Ul.defineProperty(es,{tE:"resizeObjectName"},function(){return this.tr},function(t){var i=this.tr;i!==t&&(this.tr=t,this.Vn=null,this.h("resizeObjectName",i,t))}),Ul.u(es,{sE:"resizeObject"},function(){if(null===this.Vn){var t=this.tE;null!==t&&""!==t?(t=this.je(t),this.Vn=null!==t?t:this):this.Vn=this}return this.Vn}),Ul.defineProperty(es,{VH:"resizeCellSize"},function(){return this.sr},function(t){var i=this.sr;i.L(t)||(this.sr=t=t.Z(),this.h("resizeCellSize",i,t))}),Ul.defineProperty(es,{YH:"rotateAdornmentTemplate"},function(){return this.ur},function(t){var i=this.ur;i!==t&&(this.ur=t,this.h("rotateAdornmentTemplate",i,t))}),Ul.defineProperty(es,{ZH:"rotateObjectName"},function(){return this.vr},function(t){var i=this.vr;i!==t&&(this.vr=t,this.Wn=null,this.h("rotateObjectName",i,t))}),Ul.u(es,{vE:"rotateObject"},function(){if(null===this.Wn){var t=this.ZH;null!==t&&""!==t?(t=this.je(t),this.Wn=null!==t?t:this):this.Wn=this}return this.Wn}),Ul.defineProperty(es,{text:"text"},function(){return this.ie},function(t){var i=this.ie;i!==t&&(this.ie=t,this.h("text",i,t))}),Ul.defineProperty(es,{Ra:"containingGroup"},function(){return this.kk},function(t){if(this.Fd()){var i=this.kk;if(i!==t){null===t||this!==t&&!t.Qh(this)||(this===t&&Ul.k("Cannot make a Group a member of itself: "+this.toString()),Ul.k("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.H(Ic);var e=this.g;if(null!==i?ka(i,this):this instanceof xa&&null!==e&&e.Ik.remove(this),this.kk=t,null!==t?wa(t,this):this instanceof xa&&null!==e&&e.Ik.add(this),this.H(Ec),null!==e){var n=this.data,r=e.ga;null!==n&&r instanceof yi&&r.Fw(n,r.wb(null!==t?t.data:null))}if(n=this.bD,null!==n&&(r=!0,null!==e&&(r=e.Na,e.Na=!0),n(this,i,t),null!==e&&(e.Na=r)),this instanceof xa)for(e=new f(es),Pi(e,this,!0,0,!0),e=e.i;e.next();)if(n=e.value,n instanceof Ms)for(n=n.oe;n.next();)qs(n.value);if(this instanceof Ms)for(n=this.oe;n.next();)qs(n.value);this.h("containingGroup",i,t),null!==t&&t.Jw()}}else Ul.k("cannot set the Part.containingGroup of a Link or Adornment")}),Hl=es.prototype,Hl.dl=function(){var t=this.Ra;null!==t&&(t.R(),null!==t.Pb&&t.Pb.R(),t.sf())},Hl.ma=function(){var t=this.g;null!==t&&!Jr(this)&&!ps(this)&&this.Ea()&&this.Xb.J()&&t.ma(hs(this,this.Xb))},Hl.Js=function(t){var i=this.kk;null===i||t||wa(i,this)},Hl.Ks=function(t){var i=this.kk;null===i||t||ka(i,this)},Hl.xm=function(){var t=this.data;if(null!==t){var i=this.g;null!==i&&(i=i.ga,null!==i&&i.Vz(t))}},Ul.defineProperty(es,{bD:"containingGroupChanged"},function(){return this.Gp},function(t){var i=this.Gp;i!==t&&(null!==t&&Ul.j(t,"function",es,"containingGroupChanged"),this.Gp=t,this.h("containingGroupChanged",i,t))}),es.prototype.findSubGraphLevel=function(){return ms(this,this)},es.prototype.findTopLevelPart=function(){return bs(this,this)},Ul.u(es,{Ho:"isTopLevel"},function(){return null!==this.Ra||this instanceof Ms&&this.tf?!1:!0}),es.prototype.isMemberOf=es.prototype.Qh=function(t){return t instanceof xa?xs(this,this,t):!1},es.prototype.findCommonContainingGroup=es.prototype.yG=function(t){if(null===t)return null;if(this===t)return this instanceof xa?this:null;for(var i=this;null!==i;)i instanceof xa&&gs(i,!0),i=i.Ra;for(var e=null,i=t;null!==i;){if(0!==(1048576&i.O)){e=i;break}i=i.Ra}for(i=this;null!==i;)i instanceof xa&&gs(i,!1),i=i.Ra;return e},Ul.defineProperty(es,{nH:"layoutConditions"},function(){return this.yq},function(t){var i=this.yq;i!==t&&(this.yq=t,this.h("layoutConditions",i,t))}),es.prototype.canLayout=function(){if(!this.OD||!this.Ea())return!1;var t=this.layer;return null!==t&&t.Ac||this instanceof Ms&&this.tf?!1:!0},es.prototype.invalidateLayout=es.prototype.H=function(t){void 0===t&&(t=16777215);var i;if(this.OD&&0!==(t&this.nH)?(i=this.layer,null!==i&&i.Ac||this instanceof Ms&&this.tf?i=!1:(i=this.g,i=null!==i&&i.ha.gb?!1:!0)):i=!1,i)if(i=this.kk,null!==i){var e=i.Qb;null!==e?e.H():i.H(t)}else t=this.g,null!==t&&(e=t.Qb,null!==e&&e.H())},Ul.defineProperty(es,{mD:"dragComputation"},function(){return this.Qp},function(t){var i=this.Qp;i!==t&&(null!==t&&Ul.j(t,"function",es,"dragComputation"),this.Qp=t,this.h("dragComputation",i,t))}),Ul.defineProperty(es,{kI:"shadowOffset"},function(){return this.em},function(t){var i=this.em;i.L(t)||(this.em=t=t.Z(),this.ma(),this.h("shadowOffset",i,t))}),Ul.defineProperty(es,{shadowColor:"shadowColor"},function(){return this.dm},function(t){var i=this.dm;i!==t&&(this.dm=t,this.ma(),this.h("shadowColor",i,t))}),Ul.defineProperty(es,{shadowBlur:"shadowBlur"},function(){return this.cm},function(t){var i=this.cm;i!==t&&(this.cm=t,this.ma(),this.h("shadowBlur",i,t))}),Ul.Ga(ks,es),Ul.fa("Adornment",ks),ks.prototype.toString=function(){var t=this.Lh;return"Adornment("+this.Kc+")"+(null!==t?t.toString():"")},ks.prototype.updateRelationshipsFromData=function(){},ks.prototype.Xs=function(){var t=this.vc.T,i=this.vc;if(t instanceof Bs&&i instanceof Po){var e=t.path,i=e.Pa;t.Xs();for(var i=e.Pa,t=this.ya.n,e=t.length,n=0;e>n;n++){var r=t[n];r.tg&&r instanceof Po&&(r.Pa=i)}}},Ul.u(ks,{placeholder:"placeholder"},function(){return this.Pb}),Ul.defineProperty(ks,{vc:"adornedObject"},function(){return this.Gb},function(t){var i=this.Lh,e=null;null!==t&&(e=t.T),null===i||null!==t&&i===e||i.ol(this.Kc),this.Gb=t,null!==e&&e.Kk(this.Kc,this)}),Ul.u(ks,{Lh:"adornedPart"},function(){var t=this.Gb;return null!==t?t.T:null}),ks.prototype.hl=function(){var t=this.Gb;return null===t?!0:(t=t.T,null===t||!Jr(t))},ks.prototype.Fd=function(){return!1},Ul.u(ks,{Ra:"containingGroup"},function(){return null}),ks.prototype.Lm=function(t,i,e,n,r,o,s){if(t===Ju&&"elements"===i)if(r instanceof Ta){var a=r;null===this.Pb?this.Pb=a:this.Pb!==a&&Ul.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else r instanceof to&&(a=r.vs(function(t){return t instanceof Ta}),a instanceof Ta&&(null===this.Pb?this.Pb=a:this.Pb!==a&&Ul.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")));else t===Wu&&"elements"===i&&null!==this.Pb&&(n===this.Pb?this.Pb=null:n instanceof to&&this.Pb.gl(n)&&(this.Pb=null));es.prototype.Lm.call(this,t,i,e,n,r,o,s)},ks.prototype.updateAdornments=function(){},ks.prototype.xm=function(){},Ul.Ga(Ms,es),Ul.fa("Node",Ms),Ms.prototype.cloneProtected=function(t){es.prototype.cloneProtected.call(this,t),t.Aq=this.Aq,t.Bq=this.Bq,t.xk=this.xk,t.qq=this.qq,t.$r=this.$r,t.Vr=this.Vr,t.rq=this.rq,t.zp=this.zp,t.Ap=this.Ap.Z(),t.kr=this.kr},Ms.prototype.Nh=function(t){es.prototype.Nh.call(this,t),t.sf(),t.oh=this.oh,t.Qd=null};var Hc;Ms.DirectionDefault=Hc=Ul.s(Ms,"DirectionDefault",0),Ms.DirectionAbsolute=Ul.s(Ms,"DirectionAbsolute",1);var Kc;Ms.DirectionRotatedNode=Kc=Ul.s(Ms,"DirectionRotatedNode",2);var Uc;Ms.DirectionRotatedNodeOrthogonal=Uc=Ul.s(Ms,"DirectionRotatedNodeOrthogonal",3),Ms.SpreadingNone=Ul.s(Ms,"SpreadingNone",10);var Yc;Ms.SpreadingEvenly=Yc=Ul.s(Ms,"SpreadingEvenly",11);var Jc;Ms.SpreadingPacked=Jc=Ul.s(Ms,"SpreadingPacked",12),Ms.prototype.Lm=function(t,i,e,n,r,o,s){t===Ju&&"elements"===i?this.Qd=null:t===Wu&&"elements"===i&&(null===this.g?this.Qd=null:n instanceof Mr&&so(this,n,function(t,i){Ds(t,i,!0)})),es.prototype.Lm.call(this,t,i,e,n,r,o,s)},Ms.prototype.invalidateConnectedLinks=Ms.prototype.sf=function(t){void 0===t&&(t=null);for(var i=this.oe;i.next();){var e=i.value;null!==t&&t.contains(e)||(Ts(this,e.od),Ts(this,e.fe),e.Vb())}},Ms.prototype.hl=function(){return!0},Ul.defineProperty(Ms,{NH:"portSpreading"},function(){return this.kr},function(t){var i=this.kr;i!==t&&(this.kr=t,this.h("portSpreading",i,t),t=this.g,null!==t&&t.ha.gb||this.sf())}),Ul.defineProperty(Ms,{TC:"avoidable"},function(){return this.zp},function(t){var i=this.zp;if(i!==t){this.zp=t;var e=this.g;null!==e&&ar(e,this),this.h("avoidable",i,t)}}),Ul.defineProperty(Ms,{RF:"avoidableMargin"},function(){return this.Ap},function(t){"number"==typeof t?t=new j(t):Ul.C(t,j,Ms,"avoidableMargin");var i=this.Ap;if(!i.L(t)){this.Ap=t=t.Z();var e=this.g;null!==e&&ar(e,this),this.h("avoidableMargin",i,t)}}),Ms.prototype.canAvoid=function(){return this.TC&&!this.tf},Ms.prototype.getAvoidableRect=function(t){return t.set(this.ba),t.yv(this.RF),t},Ms.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.Ea();)t=t.Ra;return t},Ms.prototype.He=function(t){es.prototype.He.call(this,t);for(var i=this.oe;i.next();)i.value.He(t)},Ul.u(Ms,{oe:"linksConnected"},function(){return this.hc.i}),Ms.prototype.findLinksConnected=Ms.prototype.qD=function(t){if(void 0===t&&(t=null),null===t)return this.hc.i;var i=new a(this.hc),e=this;return i.Km=function(i){return i.W===e&&i.pg===t||i.ca===e&&i.lh===t},i},Ms.prototype.findLinksOutOf=Ms.prototype.Wv=function(t){void 0===t&&(t=null);var i=new a(this.hc),e=this;return i.Km=function(i){return i.W!==e?!1:null===t?!0:i.pg===t},i},Ms.prototype.findLinksInto=Ms.prototype.og=function(t){void 0===t&&(t=null);var i=new a(this.hc),e=this;return i.Km=function(i){return i.ca!==e?!1:null===t?!0:i.lh===t},i},Ms.prototype.findNodesConnected=Ms.prototype.rD=function(t){void 0===t&&(t=null);for(var i=null,e=null,n=this.hc.i;n.next();){var r=n.value;r.W===this?(null===t||r.pg===t)&&(r=r.ca,null!==i?i.add(r):null!==e&&e!==r?(i=new f(Ms),i.add(e),i.add(r)):e=r):r.ca!==this||null!==t&&r.lh!==t||(r=r.W,null!==i?i.add(r):null!==e&&e!==r?(i=new f(Ms),i.add(e),i.add(r)):e=r)}return null!==i?i.i:null!==e?new s(e):Jl},Ms.prototype.findNodesOutOf=function(t){void 0===t&&(t=null);for(var i=null,e=null,n=this.hc.i;n.next();){var r=n.value;r.W!==this||null!==t&&r.pg!==t||(r=r.ca,null!==i?i.add(r):null!==e&&e!==r?(i=new f(Ms),i.add(e),i.add(r)):e=r)}return null!==i?i.i:null!==e?new s(e):Jl},Ms.prototype.findNodesInto=function(t){void 0===t&&(t=null);for(var i=null,e=null,n=this.hc.i;n.next();){var r=n.value;r.ca!==this||null!==t&&r.lh!==t||(r=r.W,null!==i?i.add(r):null!==e&&e!==r?(i=new f(Ms),i.add(e),i.add(r)):e=r)}return null!==i?i.i:null!==e?new s(e):Jl},Ms.prototype.findLinksBetween=function(t,i,e){void 0===i&&(i=null),void 0===e&&(e=null);var n=new a(this.hc),r=this;return n.Km=function(n){return(n.W!==r||n.ca!==t||null!==i&&n.pg!==i||null!==e&&n.lh!==e)&&(n.W!==t||n.ca!==r||null!==e&&n.pg!==e||null!==i&&n.lh!==i)?!1:!0},n},Ms.prototype.findLinksTo=function(t,i,e){void 0===i&&(i=null),void 0===e&&(e=null);var n=new a(this.hc),r=this;return n.Km=function(n){return n.W!==r||n.ca!==t||null!==i&&n.pg!==i||null!==e&&n.lh===e?!1:!0},n},Ul.defineProperty(Ms,{pH:"linkConnected"},function(){return this.Aq},function(t){var i=this.Aq;i!==t&&(null!==t&&Ul.j(t,"function",Ms,"linkConnected"),this.Aq=t,this.h("linkConnected",i,t))}),Ul.defineProperty(Ms,{qH:"linkDisconnected"},function(){return this.Bq},function(t){var i=this.Bq;i!==t&&(null!==t&&Ul.j(t,"function",Ms,"linkDisconnected"),this.Bq=t,this.h("linkDisconnected",i,t))}),Ul.defineProperty(Ms,{pw:"linkValidation"},function(){return this.xk},function(t){var i=this.xk;i!==t&&(null!==t&&Ul.j(t,"function",Ms,"linkValidation"),this.xk=t,this.h("linkValidation",i,t))}),Ms.prototype.updateRelationshipsFromData=function(){es.prototype.updateRelationshipsFromData.call(this);var t=this.data;if(null!==t){var i=this.g;if(null!==i){var e=i.ga;if(e instanceof gi){var n=e.Cm(t),i=i.Xe(n),r=this.zm();i!==r&&(i=null!==r?e.wb(r.data):void 0,r=e.Wo,"function"==typeof r?r(t,i):t[r]=i,e.ih(t,n))}}}},Ms.prototype.Js=function(t){es.prototype.Js.call(this,t),t||js(this);var i=this.Kn;null===i||t||Es(i,this)},Ms.prototype.Ks=function(t){es.prototype.Ks.call(this,t);var i=this.Kn;null===i||t||null===i.ue||(i.ue.remove(this),i.R())},Ms.prototype.xm=function(){if(0<this.hc.count){var t=this.g;if(null===t)return;for(var i=this.hc.copy().i;i.next();)t.remove(i.value)}this.ce=null,es.prototype.xm.call(this)},Ul.u(Ms,{tf:"isLinkLabel"},function(){return null!==this.Kn}),Ul.defineProperty(Ms,{ce:"labeledLink"},function(){return this.Kn},function(t){var i=this.Kn;if(i!==t){var e=this.g,n=this.data;if(null!==i&&(null!==i.ue&&(i.ue.remove(this),i.R()),null!==e&&null!==n&&!e.ha.gb)){var r=i.data,o=e.ga;if(null!==r&&o instanceof yi){var s=o.wb(n);void 0!==s&&o.mE(r,s)}}this.Kn=t,null!==t&&(Es(t,this),null===e||null===n||e.ha.gb||(r=t.data,o=e.ga,null!==r&&o instanceof yi&&(s=o.wb(n),void 0!==s&&o.Ly(r,s)))),Or(this),this.h("labeledLink",i,t)}}),Ms.prototype.findPort=Ms.prototype.Xk=function(t){if(null===this.Qd){if(""===t&&!1===this.yh)return this;Ns(this)}var i=this.Qd.ta(t);return null!==i||""!==t&&(i=this.Qd.ta(""),null!==i)?i:this},Ul.u(Ms,{port:"port"},function(){return this.Xk("")}),Ul.u(Ms,{ports:"ports"},function(){return null===this.Qd&&Ns(this),this.Qd.RD}),Ms.prototype.isInTreeOf=function(t){if(null===t||t===this)return!1;var i=!0,e=this.g;if(null!==e&&(i=e.qd),e=this,i)for(;e!==t;){for(var i=null,n=e.hc.i;n.next();){var r=n.value;if(r.Bc&&(i=r.W,i!==e&&i!==this))break}if(i===this||null===i||i===e)return!1;e=i}else for(;e!==t;){for(i=null,n=e.hc.i;n.next()&&(r=n.value,!r.Bc||(i=r.ca,i===e||i===this)););if(i===this||null===i||i===e)return!1;e=i}return!0},Ms.prototype.findTreeRoot=function(){var t=!0,i=this.g;if(null!==i&&(t=i.qd),i=this,t)for(;;){for(var t=null,e=i.hc.i;e.next();){var n=e.value;if(n.Bc&&(t=n.W,t!==i&&t!==this))break}if(t===this)return this;if(null===t||t===i)return i;i=t}else for(;;){for(t=null,e=i.hc.i;e.next()&&(n=e.value,!n.Bc||(t=n.ca,t===i||t===this)););if(t===this)return this;if(null===t||t===i)return i;i=t}},Ms.prototype.findCommonTreeParent=function(t){if(null===t)return null;if(this===t)return this;for(var i=this;null!==i;)gs(i,!0),i=i.zm();for(var e=null,i=t;null!==i;){if(0!==(1048576&i.O)){e=i;break}i=i.zm()}for(i=this;null!==i;)gs(i,!1),i=i.zm();return e},Ms.prototype.findTreeParentLink=Ms.prototype.As=function(){var t=!0,i=this.g;if(null!==i&&(t=i.qd),i=this.hc.i,t){for(;i.next();)if(t=i.value,t.Bc&&t.W!==this)return t}else for(;i.next();)if(t=i.value,t.Bc&&t.ca!==this)return t;return null},Ms.prototype.findTreeParentNode=Ms.prototype.zm=function(){var t=this.Fj;if(null===t)return null;if(t instanceof Ms)return t;var i=!0,t=this.g;if(null!==t&&(i=t.qd),t=this.hc.i,i){for(;t.next();)if(i=t.value,i.Bc&&(i=i.W,i!==this))return this.Fj=i}else for(;t.next();)if(i=t.value,i.Bc&&(i=i.ca,i!==this))return this.Fj=i;return this.Fj=null},Ms.prototype.findTreeLevel=function(){return As(this,this)},Ms.prototype.findTreeChildrenLinks=Ms.prototype.Yv=function(){var t=!0,i=this.g;if(null!==i&&(t=i.qd),t){var t=new a(this.hc),e=this;t.Km=function(t){return t.Bc&&t.W===e?!0:!1}}else t=new a(this.hc),e=this,t.Km=function(t){return t.Bc&&t.ca===e?!0:!1};return t},Ms.prototype.findTreeChildrenNodes=Ms.prototype.tD=function(){var t=!0,i=this.g;null!==i&&(t=i.qd);var e=i=null,n=this.hc.i;if(t)for(;n.next();)t=n.value,t.Bc&&t.W===this&&(t=t.ca,null!==i?i.add(t):null!==e&&e!==t?(i=new l(Ms),i.add(e),i.add(t)):e=t);else for(;n.next();)t=n.value,t.Bc&&t.ca===this&&(t=t.W,null!==i?i.add(t):null!==e&&e!==t?(i=new l(Ms),i.add(e),i.add(t)):e=t);return null!==i?i.i:null!==e?new s(e):Jl},Ms.prototype.findTreeParts=function(t){void 0===t&&(t=1/0),Ul.j(t,"number",Ms,"collapseTree:level");var i=new f(es);return Pi(i,this,!1,t,!0),i},Ms.prototype.collapseTree=Ms.prototype.collapseTree=function(t){void 0===t&&(t=1),Ul.ze(t,Ms,"collapseTree:level"),1>t&&(t=1);var i=this.g;if(null!==i&&!i.me){var e=i.Lb;0!==i.ha.Le&&e.ml(),i.me=!0;var e=i.qd,n=new f(Ms);n.add(this),Ls(this,n,e,t,this.Vc),i.me=!1}},Ms.prototype.expandTree=Ms.prototype.expandTree=function(t){void 0===t&&(t=2),Ul.ze(t,Ms,"expandTree:level"),2>t&&(t=2);var i=this.g;if(null!==i&&!i.me){var e=i.Lb;0!==i.ha.Le&&e.ml(),i.me=!0;var n=i.qd,r=new f(Ms);r.add(this),zs(this,r,n,t,this.Vc,e,this),i.me=!1}},Ul.defineProperty(Ms,{Vc:"isTreeExpanded"},function(){return this.qq},function(t){var i=this.qq;if(i!==t){this.qq=t;var e=this.g;if(this.h("isTreeExpanded",i,t),i=this.zI,null!==i){var n=!0;null!==e&&(n=e.Na,e.Na=!0),i(this),null!==e&&(e.Na=n)}t?null===e||e.me||(0!==e.ha.Le&&e.Lb.ml(),e.me=!0,t=e.qd,i=new f(Ms),i.add(this),zs(this,i,t,2,!1,e.Lb,this),e.me=!1):null===e||e.me||(0!==e.ha.Le&&e.Lb.ml(),e.me=!0,t=e.qd,i=new f(Ms),i.add(this),Fs(this,i,t,!0),e.me=!1)}}),Ul.defineProperty(Ms,{kp:"wasTreeExpanded"},function(){return this.$r},function(t){var i=this.$r;i!==t&&(this.$r=t,this.h("wasTreeExpanded",i,t))}),Ul.defineProperty(Ms,{zI:"treeExpandedChanged"},function(){return this.Vr},function(t){var i=this.Vr;i!==t&&(null!==t&&Ul.j(t,"function",Ms,"treeExpandedChanged"),this.Vr=t,this.h("treeExpandedChanged",i,t))}),Ul.defineProperty(Ms,{Ji:"isTreeLeaf"},function(){return this.rq},function(t){var i=this.rq;i!==t&&(this.rq=t,this.h("isTreeLeaf",i,t))}),Ul.Ga(Bs,es),Ul.fa("Link",Bs),Bs.prototype.cloneProtected=function(t){es.prototype.cloneProtected.call(this,t),t.xh=this.xh,t.Yp=this.Yp,t.Jh=this.Jh,t.Ur=this.Ur,t.or=this.or,t.pr=this.pr,t.qr=this.qr,t.sq=this.sq,t.tp=this.tp,t.Hp=this.Hp,t.Kp=this.Kp,t.Lp=this.Lp,t.Yl=this.Yl,t.Kr=this.Kr,t.Q=null!==this.Q?this.Q.copy():null},Bs.prototype.Nh=function(t){es.prototype.Nh.call(this,t),this.xh=t.xh,this.Jh=t.Jh,t.we=null,t.Vb(),t.an=this.an,t.hf=this.hf};var Wc;Bs.Normal=Wc=Ul.s(Bs,"Normal",1),Bs.Orthogonal=Ul.s(Bs,"Orthogonal",2),Bs.AvoidsNodes=Ul.s(Bs,"AvoidsNodes",6);var Xc;Bs.AvoidsNodesStraight=Xc=Ul.s(Bs,"AvoidsNodesStraight",7);var Zc;Bs.None=Zc=Ul.s(Bs,"None",0);var Qc;Bs.Bezier=Qc=Ul.s(Bs,"Bezier",9);
var $c;Bs.JumpGap=$c=Ul.s(Bs,"JumpGap",10);var _c;Bs.JumpOver=_c=Ul.s(Bs,"JumpOver",11);var tp;Bs.End=tp=Ul.s(Bs,"End",17);var ip;Bs.Scale=ip=Ul.s(Bs,"Scale",18);var ep;Bs.Stretch=ep=Ul.s(Bs,"Stretch",19);var np;Bs.OrientAlong=np=Ul.s(Bs,"OrientAlong",21);var rp;Bs.OrientPlus90=rp=Ul.s(Bs,"OrientPlus90",22);var op;Bs.OrientMinus90=op=Ul.s(Bs,"OrientMinus90",23);var sp;Bs.OrientOpposite=sp=Ul.s(Bs,"OrientOpposite",24);var ap;Bs.OrientUpright=ap=Ul.s(Bs,"OrientUpright",25);var hp;Bs.OrientPlus90Upright=hp=Ul.s(Bs,"OrientPlus90Upright",26);var lp;Bs.OrientMinus90Upright=lp=Ul.s(Bs,"OrientMinus90Upright",27);var up;Bs.OrientUpright45=up=Ul.s(Bs,"OrientUpright45",28),Bs.prototype.Ee=function(){this.Q=new ba},Bs.prototype.hl=function(){var t=this.W;if(null!==t){var i=t.findVisibleNode();if(null!==i&&(t=i),Jr(t)||ps(t))return!1}return t=this.ca,null!==t&&(i=t.findVisibleNode(),null!==i&&(t=i),Jr(t)||ps(t))?!1:!0},Bs.prototype.dA=function(){return!1},Bs.prototype.Fd=function(){return!1},Bs.prototype.computeAngle=function(t,i,e){switch(t=0,i){default:case Zc:t=0;break;case np:t=e;break;case rp:t=e+90;break;case op:t=e-90;break;case sp:t=e+180;break;case ap:t=Au.ct(e),t>90&&270>t&&(t-=180);break;case hp:t=Au.ct(e+90),t>90&&270>t&&(t-=180);break;case lp:t=Au.ct(e-90),t>90&&270>t&&(t-=180);break;case up:if(t=Au.ct(e),t>45&&135>t||t>225&&315>t)return 0;t>90&&270>t&&(t-=180)}return Au.ct(t)},Ul.defineProperty(Bs,{W:"fromNode"},function(){return this.Wf},function(t){var i=this.Wf;if(i!==t){var e=this.od;null!==i&&(this.gg!==i&&Cs(i,this,e),oa(this),this.H(Ic)),this.Wf=t,this.di=null,this.Vb();var n=this.g;if(null!==n){var r=this.data,o=n.ga;if(null!==r)if(o instanceof yi){var s=null!==t?t.data:null;o.Ew(r,o.wb(s))}else o instanceof gi&&(s=null!==t?t.data:null,n.qd?o.ih(r,o.wb(s)):(null!==i&&o.ih(i.data,void 0),o.ih(s,o.wb(null!==this.gg?this.gg.data:null))))}r=this.od,o=this.wD,null!==o&&(s=!0,null!==n&&(s=n.Na,n.Na=!0),o(this,e,r),null!==n&&(n.Na=s)),null!==t&&(this.gg!==t&&Ss(t,this,r),ra(this),this.H(Ec)),this.h("fromNode",i,t),qs(this)}}),Ul.defineProperty(Bs,{pg:"fromPortId"},function(){return this.xh},function(t){var i=this.xh;if(i!==t){var e=this.od;null!==e&&Ts(this.W,e),oa(this),this.xh=t;var n=this.od;null!==n&&Ts(this.W,n);var r=this.g;if(null!==r){var o=this.data,s=r.ga;null!==o&&s instanceof yi&&s.aA(o,t)}e!==n&&(this.di=null,this.Vb(),o=this.wD,null!==o&&(s=!0,null!==r&&(s=r.Na,r.Na=!0),o(this,e,n),null!==r&&(r.Na=s))),ra(this),this.h("fromPortId",i,t)}}),Ul.u(Bs,{od:"fromPort"},function(){var t=this.Wf;return null===t?null:t.Xk(this.xh)}),Ul.defineProperty(Bs,{wD:"fromPortChanged"},function(){return this.Yp},function(t){var i=this.Yp;i!==t&&(null!==t&&Ul.j(t,"function",Bs,"fromPortChanged"),this.Yp=t,this.h("fromPortChanged",i,t))}),Ul.defineProperty(Bs,{ca:"toNode"},function(){return this.gg},function(t){var i=this.gg;if(i!==t){var e=this.fe;null!==i&&(this.Wf!==i&&Cs(i,this,e),oa(this),this.H(Ic)),this.gg=t,this.di=null,this.Vb();var n=this.g;if(null!==n){var r=this.data,o=n.ga;if(null!==r)if(o instanceof yi){var s=null!==t?t.data:null;o.Gw(r,o.wb(s))}else o instanceof gi&&(s=null!==t?t.data:null,n.qd?(null!==i&&o.ih(i.data,void 0),o.ih(s,o.wb(null!==this.Wf?this.Wf.data:null))):o.ih(r,o.wb(s)))}r=this.fe,o=this.PE,null!==o&&(s=!0,null!==n&&(s=n.Na,n.Na=!0),o(this,e,r),null!==n&&(n.Na=s)),null!==t&&(this.Wf!==t&&Ss(t,this,r),ra(this),this.H(Ec)),this.h("toNode",i,t),qs(this)}}),Ul.defineProperty(Bs,{lh:"toPortId"},function(){return this.Jh},function(t){var i=this.Jh;if(i!==t){var e=this.fe;null!==e&&Ts(this.ca,e),oa(this),this.Jh=t;var n=this.fe;null!==n&&Ts(this.ca,n);var r=this.g;if(null!==r){var o=this.data,s=r.ga;null!==o&&s instanceof yi&&s.eA(o,t)}e!==n&&(this.di=null,this.Vb(),o=this.PE,null!==o&&(s=!0,null!==r&&(s=r.Na,r.Na=!0),o(this,e,n),null!==r&&(r.Na=s))),ra(this),this.h("toPortId",i,t)}}),Ul.u(Bs,{fe:"toPort"},function(){var t=this.gg;return null===t?null:t.Xk(this.Jh)}),Ul.defineProperty(Bs,{PE:"toPortChanged"},function(){return this.Ur},function(t){var i=this.Ur;i!==t&&(null!==t&&Ul.j(t,"function",Bs,"toPortChanged"),this.Ur=t,this.h("toPortChanged",i,t))}),Ul.defineProperty(Bs,{vb:"fromSpot"},function(){return null!==this.Q?this.Q.cj:tu},function(t){null===this.Q&&this.Ee();var i=this.Q.cj;i.L(t)||(t=t.Z(),this.Q.cj=t,this.h("fromSpot",i,t),this.Vb())}),Ul.defineProperty(Bs,{Yk:"fromEndSegmentLength"},function(){return null!==this.Q?this.Q.aj:0/0},function(t){null===this.Q&&this.Ee();var i=this.Q.aj;i!==t&&(0>t&&Ul.wa(t,">= 0",Bs,"fromEndSegmentLength"),this.Q.aj=t,this.h("fromEndSegmentLength",i,t),this.Vb())}),Ul.defineProperty(Bs,{Es:"fromEndSegmentDirection"},function(){return null!==this.Q?this.Q.$i:Hc},function(t){null===this.Q&&this.Ee();var i=this.Q.$i;i!==t&&(this.Q.$i=t,this.h("fromEndSegmentDirection",i,t),this.Vb())}),Ul.defineProperty(Bs,{Fs:"fromShortLength"},function(){return null!==this.Q?this.Q.bj:0/0},function(t){null===this.Q&&this.Ee();var i=this.Q.bj;i!==t&&(this.Q.bj=t,this.h("fromShortLength",i,t),this.Vb())}),Ul.defineProperty(Bs,{xb:"toSpot"},function(){return null!==this.Q?this.Q.Ej:tu},function(t){null===this.Q&&this.Ee();var i=this.Q.Ej;i.L(t)||(t=t.Z(),this.Q.Ej=t,this.h("toSpot",i,t),this.Vb())}),Ul.defineProperty(Bs,{vl:"toEndSegmentLength"},function(){return null!==this.Q?this.Q.Cj:0/0},function(t){null===this.Q&&this.Ee();var i=this.Q.Cj;i!==t&&(0>t&&Ul.wa(t,">= 0",Bs,"toEndSegmentLength"),this.Q.Cj=t,this.h("toEndSegmentLength",i,t),this.Vb())}),Ul.defineProperty(Bs,{wt:"toEndSegmentDirection"},function(){return null!==this.Q?this.Q.Bj:Hc},function(t){null===this.Q&&this.Ee();var i=this.Q.Bj;i!==t&&(this.Q.Bj=t,this.h("toEndSegmentDirection",i,t),this.Vb())}),Ul.defineProperty(Bs,{yt:"toShortLength"},function(){return null!==this.Q?this.Q.Dj:0/0},function(t){null===this.Q&&this.Ee();var i=this.Q.Dj;i!==t&&(this.Q.Dj=t,this.h("toShortLength",i,t),this.Vb())}),Bs.prototype.dl=function(){var t=this.Ra;null!==t&&this.W!==t&&this.ca!==t&&es.prototype.dl.call(this)},Bs.prototype.getOtherNode=Bs.prototype.hz=function(t){var i=this.W;return t===i?this.ca:i},Bs.prototype.getOtherPort=function(t){var i=this.od;return t===i?this.fe:i},Ul.u(Bs,{GJ:"isLabeledLink"},function(){return null===this.ue?!1:0<this.ue.count}),Ul.u(Bs,{ug:"labelNodes"},function(){return null===this.ue?Jl:this.ue.i}),Bs.prototype.Js=function(t){if(es.prototype.Js.call(this,t),ta(this)&&ea(this,this.ba),!t){t=this.Wf;var i=this.gg;null!==t&&(Ss(t,this,this.od),ra(this)),null!==i&&(Ss(i,this,this.fe),ra(this))}},Bs.prototype.Ks=function(t){if(es.prototype.Ks.call(this,t),ta(this)&&ea(this,this.ba),!t){t=this.Wf;var i=this.gg;null!==t&&(Cs(t,this,this.od),oa(this)),null!==i&&(Cs(i,this,this.fe),oa(this))}},Bs.prototype.xm=function(){if(this.hg=!0,null!==this.ue){var t=this.g;if(null===t)return;for(var i=this.ue.copy().i;i.next();)t.remove(i.value)}i=this.data,null!==i&&(t=this.g,null!==t&&(t=t.ga,t instanceof yi?t.Uz(i):t instanceof gi&&t.ih(i,void 0)))},Bs.prototype.updateRelationshipsFromData=function(){var t=this.data;if(null!==t){var i=this.g;if(null!==i){var e=i.ga;if(e instanceof yi){var n=e.$k(t),r=i.Xe(n),o=this.W;r!==o&&(r=null!==o?e.wb(o.data):void 0,o=e.Ko,"function"==typeof o?o(t,r):t[o]=r,e.Ew(t,n)),n=e.cl(t),r=i.Xe(n),o=this.ca,r!==o&&(r=null!==o?e.wb(o.data):void 0,o=e.Mo,"function"==typeof o?o(t,r):t[o]=r,e.Gw(t,n));var s=e.Pj(t);if(0<s.length||0<this.ug.count){if(1===s.length&&1===this.ug.count&&(i=s[0],n=this.ug.first(),e.wb(n.data)===i))return;var n=(new f).Td(s),a=new f;this.ug.each(function(t){null!==t.data&&(t=e.wb(t.data),void 0!==t&&a.add(t))}),i=a.copy(),i.jE(n),n=n.copy(),n.jE(a),(0<i.count||0<n.count)&&(s.length=0,a.each(function(t){s.push(t)}),i.each(function(i){e.mE(t,i)}),n.each(function(i){e.Ly(t,i)}))}}}}},Bs.prototype.move=Bs.prototype.move=function(t){var i=this.position,e=i.x;for(isNaN(e)&&(e=0),i=i.y,isNaN(i)&&(i=0),e=t.x-e,i=t.y-i,es.prototype.move.call(this,t),this.ll(e,i),t=this.ug;t.next();){var n=t.value,r=n.position;n.moveTo(r.x+e,r.y+i)}},Ul.defineProperty(Bs,{QH:"relinkableFrom"},function(){return this.or},function(t){var i=this.or;i!==t&&(this.or=t,this.h("relinkableFrom",i,t),this.Zd())}),Ul.defineProperty(Bs,{RH:"relinkableTo"},function(){return this.pr},function(t){var i=this.pr;i!==t&&(this.pr=t,this.h("relinkableTo",i,t),this.Zd())}),Bs.prototype.canRelinkFrom=function(){if(!this.QH)return!1;var t=this.layer;return null===t?!0:t.mm?(t=t.g,null===t||t.mm?!0:!1):!1},Bs.prototype.canRelinkTo=function(){if(!this.RH)return!1;var t=this.layer;return null===t?!0:t.mm?(t=t.g,null===t||t.mm?!0:!1):!1},Ul.defineProperty(Bs,{it:"resegmentable"},function(){return this.qr},function(t){var i=this.qr;i!==t&&(this.qr=t,this.h("resegmentable",i,t),this.Zd())}),Ul.defineProperty(Bs,{Bc:"isTreeLink"},function(){return this.sq},function(t){var i=this.sq;i!==t&&(this.sq=t,this.h("isTreeLink",i,t),null!==this.W&&js(this.W),null!==this.ca&&js(this.ca))}),Ul.u(Bs,{path:"path"},function(){var t=this.If();return t instanceof Po?t:null}),Ul.u(Bs,{Mm:"routeBounds"},function(){this.updateRoute();var t=new k,i=1/0,e=1/0,n=this.ka;if(0===n)t.m(0/0,0/0,0,0);else{if(1===n)n=this.l(0),i=Math.min(n.x,i),e=Math.min(n.y,e),t.m(n.x,n.y,0,0);else if(2===n){var r=this.l(0),o=this.l(1),i=Math.min(r.x,o.x),e=Math.min(r.y,o.y);t.m(r.x,r.y,0,0),t.Oi(o)}else if(this.computeCurve()===Qc&&n>=3&&!this.dc)if(r=this.l(0),i=r.x,e=r.y,t.m(i,e,0,0),3===n)n=this.l(1),i=Math.min(n.x,i),e=Math.min(n.y,e),o=this.l(2),i=Math.min(o.x,i),e=Math.min(o.y,e),Au.oo(r.x,r.y,n.x,n.y,n.x,n.y,o.x,o.y,.5,t);else for(var s=3;n>s;s+=3){var a=this.l(s-2);s+3>=n&&(s=n-1);var h=this.l(s-1),o=this.l(s);Au.oo(r.x,r.y,a.x,a.y,h.x,h.y,o.x,o.y,.5,t),i=Math.min(o.x,i),e=Math.min(o.y,e),r=o}else for(r=this.l(0),o=this.l(1),i=Math.min(r.x,o.x),e=Math.min(r.y,o.y),t.m(r.x,r.y,0,0),t.Oi(o),s=2;n>s;s++)r=this.l(s),i=Math.min(r.x,i),e=Math.min(r.y,e),t.Oi(r);this.Dy.m(i-t.x,e-t.y)}return this.py=t}),Ul.u(Bs,{XD:"midPoint"},function(){return this.updateRoute(),this.computeMidPoint(new m)}),Bs.prototype.computeMidPoint=function(t){var i=this.ka;if(0===i)return t.assign(Au.gF),t;if(1===i)return t.assign(this.l(0)),t;if(2===i){var e=this.l(0),n=this.l(1);return t.m((e.x+n.x)/2,(e.y+n.y)/2),t}if(this.computeCurve()===Qc&&i>=3&&!this.dc){if(3===i)return this.l(1);var i=(i-1)/3|0,r=3*(i/2|0);return 1===i%2?(e=this.l(r),n=this.l(r+1),i=this.l(r+2),r=this.l(r+3),Au.UF(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y,t)):t.assign(this.l(r)),t}for(var r=0,o=Ul.eb(),s=0;i-1>s;s++)e=0,e=this.l(s),n=this.l(s+1),Au.mb(e.x,n.x)?(e=n.y-e.y,0>e&&(e=-e)):Au.mb(e.y,n.y)?(e=n.x-e.x,0>e&&(e=-e)):e=Math.sqrt(e.Lj(n)),o.push(e),r+=e;for(n=s=e=0;r/2>e&&i>s&&(n=o[s],!(e+n>r/2));)e+=n,s++;return Ul.ra(o),i=this.l(s),o=this.l(s+1),i.x===o.x?i.y>o.y?t.m(i.x,i.y-(r/2-e)):t.m(i.x,i.y+(r/2-e)):i.y===o.y?i.x>o.x?t.m(i.x-(r/2-e),i.y):t.m(i.x+(r/2-e),i.y):(r=(r/2-e)/n,t.m(i.x+r*(o.x-i.x),i.y+r*(o.y-i.y))),t},Ul.u(Bs,{WD:"midAngle"},function(){return this.updateRoute(),this.computeMidAngle()}),Bs.prototype.computeMidAngle=function(){var t=this.ka;if(2>t)return 0/0;if(this.computeCurve()===Qc&&t>=4&&!this.dc){var i=(t-1)/3|0,e=3*(i/2|0);if(1===i%2){var e=Math.floor(e),t=this.l(e),i=this.l(e+1),n=this.l(e+2),e=this.l(e+3);return Au.TF(t.x,t.y,i.x,i.y,n.x,n.y,e.x,e.y)}if(e>0&&t>e+1)return t=this.l(e-1),i=this.l(e+1),t.Fi(i)}if(n=t/2|0,0===t%2)return t=this.l(n-1),i=this.l(n),t.Fi(i);var t=this.l(n-1),i=this.l(n),n=this.l(n+1),e=t.Lj(i),r=i.Lj(n);return e>r?t.Fi(i):i.Fi(n)},Ul.defineProperty(Bs,{points:"points"},function(){return this.Qc},function(t){var i=this.Qc;if(i!==t){var e=null;if(Array.isArray(t)){var n=0===t.length%2;if(n)for(var r=0;r<t.length;r++)if("number"!=typeof t[r]||isNaN(t[r])){n=!1;break}if(n)for(e=new l(m),n=0;n<t.length/2;n++)r=new m(t[2*n],t[2*n+1]).freeze(),e.add(r);else{for(var o=!0,n=0;n<t.length;n++)if(r=t[n],!Ul.Sa(r)||"number"!=typeof r.x||isNaN(r.x)||"number"!=typeof r.y||isNaN(r.y)){o=!1;break}if(o)for(e=new l(m),n=0;n<t.length;n++)r=t[n],e.add(new m(r.x,r.y).freeze());else Ul.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+t)}}else if(t instanceof l)for(e=t.copy(),t=e.i;t.next();)t.value.freeze();else Ul.k("Link.points value is not an instance of List or Array: "+t);e.freeze(),this.Qc=e,this.le(),Is(this),this.g&&this.g.Lb.bd&&(this.Xn=e),this.h("points",i,e)}}),Ul.u(Bs,{ka:"pointsCount"},function(){return this.Qc.count}),Bs.prototype.getPoint=Bs.prototype.l=function(t){return this.Qc.n[t]},Bs.prototype.setPoint=Bs.prototype.yf=function(t,i){null===this.we&&Ul.k("Call Link.startRoute before modifying the points of the route."),this.Qc.Bg(t,i)},Bs.prototype.setPointAt=Bs.prototype.V=function(t,i,e){null===this.we&&Ul.k("Call Link.startRoute before modifying the points of the route."),this.Qc.Bg(t,new m(i,e))},Bs.prototype.insertPoint=function(t,i){null===this.we&&Ul.k("Call Link.startRoute before modifying the points of the route."),this.Qc.Yd(t,i)},Bs.prototype.insertPointAt=Bs.prototype.w=function(t,i,e){null===this.we&&Ul.k("Call Link.startRoute before modifying the points of the route."),this.Qc.Yd(t,new m(i,e))},Bs.prototype.addPoint=Bs.prototype.Kh=function(t){null===this.we&&Ul.k("Call Link.startRoute before modifying the points of the route."),this.Qc.add(t)},Bs.prototype.addPointAt=Bs.prototype.Lk=function(t,i){null===this.we&&Ul.k("Call Link.startRoute before modifying the points of the route."),this.Qc.add(new m(t,i))},Bs.prototype.removePoint=Bs.prototype.nE=function(t){null===this.we&&Ul.k("Call Link.startRoute before modifying the points of the route."),this.Qc.jd(t)},Bs.prototype.clearPoints=Bs.prototype.so=function(){null===this.we&&Ul.k("Call Link.startRoute before modifying the points of the route."),this.Qc.clear()},Bs.prototype.movePoints=Bs.prototype.ll=function(t,i){for(var e=new l(m),n=this.Qc.i;n.next();){var r=n.value;e.add(new m(r.x+t,r.y+i).freeze())}e.freeze(),n=this.Qc,this.Qc=e,this.le(),Is(this),this.g&&this.g.Lb.bd&&(this.Xn=e),this.h("points",n,e)},Bs.prototype.startRoute=Bs.prototype.rl=function(){null===this.we&&(this.we=this.Qc,this.Qc=this.Qc.copy())},Bs.prototype.commitRoute=Bs.prototype.Bi=function(){if(null!==this.we){for(var t=this.we,i=this.Qc,e=1/0,n=1/0,r=t.n,o=r.length,s=0;o>s;s++)var a=r[s],e=Math.min(a.x,e),n=Math.min(a.y,n);for(var h=1/0,l=1/0,u=i.n,f=u.length,s=0;f>s;s++)a=u[s],h=Math.min(a.x,h),l=Math.min(a.y,l),a.freeze();if(i.freeze(),f===o){for(s=0;f>s;s++)if(o=r[s],a=u[s],o.x-e!==a.x-h||o.y-n!==a.y-l){this.le();break}}else this.le();this.we=null,this.g&&this.g.Lb.bd&&(this.Xn=i),Is(this),this.h("points",t,i)}},Bs.prototype.rollbackRoute=Bs.prototype.WH=function(){null!==this.we&&(this.Qc=this.we,this.we=null)},Bs.prototype.invalidateRoute=Bs.prototype.Vb=function(){if(!(this.zy||this.g&&this.g.ha.gb)){var t=this.path;null!==t&&(this.hg=!1,this.le(),t.R())}},Ul.defineProperty(Bs,{ip:null},function(){return this.zy},function(t){this.zy=t}),Bs.prototype.updateRoute=function(){if(!this.hg&&!this.jx){var t=!0;try{this.jx=!0,this.rl(),t=this.computePoints()}finally{this.jx=!1,t?this.Bi():this.WH()}}},Bs.prototype.computePoints=function(){var t=this.g;if(null===t)return!1;var i=this.W,e=null;if(null===i?(t.Zl||(t.Xu=new Po,t.Xu.xa=Au.op,t.Xu.hb=0,t.Zl=new Ms,t.Zl.add(t.Xu),t.Zl.pf()),this.jn&&(t.Zl.position=t.Zl.location=this.jn,t.Zl.pf(),i=t.Zl,e=t.Xu)):e=this.od,null!==e){var n=Xr(e);n!==i&&i.Ea()?e=n:(n=i.findVisibleNode(),null!==n&&n!==i?(i=n,e=n.Xk("")):i=n)}if(this.oC=i,null===i||null===e||!i.location.J())return!1;var n=this.ca,r=null;if(null===n?(t.$l||(t.Yu=new Po,t.Yu.xa=Au.op,t.Yu.hb=0,t.$l=new Ms,t.$l.add(t.Yu),t.$l.pf()),this.nn&&(t.$l.position=t.$l.location=this.nn,t.$l.pf(),n=t.$l,r=t.Yu)):r=this.fe,null!==r&&(t=Xr(r),t!==n&&n.Ea()?r=t:(t=n.findVisibleNode(),null!==t&&t!==n?(n=t,r=t.Xk("")):n=t)),this.qC=n,null===n||null===r||!n.location.J())return!1;var t=this.ka,o=Vs(this,e),s=Hs(this,r),a=e===r&&null!==e,h=this.dc,l=this.Ve===Qc;this.di=a&&!h?l=!0:!1;var u=this.es===Zc||a;if(h||o!==_l||s!==_l||a){l=this.el,u&&(h&&l||a)&&this.so();var f=a?this.computeCurviness():0,c=this.getLinkPoint(i,e,o,!0,h,n,r),p=0,d=0,y=0;if(h||o!==_l||a){var v=this.computeEndSegmentLength(i,e,o,!0),y=this.getLinkDirection(i,e,c,o,!0,h,n,r);if(a&&(y-=h?90:30,0>f&&(y-=180)),0>y?y+=360:y>=360&&(y-=360),a&&(v+=Math.abs(f)),0===y?p=v:90===y?d=v:180===y?p=-v:270===y?d=-v:(p=v*Math.cos(y*Math.PI/180),d=v*Math.sin(y*Math.PI/180)),o.ne()&&a){var g=e.lb(ou,Ul.K()),b=Ul.fc(g.x+1e3*p,g.y+1e3*d);this.getLinkPointFromPoint(i,e,g,b,!0,c),Ul.v(g),Ul.v(b)}}var v=this.getLinkPoint(n,r,s,!1,h,i,e),x=0,w=0,k=0;(h||s!==_l||a)&&(g=this.computeEndSegmentLength(n,r,s,!1),k=this.getLinkDirection(n,r,v,s,!1,h,i,e),a&&(k+=h?0:30,0>f&&(k+=180)),0>k?k+=360:k>=360&&(k-=360),a&&(g+=Math.abs(f)),0===k?x=g:90===k?w=g:180===k?x=-g:270===k?w=-g:(x=g*Math.cos(k*Math.PI/180),w=g*Math.sin(k*Math.PI/180)),s.ne()&&a&&(g=r.lb(ou,Ul.K()),b=Ul.fc(g.x+1e3*x,g.y+1e3*w),this.getLinkPointFromPoint(n,r,g,b,!1,v),Ul.v(g),Ul.v(b))),r=c,(h||o!==_l||a)&&(r=new m(c.x+p,c.y+d)),e=v,(h||s!==_l||a)&&(e=new m(v.x+x,v.y+w)),!u&&!h&&o===_l&&t>3&&this.adjustPoints(0,c,t-2,e)?this.yf(t-1,v):!u&&!h&&s===_l&&t>3&&this.adjustPoints(1,r,t-1,v)?this.yf(0,c):!u&&!h&&t>4&&this.adjustPoints(1,r,t-2,e)?(this.yf(0,c),this.yf(t-1,v)):!u&&h&&t>=6&&!l&&this.adjustPoints(1,r,t-2,e)?(this.yf(0,c),this.yf(t-1,v)):(this.so(),this.Kh(c),(h||o!==_l||a)&&this.Kh(r),h&&this.addOrthoPoints(r,y,e,k,i,n),(h||s!==_l||a)&&this.Kh(e),this.Kh(v))}else o=!1,!u&&t>=3&&(u=this.getLinkPoint(i,e,_l,!0,!1,n,r),s=this.getLinkPoint(n,r,_l,!1,!1,i,e),o=this.adjustPoints(0,u,t-1,s))&&(u=this.getLinkPoint(i,e,_l,!0,!1,n,r),s=this.getLinkPoint(n,r,_l,!1,!1,i,e),this.adjustPoints(0,u,t-1,s)),o||(this.so(),l?(t=this.getLinkPoint(i,e,_l,!0,!1,n,r),u=this.getLinkPoint(n,r,_l,!1,!1,i,e),o=u.x-t.x,s=u.y-t.y,a=this.computeCurviness(),l=h=0,c=t.x+o/3,y=t.y+s/3,p=c,d=y,Au.D(s,0)?d=o>0?d-a:d+a:(h=-o/s,l=Math.sqrt(a*a/(h*h+1)),0>a&&(l=-l),p=(0>s?-1:1)*l+c,d=h*(p-c)+y),c=t.x+2*o/3,y=t.y+2*s/3,v=c,x=y,Au.D(s,0)?x=o>0?x-a:x+a:(v=(0>s?-1:1)*l+c,x=h*(v-c)+y),this.so(),this.Kh(t),this.Lk(p,d),this.Lk(v,x),this.Kh(u),this.yf(0,this.getLinkPoint(i,e,_l,!0,!1,n,r)),this.yf(3,this.getLinkPoint(n,r,_l,!1,!1,i,e))):(t=n,n=this.getLinkPoint(i,e,_l,!0,!1,t,r),r=this.getLinkPoint(t,r,_l,!1,!1,i,e),this.hasCurviness()?(s=r.x-n.x,i=r.y-n.y,e=this.computeCurviness(),t=n.x+s/2,u=n.y+i/2,o=t,a=u,Au.D(i,0)?a=s>0?a-e:a+e:(s=-s/i,o=Math.sqrt(e*e/(s*s+1)),0>e&&(o=-o),o=(0>i?-1:1)*o+t,a=s*(o-t)+u),this.Kh(n),this.Lk(o,a)):this.Kh(n),this.Kh(r)));return!0},Bs.prototype.getLinkPointFromPoint=function(t,i,e,n,r,o){if(void 0===o&&(o=new m),null===t||null===i)return o.assign(e),o;t.Ea()||(r=t.findVisibleNode(),null!==r&&r!==t&&(i=r.port));var s=r=0,a=0,h=0;if(t=null,r=i.S,null===r||r.Tf()||(r=r.S),null===r)r=n.x,s=n.y,a=e.x,h=e.y;else{t=r.Ff,r=1/(t.m11*t.m22-t.m12*t.m21);var a=t.m22*r,h=-t.m12*r,l=-t.m21*r,u=t.m11*r,f=r*(t.m21*t.dy-t.m22*t.dx),c=r*(t.m12*t.dx-t.m11*t.dy);r=n.x*a+n.y*l+f,s=n.x*h+n.y*u+c,a=e.x*a+e.y*l+f,h=e.x*h+e.y*u+c}return i.Co(r,s,a,h,o),null!==t&&o.transform(t),o},Bs.prototype.getLinkPoint=function(t,i,e,n,r,o,s,a){if(void 0===a&&(a=new m),e.pd())return i.lb(e,a),a;if(e.Go()&&(e=Gs(this,i),null!==e)){if(a.assign(e.Lo),r&&this.zw===Xc){var h=Gs(this,s);if(e.vm<h.vm){e=Ul.K();var h=Ul.K(),l=new k(i.lb(iu,e),i.lb(lu,h)),u=this.computeSpot(!n);t=this.getLinkPoint(o,s,u,!n,r,t,i,h),t.x>=l.x&&t.x<=l.x+l.width?a.x=t.x:t.y>=l.y&&t.y<=l.y+l.height&&(a.y=t.y),Ul.v(e),Ul.v(h)}}return a}return o=i.lb(ou,Ul.K()),h=e=null,this.ka>(r?6:2)?(h=this.l(n?1:this.ka-2),r&&(h=Rs(o,h.copy()))):(e=Ul.K(),h=s.lb(ou,e),r&&(h=Rs(o,h))),this.getLinkPointFromPoint(t,i,o,h,n,a),Ul.v(o),null!==e&&Ul.v(e),a},Bs.prototype.getLinkDirection=function(t,i,e,n,r,o,s,a){t:if(n.pd())e=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:.5>n.x?225:.5<n.x?45:0;else{if(n.Go()){var h=Gs(this,i);if(null!==h)switch(h.ee){case Ul.Xc:e=270;break t;case Ul.Fc:e=180;break t;default:case Ul.Oc:e=0;break t;case Ul.Nc:e=90;break t}}var h=i.lb(ou,Ul.K()),l=null,u=null;this.ka>(o?6:2)?(u=this.l(r?1:this.ka-2),u=o?Rs(h,u.copy()):e):(l=Ul.K(),u=a.lb(ou,l)),e=0,e=Math.abs(u.x-h.x)>Math.abs(u.y-h.y)?u.x>=h.x?0:180:u.y>=h.y?90:270,Ul.v(h),null!==l&&Ul.v(l)}switch(n.ne()&&s.Qh(t)&&(e+=180,e>=360&&(e-=360)),t=Hc,t=r?this.Es:this.wt,t===Hc&&(t=r?i.Es:i.wt),t){case Kc:i=i.Zk(),e+=i,e>=360&&(e-=360);break;case Hc:case Uc:if(i=i.Zk(),0===i)break;i>=45&&135>i?e+=90:i>=135&&225>i?e+=180:i>=225&&315>i&&(e+=270),e>=360&&(e-=360)}return e},Bs.prototype.computeEndSegmentLength=function(t,i,e,n){return null!==i&&e.Go()&&(t=Gs(this,i),null!==t)?t.Sv:(t=0/0,t=n?this.Yk:this.vl,null!==i&&isNaN(t)&&(t=n?i.Yk:i.vl),isNaN(t)&&(t=10),t)},Bs.prototype.computeSpot=function(t){return t?Vs(this,this.od):Hs(this,this.fe)},Bs.prototype.computeOtherPoint=function(t,i){var e,n=i.lb(ou);return e=i.jr,e=null!==e?ga(e,this):null,null!==e&&(n=e.Lo),n},Bs.prototype.computeShortLength=function(t){return t?Ks(this):Us(this)},Bs.prototype.Nj=function(t,i,e,n,r,o){if(!1===this.Ag)return!1;void 0===i&&(i=null),void 0===e&&(e=null);var s=o;if(void 0===o&&(s=Ul.jh(),s.reset()),s.multiply(this.transform),this.sm(t,s))return co(this,i,e,r),void 0===o&&Ul.Ye(s),!0;if(this.sg(t,s)){var a=!1;if(!this.Kg)for(var h=this.ya.n,l=h.length;l--;){var u=h[l];if(u.visible||u===this.ec){var f=u.ba,c=this.Ha;if(!(f.x>c.width||f.y>c.height||0>f.x+f.width||0>f.y+f.height)){if(f=Ul.jh(),f.set(s),u instanceof to)a=u.Nj(t,i,e,n,r,f);else if(this.path===u){var a=u,p=t,d=n,c=f;if(!1===a.Ag)a=!1;else if(c.multiply(a.transform),d)t:{var y=p,v=c;if(a.sm(y,v))a=!0;else{if(void 0===v&&(v=a.transform,y.Kj(a.ba))){a=!0;break t}var c=y.left,p=y.right,d=y.top,y=y.bottom,g=Ul.K(),m=Ul.K(),b=Ul.K(),x=Ul.jh();x.set(v),x.aE(a.transform),x.oz(),m.x=p,m.y=d,m.transform(x),g.x=c,g.y=d,g.transform(x),v=!1,Ao(a,g,m,b)?v=!0:(g.x=p,g.y=y,g.transform(x),Ao(a,g,m,b)?v=!0:(m.x=c,m.y=y,m.transform(x),Ao(a,g,m,b)?v=!0:(g.x=c,g.y=d,g.transform(x),Ao(a,g,m,b)&&(v=!0)))),Ul.Ye(x),Ul.v(g),Ul.v(m),Ul.v(b),a=v}}else a=a.sm(p,c)}else a=jr(u,t,n,f);a&&(null!==i&&(u=i(u)),u&&(null===e||e(u))&&r.add(u)),Ul.Ye(f)}}}return void 0===o&&Ul.Ye(s),a||null!==this.background||null!==this.nm}return void 0===o&&Ul.Ye(s),!1},Ul.u(Bs,{dc:"isOrthogonal"},function(){return 2===(2&this.Yl.value)}),Ul.u(Bs,{el:"isAvoiding"},function(){return 4===(4&this.Yl.value)}),Bs.prototype.computeCurve=function(){if(null===this.di){var t=this.od,i=this.dc;this.di=null!==t&&t===this.fe&&!i}return this.di?Qc:this.Ve},Bs.prototype.computeCorner=function(){if(this.Ve===Qc)return 0;var t=this.Yy;return(isNaN(t)||0>t)&&(t=10),t},Bs.prototype.computeCurviness=function(){var t=this.Ov;if(isNaN(t)){var i=this.hf;if(0!==i){var t=10,e=this.g;null!==e&&(t=e.ow),e=Math.abs(i),t=t/2+((e-1)/2|0)*t,0===e%2&&(t=-t),0>i&&(t=-t)}else t=10}return t},Bs.prototype.computeThickness=function(){var t=this.path;return null!==t?Math.max(t.hb,1):1},Bs.prototype.hasCurviness=function(){return!isNaN(this.Ov)||0!==this.hf&&!this.dc},Bs.prototype.adjustPoints=function(t,i,e,n){var r=this.es;if(this.dc){if(r===ip)return!1;r===ep&&(r=tp)}switch(r){case ip:var o=this.l(t),s=this.l(e);if(!o.L(i)||!s.L(n)){var r=o.x,o=o.y,a=s.x-r,h=s.y-o,l=Math.sqrt(a*a+h*h);if(!Au.D(l,0)){var u=0;Au.D(a,0)?u=0>h?-Math.PI/2:Math.PI/2:(u=Math.atan(h/Math.abs(a)),0>a&&(u=Math.PI-u));var s=i.x,f=i.y,h=n.x-s,c=n.y-f,p=Math.sqrt(h*h+c*c),a=0;for(Au.D(h,0)?a=0>c?-Math.PI/2:Math.PI/2:(a=Math.atan(c/Math.abs(h)),0>h&&(a=Math.PI-a)),l=p/l,u=a-u,this.yf(t,i),t+=1;e>t;t++)i=this.l(t),a=i.x-r,h=i.y-o,i=Math.sqrt(a*a+h*h),Au.D(i,0)||(c=0,Au.D(a,0)?c=0>h?-Math.PI/2:Math.PI/2:(c=Math.atan(h/Math.abs(a)),0>a&&(c=Math.PI-c)),a=c+u,i*=l,this.V(t,s+i*Math.cos(a),f+i*Math.sin(a)));this.yf(e,n)}}return!0;case ep:if(o=this.l(t),f=this.l(e),!o.L(i)||!f.L(n)){var r=o.x,o=o.y,s=f.x,f=f.y,l=(s-r)*(s-r)+(f-o)*(f-o),a=i.x,u=i.y,h=n.x,c=n.y,p=0,d=1,p=0!==h-a?(c-u)/(h-a):9e9;for(0!==p&&(d=Math.sqrt(1+1/(p*p))),this.yf(t,i),t+=1;e>t;t++){i=this.l(t);var y=i.x,v=i.y,g=.5;0!==l&&(g=((r-y)*(r-s)+(o-v)*(o-f))/l);var m=r+g*(s-r),b=o+g*(f-o);i=Math.sqrt((y-m)*(y-m)+(v-b)*(v-b)),p*(y-m)+b>v&&(i=-i),p>0&&(i=-i),y=a+g*(h-a),g=u+g*(c-u),0!==p?(i=y+i/d,this.V(t,i,g-(i-y)/p)):this.V(t,y,g+i)}this.yf(e,n)}return!0;case tp:return this.dc&&(r=this.l(t),o=this.l(t+1),s=this.l(t+2),Au.D(r.y,o.y)?Au.D(o.x,s.x)?this.V(t+1,o.x,i.y):Au.D(o.y,s.y)&&this.V(t+1,i.x,o.y):Au.D(r.x,o.x)&&(Au.D(o.y,s.y)?this.V(t+1,i.x,o.y):Au.D(o.x,s.x)&&this.V(t+1,o.x,i.y)),r=this.l(e),o=this.l(e-1),s=this.l(e-2),Au.D(r.y,o.y)?Au.D(o.x,s.x)?this.V(e-1,o.x,n.y):Au.D(o.y,s.y)&&this.V(e-1,n.x,o.y):Au.D(r.x,o.x)&&(Au.D(o.y,s.y)?this.V(e-1,n.x,o.y):Au.D(o.x,s.x)&&this.V(e-1,o.x,n.y))),this.yf(t,i),this.yf(e,n),!0;default:return!1}},Bs.prototype.addOrthoPoints=function(t,i,e,n,r,o){i=i>=-45&&45>i?0:i>=45&&135>i?90:i>=135&&225>i?180:270,n=n>=-45&&45>n?0:n>=45&&135>n?90:n>=135&&225>n?180:270;var s=r.ba.copy(),a=o.ba.copy();if(s.J()&&a.J()){s.Jf(8,8),a.Jf(8,8),s.Oi(t),a.Oi(e);var h,l;0===i?e.x>t.x||270===n&&e.y<t.y&&a.right>t.x||90===n&&e.y>t.y&&a.right>t.x?(h=new m(e.x,t.y),l=new m(e.x,(t.y+e.y)/2),180===n?(h.x=this.computeMidOrthoPosition(t.x,e.x,!1),l.x=h.x,l.y=e.y):270===n&&e.y<t.y||90===n&&e.y>t.y?(h.x=t.x<a.left?this.computeMidOrthoPosition(t.x,a.left,!1):t.x<a.right&&(270===n&&t.y<a.top||90===n&&t.y>a.bottom)?this.computeMidOrthoPosition(t.x,e.x,!1):a.right,l.x=h.x,l.y=e.y):0===n&&t.x<a.left&&t.y>a.top&&t.y<a.bottom&&(h.x=t.x,h.y=t.y<e.y?Math.min(e.y,a.top):Math.max(e.y,a.bottom),l.y=h.y)):(h=new m(t.x,e.y),l=new m((t.x+e.x)/2,e.y),(180===n||90===n&&e.y<s.top||270===n&&e.y>s.bottom)&&(180===n&&(a.Aa(t)||s.Aa(e))?h.y=this.computeMidOrthoPosition(t.y,e.y,!0):e.y<t.y&&(180===n||90===n)?h.y=this.computeMidOrthoPosition(s.top,Math.max(e.y,a.bottom),!0):e.y>t.y&&(180===n||270===n)&&(h.y=this.computeMidOrthoPosition(s.bottom,Math.min(e.y,a.top),!0)),l.x=e.x,l.y=h.y),h.y>s.top&&h.y<s.bottom&&(e.x>=s.left&&e.x<=t.x||t.x<=a.right&&t.x>=e.x?(90===n||270===n)&&(h=new m(Math.max((t.x+e.x)/2,t.x),t.y),l=new m(h.x,e.y)):(h.y=270===n||(0===n||180===n)&&e.y<t.y?Math.min(e.y,0===n?s.top:Math.min(s.top,a.top)):Math.max(e.y,0===n?s.bottom:Math.max(s.bottom,a.bottom)),l.x=e.x,l.y=h.y))):180===i?e.x<t.x||270===n&&e.y<t.y&&a.left<t.x||90===n&&e.y>t.y&&a.left<t.x?(h=new m(e.x,t.y),l=new m(e.x,(t.y+e.y)/2),0===n?(h.x=this.computeMidOrthoPosition(t.x,e.x,!1),l.x=h.x,l.y=e.y):270===n&&e.y<t.y||90===n&&e.y>t.y?(h.x=t.x>a.right?this.computeMidOrthoPosition(t.x,a.right,!1):t.x>a.left&&(270===n&&t.y<a.top||90===n&&t.y>a.bottom)?this.computeMidOrthoPosition(t.x,e.x,!1):a.left,l.x=h.x,l.y=e.y):180===n&&t.x>a.right&&t.y>a.top&&t.y<a.bottom&&(h.x=t.x,h.y=t.y<e.y?Math.min(e.y,a.top):Math.max(e.y,a.bottom),l.y=h.y)):(h=new m(t.x,e.y),l=new m((t.x+e.x)/2,e.y),(0===n||90===n&&e.y<s.top||270===n&&e.y>s.bottom)&&(0===n&&(a.Aa(t)||s.Aa(e))?h.y=this.computeMidOrthoPosition(t.y,e.y,!0):e.y<t.y&&(0===n||90===n)?h.y=this.computeMidOrthoPosition(s.top,Math.max(e.y,a.bottom),!0):e.y>t.y&&(0===n||270===n)&&(h.y=this.computeMidOrthoPosition(s.bottom,Math.min(e.y,a.top),!0)),l.x=e.x,l.y=h.y),h.y>s.top&&h.y<s.bottom&&(e.x<=s.right&&e.x>=t.x||t.x>=a.left&&t.x<=e.x?(90===n||270===n)&&(h=new m(Math.min((t.x+e.x)/2,t.x),t.y),l=new m(h.x,e.y)):(h.y=270===n||(0===n||180===n)&&e.y<t.y?Math.min(e.y,180===n?s.top:Math.min(s.top,a.top)):Math.max(e.y,180===n?s.bottom:Math.max(s.bottom,a.bottom)),l.x=e.x,l.y=h.y))):90===i?e.y>t.y||180===n&&e.x<t.x&&a.bottom>t.y||0===n&&e.x>t.x&&a.bottom>t.y?(h=new m(t.x,e.y),l=new m((t.x+e.x)/2,e.y),270===n?(h.y=this.computeMidOrthoPosition(t.y,e.y,!0),l.x=e.x,l.y=h.y):180===n&&e.x<t.x||0===n&&e.x>t.x?(h.y=t.y<a.top?this.computeMidOrthoPosition(t.y,a.top,!0):t.y<a.bottom&&(180===n&&t.x<a.left||0===n&&t.x>a.right)?this.computeMidOrthoPosition(t.y,e.y,!0):a.bottom,l.x=e.x,l.y=h.y):90===n&&t.y<a.top&&t.x>a.left&&t.x<a.right&&(h.x=t.x<e.x?Math.min(e.x,a.left):Math.max(e.x,a.right),h.y=t.y,l.x=h.x)):(h=new m(e.x,t.y),l=new m(e.x,(t.y+e.y)/2),(270===n||0===n&&e.x<s.left||180===n&&e.x>s.right)&&(270===n&&(a.Aa(t)||s.Aa(e))?h.x=this.computeMidOrthoPosition(t.x,e.x,!1):e.x<t.x&&(270===n||0===n)?h.x=this.computeMidOrthoPosition(s.left,Math.max(e.x,a.right),!1):e.x>t.x&&(270===n||180===n)&&(h.x=this.computeMidOrthoPosition(s.right,Math.min(e.x,a.left),!1)),l.x=h.x,l.y=e.y),h.x>s.left&&h.x<s.right&&(e.y>=s.top&&e.y<=t.y||t.y<=a.bottom&&t.y>=e.y?(0===n||180===n)&&(h=new m(t.x,Math.max((t.y+e.y)/2,t.y)),l=new m(e.x,h.y)):(h.x=180===n||(90===n||270===n)&&e.x<t.x?Math.min(e.x,90===n?s.left:Math.min(s.left,a.left)):Math.max(e.x,90===n?s.right:Math.max(s.right,a.right)),l.x=h.x,l.y=e.y))):e.y<t.y||180===n&&e.x<t.x&&a.top<t.y||0===n&&e.x>t.x&&a.top<t.y?(h=new m(t.x,e.y),l=new m((t.x+e.x)/2,e.y),90===n?(h.y=this.computeMidOrthoPosition(t.y,e.y,!0),l.x=e.x,l.y=h.y):180===n&&e.x<t.x||0===n&&e.x>=t.x?(h.y=t.y>a.bottom?this.computeMidOrthoPosition(t.y,a.bottom,!0):t.y>a.top&&(180===n&&t.x<a.left||0===n&&t.x>a.right)?this.computeMidOrthoPosition(t.y,e.y,!0):a.top,l.x=e.x,l.y=h.y):270===n&&t.y>a.bottom&&t.x>a.left&&t.x<a.right&&(h.x=t.x<e.x?Math.min(e.x,a.left):Math.max(e.x,a.right),h.y=t.y,l.x=h.x)):(h=new m(e.x,t.y),l=new m(e.x,(t.y+e.y)/2),(90===n||0===n&&e.x<s.left||180===n&&e.x>s.right)&&(90===n&&(a.Aa(t)||s.Aa(e))?h.x=this.computeMidOrthoPosition(t.x,e.x,!1):e.x<t.x&&(90===n||0===n)?h.x=this.computeMidOrthoPosition(s.left,Math.max(e.x,a.right),!1):e.x>t.x&&(90===n||180===n)&&(h.x=this.computeMidOrthoPosition(s.right,Math.min(e.x,a.left),!1)),l.x=h.x,l.y=e.y),h.x>s.left&&h.x<s.right&&(e.y<=s.bottom&&e.y>=t.y||t.y>=a.top&&t.y<=e.y?(0===n||180===n)&&(h=new m(t.x,Math.min((t.y+e.y)/2,t.y)),l=new m(e.x,h.y)):(h.x=180===n||(90===n||270===n)&&e.x<t.x?Math.min(e.x,270===n?s.left:Math.min(s.left,a.left)):Math.max(e.x,270===n?s.right:Math.max(s.right,a.right)),l.x=h.x,l.y=e.y)));var u=h,f=l;if(this.el){var c,p=this.g;(c=null===p)||(p.Lb.Vg?c=!1:(c=p.Va,c=c instanceof Ni?!c.jv||c.YG:!0),c=!c),c||s.Aa(e)&&!o.Qh(r)||a.Aa(t)&&!r.Qh(o)||r===o||this.layer.Ac?t=!1:(r=or(p,!0,this.Ra,null),r.Jo(Math.min(t.x,u.x),Math.min(t.y,u.y),Math.abs(t.x-u.x),Math.abs(t.y-u.y))&&r.Jo(Math.min(u.x,f.x),Math.min(u.y,f.y),Math.abs(u.x-f.x),Math.abs(u.y-f.y))&&r.Jo(Math.min(f.x,e.x),Math.min(f.y,e.y),Math.abs(f.x-e.x),Math.abs(f.y-e.y))?t=!1:(s=s.copy().Th(a),s.Jf(2*r.ro,2*r.po),da(r,t,i,e,n,s),a=la(r,e.x,e.y),r.abort||999999!==a||(fa(r),a=r.KE,s.Jf(r.ro*a,r.po*a),da(r,t,i,e,n,s),a=la(r,e.x,e.y)),r.abort||999999!==a||(fa(r),a=r.SD,s.Jf(r.ro*a,r.po*a),da(r,t,i,e,n,s),a=la(r,e.x,e.y)),!r.abort&&999999===a&&r.$E&&(fa(r),da(r,t,i,e,n,r.kb),a=la(r,e.x,e.y)),!r.abort&&999999>a&&0!==la(r,e.x,e.y)?(Js(this,r,e.x,e.y,n,!0),n=this.l(2),4>this.ka?(0===i||180===i?(n.x=t.x,n.y=e.y):(n.x=e.x,n.y=t.y),this.V(2,n.x,n.y),this.w(3,n.x,n.y)):(e=this.l(3),0===i||180===i?Au.D(n.x,e.x)?(i=0===i?Math.max(n.x,t.x):Math.min(n.x,t.x),this.V(2,i,t.y),this.V(3,i,e.y)):Au.D(n.y,e.y)?(Math.abs(t.y-n.y)<=r.po/2&&(this.V(2,n.x,t.y),this.V(3,e.x,t.y)),this.w(2,n.x,t.y)):this.V(2,t.x,n.y):(90===i||270===i)&&(Au.D(n.y,e.y)?(i=90===i?Math.max(n.y,t.y):Math.min(n.y,t.y),this.V(2,t.x,i),this.V(3,e.x,i)):Au.D(n.x,e.x)?(Math.abs(t.x-n.x)<=r.ro/2&&(this.V(2,t.x,n.y),this.V(3,t.x,e.y)),this.w(2,t.x,n.y)):this.V(2,n.x,t.y))),t=!0):t=!1))}else t=!1;t||(this.Kh(h),this.Kh(l))}},Bs.prototype.computeMidOrthoPosition=function(t,i){if(this.hasCurviness()){var e=this.computeCurviness();return(t+i)/2+e}return(t+i)/2},Bs.prototype.findClosestSegment=function(t){var i=t.x;t=t.y;for(var e=this.l(0),n=this.l(1),r=Wl(i,t,e.x,e.y,n.x,n.y),o=0,s=1;s<this.ka-1;s++){var e=this.l(s+1),a=Wl(i,t,n.x,n.y,e.x,e.y),n=e;r>a&&(o=s,r=a)}return o},Bs.prototype.invalidateGeometry=Bs.prototype.le=function(){this.Pa=null,this.R()},Ul.u(Bs,{ed:"geometry"},function(){return null===this.Pa&&(this.updateRoute(),this.Pa=this.makeGeometry()),this.Pa}),Bs.prototype.Xs=function(){if(null===this.Pa&&!1!==this.hg){this.Pa=this.makeGeometry();
var t=this.path;if(null!==t){t.Pa=this.Pa;for(var i=this.ya.n,e=i.length,n=0;e>n;n++){var r=i[n];r!==t&&r.tg&&r instanceof Po&&(r.Pa=this.Pa)}}}},Bs.prototype.makeGeometry=function(){var t=this.ka;if(2>t){var i=new H(Bu),e=new X(0,0);return i.ub.add(e),i}var n=!1,i=this.g;null!==i&&0!==i.ha.Le&&ta(this)&&(n=!0);var e=i=0,r=this.l(0).copy(),o=r.copy(),i=this.Qc.n,s=this.computeCurve();if(s===Qc&&t>=3&&!Au.mb(this.gp,0))if(3===t)var a=this.l(1),i=Math.min(r.x,a.x),e=Math.min(r.y,a.y),a=this.l(2),i=Math.min(i,a.x),e=Math.min(e,a.y);else{if(this.dc)for(a=0;t>a;a++)e=i[a],o.x=Math.min(e.x,o.x),o.y=Math.min(e.y,o.y);else for(a=3;t>a;a+=3)a+3>=t&&(a=t-1),i=this.l(a),o.x=Math.min(i.x,o.x),o.y=Math.min(i.y,o.y);i=o.x,e=o.y}else{for(a=0;t>a;a++)e=i[a],o.x=Math.min(e.x,o.x),o.y=Math.min(e.y,o.y);i=o.x,e=o.y}if(i-=this.Dy.x,e-=this.Dy.y,r.x-=i,r.y-=e,2===t){var h=this.l(1).copy();h.x-=i,h.y-=e,0!==Ks(this)&&Xs(this,r,!0,o),0!==Us(this)&&Xs(this,h,!1,o),i=new H(Lu),i.ua=r.x,i.va=r.y,i.F=h.x,i.G=h.y}else{if(h=Ul.p(),0!==Ks(this)&&Xs(this,r,!0,o),Zo(h,r.x,r.y,!1,!1),s===Qc&&t>=3&&!Au.mb(this.gp,0))if(3===t)a=this.l(1),t=a.x-i,n=a.y-e,a=this.l(2).copy(),a.x-=i,a.y-=e,0!==Us(this)&&Xs(this,a,!1,o),_o(h,t,n,t,n,a.x,a.y);else if(this.dc){for(var o=new m(i,e),r=this.l(1).copy(),s=new m(i,e),t=new m(i,e),n=this.l(0),l=null,u=this.gp/3,a=1;a<this.ka-1;a++){var l=this.l(a),f=n,c=l,p=this.l(Zs(this,l,a,!1));if(!(Au.mb(f.x,c.x)&&Au.mb(c.x,p.x)||Au.mb(f.y,c.y)&&Au.mb(c.y,p.y))){var d=u,y=s,v=t;isNaN(d)&&(d=this.gp/3);var g=f.x,f=f.y,b=c.x,c=c.y,x=p.x,p=p.y,w=d*Ws(g,f,b,c),d=d*Ws(b,c,x,p);Au.mb(f,c)&&Au.mb(b,x)&&(b>g?p>c?(y.x=b-w,y.y=c-w,v.x=b+d,v.y=c+d):(y.x=b-w,y.y=c+w,v.x=b+d,v.y=c-d):p>c?(y.x=b+w,y.y=c-w,v.x=b-d,v.y=c+d):(y.x=b+w,y.y=c+w,v.x=b-d,v.y=c-d)),Au.mb(g,b)&&Au.mb(c,p)&&(c>f?(x>b?(y.x=b-w,y.y=c-w,v.x=b+d):(y.x=b+w,y.y=c-w,v.x=b-d),v.y=c+d):(x>b?(y.x=b-w,y.y=c+w,v.x=b+d):(y.x=b+w,y.y=c+w,v.x=b-d),v.y=c-d)),(Au.mb(g,b)&&Au.mb(b,x)||Au.mb(f,c)&&Au.mb(c,p))&&(g=.5*(g+x),f=.5*(f+p),y.x=g,y.y=f,v.x=g,v.y=f),1===a?(r.x=.5*(n.x+l.x),r.y=.5*(n.y+l.y)):2===a&&Au.mb(n.x,this.l(0).x)&&Au.mb(n.y,this.l(0).y)&&(r.x=.5*(n.x+l.x),r.y=.5*(n.y+l.y)),_o(h,r.x-i,r.y-e,s.x-i,s.y-e,l.x-i,l.y-e),o.set(s),r.set(t),n=l}}a=n.x,n=n.y,o=this.l(this.ka-1),a=.5*(a+o.x),n=.5*(n+o.y),_o(h,t.x-i,t.y-e,a-i,n-e,o.x-i,o.y-e)}else for(a=3;t>a;a+=3)n=this.l(a-2),a+3>=t&&(a=t-1),o=this.l(a-1),r=this.l(a),a===t-1&&0!==Us(this)&&(r=r.copy(),Xs(this,r,!1,Au.Wj)),_o(h,n.x-i,n.y-e,o.x-i,o.y-e,r.x-i,r.y-e);else{for(o=Ul.K(),o.assign(this.l(0)),a=1;t>a;){if(a=Zs(this,o,a,a>1),y=this.l(a),a>=t-1){o!==y&&(0!==Us(this)&&(y=y.copy(),Xs(this,y,!1,Au.Wj)),Qs(this,h,-i,-e,o,y,n));break}a=Zs(this,y,a+1,t-3>a),r=h,s=-i,l=-e,u=o,v=this.l(a),g=o,f=n,Au.D(u.y,y.y)&&Au.D(y.x,v.x)?(d=this.computeCorner(),d=Math.min(d,Math.abs(y.x-u.x)/2),d=b=Math.min(d,Math.abs(v.y-y.y)/2),Au.D(d,0)?(Qs(this,r,s,l,u,y,f),g.assign(y)):(c=y.x,x=y.y,p=c,w=x,c=y.x>u.x?y.x-d:y.x+d,w=v.y>y.y?y.y+b:y.y-b,Qs(this,r,s,l,u,new m(c,x),f),ts(r,y.x+s,y.y+l,p+s,w+l),g.m(p,w))):Au.D(u.x,y.x)&&Au.D(y.y,v.y)?(d=this.computeCorner(),b=Math.min(d,Math.abs(y.y-u.y)/2),b=d=Math.min(b,Math.abs(v.x-y.x)/2),Au.D(d,0)?(Qs(this,r,s,l,u,y,f),g.assign(y)):(c=y.x,w=x=y.y,x=y.y>u.y?y.y-b:y.y+b,p=v.x>y.x?y.x+d:y.x-d,Qs(this,r,s,l,u,new m(c,x),f),ts(r,y.x+s,y.y+l,p+s,w+l),g.m(p,w))):(Qs(this,r,s,l,u,y,f),g.assign(y))}Ul.v(o)}i=h.o,Ul.q(h)}return i},Ul.u(Bs,{Bs:"firstPickIndex"},function(){return 2>=this.ka?0:this.dc||Vs(this)!==_l?1:0}),Ul.u(Bs,{lw:"lastPickIndex"},function(){var t=this.ka;return 0===t?0:2>=t?t-1:this.dc||Hs(this)!==_l?t-2:t-1}),Bs.prototype.usesSamePort=function(t){var i=this.ka,e=t.ka;if(i>0&&e>0){var n=this.l(0),r=t.l(0);if(n.De(r))return!0;if(i=this.l(i-1),t=t.l(e-1),i.De(t)||n.De(t)||i.De(r))return!0}else if(this.W===t.W||this.ca===t.ca||this.W==t.ca||this.ca==t.W)return!0;return!1},Bs.prototype.He=function(t){if(es.prototype.He.call(this,t),null!==this.ue)for(var i=this.ue.i;i.next();)i.value.He(t)},Ul.defineProperty(Bs,{es:"adjusting"},function(){return this.tp},function(t){var i=this.tp;i!==t&&(this.tp=t,this.h("adjusting",i,t))}),Ul.defineProperty(Bs,{Yy:"corner"},function(){return this.Hp},function(t){var i=this.Hp;i!==t&&(this.Hp=t,this.le(),this.h("corner",i,t))}),Ul.defineProperty(Bs,{Ve:"curve"},function(){return this.Kp},function(t){var i=this.Kp;i!==t&&(this.Kp=t,this.Vb(),ia(this,i===$c||i===_c||t===$c||t===_c),this.h("curve",i,t))}),Ul.defineProperty(Bs,{Ov:"curviness"},function(){return this.Lp},function(t){var i=this.Lp;i!==t&&(this.Lp=t,this.Vb(),this.h("curviness",i,t))}),Ul.defineProperty(Bs,{zw:"routing"},function(){return this.Yl},function(t){var i=this.Yl;i!==t&&(this.Yl=t,this.di=null,this.Vb(),ia(this,2===(2&i.value)||2===(2&t.value)),this.h("routing",i,t))}),Ul.defineProperty(Bs,{gp:"smoothness"},function(){return this.Kr},function(t){var i=this.Kr;i!==t&&(this.Kr=t,this.le(),this.h("smoothness",i,t))}),Ul.Xd(sa,{Uo:!0,uw:!0,at:!0,vw:!0,links:!0,spacing:!0}),Ul.Xd(aa,{group:!0,fA:!0,Ls:!0,abort:!0,$E:!0,KE:!0,SD:!0}),aa.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var i=t.y,e=t.x+t.width,n=t.y+t.height;if(this.ag=Math.floor((t.x-this.ge)/this.ge)*this.ge,this.bg=Math.floor((i-this.he)/this.he)*this.he,this.Iq=Math.ceil((e+2*this.ge)/this.ge)*this.ge,this.Jq=Math.ceil((n+2*this.he)/this.he)*this.he,t=1+(0|Math.ceil((this.Iq-this.ag)/this.ge)),i=1+(0|Math.ceil((this.Jq-this.bg)/this.he)),null===this.mc||this.ho<t-1||this.io<i-1){for(e=[],n=0;t>=n;n++){for(var r=[],o=0;i>=o;o++)r[o]=0;e[n]=r}this.mc=e,this.ho=t-1,this.io=i-1}if(null!==this.mc)for(t=0;t<=this.ho;t++)for(i=0;i<=this.io;i++)this.mc[t][i]=999999}},Ul.u(aa,{kb:null},function(){return new k(this.ag,this.bg,this.Iq-this.ag,this.Jq-this.bg)}),Ul.defineProperty(aa,{ro:null},function(){return this.ge},function(t){t>0&&t!==this.ge&&(this.ge=t,this.initialize(this.kb))}),Ul.defineProperty(aa,{po:null},function(){return this.he},function(t){t>0&&t!==this.he&&(this.he=t,this.initialize(this.kb))}),aa.prototype.Jo=function(t,i,e,n){if(t>this.Iq||t+e<this.ag||i>this.Jq||i+n<this.bg)return!0;t=(t-this.ag)/this.ge|0,i=(i-this.bg)/this.he|0,e=Math.max(0,e)/this.ge+1|0;var r=Math.max(0,n)/this.he+1|0;if(0>t&&(e+=t,t=0),0>i&&(r+=i,i=0),0>e||0>r)return!0;for(n=0|Math.min(t+e-1,this.ho),e=0|Math.min(i+r-1,this.io);n>=t;t++)for(r=i;e>=r;r++)if(0===this.mc[t][r])return!1;return!0},Ul.Xd(ya,{Cc:!0,port:!0,wg:!0,To:!0}),ya.prototype.toString=function(){for(var t=this.wg,i=this.Cc.toString()+" "+t.length.toString()+":",e=0;e<t.length;e++){var n=t[e];null!==n&&(i+="\n  "+n.toString())}return i},ya.prototype.GH=function(t,i){return t===i?0:null===t?-1:null===i?1:t.ee<i.ee?-1:t.ee>i.ee?1:t.angle<i.angle?-1:t.angle>i.angle?1:0},ya.prototype.computeEndSegmentLength=function(t){var i=t.link,e=i.computeEndSegmentLength(this.Cc,this.port,_l,i.od===this.port),n=t.Do;if(0>n)return e;var r=t.vm;if(1>=r||!i.dc)return e;var i=t.tw,o=t.Lo;return(t.ee===Ul.Fc||t.ee===Ul.Nc)&&(n=r-1-n),((t=t.ee===Ul.Fc||t.ee===Ul.Oc)?i.y<o.y:i.x<o.x)?e+8*n:(t?i.y===o.y:i.x===o.x)?e:e+8*(r-1-n)},Ul.Xd(ma,{link:!0,angle:!0,ee:!0,tw:!0,Do:!0,vm:!0,Lo:!0,Sv:!0}),ma.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.ee.toString()+":"+this.Do.toString()+"/"+this.vm.toString()+" "+this.Lo.toString()+" "+this.Sv.toString()+" "+this.tw.toString()},ba.prototype.copy=function(){var t=new ba;return t.cj=this.cj.Z(),t.Ej=this.Ej.Z(),t.aj=this.aj,t.Cj=this.Cj,t.$i=this.$i,t.Bj=this.Bj,t.bj=this.bj,t.Dj=this.Dj,t},Ul.Ga(xa,Ms),Ul.fa("Group",xa),xa.prototype.cloneProtected=function(t){Ms.prototype.cloneProtected.call(this,t),t.Kq=this.Kq,t.Mq=this.Mq,t.Ak=this.Ak,t.Yr=this.Yr,t.pq=this.pq,t.Zr=this.Zr,t.Nr=this.Nr;var i=t.vs(function(t){return t instanceof Ta});t.Pb=i instanceof Ta?i:null,t.Dp=this.Dp,t.Ep=this.Ep,t.Fp=this.Fp,t.cq=this.cq,null!==this.Nd?(t.Nd=this.Nd.copy(),t.Nd.group=t):(null!==t.Nd&&(t.Nd.group=null),t.Nd=null)},xa.prototype.Nh=function(t){Ms.prototype.Nh.call(this,t);var i=t.yo();for(t=t.Mc;t.next();){var e=t.value;if(e.R(),e.H(8),e.ls(),e instanceof Ms)e.sf(i);else if(e instanceof Bs)for(e=e.ug;e.next();)e.value.sf(i)}},xa.prototype.Lm=function(t,i,e,n,r,o,s){if(t===Ju&&"elements"===i)if(r instanceof Ta){var a=r;null===this.Pb?this.Pb=a:this.Pb!==a&&Ul.k("Cannot insert a second Placeholder into the visual tree of a Group.")}else r instanceof to&&(a=r.vs(function(t){return t instanceof Ta}),a instanceof Ta&&(null===this.Pb?this.Pb=a:this.Pb!==a&&Ul.k("Cannot insert a second Placeholder into the visual tree of a Group.")));else t===Wu&&"elements"===i&&null!==this.Pb&&(n===this.Pb?this.Pb=null:n instanceof to&&this.Pb.gl(n)&&(this.Pb=null));Ms.prototype.Lm.call(this,t,i,e,n,r,o,s)},xa.prototype.xi=function(t,i,e,n){this.zk=this.Pb,to.prototype.xi.call(this,t,i,e,n)},xa.prototype.hl=function(){if(!Ms.prototype.hl.call(this))return!1;for(var t=this.Mc;t.next();){var i=t.value;if(i instanceof Ms){if(i.Ea()&&Jr(i))return!1}else if(i instanceof Bs&&i.Ea()&&Jr(i)&&i.W!==this&&i.ca!==this)return!1}return!0},Ul.u(xa,{placeholder:"placeholder"},function(){return this.Pb}),Ul.defineProperty(xa,{aD:"computesBoundsAfterDrag"},function(){return this.Dp},function(t){var i=this.Dp;i!==t&&(Ul.j(t,"boolean",xa,"computesBoundsAfterDrag"),this.Dp=t,this.h("computesBoundsAfterDrag",i,t))}),Ul.defineProperty(xa,{bG:"computesBoundsIncludingLinks"},function(){return this.Ep},function(t){Ul.j(t,"boolean",xa,"computesBoundsIncludingLinks");var i=this.Ep;i!==t&&(this.Ep=t,this.h("computesBoundsIncludingLinks",i,t))}),Ul.defineProperty(xa,{cG:"computesBoundsIncludingLocation"},function(){return this.Fp},function(t){Ul.j(t,"boolean",xa,"computesBoundsIncludingLocation");var i=this.Fp;i!==t&&(this.Fp=t,this.h("computesBoundsIncludingLocation",i,t))}),Ul.defineProperty(xa,{OG:"handlesDragDropForMembers"},function(){return this.cq},function(t){Ul.j(t,"boolean",xa,"handlesDragDropForMembers");var i=this.cq;i!==t&&(this.cq=t,this.h("handlesDragDropForMembers",i,t))}),Ul.u(xa,{Mc:"memberParts"},function(){return this.Lq.i}),xa.prototype.xm=function(){if(0<this.Lq.count){var t=this.g;if(null===t)return;for(var i=this.Lq.copy().i;i.next();)t.remove(i.value)}Ms.prototype.xm.call(this)},xa.prototype.Jw=function(){var t=this.layer;null!==t&&t.Jw(this)},Ul.defineProperty(xa,{Qb:"layout"},function(){return this.Nd},function(t){var i=this.Nd;i!==t&&(null!==t&&Ul.C(t,Sa,xa,"layout"),null!==i&&(i.g=null,i.group=null),this.Nd=t,null!==t&&(t.g=this.g,t.group=this),this.h("layout",i,t))}),Ul.defineProperty(xa,{xH:"memberAdded"},function(){return this.Kq},function(t){var i=this.Kq;i!==t&&(null!==t&&Ul.j(t,"function",xa,"memberAdded"),this.Kq=t,this.h("memberAdded",i,t))}),Ul.defineProperty(xa,{yH:"memberRemoved"},function(){return this.Mq},function(t){var i=this.Mq;i!==t&&(null!==t&&Ul.j(t,"function",xa,"memberRemoved"),this.Mq=t,this.h("memberRemoved",i,t))}),Ul.defineProperty(xa,{Bz:"memberValidation"},function(){return this.Ak},function(t){var i=this.Ak;i!==t&&(null!==t&&Ul.j(t,"function",xa,"memberValidation"),this.Ak=t,this.h("memberValidation",i,t))}),xa.prototype.canAddMembers=function(t){var i=this.g;if(null===i)return!1;for(i=i.Eb,t=Si(t).i;t.next();)if(!i.isValidMember(this,t.value))return!1;return!0},xa.prototype.addMembers=function(t,i){var e=this.g;if(null===e)return!1;for(var e=e.Eb,n=!0,r=Si(t).i;r.next();){var o=r.value;!i||e.isValidMember(this,o)?o.Ra=this:n=!1}return n},Ul.defineProperty(xa,{BI:"ungroupable"},function(){return this.Yr},function(t){var i=this.Yr;i!==t&&(Ul.j(t,"boolean",xa,"ungroupable"),this.Yr=t,this.h("ungroupable",i,t))}),xa.prototype.canUngroup=function(){if(!this.BI)return!1;var t=this.layer;return null===t||t.Fv?(t=t.g,null===t||t.Fv?!0:!1):!1},xa.prototype.invalidateConnectedLinks=xa.prototype.sf=function(t){void 0===t&&(t=null),Ms.prototype.sf.call(this,t);for(var i=this.pD();i.next();){var e=i.value;if(null===t||!t.contains(e)){var n=e.W;null!==n&&n.Qh(this)&&!n.Ea()?e.Vb():(n=e.ca,null!==n&&n.Qh(this)&&!n.Ea()&&e.Vb())}}},xa.prototype.findExternalLinksConnected=xa.prototype.pD=function(){var t=this.yo();t.add(this);for(var i=new f(Bs),e=t.i;e.next();){var n=e.value;if(n instanceof Ms)for(n=n.oe;n.next();){var r=n.value;t.contains(r)||i.add(r)}}return i.i},xa.prototype.findExternalNodesConnected=function(){var t=this.yo();t.add(this);for(var i=new f(Ms),e=t.i;e.next();){var n=e.value;if(n instanceof Ms)for(n=n.oe;n.next();){var r=n.value,o=r.W;t.contains(o)&&o!==this||i.add(o),r=r.ca,t.contains(r)&&r!==this||i.add(r)}}return i.i},xa.prototype.findSubGraphParts=xa.prototype.yo=function(){var t=new f(es);return Pi(t,this,!0,0,!0),t.remove(this),t},xa.prototype.He=function(t){Ms.prototype.He.call(this,t);for(var i=this.Mc;i.next();)i.value.He(t)},xa.prototype.collapseSubGraph=xa.prototype.collapseSubGraph=function(){var t=this.g;if(null!==t&&!t.me){t.me=!0;var i=this.yo();Ma(this,i),t.me=!1}},xa.prototype.expandSubGraph=xa.prototype.expandSubGraph=function(){var t=this.g;if(null!==t&&!t.me){var i=t.Lb;0!==t.ha.Le&&i.ml(),t.me=!0;var e=this.yo();Pa(this,e,i,this),t.me=!1}},Ul.defineProperty(xa,{be:"isSubGraphExpanded"},function(){return this.pq},function(t){var i=this.pq;if(i!==t){Ul.j(t,"boolean",xa,"isSubGraphExpanded"),this.pq=t;var e=this.g;if(this.h("isSubGraphExpanded",i,t),i=this.sI,null!==i){var n=!0;null!==e&&(n=e.Na,e.Na=!0),i(this),null!==e&&(e.Na=n)}null!==e&&e.ha.gb||(t?this.expandSubGraph():this.collapseSubGraph())}}),Ul.defineProperty(xa,{oA:"wasSubGraphExpanded"},function(){return this.Zr},function(t){var i=this.Zr;i!==t&&(Ul.j(t,"boolean",xa,"wasSubGraphExpanded"),this.Zr=t,this.h("wasSubGraphExpanded",i,t))}),Ul.defineProperty(xa,{sI:"subGraphExpandedChanged"},function(){return this.Nr},function(t){var i=this.Nr;i!==t&&(null!==t&&Ul.j(t,"function",xa,"subGraphExpandedChanged"),this.Nr=t,this.h("subGraphExpandedChanged",i,t))}),xa.prototype.move=xa.prototype.move=function(t){var i=this.position,e=i.x;isNaN(e)&&(e=0),i=i.y,isNaN(i)&&(i=0);var e=t.x-e,i=t.y-i,n=Ul.fc(e,i);for(Ms.prototype.move.call(this,t),t=this.yo().i;t.next();){var r=t.value;if(!(r instanceof Bs||r instanceof Ms&&r.tf)){var o=r.position,s=r.location;o.J()?(n.x=o.x+e,n.y=o.y+i,r.position=n):s.J()&&(n.x=s.x+e,n.y=s.y+i,r.location=n)}}for(t.reset();t.next();)r=t.value,r instanceof Bs&&(o=r.position,n.x=o.x+e,n.y=o.y+i,r.move(n));Ul.v(n)},Ul.Ga(Ta,Mr),Ul.fa("Placeholder",Ta),Ta.prototype.cloneProtected=function(t){Mr.prototype.cloneProtected.call(this,t),t.Pe=this.Pe.Z(),t.yr=this.yr.copy()},Ta.prototype.Jj=function(t){if(null===this.background&&null===this.nm)return!1;var i=this.Ha;return Ql(0,0,i.width,i.height,t.x,t.y)},Ta.prototype.Oo=function(){var t=this.T;if(null!==t&&(t instanceof xa||t instanceof ks)||Ul.k("Placeholder is not inside a Group or Adornment."),t instanceof xa){var i=this.computeBorder(this.yr),e=this.Hc;M(e,i.width||0,i.height||0),Cr(this,0,0,e.width,e.height);for(var e=t.Mc,n=!1;e.next();)if(e.value.Ea()){n=!0;break}!n||isNaN(i.x)||isNaN(i.y)||(e=new m,e.pt(i,t.Ze),t.location=new m(e.x,e.y))}else{var i=this.xa,e=this.Hc,n=this.padding,r=n.left+n.right,o=n.top+n.bottom;if(i.J())M(e,i.width+r||0,i.height+o||0),Cr(this,-n.left,-n.top,e.width,e.height);else{var s=t.vc,a=s.lb(iu,Ul.K()),i=Ul.Vj(a.x,a.y,0,0);i.Oi(s.lb(lu,a)),i.Oi(s.lb(nu,a)),i.Oi(s.lb(au,a)),t.Mg.m(i.x,i.y),M(e,i.width+r||0,i.height+o||0),Cr(this,-n.left,-n.top,e.width,e.height),Ul.v(a),Ul.ic(i)}}},Ta.prototype.xi=function(t,i,e,n){var r=this.ba;r.x=t,r.y=i,r.width=e,r.height=n},Ta.prototype.computeBorder=function(t){var i=this.T;if(i instanceof xa){var e=i;if(e.aD&&this.yr.J()){var n=e.g;if(null!==n&&(n=n.Va,n instanceof Ni&&!n.Rp&&null!==n.cc&&!n.cc.contains(e)))return t.assign(this.yr),t}}var e=Ul.Sf(),n=this.computeMemberBounds(e),r=this.padding;return t.m(n.x-r.left,n.y-r.top,n.width+r.left+r.right,n.height+r.top+r.bottom),Ul.ic(e),i instanceof xa&&(e=i,e.cG&&e.location.J()&&t.Oi(e.location)),t},Ta.prototype.computeMemberBounds=function(t){if(!(this.T instanceof xa))return t.m(0,0,0,0),t;for(var i=this.T,e=1/0,n=1/0,r=-1/0,o=-1/0,s=i.Mc;s.next();){var a=s.value;if(a.Ea()){if(a instanceof Bs){var h=a;if(!i.bG)continue;if(Ur(h))continue;if(h.W===i||h.ca===i)continue}a=a.ba,a.left<e&&(e=a.left),a.top<n&&(n=a.top),a.right>r&&(r=a.right),a.bottom>o&&(o=a.bottom)}}return isFinite(e)&&isFinite(n)?t.m(e,n,r-e,o-n):(i=i.location,e=this.padding,t.m(i.x+e.left,i.y+e.top,0,0)),t},Ul.defineProperty(Ta,{padding:"padding"},function(){return this.Pe},function(t){"number"==typeof t?((isNaN(t)||0>t)&&Ul.wa(t,">= 0",Ta,"padding"),t=new j(t)):(Ul.C(t,j,Ta,"padding"),(isNaN(t.left)||0>t.left)&&Ul.wa(t.left,">= 0",Ta,"padding:value.left"),(isNaN(t.right)||0>t.right)&&Ul.wa(t.right,">= 0",Ta,"padding:value.right"),(isNaN(t.top)||0>t.top)&&Ul.wa(t.top,">= 0",Ta,"padding:value.top"),(isNaN(t.bottom)||0>t.bottom)&&Ul.wa(t.bottom,">= 0",Ta,"padding:value.bottom"));var i=this.Pe;i.L(t)||(this.Pe=t=t.Z(),this.h("padding",i,t))}),Ul.fa("Layout",Sa),Sa.prototype.cloneProtected=function(t){t.lq=this.lq,t.jq=this.jq,t.tq=this.tq,t.wp.assign(this.wp),t.oq=this.oq,t.mq=this.mq,t.YA=this.YA,this.jq||(t.Gn=!0)},Sa.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Sa.prototype.toString=function(){var t=Ul.rg(Object.getPrototypeOf(this)),t=t+"(";return null!==this.group&&(t+=" in "+this.group),null!==this.g&&(t+=" for "+this.g),t+")"},Ul.defineProperty(Sa,{g:"diagram"},function(){return this.Y},function(t){null!==t&&Ul.C(t,Ge,Sa,"diagram"),this.Y=t}),Ul.defineProperty(Sa,{group:"group"},function(){return this.Px},function(t){this.Px!==t&&(null!==t&&Ul.C(t,xa,Sa,"group"),this.Px=t,null!==t&&(this.Y=t.g))}),Ul.defineProperty(Sa,{gH:"isOngoing"},function(){return this.lq},function(t){this.lq!==t&&(Ul.j(t,"boolean",Sa,"isOngoing"),this.lq=t)}),Ul.defineProperty(Sa,{dH:"isInitial"},function(){return this.jq},function(t){Ul.j(t,"boolean",Sa,"isInitial"),this.jq=t,t||(this.Gn=!0)}),Ul.defineProperty(Sa,{jw:"isViewportSized"},function(){return this.tq},function(t){this.tq!==t&&(Ul.j(t,"boolean",Sa,"isViewportSized"),(this.tq=t)&&this.H())}),Ul.defineProperty(Sa,{Qs:"isRouting"},function(){return this.oq},function(t){this.oq!==t&&(Ul.j(t,"boolean",Sa,"isRouting"),this.oq=t)}),Ul.defineProperty(Sa,{PD:"isRealtime"},function(){return this.mq},function(t){this.mq!==t&&(Ul.j(t,"boolean",Sa,"isRealtime"),this.mq=t)}),Ul.defineProperty(Sa,{vf:"isValidLayout"},function(){return this.Gn},function(t){this.Gn!==t&&(Ul.j(t,"boolean",Sa,"isValidLayout"),this.Gn=t,t||(t=this.g,null!==t&&(t.Ot=!0)))}),Sa.prototype.invalidateLayout=Sa.prototype.H=function(){if(this.Gn){var t=this.g;if(null!==t&&!t.ha.gb){var i=t.Lb;!i.Fn&&(i.Vg&&i.Mi(),this.gH&&t.lf||this.dH&&!t.lf)&&(this.vf=!1,t.de())}}},Ul.defineProperty(Sa,{network:"network"},function(){return this.ky},function(t){var i=this.ky;i!==t&&(null!==t&&Ul.C(t,ja,Sa,"network"),null!==i&&(i.Qb=null),this.ky=t,null!==t&&(t.Qb=this))}),Sa.prototype.createNetwork=function(){return new ja},Sa.prototype.makeNetwork=function(t){var i=this.createNetwork();return i.Qb=this,t instanceof Ge?(i.Gj(t.yg,!0),i.Gj(t.links,!0)):i.Gj(t instanceof xa?t.Mc:t.i),i},Sa.prototype.updateParts=function(){var t=this.g;if(null===t&&null!==this.network)for(var i=this.network.vertexes.i;i.next();){var e=i.value.Cc;if(null!==e&&(t=e.g,null!==t))break}this.vf=!0;try{null!==t&&t.Wb("Layout"),this.commitLayout()}finally{null!==t&&t.Wd("Layout")}},Sa.prototype.commitLayout=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();if(this.Qs)for(t=this.network.edges.i;t.next();)t.value.commit()},Sa.prototype.doLayout=function(t){null===t&&Ul.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var i=new f(es);t instanceof Ge?(Ca(this,i,t.yg,!0,this.Gz,!0,!1,!0),Ca(this,i,t.Sj,!0,this.Gz,!0,!1,!0)):t instanceof xa?Ca(this,i,t.Mc,!1,this.Gz,!0,!1,!0):i.Td(t.i);var e=i.count;if(e>0){t=this.g,null!==t&&t.Wb("Layout");for(var e=Math.ceil(Math.sqrt(e)),n=this.Ud.x,r=n,o=this.Ud.y,s=0,a=0,i=i.i;i.next();){var h=i.value;h.pf();var l=h.Ba,u=l.width,l=l.height;h.moveTo(r,o),h.jy=!1,r+=Math.max(u,50)+20,a=Math.max(a,Math.max(l,50)),s>=e-1?(s=0,r=n,o+=a+20,a=0):s++}null!==t&&t.Wd("Layout")}this.vf=!0},Sa.prototype.Gz=function(t){return!t.location.J()||t instanceof xa&&t.jy?!0:!1},Sa.prototype.collectParts=function(t){var i=new f(es);return t instanceof Ge?(Ca(this,i,t.yg,!0,null,!0,!0,!0),Ca(this,i,t.links,!0,null,!0,!0,!0),Ca(this,i,t.Sj,!0,null,!0,!0,!0)):t instanceof xa?Ca(this,i,t.Mc,!1,null,!0,!0,!0):Ca(this,i,t.i,!1,null,!0,!0,!0),i},Ul.defineProperty(Sa,{Ud:"arrangementOrigin"},function(){return this.wp},function(t){Ul.C(t,m,Sa,"arrangementOrigin"),this.wp.L(t)||(this.wp.assign(t),this.H())}),Sa.prototype.initialOrigin=function(t){var i=this.group;if(null!==i){var e=i.position.copy();return(isNaN(e.x)||isNaN(e.y))&&e.set(t),i=i.placeholder,null!==i&&(e=i.lb(iu),(isNaN(e.x)||isNaN(e.y))&&e.set(t),e.x+=i.padding.left,e.y+=i.padding.top),e}return t},Ul.fa("LayoutNetwork",ja),ja.prototype.clear=function(){if(this.vertexes)for(var t=this.vertexes.i;t.next();){var i=t.value;i.clear(),i.network=null}if(this.edges)for(t=this.edges.i;t.next();)i=t.value,i.clear(),i.network=null;this.vertexes=new f(Fa),this.edges=new f(za),this.Kz=new g(Ms,Fa),this.yz=new g(Bs,za)},ja.prototype.toString=function(t){void 0===t&&(t=0);var i="LayoutNetwork"+(null!==this.Qb?"("+this.Qb.toString()+")":"");if(0>=t)return i;if(i+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count,t>1){for(var e=this.vertexes.i;e.next();)i+="\n    "+e.value.toString(t-1);for(e=this.edges.i;e.next();)i+="\n    "+e.value.toString(t-1)}return i},Ul.defineProperty(ja,{Qb:"layout"},function(){return this.Nd},function(t){this.Nd=t}),ja.prototype.createVertex=function(){return new Fa},ja.prototype.createEdge=function(){return new za},ja.prototype.addParts=ja.prototype.Gj=function(t,i,e){if(null!==t){for(void 0===i&&(i=!1),Ul.j(i,"boolean",ja,"addParts:toplevelonly"),void 0===e&&(e=null),null===e&&(e=function(t){if(t instanceof Ms)return!t.tf;if(t instanceof Bs){var i=t.W;return null===i||i.tf?!1:(t=t.ca,null===t||t.tf?!1:!0)}return!1}),t=t.i;t.next();){var n=t.value;if(n instanceof Ms&&(!i||n.Ho)&&n.canLayout()&&e(n))if(n instanceof xa&&null===n.Qb)this.Gj(n.Mc,!1);else if(null===this.Am(n)){var r=this.createVertex();r.Cc=n,this.Mk(r)}}for(t.reset();t.next();)if(n=t.value,n instanceof Bs&&(!i||n.Ho)&&n.canLayout()&&e(n)&&null===this.Uv(n)){var o=n.W,r=n.ca;null!==o&&null!==r&&o!==r&&(o=this.findGroupVertex(o),r=this.findGroupVertex(r),null!==o&&null!==r&&this.No(o,r,n))}}},ja.prototype.findGroupVertex=function(t){if(null===t)return null;var i=t.findVisibleNode();if(null===i)return null;if(t=this.Am(i),null!==t)return t;for(i=i.Ra;null!==i;){if(t=this.Am(i),null!==t)return t;i=i.Ra}return null},ja.prototype.addVertex=ja.prototype.Mk=function(t){if(null!==t){this.vertexes.add(t);var i=t.Cc;null!==i&&this.Kz.add(i,t),t.network=this}},ja.prototype.addNode=ja.prototype.ds=function(t){if(null===t)return null;var i=this.Am(t);return null===i&&(i=this.createVertex(),i.Cc=t,this.Mk(i)),i},ja.prototype.deleteVertex=ja.prototype.lD=function(t){if(null!==t&&Na(this,t)){for(var i=t.Ie,e=i.count-1;e>=0;e--){var n=i.ja(e);this.vo(n)}for(i=t.Ce,e=i.count-1;e>=0;e--)n=i.ja(e),this.vo(n)}},ja.prototype.deleteNode=function(t){null!==t&&(t=this.Am(t),null!==t&&this.lD(t))},ja.prototype.findVertex=ja.prototype.Am=function(t){return null===t?null:this.Kz.ta(t)},ja.prototype.addEdge=ja.prototype.ko=function(t){if(null!==t){this.edges.add(t);var i=t.link;null!==i&&null===this.Uv(i)&&this.yz.add(i,t),i=t.toVertex,null!==i&&i.LC(t),i=t.fromVertex,null!==i&&i.KC(t),t.network=this}},ja.prototype.addLink=function(t){if(null===t)return null;var i=t.W,e=t.ca,n=this.Uv(t);return null===n?(n=this.createEdge(),n.link=t,null!==i&&(n.fromVertex=this.ds(i)),null!==e&&(n.toVertex=this.ds(e)),this.ko(n)):(n.fromVertex=null!==i?this.ds(i):null,n.toVertex=null!==e?this.ds(e):null),n},ja.prototype.deleteEdge=ja.prototype.vo=function(t){if(null!==t){var i=t.toVertex;null!==i&&i.kD(t),i=t.fromVertex,null!==i&&i.jD(t),Da(this,t)}},ja.prototype.deleteLink=function(t){null!==t&&(t=this.Uv(t),null!==t&&this.vo(t))},ja.prototype.findEdge=ja.prototype.Uv=function(t){return null===t?null:this.yz.ta(t)},ja.prototype.linkVertexes=ja.prototype.No=function(t,i,e){if(null===t||null===i)return null;if(t.network===this&&i.network===this){var n=this.createEdge();return n.link=e,n.fromVertex=t,n.toVertex=i,this.ko(n),n}return null},ja.prototype.reverseEdge=ja.prototype.yw=function(t){if(null!==t){var i=t.fromVertex,e=t.toVertex;null!==i&&null!==e&&(i.jD(t),e.kD(t),t.yw(),i.LC(t),e.KC(t))}},ja.prototype.deleteSelfEdges=ja.prototype.Qv=function(){for(var t=Ul.eb(),i=this.edges.i;i.next();){var e=i.value;e.fromVertex===e.toVertex&&t.push(e)}for(i=t.length,e=0;i>e;e++)this.vo(t[e]);Ul.ra(t)},ja.prototype.deleteArtificialVertexes=function(){for(var t=Ul.eb(),i=this.vertexes.i;i.next();){var e=i.value;null===e.Cc&&t.push(e)}for(e=t.length,i=0;e>i;i++)this.lD(t[i]);for(e=Ul.eb(),i=this.edges.i;i.next();){var n=i.value;null===n.link&&e.push(n)}for(n=e.length,i=0;n>i;i++)this.vo(e[i]);Ul.ra(t),Ul.ra(e)},ja.prototype.splitIntoSubNetworks=ja.prototype.oI=function(){this.deleteArtificialVertexes(),Aa(this),this.Qv();for(var t=new l(ja),i=!0;i;)for(var i=!1,e=this.vertexes.i;e.next();){var n=e.value;if(0<n.Ie.count||0<n.Ce.count){i=this.Qb.createNetwork(),t.add(i),La(this,i,n),i=!0;break}}return t.sort(function(t,i){return null===t||null===i||t===i?0:i.vertexes.count-t.vertexes.count}),t},ja.prototype.findAllParts=function(){for(var t=new f(es),i=this.vertexes.i;i.next();)t.add(i.value.Cc);for(i=this.edges.i;i.next();)t.add(i.value.link);return t},Ul.fa("LayoutVertex",Fa),Fa.prototype.clear=function(){this.ld=this.rh=null,this.Ie=new l(za),this.Ce=new l(za)},Fa.prototype.toString=function(t){void 0===t&&(t=0);var i="LayoutVertex#"+Ul.Uc(this);if(t>0&&(i+=null!==this.Cc?"("+this.Cc.toString()+")":"",t>1)){t="";for(var e=!0,n=this.Ie.i;n.next();){var r=n.value;e?e=!1:t+=",",t+=r.toString(0)}for(r="",e=!0,n=this.Ce.i;n.next();){var o=n.value;e?e=!1:r+=",",r+=o.toString(0)}i+=" sources: "+t+" destinations: "+r}return i},Ul.defineProperty(Fa,{data:"data"},function(){return this.rh},function(t){if(this.rh=t,null!==t){var i=t.bounds;t=i.x;var e=i.y,n=i.width,i=i.height;this.M.m(n/2,i/2),this.aa.m(t,e,n,i)}}),Ul.defineProperty(Fa,{Cc:"node"},function(){return this.ld},function(t){if(this.ld!==t){this.ld=t,t.pf();var i=t.ba,e=i.x,n=i.y,r=i.width,i=i.height;if(isNaN(e)&&(e=0),isNaN(n)&&(n=0),this.aa.m(e,n,r,i),!(t instanceof xa)&&(t=t.ec.lb(ou),t.J()))return void this.M.m(t.x-e,t.y-n);this.M.m(r/2,i/2)}}),Ul.defineProperty(Fa,{kb:"bounds"},function(){return this.aa},function(t){this.aa.L(t)||this.aa.assign(t)}),Ul.defineProperty(Fa,{focus:"focus"},function(){return this.M},function(t){this.M.L(t)||this.M.assign(t)}),Ul.defineProperty(Fa,{Ja:"centerX"},function(){return this.aa.x+this.M.x},function(t){var i=this.aa;i.x+this.M.x!==t&&(i.La(),i.x=t-this.M.x,i.freeze())}),Ul.defineProperty(Fa,{Ua:"centerY"},function(){return this.aa.y+this.M.y},function(t){var i=this.aa;i.y+this.M.y!==t&&(i.La(),i.y=t-this.M.y,i.freeze())}),Ul.defineProperty(Fa,{Cs:"focusX"},function(){return this.M.x},function(t){var i=this.M;i.x!==t&&(i.La(),i.x=t,i.freeze())}),Ul.defineProperty(Fa,{Ds:"focusY"},function(){return this.M.y},function(t){var i=this.M;i.y!==t&&(i.La(),i.y=t,i.freeze())}),Ul.defineProperty(Fa,{x:"x"},function(){return this.aa.x},function(t){var i=this.aa;i.x!==t&&(i.La(),i.x=t,i.freeze())}),Ul.defineProperty(Fa,{y:"y"},function(){return this.aa.y},function(t){var i=this.aa;i.y!==t&&(i.La(),i.y=t,i.freeze())}),Ul.defineProperty(Fa,{width:"width"},function(){return this.aa.width},function(t){var i=this.aa;i.width!==t&&(i.La(),i.width=t,i.freeze())}),Ul.defineProperty(Fa,{height:"height"},function(){return this.aa.height},function(t){var i=this.aa;i.height!==t&&(i.La(),i.height=t,i.freeze())}),Fa.prototype.commit=function(){var t=this.rh;if(null!==t){var i=this.kb,e=t.bounds;Ul.Sa(e)?(e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height):t.bounds=i.copy()}else if(t=this.Cc,null!==t){if(i=this.kb,!(t instanceof xa)){var e=t.ba,n=t.ec.lb(ou);if(e.J()&&n.J())return void t.moveTo(i.x+this.Cs-(n.x-e.x),i.y+this.Ds-(n.y-e.y))}t.moveTo(i.x,i.y)}},Fa.prototype.addSourceEdge=Fa.prototype.LC=function(t){null!==t&&(this.Ie.contains(t)||this.Ie.add(t))},Fa.prototype.deleteSourceEdge=Fa.prototype.kD=function(t){null!==t&&this.Ie.remove(t)},Fa.prototype.addDestinationEdge=Fa.prototype.KC=function(t){null!==t&&(this.Ce.contains(t)||this.Ce.add(t))},Fa.prototype.deleteDestinationEdge=Fa.prototype.jD=function(t){null!==t&&this.Ce.remove(t)},Ul.u(Fa,{nI:"sourceVertexes"},function(){for(var t=new f(Fa),i=this.kc;i.next();)t.add(i.value.fromVertex);return t.i}),Ul.u(Fa,{rG:"destinationVertexes"},function(){for(var t=new f(Fa),i=this.bc;i.next();)t.add(i.value.toVertex);return t.i}),Ul.u(Fa,{vertexes:"vertexes"},function(){for(var t=new f(Fa),i=this.kc;i.next();)t.add(i.value.fromVertex);for(i=this.bc;i.next();)t.add(i.value.toVertex);return t.i}),Ul.u(Fa,{kc:"sourceEdges"},function(){return this.Ie.i}),Ul.u(Fa,{bc:"destinationEdges"},function(){return this.Ce.i}),Ul.u(Fa,{edges:"edges"},function(){for(var t=new l(za),i=this.kc;i.next();)t.add(i.value);for(i=this.bc;i.next();)t.add(i.value);return t.i}),Ul.u(Fa,{xG:"edgesCount"},function(){return this.Ie.count+this.Ce.count});var fp;Fa.standardComparer=fp=function(t,i){var e=t.ld,n=i.ld;return e?n?(e=e.text,n=n.text,n>e?-1:e>n?1:0):1:null!==n?-1:0},Fa.smartComparer=function(t,i){if(null!==t){if(null!==i){var e=t.ld,n=i.ld;if(null!==e){if(null!==n){for(var e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),n=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),r=0;r<e.length;r++)if(""!==n[r]&&void 0!==n[r]){var o=parseFloat(e[r]),s=parseFloat(n[r]);if(isNaN(o)){if(!isNaN(s))return 1;if(0!==e[r].localeCompare(n[r]))return e[r].localeCompare(n[r])}else{if(isNaN(s))return-1;if(0!==o-s)return o-s}}else if(""!==e[r])return 1;return""!==n[r]&&void 0!==n[r]?-1:0}return 1}return null!==n?-1:0}return 1}return null!==i?-1:0},Ul.fa("LayoutEdge",za),za.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null},za.prototype.toString=function(t){void 0===t&&(t=0);var i="LayoutEdge#"+Ul.Uc(this);return t>0&&(i+=null!==this.link?"("+this.link.toString()+")":"",t>1&&(i+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --> "+(this.toVertex?this.toVertex.toString():"null"))),i},za.prototype.yw=function(){var t=this.fromVertex;this.fromVertex=this.toVertex,this.toVertex=t},za.prototype.commit=function(){},za.prototype.getOtherVertex=za.prototype.GG=function(t){return this.toVertex===t?this.fromVertex:this.fromVertex===t?this.toVertex:null},Ul.Ga(Ba,Sa),Ul.fa("GridLayout",Ba),Ba.prototype.cloneProtected=function(t){Sa.prototype.cloneProtected.call(this,t),t.bs=this.bs,t.as=this.as,t.Ti.assign(this.Ti),t.Hh.assign(this.Hh),t.se=this.se,t.Yc=this.Yc,t.Gh=this.Gh,t.qh=this.qh},Ba.prototype.doLayout=function(t){null===t&&Ul.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.Ud=this.initialOrigin(this.Ud);var i=this.g,e=new f(es);for(t instanceof Ge?(i=t,Ca(this,e,t.yg,!0,null,!0,!0,!0),Ca(this,e,t.links,!0,null,!0,!0,!0),Ca(this,e,t.Sj,!0,null,!0,!0,!0)):t instanceof xa?(i=t.g,Ca(this,e,t.Mc,!1,null,!0,!0,!0)):e.Td(t.i),t=e.copy().i;t.next();){var n=t.value;if(n instanceof Bs){var r=n;if(null!==r.W||null!==r.ca){e.remove(r);continue}}if(n.pf(),n instanceof xa)for(n=n.Mc;n.next();)e.remove(n.value)}if(r=e.Ke(),0!==r.length){switch(this.sorting){case mp:r.reverse();break;case bp:r.sort(this.comparer);break;case xp:r.sort(this.comparer),r.reverse()}var o=this.EI;isNaN(o)&&(o=0);
var s=this.cF,s=isNaN(s)&&null!==i?Math.max(i.ob.width-i.padding.left-i.padding.right,0):Math.max(this.cF,0);switch(0>=o&&0>=s&&(o=1),e=this.spacing.width,isFinite(e)||(e=0),t=this.spacing.height,isFinite(t)||(t=0),null!==i&&i.Wb("Layout"),n=[],this.alignment){case pp:var a=e,h=t,l=Math.max(this.qo.width,1);if(!isFinite(l))for(var u=l=0;u<r.length;u++)var c=r[u],p=c.Ba,l=Math.max(l,p.width);var l=Math.max(l+a,1),d=Math.max(this.qo.height,1);if(!isFinite(d))for(u=d=0;u<r.length;u++)c=r[u],p=c.Ba,d=Math.max(d,p.height);for(var d=Math.max(d+h,1),y=this.Gf,v=this.Ud.x,g=v,b=this.Ud.y,x=0,w=0,u=0;u<r.length;u++){var c=r[u],p=c.Ba,M=Math.ceil((p.width+a)/l)*l,P=Math.ceil((p.height+h)/d)*d,T=0;switch(y){case vp:T=Math.abs(g-p.width);break;default:T=g+p.width}switch((o>0&&x>o-1||s>0&&x>0&&T>s)&&(n.push(new k(0,b,s+a,w)),x=0,g=v,b+=w,w=0),w=Math.max(w,P),P=0,y){case vp:P=-p.width;break;default:P=0}switch(c.moveTo(g+P,b),y){case vp:g-=M;break;default:g+=M}x++}n.push(new k(0,b,s+a,w));break;case dp:for(a=o,h=e,l=t,u=Math.max(this.qo.width,1),c=b=M=0,p=Ul.K(),o=0;o<r.length;o++)d=r[o],y=d.Ba,v=as(d,d.ec,d.Ze,p),M=Math.max(M,v.x),b=Math.max(b,y.width-v.x),c=Math.max(c,v.y);switch(g=this.Gf){case vp:M+=h;break;default:b+=h}var u=isFinite(u)?Math.max(u+h,1):Math.max(M+b,1),S=b=this.Ud.x,x=this.Ud.y,w=0;s>=M&&(s-=M);for(var M=P=0,T=Math.max(this.qo.height,1),C=c=0,j=!0,N=Ul.K(),o=0;o<r.length;o++){if(d=r[o],y=d.Ba,v=as(d,d.ec,d.Ze,p),w>0)switch(g){case vp:S=Math.floor((S-b-(y.width-v.x))/u)*u+b;break;default:S=Math.ceil((S-b+v.x)/u)*u+b}else switch(g){case vp:P=S+v.x+y.width;break;default:P=S-v.x}var D=0;switch(g){case vp:D=-(S+v.x)+P;break;default:D=S+y.width-v.x-P}if(a>0&&w>a-1||s>0&&w>0&&D>s){for(n.push(new k(0,j?x-c:x,s+h,C+c+l)),S=0;w>S&&o!==w;S++){var D=r[o-w+S],A=as(D,D.ec,D.Ze,N);D.moveTo(D.position.x,D.position.y+c-A.y)}C+=l,x=j?x+C:x+(C+c),w=C=c=0,S=b,j=!1}switch(S===b&&(M=g===vp?Math.max(M,y.width-v.x):Math.min(M,-v.x)),c=Math.max(c,v.y),C=Math.max(C,y.height-v.y),isFinite(T)&&(C=Math.max(C,Math.max(y.height,T)-v.y)),j?d.moveTo(S-v.x,x-v.y):d.moveTo(S-v.x,x),g){case vp:S-=v.x+h;break;default:S+=y.width-v.x+h}w++}for(n.push(new k(0,x,s+h,(j?C:C+c)+l)),S=0;w>S&&o!==w;S++)D=r[o-w+S],A=as(D,D.ec,D.Ze,p),D.moveTo(D.position.x,D.position.y+c-A.y);if(Ul.v(p),Ul.v(N),g===vp)for(o=0;o<n.length;o++)r=n[o],r.width+=M,r.x-=M;else for(o=0;o<n.length;o++)r=n[o],r.x>M&&(r.width+=r.x-M,r.x=M)}for(a=o=s=r=0;a<n.length;a++)h=n[a],r=Math.min(r,h.x),s=Math.min(s,h.y),o=Math.max(o,h.x+h.width);this.Gf===vp?this.commitLayers(n,new m(r+e/2-(o+r),s-t/2)):this.commitLayers(n,new m(r-e/2,s-t/2)),null!==i&&i.Wd("Layout"),this.vf=!0}},Ba.prototype.commitLayers=function(){},Ul.defineProperty(Ba,{cF:"wrappingWidth"},function(){return this.bs},function(t){this.bs!==t&&(Ul.j(t,"number",Ba,"wrappingWidth"),t>0||isNaN(t))&&(this.bs=t,this.jw=isNaN(t),this.H())}),Ul.defineProperty(Ba,{EI:"wrappingColumn"},function(){return this.as},function(t){this.as!==t&&(Ul.j(t,"number",Ba,"wrappingColumn"),t>0||isNaN(t))&&(this.as=t,this.H())}),Ul.defineProperty(Ba,{qo:"cellSize"},function(){return this.Ti},function(t){Ul.C(t,w,Ba,"cellSize"),this.Ti.L(t)||(this.Ti.assign(t),this.H())}),Ul.defineProperty(Ba,{spacing:"spacing"},function(){return this.Hh},function(t){Ul.C(t,w,Ba,"spacing"),this.Hh.L(t)||(this.Hh.assign(t),this.H())}),Ul.defineProperty(Ba,{alignment:"alignment"},function(){return this.se},function(t){this.se!==t&&(Ul.rb(t,Ba,Ba,"alignment"),t===dp||t===pp)&&(this.se=t,this.H())}),Ul.defineProperty(Ba,{Gf:"arrangement"},function(){return this.Yc},function(t){this.Yc!==t&&(Ul.rb(t,Ba,Ba,"arrangement"),t===yp||t===vp)&&(this.Yc=t,this.H())}),Ul.defineProperty(Ba,{sorting:"sorting"},function(){return this.Gh},function(t){this.Gh!==t&&(Ul.rb(t,Ba,Ba,"sorting"),t===gp||t===mp||t===bp||t===xp)&&(this.Gh=t,this.H())}),Ul.defineProperty(Ba,{comparer:"comparer"},function(){return this.qh},function(t){this.qh!==t&&(Ul.j(t,"function",Ba,"comparer"),this.qh=t,this.H())});var cp;Ba.standardComparer=cp=function(t,i){var e=t.text,n=i.text;return n>e?-1:e>n?1:0},Ba.smartComparer=function(t,i){if(null!==t){if(null!==i){for(var e=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),n=i.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),r=0;r<e.length;r++)if(""!==n[r]&&void 0!==n[r]){var o=parseFloat(e[r]),s=parseFloat(n[r]);if(isNaN(o)){if(!isNaN(s))return 1;if(0!==e[r].localeCompare(n[r]))return e[r].localeCompare(n[r])}else{if(isNaN(s))return-1;if(0!==o-s)return o-s}}else if(""!==e[r])return 1;return""!==n[r]&&void 0!==n[r]?-1:0}return 1}return null!==i?-1:0};var pp;Ba.Position=pp=Ul.s(Ba,"Position",0);var dp;Ba.Location=dp=Ul.s(Ba,"Location",1);var yp;Ba.LeftToRight=yp=Ul.s(Ba,"LeftToRight",2);var vp;Ba.RightToLeft=vp=Ul.s(Ba,"RightToLeft",3);var gp;Ba.Forward=gp=Ul.s(Ba,"Forward",4);var mp;Ba.Reverse=mp=Ul.s(Ba,"Reverse",5);var bp;Ba.Ascending=bp=Ul.s(Ba,"Ascending",6);var xp;Ba.Descending=xp=Ul.s(Ba,"Descending",7),Ul.Ga(qa,Sa),Ul.fa("CircularLayout",qa),qa.prototype.cloneProtected=function(t){Sa.prototype.cloneProtected.call(this,t),t.lr=this.lr,t.yp=this.yp,t.Mr=this.Mr,t.Pr=this.Pr,t.Yc=this.Yc,t.la=this.la,t.Gh=this.Gh,t.qh=this.qh,t.Hh=this.Hh,t.Zq=this.Zq},qa.prototype.createNetwork=function(){return new Xa},qa.prototype.doLayout=function(t){if(null===t&&Ul.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),t=this.network.vertexes,1>=t.count)1===t.count&&(t=t.first(),t.Ja=0,t.Ua=0);else{var i=new l(Za);i.Td(t.i),t=new l(Za);var e,n=new l(Za);e=this.sort(i);var r=this.Fx,o=this.eB,s=this.td,a=this.rn,h=this.Gx,u=this.Sp,i=this.mk,f=this.yC,c=this.jg,p=this.Vt,r=this.Gf,o=this.qw,s=this.OH;if((!isFinite(s)||0>=s)&&(s=0/0),a=this.QF,(!isFinite(a)||0>=a)&&(a=1),h=this.Je,isFinite(h)||(h=0),u=this.Qf,(!isFinite(u)||u>360||1>u)&&(u=360),i=this.spacing,isFinite(i)||(i=0/0),r===Pp&&o===Bp?r=wp:r===Pp&&o!==Bp&&(o=Bp,r=this.Gf),(this.direction===Cp||this.direction===jp)&&this.sorting!==Fp){for(var d=0;!(d>=e.length)&&(t.add(e.ja(d)),!(d+1>=e.length));d+=2)n.add(e.ja(d+1));this.direction===Cp?(this.Gf===Pp&&t.reverse(),e=new l(Za),e.Td(t),e.Td(n)):(this.Gf===Pp&&n.reverse(),e=new l(Za),e.Td(n),e.Td(t))}for(var y=e.length,v=f=0,d=0;d<e.length;d++){var c=h+u*v*(this.direction===Tp?1:-1)/y,g=e.ja(d).diameter;isNaN(g)&&(g=Qa(e.ja(d),c)),360>u&&(0===d||d===e.length-1)&&(g/=2),f+=g,v++}if(isNaN(s)||r===Pp){if(isNaN(i)&&(i=6),r!==wp&&r!==Pp){for(g=-1/0,d=0;y>d;d++){var p=e.ja(d),m=e.ja(d===y-1?0:d+1);isNaN(p.diameter)&&Qa(p,0),isNaN(m.diameter)&&Qa(m,0),g=Math.max(g,(p.diameter+m.diameter)/2)}p=g+i,r===Mp?(c=2*Math.PI/y,s=(g+i)/c):s=Ya(this,p*(u>=360?y:y-1),a,h*Math.PI/180,u*Math.PI/180)}else s=Ya(this,f+(u>=360?y:y-1)*(r!==Pp?i:1.6*i),a,h*Math.PI/180,u*Math.PI/180);c=s*a}else if(c=s*a,v=Ua(this,s,c,h*Math.PI/180,u*Math.PI/180),isNaN(i))(r===wp||r===Pp)&&(i=(v-f)/(u>=360?y:y-1));else if(r===wp||r===Pp)d=(v-f)/(u>=360?y:y-1),i>d?(s=Ya(this,f+i*(u>=360?y:y-1),a,h*Math.PI/180,u*Math.PI/180),c=s*a):i=d;else{for(g=-1/0,d=0;y>d;d++)p=e.ja(d),m=e.ja(d===y-1?0:d+1),isNaN(p.diameter)&&Qa(p,0),isNaN(m.diameter)&&Qa(m,0),g=Math.max(g,(p.diameter+m.diameter)/2);p=g+i,d=Ya(this,p*(u>=360?y:y-1),a,h*Math.PI/180,u*Math.PI/180),d>s?(s=d,c=s*a):p=v/(u>=360?y:y-1)}if(this.Fx=r,this.eB=o,this.td=s,this.rn=a,this.Gx=h,this.Sp=u,this.mk=i,this.yC=f,this.jg=c,this.Vt=p,i=e,e=this.Fx,r=this.td,o=this.Gx,a=this.Sp,h=this.mk,u=this.jg,f=this.Vt,this.direction!==Cp&&this.direction!==jp||e!==Pp)if(this.direction===Cp||this.direction===jp){switch(s=0,e){case kp:s=180*Ja(this,r,u,o,f)/Math.PI;break;case wp:f=i=0,s=t.first(),null!==s&&(i=Qa(s,Math.PI/2)),s=n.first(),null!==s&&(f=Qa(s,Math.PI/2)),s=180*Ja(this,r,u,o,h+(i+f)/2)/Math.PI;break;case Mp:s=a/i.length}if(this.direction===Cp){switch(e){case kp:Ia(this,t,o,Sp);break;case wp:Ea(this,t,o,Sp);break;case Mp:Oa(this,t,a/2,o,Sp)}switch(e){case kp:Ia(this,n,o+s,Tp);break;case wp:Ea(this,n,o+s,Tp);break;case Mp:Oa(this,n,a/2,o+s,Tp)}}else{switch(e){case kp:Ia(this,n,o,Sp);break;case wp:Ea(this,n,o,Sp);break;case Mp:Oa(this,n,a/2,o,Sp)}switch(e){case kp:Ia(this,t,o+s,Tp);break;case wp:Ea(this,t,o+s,Tp);break;case Mp:Oa(this,t,a/2,o+s,Tp)}}}else switch(e){case kp:Ia(this,i,o,this.direction);break;case wp:Ea(this,i,o,this.direction);break;case Mp:Oa(this,i,a,o,this.direction);break;case Pp:Ra(this,i,a,o,this.direction)}else Ra(this,i,a,o-a/2,Tp)}this.updateParts(),this.network=null,this.vf=!0},qa.prototype.commitLayout=function(){this.commitNodes(),this.Qs&&this.commitLinks()},qa.prototype.commitNodes=function(){for(var t=this.IF,i=this.network.vertexes.i;i.next();){var e=i.value;e.x+=t.x,e.y+=t.y,e.commit()}},qa.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},qa.prototype.sort=function(t){switch(this.sorting){case Np:break;case Dp:t.reverse();break;case Ap:t.sort(this.comparer);break;case Lp:t.sort(this.comparer),t.reverse();break;case Fp:for(var i=[],e=0;e<t.length;e++)i.push(0);for(var n=new l(Za),e=0;e<t.length;e++){var r=-1,o=-1;if(0===e)for(var s=0;s<t.length;s++){var a=t.ja(s).xG;a>r&&(r=a,o=s)}else for(s=0;s<t.length;s++)a=i[s],a>r&&(r=a,o=s);for(n.add(t.ja(o)),i[o]=-1,o=t.ja(o),r=0,s=o.kc;s.next();)r=t.indexOf(s.value.fromVertex),0>r||0<=i[r]&&i[r]++;for(o=o.bc;o.next();)r=t.indexOf(o.value.toVertex),0>r||0<=i[r]&&i[r]++}for(t=[],i=0;i<n.length;i++){s=n.ja(i),t[i]=[];for(var h=0,e=s.bc;e.next();)h=n.indexOf(e.value.toVertex),h!==i&&0>t[i].indexOf(h)&&t[i].push(h);for(e=s.kc;e.next();)h=n.indexOf(e.value.fromVertex),h!==i&&0>t[i].indexOf(h)&&t[i].push(h)}for(s=[],i=0;i<t.length;i++)s[i]=0;for(var e=[],a=[],u=[],r=[],o=new l(Za),f=0,i=0;i<t.length;i++){var c=t[i].length;if(1===c)r.push(i);else if(0===c)o.add(n.ja(i));else{if(0===f)e.push(i);else{for(var p=1/0,d=1/0,y=-1,v=[],c=0;c<e.length;c++)0>t[e[c]].indexOf(e[c===e.length-1?0:c+1])&&v.push(c===e.length-1?0:c+1);if(0===v.length)for(c=0;c<e.length;c++)v.push(c);for(c=0;c<v.length;c++){var g,m=v[c],h=t[i];g=a;for(var b=u,x=s,w=m,k=e,M=0,P=0;P<g.length;P++){var T=x[g[P]],S=x[b[P]],C=0,j=0;if(S>T?(C=T,j=S):(C=S,j=T),w>C&&j>=w)for(T=0;T<h.length;T++)S=h[T],0>k.indexOf(S)||C<x[S]&&x[S]<j||C===x[S]||j===x[S]||M++;else for(T=0;T<h.length;T++)S=h[T],0>k.indexOf(S)||C<x[S]&&x[S]<j&&C!==x[S]&&j!==x[S]&&M++}for(g=M,x=b=0;x<t[i].length;x++)h=e.indexOf(t[i][x]),h>=0&&(h=Math.abs(m-(h>=m?h+1:h)),b+=h<e.length+1-h?h:e.length+1-h);for(x=0;x<a.length;x++)h=s[a[x]],w=s[u[x]],h>=m&&h++,w>=m&&w++,h>w&&(k=w,w=h,h=k),w-h<(e.length+2)/2==(m>h&&w>=m)&&b++;(p>g||g===p&&d>b)&&(p=g,d=b,y=m)}for(e.splice(y,0,i),c=0;c<e.length;c++)s[e[c]]=c;for(c=0;c<t[i].length;c++)p=t[i][c],0<=e.indexOf(p)&&(a.push(i),u.push(p))}f++}}for(a=!1,u=e.length;;){for(a=!0,s=0;s<r.length;s++)if(i=r[s],f=t[i][0],h=e.indexOf(f),h>=0){for(d=c=0;d<t[f].length;d++)p=t[f][d],p=e.indexOf(p),0>p||p===h||(y=p>h?p-h:h-p,c+=h>p!=y>u-y?1:-1);e.splice(0>c?h:h+1,0,i),r.splice(s,1),s--}else a=!1;if(a)break;e.push(r[0]),r.splice(0,1)}for(i=0;i<e.length;i++)h=e[i],o.add(n.ja(h));return o;default:Ul.k("Invalid sorting type.")}return t},Ul.defineProperty(qa,{OH:"radius"},function(){return this.lr},function(t){this.lr!==t&&(Ul.j(t,"number",qa,"radius"),t>0||isNaN(t))&&(this.lr=t,this.H())}),Ul.defineProperty(qa,{QF:"aspectRatio"},function(){return this.yp},function(t){this.yp!==t&&(Ul.j(t,"number",qa,"aspectRatio"),t>0&&(this.yp=t,this.H()))}),Ul.defineProperty(qa,{Je:"startAngle"},function(){return this.Mr},function(t){this.Mr!==t&&(Ul.j(t,"number",qa,"startAngle"),this.Mr=t,this.H())}),Ul.defineProperty(qa,{Qf:"sweepAngle"},function(){return this.Pr},function(t){this.Pr!==t&&(Ul.j(t,"number",qa,"sweepAngle"),this.Pr=t>0&&360>=t?t:360,this.H())}),Ul.defineProperty(qa,{Gf:"arrangement"},function(){return this.Yc},function(t){this.Yc!==t&&(Ul.rb(t,qa,qa,"arrangement"),t===Pp||t===wp||t===kp||t===Mp)&&(this.Yc=t,this.H())}),Ul.defineProperty(qa,{direction:"direction"},function(){return this.la},function(t){this.la!==t&&(Ul.rb(t,qa,qa,"direction"),t===Tp||t===Sp||t===Cp||t===jp)&&(this.la=t,this.H())}),Ul.defineProperty(qa,{sorting:"sorting"},function(){return this.Gh},function(t){this.Gh!==t&&(Ul.rb(t,qa,qa,"sorting"),t===Np||t===Dp||t===Ap||Lp||t===Fp)&&(this.Gh=t,this.H())}),Ul.defineProperty(qa,{comparer:"comparer"},function(){return this.qh},function(t){this.qh!==t&&(Ul.j(t,"function",qa,"comparer"),this.qh=t,this.H())}),Ul.defineProperty(qa,{spacing:"spacing"},function(){return this.Hh},function(t){this.Hh!==t&&(Ul.j(t,"number",qa,"spacing"),this.Hh=t,this.H())}),Ul.defineProperty(qa,{qw:"nodeDiameterFormula"},function(){return this.Zq},function(t){this.Zq!==t&&(Ul.rb(t,qa,qa,"nodeDiameterFormula"),t===zp||t===Bp)&&(this.Zq=t,this.H())}),Ul.u(qa,{JF:"actualXRadius"},function(){return this.td}),Ul.u(qa,{KF:"actualYRadius"},function(){return this.jg}),Ul.u(qa,{GI:"actualSpacing"},function(){return this.mk}),Ul.u(qa,{IF:"actualCenter"},function(){return isNaN(this.Ud.x)||isNaN(this.Ud.y)?new m(0,0):new m(this.Ud.x+this.JF,this.Ud.y+this.KF)});var wp;qa.ConstantSpacing=wp=Ul.s(qa,"ConstantSpacing",0);var kp;qa.ConstantDistance=kp=Ul.s(qa,"ConstantDistance",1);var Mp;qa.ConstantAngle=Mp=Ul.s(qa,"ConstantAngle",2);var Pp;qa.Packed=Pp=Ul.s(qa,"Packed",3);var Tp;qa.Clockwise=Tp=Ul.s(qa,"Clockwise",4);var Sp;qa.Counterclockwise=Sp=Ul.s(qa,"Counterclockwise",5);var Cp;qa.BidirectionalLeft=Cp=Ul.s(qa,"BidirectionalLeft",6);var jp;qa.BidirectionalRight=jp=Ul.s(qa,"BidirectionalRight",7);var Np;qa.Forwards=Np=Ul.s(qa,"Forwards",8);var Dp;qa.Reverse=Dp=Ul.s(qa,"Reverse",9);var Ap;qa.Ascending=Ap=Ul.s(qa,"Ascending",10);var Lp;qa.Descending=Lp=Ul.s(qa,"Descending",11);var Fp;qa.Optimized=Fp=Ul.s(qa,"Optimized",12);var zp;qa.Pythagorean=zp=Ul.s(qa,"Pythagorean",13);var Bp;qa.Circular=Bp=Ul.s(qa,"Circular",14),Wa.prototype.compare=function(t,i){if(t>0&&0>this.Ao||Math.abs(t)<Math.abs(this.Ao)&&!(0>t&&0<this.Ao)){this.Ao=t,this.Qm=[],this.lp=[];for(var e=0;e<i.length;e++)this.Qm[e]=i[e].kb.x,this.lp[e]=i[e].kb.y}},Wa.prototype.commit=function(t){if(null!==this.Qm&&null!==this.lp)for(var i=0;i<this.Qm.length;i++){var e=t.ja(i);e.x=this.Qm[i],e.y=this.lp[i]}},Ul.Ga(Xa,ja),Ul.fa("CircularNetwork",Xa),Xa.prototype.createVertex=function(){return new Za},Xa.prototype.createEdge=function(){return new $a},Ul.Ga(Za,Fa),Ul.fa("CircularVertex",Za),Ul.Ga($a,za),Ul.fa("CircularEdge",$a),Ul.Ga(_a,Sa),Ul.fa("ForceDirectedLayout",_a),_a.prototype.cloneProtected=function(t){Sa.prototype.cloneProtected.call(this,t),t.Uf.assign(this.Uf),t.xp=this.xp,t.Fh=this.Fh,t.ph=this.ph,t.On=this.On,t.Up=this.Up,t.zh=this.zh,t.mr=this.mr,t.mn=this.mn,t.ln=this.ln,t.hn=this.hn,t.kn=this.kn,t.Op=this.Op,t.Np=this.Np},_a.prototype.createNetwork=function(){return new uh},_a.prototype.doLayout=function(t){if(null===t&&Ul.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),t=this.Az,0<this.network.vertexes.count){this.network.Qv();for(var i=this.network.vertexes.i;i.next();){var e=i.value;e.charge=this.electricalCharge(e),e.mass=this.gravitationalMass(e)}for(i=this.network.edges.i;i.next();)e=i.value,e.stiffness=this.springStiffness(e),e.length=this.springLength(e);if(this.Ny(),this.vq=0,this.needsClusterLayout()){for(i=this.network,e=i.oI().i;e.next();){this.network=e.value;for(var n=this.network.vertexes.i;n.next();){var r=n.value;r.Of=r.vertexes.count,r.Rj=1,r.rm=null,r.hh=null}th(this,0,t)}this.network=i,e.reset();for(var n=this.QC,o=e.count,s=!0,a=r=0,h=Ul.eb(),l=0;l<o+i.vertexes.count+2;l++)h[l]=null;o=0,e.reset();for(var u=Ul.Sf();e.next();)if(l=e.value,this.kg(l,u),s)s=!1,r=u.x+u.width/2,a=u.y+u.height/2,h[0]=new m(u.x+u.width+n.width,u.y),h[1]=new m(u.x,u.y+u.height+n.height),o=2;else{var f=oh(h,o,r,a,u.width,u.height,n),c=h[f],p=new m(c.x+u.width+n.width,c.y),d=new m(c.x,c.y+u.height+n.height);for(o>f+1&&h.splice(f+1,0,null),h[f]=p,h[f+1]=d,o++,f=c.x-u.x,c=c.y-u.y,l=l.vertexes.i;l.next();)p=l.value,p.Ja+=f,p.Ua+=c}for(Ul.ic(u),l=i.vertexes.i;l.next();)s=l.value,u=s.kb,2>o?(r=u.x+u.width/2,a=u.y+u.height/2,h[0]=new m(u.x+u.width+n.width,u.y),h[1]=new m(u.x,u.y+u.height+n.height),o=2):(f=oh(h,o,r,a,u.width,u.height,n),c=h[f],p=new m(c.x+u.width+n.width,c.y),d=new m(c.x,c.y+u.height+n.height),o>f+1&&h.splice(f+1,0,null),h[f]=p,h[f+1]=d,o++,s.Ja=c.x+s.width/2,s.Ua=c.y+s.height/2);for(Ul.ra(h),e.reset();e.next();){for(n=e.value,r=n.vertexes.i;r.next();)i.Mk(r.value);for(n=n.edges.i;n.next();)i.ko(n.value)}}ah(this,t),this.updateParts()}this.On=t,this.network=null,this.vf=!0},_a.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,i=0,e=this.network.vertexes.first().kb,n=this.network.vertexes.i;n.next();){if(n.value.kb.sg(e)&&(t++,t>2))return!0;if(i>10)break;i++}return!1},_a.prototype.kg=function(t,i){for(var e=!0,n=t.vertexes.i;n.next();){var r=n.value;e?(e=!1,i.set(r.kb)):i.Th(r.kb)}return i},_a.prototype.Ny=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},_a.prototype.addComments=function(t){var i=t.Cc;if(null!==i)for(i=i.rD();i.next();){var e=i.value;if("Comment"===e.Kc&&e.Ea()){var n=this.network.Am(e);null===n&&(n=this.network.ds(e)),n.charge=this.lG;for(var e=null,r=n.bc;r.next();){var o=r.value;if(o.toVertex===t){e=o;break}}if(null===e)for(r=n.kc;r.next();)if(o=r.value,o.fromVertex===t){e=o;break}null===e&&(e=this.network.No(t,n,null)),e.length=this.mG}}},_a.prototype.moveFixedVertex=function(){},_a.prototype.commitLayout=function(){this.cA(),this.commitNodes(),this.Qs&&this.commitLinks()},_a.prototype.cA=function(){if(this.fp)for(var t=this.network.edges.i;t.next();){var i=t.value.link;null!==i&&(i.vb=tu,i.xb=tu)}},_a.prototype.commitNodes=function(){var t=0,i=0;if(this.PF){var e=Ul.Sf();this.kg(this.network,e),i=this.Ud,t=i.x-e.x,i=i.y-e.y,Ul.ic(e)}for(var e=Ul.Sf(),n=this.network.vertexes.i;n.next();){var r=n.value;(0!==t||0!==i)&&(e.assign(r.kb),e.x+=t,e.y+=i,r.kb=e),r.commit()}Ul.ic(e)},_a.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},_a.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.mn:t},_a.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.ln:t},_a.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.hn:t},_a.prototype.electricalFieldX=function(){return 0},_a.prototype.electricalFieldY=function(){return 0},_a.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.kn:t},_a.prototype.gravitationalFieldX=function(){return 0},_a.prototype.gravitationalFieldY=function(){return 0},_a.prototype.isFixed=function(t){return t.isFixed},Ul.u(_a,{hJ:"currentIteration"},function(){return this.vq}),Ul.defineProperty(_a,{QC:"arrangementSpacing"},function(){return this.Uf},function(t){Ul.C(t,w,_a,"arrangementSpacing"),this.Uf.L(t)||(this.Uf.assign(t),this.H())}),Ul.defineProperty(_a,{PF:"arrangesToOrigin"},function(){return this.xp},function(t){this.xp!==t&&(Ul.j(t,"boolean",_a,"arrangesToOrigin"),this.xp=t,this.H())}),Ul.defineProperty(_a,{fp:"setsPortSpots"},function(){return this.Fh},function(t){this.Fh!==t&&(Ul.j(t,"boolean",_a,"setsPortSpots"),this.Fh=t,this.H())}),Ul.defineProperty(_a,{comments:"comments"},function(){return this.ph},function(t){this.ph!==t&&(Ul.j(t,"boolean",_a,"comments"),this.ph=t,this.H())}),Ul.defineProperty(_a,{Az:"maxIterations"},function(){return this.On},function(t){this.On!==t&&(Ul.j(t,"number",_a,"maxIterations"),t>=0&&(this.On=t,this.H()))}),Ul.defineProperty(_a,{oD:"epsilonDistance"},function(){return this.Up},function(t){this.Up!==t&&(Ul.j(t,"number",_a,"epsilonDistance"),t>0&&(this.Up=t,this.H()))}),Ul.defineProperty(_a,{BJ:"infinityDistance"},function(){return this.zh},function(t){this.zh!==t&&(Ul.j(t,"number",_a,"infinityDistance"),t>1&&(this.zh=t,this.H()))}),Ul.defineProperty(_a,{xw:"randomNumberGenerator"},function(){return this.mr},function(t){this.mr!==t&&(null!==t&&"function"!=typeof t.random&&Ul.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.mr=t)}),Ul.defineProperty(_a,{uJ:"defaultSpringStiffness"},function(){return this.mn},function(t){this.mn!==t&&(Ul.j(t,"number",_a,"defaultSpringStiffness"),this.mn=t,this.H())}),Ul.defineProperty(_a,{tJ:"defaultSpringLength"},function(){return this.ln},function(t){this.ln!==t&&(Ul.j(t,"number",_a,"defaultSpringLength"),this.ln=t,this.H())}),Ul.defineProperty(_a,{nJ:"defaultElectricalCharge"},function(){return this.hn},function(t){this.hn!==t&&(Ul.j(t,"number",_a,"defaultElectricalCharge"),this.hn=t,this.H())}),Ul.defineProperty(_a,{oJ:"defaultGravitationalMass"},function(){return this.kn},function(t){this.kn!==t&&(Ul.j(t,"number",_a,"defaultGravitationalMass"),this.kn=t,this.H())}),Ul.defineProperty(_a,{mG:"defaultCommentSpringLength"},function(){return this.Op},function(t){this.Op!==t&&(Ul.j(t,"number",_a,"defaultCommentSpringLength"),this.Op=t,this.H())}),Ul.defineProperty(_a,{lG:"defaultCommentElectricalCharge"},function(){return this.Np},function(t){this.Np!==t&&(Ul.j(t,"number",_a,"defaultCommentElectricalCharge"),this.Np=t,this.H())}),Ul.Ga(uh,ja),Ul.fa("ForceDirectedNetwork",uh),uh.prototype.createVertex=function(){return new fh},uh.prototype.createEdge=function(){return new ch},Ul.Ga(fh,Fa),Ul.fa("ForceDirectedVertex",fh),Ul.Ga(ch,za),Ul.fa("ForceDirectedEdge",ch),Ul.Ga(ph,Sa),Ul.fa("LayeredDigraphLayout",ph),ph.prototype.cloneProtected=function(t){Sa.prototype.cloneProtected.call(this,t),t.Ql=this.Ql,t.sd=this.sd,t.la=this.la,t.gn=this.gn,t.Mn=this.Mn,t.Bn=this.Bn,t.Nl=this.Nl,t.Wm=this.Wm,t.oi=this.oi,t.Fh=this.Fh,t.gj=this.gj},ph.prototype.createNetwork=function(){return new Jh},ph.prototype.doLayout=function(t){for(null===t&&Ul.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.Ud=this.initialOrigin(this.Ud),this.Fu=-1,this.Cf=this.Nq=0,this.Vq=this.Tq=this.Sl=null,t=0;t<this.Ng.length;t++)this.Ng[t]=null;if(0<this.network.vertexes.count){for(this.network.Qv(),t=this.network.edges.i;t.next();)t.value.rev=!1;switch(this.gn){default:case Op:var i=0,e=this.network.vertexes.count-1;t=[],t.length=e+1;for(var n=this.network.vertexes.i;n.next();)n.value.valid=!0;for(;null!==Mh(this.network);){for(n=Ph(this.network);null!==n;)t[e]=n,e--,n.valid=!1,n=Ph(this.network);for(n=Th(this.network);null!==n;)t[i]=n,i++,n.valid=!1,n=Th(this.network);for(var n=null,r=0,o=this.network.vertexes.i;o.next();){var s=o.value;if(s.valid){for(var a=0,h=s.bc;h.next();)h.value.toVertex.valid&&a++;for(var h=0,l=s.kc;l.next();)l.value.fromVertex.valid&&h++;(null===n||a-h>r)&&(n=s,r=a-h)}}null!==n&&(t[i]=n,i++,n.valid=!1)}for(i=0;i<this.network.vertexes.count;i++)t[i].index=i;for(t=this.network.edges.i;t.next();)i=t.value,i.fromVertex.index>i.toVertex.index&&(this.network.yw(i),i.rev=!0);break;case qp:for(i=this.network.vertexes.i;i.next();)t=i.value,t.wo=-1,t.finish=-1;for(t=this.network.edges.i;t.next();)t.value.forest=!1;for(this.Uq=0,i.reset();i.next();)e=i.value,0===e.kc.count&&Sh(this,e);for(i.reset();i.next();)e=i.value,-1===e.wo&&Sh(this,e);for(t.reset();t.next();)i=t.value,i.forest||(e=i.fromVertex,n=e.finish,r=i.toVertex,o=r.finish,r.wo<e.wo&&o>n&&(this.network.yw(i),i.rev=!0))}for(t=this.network.vertexes.i;t.next();)t.value.layer=-1;for(this.jb=-1,this.assignLayers(),t.reset();t.next();)this.jb=Math.max(this.jb,t.value.layer);for(t=[],e=this.network.edges.i;e.next();)i=e.value,i.valid=!1,t.push(i);for(e=0;e<t.length;e++)if(i=t[e],!i.valid&&(null!==i.fromVertex.ld&&null!==i.toVertex.ld||i.fromVertex.layer!==i.toVertex.layer)){if(h=s=a=o=0,r=i.fromVertex,n=i.toVertex,null!==i.link){if(a=i.link,null===a)continue;var u=r.ld,o=n.ld;if(null===u||null===o)continue;var f=a.W,s=a.ca,c=a.od,h=a.fe;i.rev&&(a=f,l=c,f=s,c=h,s=a,h=l);var p=r.M,a=i.toVertex.M,d=i.rev?n.aa:r.aa,l=Ul.K();d.J()?(as(f,c,ou,l),l.J()||l.assign(p)):l.assign(p),u!==f&&d.J()&&f.Ea()&&(u=r.aa,u.J()&&(l.x+=d.x-u.x,l.y+=d.y-u.y)),f=i.rev?r.aa:n.aa,u=Ul.K(),f.J()?(as(s,h,ou,u),u.J()||u.assign(a)):u.assign(a),o!==s&&f.J()&&s.Ea()&&(o=n.aa,o.J()&&(u.x+=f.x-o.x,u.y+=f.y-o.y)),90===this.la||270===this.la?(o=Math.round((l.x-p.x)/this.sd),s=l.x,a=Math.round((u.x-a.x)/this.sd),h=u.x):(o=Math.round((l.y-p.y)/this.sd),s=l.y,a=Math.round((u.y-a.y)/this.sd),h=u.y),Ul.v(l),Ul.v(u),i.portFromColOffset=o,i.portFromPos=s,i.portToColOffset=a,i.portToPos=h}else i.portFromColOffset=0,i.portFromPos=0,i.portToColOffset=0,i.portToPos=0;if(l=r.layer,p=n.layer,u=i,f=0,d=u.link,null!==d){var y=d.od,v=d.fe;if(null!==y&&null!==v){var g=d.W,c=d.ca;if(null!==g&&null!==c){var m=y.vb,b=v.xb;this.fp||(d.vb.Lc()||(m=d.vb),d.xb.Lc()||(b=d.xb)),(m.Lc()||m===_l)&&(m=Hh(this,!0)),(b.Lc()||b===_l)&&(b=Hh(this,!1));var x=d.dc,w=d.getLinkPoint(g,y,m,!0,x,c,v,Ul.K()),m=d.getLinkDirection(g,y,w,m,!0,x,c,v);Ul.v(w),m===Ah(this,u,!0)?f+=1:this.fp&&null!==g&&1===g.ports.count&&u.rev&&(f+=1),w=d.getLinkPoint(c,v,b,!1,x,g,y,Ul.K()),d=d.getLinkDirection(c,v,w,b,!1,x,g,y),Ul.v(w),d===Ah(this,u,!1)?f+=2:this.fp&&null!==c&&1===c.ports.count&&u.rev&&(f+=2)}}}if(u=1===f||3===f?!0:!1,(f=2===f||3===f?!0:!1)&&(c=this.network.createVertex(),c.ld=null,c.om=1,c.layer=l,c.near=r,this.network.Mk(c),r=this.network.No(r,c,i.link),r.valid=!1,r.rev=i.rev,r.portFromColOffset=o,r.portToColOffset=0,r.portFromPos=s,r.portToPos=0,r=c),d=1,u&&d--,l-p>d&&l>0){for(i.valid=!1,c=this.network.createVertex(),c.ld=null,c.om=2,c.layer=l-1,this.network.Mk(c),r=this.network.No(r,c,i.link),r.valid=!0,r.rev=i.rev,r.portFromColOffset=f?0:o,r.portToColOffset=0,r.portFromPos=f?0:s,r.portToPos=0,r=c,l--;l-p>d&&l>0;)c=this.network.createVertex(),c.ld=null,c.om=3,c.layer=l-1,this.network.Mk(c),r=this.network.No(r,c,i.link),r.valid=!0,r.rev=i.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=c,l--;r=this.network.No(c,n,i.link),r.valid=!u,u&&(c.near=n),r.rev=i.rev,r.portFromColOffset=0,r.portToColOffset=a,r.portFromPos=0,r.portToPos=h}else i.valid=!0}for(i=this.Ld=[],e=0;e<=this.jb;e++)i[e]=0;for(t=this.network.vertexes.i;t.next();)e=t.value,e.index=-1;for(this.initializeIndices(),this.Fu=-1,e=this.Cf=this.Nq=0;e<=this.jb;e++)i[e]>i[this.Cf]&&(this.Fu=i[e]-1,this.Cf=e),i[e]<i[this.Nq]&&(this.Nq=e);for(this.Vq=[],e=0;e<i.length;e++)this.Vq[e]=[];for(t.reset();t.next();)i=t.value,e=this.Vq[i.layer],e[i.index]=i;for(this.Hb=-1,t=0;t<=this.jb;t++){for(i=Kh(this,t),e=0,n=this.Ld[t],r=0;n>r;r++)o=i[r],e+=this.nodeMinColumnSpace(o,!0),o.column=e,e+=1,e+=this.nodeMinColumnSpace(o,!1);this.Hb=Math.max(this.Hb,e-1),Uh(this,t,i)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.vf=!0},ph.prototype.linkMinLength=function(t){var i=t.toVertex,e=0;for(t=t.fromVertex.bc;t.next();)t.value.toVertex===i&&e++;return e>1?2:1},ph.prototype.nodeMinLayerSpace=function(t,i){return null===t.ld?0:90===this.la||270===this.la?i?t.M.y+10:t.aa.height-t.M.y+10:i?t.M.x+10:t.aa.width-t.M.x+10},ph.prototype.nodeMinColumnSpace=function(t,i){if(null===t.ld)return 0;var e=i?t.Iz:t.Hz;return null!==e?e:(e=this.la,90===e||270===e?i?t.Iz=t.M.x/this.sd+1|0:t.Hz=(t.aa.width-t.M.x)/this.sd+1|0:i?t.Iz=t.M.y/this.sd+1|0:t.Hz=(t.aa.height-t.M.y)/this.sd+1|0)},ph.prototype.countCrossings=function(){for(var t=0,i=0;i<=this.jb;i++)for(var e=gh(this,i,1),n=this.Ld[i],r=0;n>r;r++)for(var o=r;n>o;o++)t+=e[r*n+o];return t},ph.prototype.normalize=function(){var t=1/0;this.Hb=-1;for(var i=this.network.vertexes.i;i.next();){var e=i.value,t=Math.min(t,e.column-this.nodeMinColumnSpace(e,!0));this.Hb=Math.max(this.Hb,e.column+this.nodeMinColumnSpace(e,!1))}for(i.reset();i.next();)i.value.column-=t;this.Hb-=t},ph.prototype.assignLayers=function(){switch(this.Mn){case Ip:Ch(this);break;case Rp:for(var t=0,i=this.network.vertexes.i;i.next();)t=Nh(this,i.value),this.jb=Math.max(t,this.jb);for(i.reset();i.next();)t=i.value,t.layer=this.jb-t.layer;break;default:case Ep:for(Ch(this),i=this.network.vertexes.i;i.next();)i.value.valid=!1;for(i.reset();i.next();)t=i.value,0===t.kc.count&&Dh(this,t);for(t=1/0,i.reset();i.next();)t=Math.min(t,i.value.layer);for(this.jb=-1,i.reset();i.next();){var e=i.value;e.layer-=t,this.jb=Math.max(this.jb,e.layer)}}},ph.prototype.initializeIndices=function(){switch(this.Bn){default:case Hp:for(var t=this.network.vertexes.i;t.next();){var i=t.value,e=i.layer;i.index=this.Ld[e],this.Ld[e]++}break;case Gp:for(t=this.network.vertexes.i,i=this.jb;i>=0;i--)for(t.reset();t.next();)e=t.value,e.layer===i&&-1===e.index&&Lh(this,e);break;case Vp:for(t=this.network.vertexes.i,i=0;i<=this.jb;i++)for(t.reset();t.next();)e=t.value,e.layer===i&&-1===e.index&&Fh(this,e)}},ph.prototype.reduceCrossings=function(){for(var t=this.countCrossings(),i=yh(this),e=0,n=0,r=0,e=0;e<this.Nl;e++){for(n=0;n<=this.jb;n++)zh(this,n,1),Bh(this,n,1);for(r=this.countCrossings(),t>r&&(t=r,i=yh(this)),n=this.jb;n>=0;n--)zh(this,n,-1),Bh(this,n,-1);r=this.countCrossings(),t>r&&(t=r,i=yh(this))}for(vh(this,i),e=0;e<this.Nl;e++){for(n=0;n<=this.jb;n++)zh(this,n,0),Bh(this,n,0);for(r=this.countCrossings(),t>r&&(t=r,i=yh(this)),n=this.jb;n>=0;n--)zh(this,n,0),Bh(this,n,0);r=this.countCrossings(),t>r&&(t=r,i=yh(this))}vh(this,i);var o=!1,s=e=0,a=0,n=0;switch(this.Wm){case Kp:break;case Yp:for(a=t+1;(n=this.countCrossings())<a;)for(a=n,e=this.jb;e>=0;e--)for(s=0;e>=s;s++){for(o=!0;o;)for(o=!1,n=e;n>=s;n--)o=Bh(this,n,-1)||o;for(r=this.countCrossings(),r>=t?vh(this,i):(t=r,i=yh(this)),o=!0;o;)for(o=!1,n=e;n>=s;n--)o=Bh(this,n,1)||o;for(r=this.countCrossings(),r>=t?vh(this,i):(t=r,i=yh(this)),o=!0;o;)for(o=!1,n=s;e>=n;n++)o=Bh(this,n,1)||o;for(r>=t?vh(this,i):(t=r,i=yh(this)),o=!0;o;)for(o=!1,n=s;e>=n;n++)o=Bh(this,n,-1)||o;for(r>=t?vh(this,i):(t=r,i=yh(this)),o=!0;o;)for(o=!1,n=e;n>=s;n--)o=Bh(this,n,0)||o;for(r>=t?vh(this,i):(t=r,i=yh(this)),o=!0;o;)for(o=!1,n=s;e>=n;n++)o=Bh(this,n,0)||o;r>=t?vh(this,i):(t=r,i=yh(this))}break;default:case Up:for(e=this.jb,s=0,a=t+1;(n=this.countCrossings())<a;){for(a=n,o=!0;o;)for(o=!1,n=e;n>=s;n--)o=Bh(this,n,-1)||o;for(r=this.countCrossings(),r>=t?vh(this,i):(t=r,i=yh(this)),o=!0;o;)for(o=!1,n=e;n>=s;n--)o=Bh(this,n,1)||o;for(r=this.countCrossings(),r>=t?vh(this,i):(t=r,i=yh(this)),o=!0;o;)for(o=!1,n=s;e>=n;n++)o=Bh(this,n,1)||o;for(r>=t?vh(this,i):(t=r,i=yh(this)),o=!0;o;)for(o=!1,n=s;e>=n;n++)o=Bh(this,n,-1)||o;for(r>=t?vh(this,i):(t=r,i=yh(this)),o=!0;o;)for(o=!1,n=e;n>=s;n--)o=Bh(this,n,0)||o;for(r>=t?vh(this,i):(t=r,i=yh(this)),o=!0;o;)for(o=!1,n=s;e>=n;n++)o=Bh(this,n,0)||o;r>=t?vh(this,i):(t=r,i=yh(this))}}vh(this,i)},ph.prototype.straightenAndPack=function(){var t=0,i=!1,e=0!==(this.oi&Jp),t=this.oi===Zp;if(1e3<this.network.edges.count&&!t&&(e=!1),e){for(i=[],t=t=0;t<=this.jb;t++)i[t]=0;for(var n=0,r=this.network.vertexes.i;r.next();){var o=r.value,t=o.layer,n=o.column,o=this.nodeMinColumnSpace(o,!1);i[t]=Math.max(i[t],n+o)}for(r.reset();r.next();)o=r.value,t=o.layer,n=o.column,o.column=(8*(this.Hb-i[t])>>1)+8*n;this.Hb*=8}if(0!==(this.oi&Wp))for(i=!0;i;){for(i=!1,t=this.Cf+1;t<=this.jb;t++)i=qh(this,t,1)||i;for(t=this.Cf-1;t>=0;t--)i=qh(this,t,-1)||i;i=qh(this,this.Cf,0)||i}if(0!==(this.oi&Xp)){for(t=this.Cf+1;t<=this.jb;t++)Eh(this,t,1);for(t=this.Cf-1;t>=0;t--)Eh(this,t,-1);Eh(this,this.Cf,0)}if(e&&(Gh(this,-1),Gh(this,1)),0!==(this.oi&Wp))for(i=!0;i;){for(i=!1,i=qh(this,this.Cf,0)||i,t=this.Cf+1;t<=this.jb;t++)i=qh(this,t,0)||i;for(t=this.Cf-1;t>=0;t--)i=qh(this,t,0)||i}},ph.prototype.commitLayout=function(){if(this.fp)for(var t=Hh(this,!0),i=Hh(this,!1),e=this.network.edges.i;e.next();){var n=e.value.link;null!==n&&(n.vb=t,n.xb=i)}this.commitNodes(),this.Sy(),this.Qs&&this.commitLinks()},ph.prototype.commitNodes=function(){this.Lg=[],this.$f=[],this.Bf=[],this.Kb=[];for(var t=0;t<=this.jb;t++)this.Lg[t]=0,this.$f[t]=0,this.Bf[t]=0,this.Kb[t]=0;
for(t=this.network.vertexes.i;t.next();){var i=t.value,e=i.layer;this.Lg[e]=Math.max(this.Lg[e],this.nodeMinLayerSpace(i,!0)),this.$f[e]=Math.max(this.$f[e],this.nodeMinLayerSpace(i,!1))}for(var i=0,n=this.Ql,e=0;e<=this.jb;e++){var r=n;0>=this.Lg[e]+this.$f[e]&&(r=0),e>0&&(i+=r/2),90===this.la||0===this.la?(i+=this.$f[e],this.Bf[e]=i,i+=this.Lg[e]):(i+=this.Lg[e],this.Bf[e]=i,i+=this.$f[e]),e<this.jb&&(i+=r/2),this.Kb[e]=i}for(n=i,i=this.Ud,e=0;e<=this.jb;e++)270===this.la?this.Bf[e]=i.y+this.Bf[e]:90===this.la?(this.Bf[e]=i.y+n-this.Bf[e],this.Kb[e]=n-this.Kb[e]):180===this.la?this.Bf[e]=i.x+this.Bf[e]:(this.Bf[e]=i.x+n-this.Bf[e],this.Kb[e]=n-this.Kb[e]);for(t.reset();t.next();){var e=t.value,n=e.layer,r=0|e.column,o=0,s=0;270===this.la||90===this.la?(o=i.x+this.sd*r,s=this.Bf[n]):(o=this.Bf[n],s=i.y+this.sd*r),e.Ja=o,e.Ua=s,e.commit()}},ph.prototype.Sy=function(){for(var t=0,i=this.Ql,e=0;e<=this.jb;e++)t+=this.Lg[e],t+=this.$f[e];for(var t=t+this.jb*i,i=[],e=this.sd*this.Hb,n=this.uH;n>=0;n--)i.push(270===this.la?0===n?new k(0,0,e,Math.abs(this.Kb[0])):new k(0,this.Kb[n-1],e,Math.abs(this.Kb[n-1]-this.Kb[n])):90===this.la?0===n?new k(0,this.Kb[0],e,Math.abs(this.Kb[0]-t)):new k(0,this.Kb[n],e,Math.abs(this.Kb[n-1]-this.Kb[n])):180===this.la?0===n?new k(0,0,Math.abs(this.Kb[0]),e):new k(this.Kb[n-1],0,Math.abs(this.Kb[n-1]-this.Kb[n]),e):0===n?new k(this.Kb[0],0,Math.abs(this.Kb[0]-t),e):new k(this.Kb[n],0,Math.abs(this.Kb[n-1]-this.Kb[n]),e));this.commitLayers(i,Au.Wj)},ph.prototype.commitLayers=function(){},ph.prototype.commitLinks=function(){for(var t,i=this.network.edges.i;i.next();)t=i.value.link,null!==t&&(t.rl(),t.so(),t.Bi());for(i.reset();i.next();)t=i.value.link,null!==t&&t.updateRoute();for(i.reset();i.next();){var e=i.value;if(t=e.link,null!==t){t.rl();var n=t,r=n.W,o=n.ca,s=n.od,a=n.fe;if(e.valid){if(t.Ve===Qc&&4===t.ka){if(e.rev)var h=r,r=o,o=h,u=s,s=a,a=u;if(e.fromVertex.column===e.toVertex.column){var f=t.getLinkPoint(r,s,t.computeSpot(!0),!0,!1,o,a),c=t.getLinkPoint(o,a,t.computeSpot(!1),!1,!1,r,s);f.J()||f.set(r.ba.Ok),c.J()||c.set(o.ba.Ok),t.so(),t.Lk(f.x,f.y),t.Lk((2*f.x+c.x)/3,(2*f.y+c.y)/3),t.Lk((f.x+2*c.x)/3,(f.y+2*c.y)/3),t.Lk(c.x,c.y)}else{var p=!1,d=!1;if(null!==s&&t.computeSpot(!0)===_l&&(p=!0),null!==a&&t.computeSpot(!1)===_l&&(d=!0),p||d){var y=t.l(0).x,v=t.l(0).y,g=t.l(1).x,m=t.l(1).y,b=t.l(2).x,x=t.l(2).y,w=t.l(3).x,k=t.l(3).y;if(p){90===this.la||270===this.la?(g=y,m=(v+k)/2):(g=(y+w)/2,m=v),t.V(1,g,m);var M=t.getLinkPoint(r,s,t.computeSpot(!0),!0,!1,o,a);M.J()||M.set(r.ba.Ok),t.V(0,M.x,M.y)}d&&(90===this.la||270===this.la?(b=w,x=(v+k)/2):(b=(y+w)/2,x=k),t.V(2,b,x),M=t.getLinkPoint(o,a,t.computeSpot(!1),!1,!1,r,s),M.J()||M.set(o.ba.Ok),t.V(3,M.x,M.y))}}}t.Bi()}else if(e.fromVertex.layer===e.toVertex.layer)t.Bi();else{var P=!1,T=!1,S=0,C=t.Bs+1;if(t.dc)T=!0,S=t.ka,S>4&&t.points.removeRange(2,S-3);else if(t.Ve===Qc)P=!0,S=t.ka,S>4&&t.points.removeRange(2,S-3),C=2;else{var S=t.ka,j=t.computeSpot(!0)===_l,N=t.computeSpot(!1)===_l;S>2&&j&&N?t.points.removeRange(1,S-2):S>3&&j&&!N?t.points.removeRange(1,S-3):S>3&&!j&&N?t.points.removeRange(2,S-2):S>4&&!j&&!N&&t.points.removeRange(2,S-3)}var D,A,L=e.fromVertex,F=e.toVertex;if(e.rev){for(var z=0;null!==F&&L!==F;){A=D=null;for(var B=F.kc.i;B.next();){var q=B.value;if(q.link===e.link&&(D=q.fromVertex,A=q.toVertex,null===D.ld))break}D!==L&&(G=t.l(C-1).x,V=t.l(C-1).y,H=D.Ja,K=D.Ua,T?180===this.la||0===this.la?2===C?(t.w(C++,G,V),t.w(C++,G,K)):(W=null!==A?A.Ua:V,W!==K&&(U=this.Kb[D.layer-1],t.w(C++,U,V),t.w(C++,U,K))):2===C?(t.w(C++,G,V),t.w(C++,H,V)):(X=null!==A?A.Ja:G,X!==H&&(U=this.Kb[D.layer-1],t.w(C++,G,U),t.w(C++,H,U))):2===C?P?(Y=Math.max(10,this.Lg[F.layer]),J=Math.max(10,this.$f[F.layer]),180===this.la?(z=F.aa.x,t.w(C++,z-Y,K),t.w(C++,z,K),t.w(C++,z+J,K)):90===this.la?(z=F.aa.y+F.aa.height,t.w(C++,H,z+J),t.w(C++,H,z),t.w(C++,H,z-Y)):270===this.la?(z=F.aa.y,t.w(C++,H,z-Y),t.w(C++,H,z),t.w(C++,H,z+J)):(z=F.aa.x+F.aa.width,t.w(C++,z+J,K),t.w(C++,z,K),t.w(C++,z-Y,K))):(t.w(C++,G,V),180===this.la||0===this.la?t.w(C++,G,K):t.w(C++,H,V),t.w(C++,H,K)):(Y=Math.max(10,this.Lg[D.layer]),J=Math.max(10,this.$f[D.layer]),180===this.la?(P&&t.w(C++,H-Y,K),t.w(C++,H,K),P&&t.w(C++,H+J,K)):90===this.la?(P&&t.w(C++,H,K+J),t.w(C++,H,K),P&&t.w(C++,H,K-Y)):270===this.la?(P&&t.w(C++,H,K-Y),t.w(C++,H,K),P&&t.w(C++,H,K+J)):(P&&t.w(C++,H+J,K),t.w(C++,H,K),P&&t.w(C++,H-Y,K)))),F=D}if(null===a||t.computeSpot(!1)!==_l)if(G=t.l(C-1).x,V=t.l(C-1).y,H=t.l(C).x,K=t.l(C).y,T){var O=this.$f[L.layer],E=0;180===this.la||0===this.la?(E=V,E>=L.aa.y&&E<=L.aa.bottom&&(z=L.Ja+O,E=E<L.aa.y+L.aa.height/2?L.aa.y-this.sd/2:L.aa.bottom+this.sd/2,t.w(C++,z,V),t.w(C++,z,E)),t.w(C++,H,E)):(E=G,E>=L.aa.x&&E<=L.aa.right&&(z=L.Ua+O,E=E<L.aa.x+L.aa.width/2?L.aa.x-this.sd/2:L.aa.right+this.sd/2,t.w(C++,G,z),t.w(C++,E,z)),t.w(C++,E,K)),t.w(C++,H,K)}else P?(Y=Math.max(10,this.Lg[L.layer]),J=Math.max(10,this.$f[L.layer]),180===this.la?(z=L.aa.x+L.aa.width,t.V(C-2,z,V),t.V(C-1,z+J,V)):90===this.la?(z=L.aa.y,t.V(C-2,G,z),t.V(C-1,G,z-Y)):270===this.la?(z=L.aa.y+L.aa.height,t.V(C-2,G,z),t.V(C-1,G,z+J)):(z=L.aa.x,t.V(C-2,z,V),t.V(C-1,z-Y,V))):(180===this.la||0===this.la?t.w(C++,H,V):t.w(C++,G,K),t.w(C++,H,K))}else{for(;null!==L&&L!==F;){A=D=null;for(var I=L.bc.i;I.next();){var R=I.value;if(R.link===e.link&&(D=R.toVertex,A=R.fromVertex,null!==A.ld&&(A=null),null===D.ld))break}var G=0,V=0,H=0,K=0,U=0,Y=0,J=0;if(D!==F)if(G=t.l(C-1).x,V=t.l(C-1).y,H=D.Ja,K=D.Ua,T)if(180===this.la||0===this.la){var W=null!==A?A.Ua:V;W!==K&&(U=this.Kb[D.layer],2===C&&(U=0===this.la?Math.max(U,G):Math.min(U,G)),t.w(C++,U,V),t.w(C++,U,K))}else{var X=null!==A?A.Ja:G;X!==H&&(U=this.Kb[D.layer],2===C&&(U=90===this.la?Math.max(U,V):Math.min(U,V)),t.w(C++,G,U),t.w(C++,H,U))}else Y=Math.max(10,this.Lg[D.layer]),J=Math.max(10,this.$f[D.layer]),180===this.la?(t.w(C++,H+J,K),P&&t.w(C++,H,K),t.w(C++,H-Y,K)):90===this.la?(t.w(C++,H,K-Y),P&&t.w(C++,H,K),t.w(C++,H,K+J)):270===this.la?(t.w(C++,H,K+J),P&&t.w(C++,H,K),t.w(C++,H,K-Y)):(t.w(C++,H-Y,K),P&&t.w(C++,H,K),t.w(C++,H+J,K));L=D}T&&(G=t.l(C-1).x,V=t.l(C-1).y,H=t.l(C).x,K=t.l(C).y,180===this.la||0===this.la?V!==K&&(U=0===this.la?Math.min(Math.max((H+G)/2,this.Kb[F.layer]),H):Math.max(Math.min((H+G)/2,this.Kb[F.layer]),H),t.w(C++,U,V),t.w(C++,U,K)):G!==H&&(U=90===this.la?Math.min(Math.max((K+V)/2,this.Kb[F.layer]),K):Math.max(Math.min((K+V)/2,this.Kb[F.layer]),K),t.w(C++,G,U),t.w(C++,H,U)))}if(null!==n&&P){if(null!==s){if(t.computeSpot(!0)===_l){var Z=t.l(0),Q=t.l(2);Z.L(Q)||t.V(1,(Z.x+Q.x)/2,(Z.y+Q.y)/2)}M=t.getLinkPoint(r,s,_l,!0,!1,o,a),M.J()||M.set(r.ba.Ok),t.V(0,M.x,M.y)}null!==a&&(t.computeSpot(!1)===_l&&(Z=t.l(t.ka-1),Q=t.l(t.ka-3),Z.L(Q)||t.V(t.ka-2,(Z.x+Q.x)/2,(Z.y+Q.y)/2)),M=t.getLinkPoint(o,a,_l,!1,!1,r,s),M.J()||M.set(o.ba.Ok),t.V(t.ka-1,M.x,M.y))}t.Bi(),e.commit()}}}for(var $=new l(Bs),_=this.network.edges.i;_.next();){var ti=_.value.link;null!==ti&&ti.dc&&!$.contains(ti)&&$.add(ti)}if(0<$.count)if(90===this.la||270===this.la){for(var ii,ei,ni=0,ri=new l(Yh),oi=$.i;oi.next();){var si=oi.value;if(null!==si&&si.dc)for(var ai=2;ai<si.ka-3;ai++)if(ii=si.l(ai),ei=si.l(ai+1),this.D(ii.y,ei.y)&&!this.D(ii.x,ei.x)){var hi=new Yh;hi.layer=Math.floor(ii.y/2);var li=si.l(0),ui=si.l(si.ka-1);if(hi.first=li.x*li.x+li.y,hi.Gd=ui.x*ui.x+ui.y,hi.Be=Math.min(ii.x,ei.x),hi.Vd=Math.max(ii.x,ei.x),hi.index=ai,hi.link=si,ai+2<si.ka){var fi=si.l(ai-1),ci=si.l(ai+2),pi=0;fi.y<ii.y?pi=ci.y<ii.y?3:ii.x<ei.x?2:1:fi.y>ii.y&&(pi=ci.y>ii.y?0:ei.x<ii.x?2:1),hi.Sh=pi}ri.add(hi)}}if(1<ri.count){ri.sort(this.AE);for(var di=0;di<ri.count;){for(var yi=ri.n[di].layer,vi=di+1;vi<ri.count&&ri.n[vi].layer===yi;)vi++;if(vi-di>1)for(var gi=di;vi>gi;){for(var mi=ri.n[gi].Vd,bi=di+1;vi>bi&&ri.n[bi].Be<mi;)mi=Math.max(mi,ri.n[bi].Vd),bi++;var xi=bi-gi;if(xi>1){ri.hp(this.Aw,gi,gi+xi);for(var wi=1,ki=ri.n[gi].Gd,ai=gi;bi>ai;ai++){var Mi=ri.n[ai];Mi.Gd!==ki&&(wi++,ki=Mi.Gd)}ri.hp(this.zE,gi,gi+xi);for(var Pi=1,ki=ri.n[gi].first,ai=gi;bi>ai;ai++)Mi=ri.n[ai],Mi.first!==ki&&(Pi++,ki=Mi.first);var Ti=!0,Si=Pi;Pi>wi?(Ti=!1,Si=wi,ki=ri.n[gi].Gd,ri.hp(this.Aw,gi,gi+xi)):ki=ri.n[gi].first;for(var Ci=0,ai=gi;bi>ai;ai++){Mi=ri.n[ai],(Ti?Mi.first:Mi.Gd)!==ki&&(Ci++,ki=Ti?Mi.first:Mi.Gd),si=Mi.link,ii=si.l(Mi.index),ei=si.l(Mi.index+1);var ji=this.ow*(Ci-(Si-1)/2);ni++,si.rl(),si.V(Mi.index,ii.x,ii.y+ji),si.V(Mi.index+1,ei.x,ei.y+ji),si.Bi()}}gi=bi}di=vi}}}else{for(var Ni,Di,Ai=0,Li=new l(Yh),Fi=$.i;Fi.next();){var zi=Fi.value;if(null!==zi&&zi.dc)for(var Bi=2;Bi<zi.ka-3;Bi++)if(Ni=zi.l(Bi),Di=zi.l(Bi+1),this.D(Ni.x,Di.x)&&!this.D(Ni.y,Di.y)){var qi=new Yh;qi.layer=Math.floor(Ni.x/2);var Oi=zi.l(0),Ei=zi.l(zi.ka-1);if(qi.first=Oi.x+Oi.y*Oi.y,qi.Gd=Ei.x+Ei.y*Ei.y,qi.Be=Math.min(Ni.y,Di.y),qi.Vd=Math.max(Ni.y,Di.y),qi.index=Bi,qi.link=zi,Bi+2<zi.ka){var Ii=zi.l(Bi-1),Ri=zi.l(Bi+2),Gi=0;Ii.x<Ni.x?Gi=Ri.x<Ni.x?3:Ni.y<Di.y?2:1:Ii.x>Ni.x&&(Gi=Ri.x>Ni.x?0:Di.y<Ni.y?2:1),qi.Sh=Gi}Li.add(qi)}}if(1<Li.count){Li.sort(this.AE);for(var Vi=0;Vi<Li.count;){for(var Hi=Li.n[Vi].layer,Ki=Vi+1;Ki<Li.count&&Li.n[Ki].layer===Hi;)Ki++;if(Ki-Vi>1)for(var Ui=Vi;Ki>Ui;){for(var Yi=Li.n[Ui].Vd,Ji=Vi+1;Ki>Ji&&Li.n[Ji].Be<Yi;)Yi=Math.max(Yi,Li.n[Ji].Vd),Ji++;var Wi=Ji-Ui;if(Wi>1){Li.hp(this.Aw,Ui,Ui+Wi);for(var Xi=1,Zi=Li.n[Ui].Gd,Bi=Ui;Ji>Bi;Bi++){var Qi=Li.n[Bi];Qi.Gd!==Zi&&(Xi++,Zi=Qi.Gd)}Li.hp(this.zE,Ui,Ui+Wi);for(var $i=1,Zi=Li.n[Ui].first,Bi=Ui;Ji>Bi;Bi++)Qi=Li.n[Bi],Qi.first!==Zi&&($i++,Zi=Qi.first);var _i=!0,te=$i;$i>Xi?(_i=!1,te=Xi,Zi=Li.n[Ui].Gd,Li.hp(this.Aw,Ui,Ui+Wi)):Zi=Li.n[Ui].first;for(var ie=0,Bi=Ui;Ji>Bi;Bi++){Qi=Li.n[Bi],(_i?Qi.first:Qi.Gd)!==Zi&&(ie++,Zi=_i?Qi.first:Qi.Gd),zi=Qi.link,Ni=zi.l(Qi.index),Di=zi.l(Qi.index+1);var ee=this.ow*(ie-(te-1)/2);Ai++,zi.rl(),zi.V(Qi.index,Ni.x+ee,Ni.y),zi.V(Qi.index+1,Di.x+ee,Di.y),zi.Bi()}}Ui=Ji}Vi=Ki}}}},ph.prototype.AE=function(t,i){return t instanceof Yh&&i instanceof Yh&&t!==i?t.layer<i.layer?-1:t.layer>i.layer?1:t.Be<i.Be?-1:t.Be>i.Be?1:t.Vd<i.Vd?-1:t.Vd>i.Vd?1:0:0},ph.prototype.zE=function(t,i){return t instanceof Yh&&i instanceof Yh&&t!==i?t.first<i.first?-1:t.first>i.first||t.Sh<i.Sh?1:t.Sh>i.Sh||t.Be<i.Be?-1:t.Be>i.Be?1:t.Vd<i.Vd?-1:t.Vd>i.Vd?1:0:0},ph.prototype.Aw=function(t,i){return t instanceof Yh&&i instanceof Yh&&t!==i?t.Gd<i.Gd?-1:t.Gd>i.Gd||t.Sh<i.Sh?1:t.Sh>i.Sh||t.Be<i.Be?-1:t.Be>i.Be?1:t.Vd<i.Vd?-1:t.Vd>i.Vd?1:0:0},ph.prototype.D=function(t,i){var e=t-i;return e>-1&&1>e},Ul.defineProperty(ph,{layerSpacing:"layerSpacing"},function(){return this.Ql},function(t){this.Ql!==t&&(Ul.j(t,"number",ph,"layerSpacing"),t>=0&&(this.Ql=t,this.H()))}),Ul.defineProperty(ph,{eJ:"columnSpacing"},function(){return this.sd},function(t){this.sd!==t&&(Ul.j(t,"number",ph,"columnSpacing"),t>=0&&(this.sd=t,this.H()))}),Ul.defineProperty(ph,{direction:"direction"},function(){return this.la},function(t){this.la!==t&&(Ul.j(t,"number",ph,"direction"),this.la=t,this.H())}),Ul.defineProperty(ph,{kG:"cycleRemoveOption"},function(){return this.gn},function(t){this.gn!==t&&(Ul.rb(t,ph,ph,"cycleRemoveOption"),t===Op||t===qp)&&(this.gn=t,this.H())}),Ul.defineProperty(ph,{mH:"layeringOption"},function(){return this.Mn},function(t){this.Mn!==t&&(Ul.rb(t,ph,ph,"layeringOption"),t===Ep||t===Ip||t===Rp)&&(this.Mn=t,this.H())}),Ul.defineProperty(ph,{WG:"initializeOption"},function(){return this.Bn},function(t){this.Bn!==t&&(Ul.rb(t,ph,ph,"initializeOption"),t===Gp||t===Vp||t===Hp)&&(this.Bn=t,this.H())}),Ul.defineProperty(ph,{OJ:"iterations"},function(){return this.Nl},function(t){this.Nl!==t&&(Ul.ze(t,Jh,"iterations"),t>=0&&(this.Nl=t,this.H()))}),Ul.defineProperty(ph,{NF:"aggressiveOption"},function(){return this.Wm},function(t){this.Wm!==t&&(Ul.rb(t,ph,ph,"aggressiveOption"),t===Kp||t===Up||t===Yp)&&(this.Wm=t,this.H())}),Ul.defineProperty(ph,{mK:"packOption"},function(){return this.oi},function(t){this.oi!==t&&(Ul.j(t,"number",ph,"packOption"),t>=0&&8>t&&(this.oi=t,this.H()))}),Ul.defineProperty(ph,{fp:"setsPortSpots"},function(){return this.Fh},function(t){this.Fh!==t&&(Ul.j(t,"boolean",ph,"setsPortSpots"),this.Fh=t,this.H())}),Ul.defineProperty(ph,{ow:"linkSpacing"},function(){return this.gj},function(t){this.gj!==t&&(Ul.j(t,"number",ph,"linkSpacing"),t>=0&&(this.gj=t,this.H()))}),Ul.u(ph,{uH:"maxLayer"},function(){return this.jb}),Ul.u(ph,{VJ:"maxIndex"},function(){return this.Fu}),Ul.u(ph,{UJ:"maxColumn"},function(){return this.Hb}),Ul.u(ph,{aK:"minIndexLayer"},function(){return this.Nq}),Ul.u(ph,{WJ:"maxIndexLayer"},function(){return this.Cf});var qp;ph.CycleDepthFirst=qp=Ul.s(ph,"CycleDepthFirst",0);var Op;ph.CycleGreedy=Op=Ul.s(ph,"CycleGreedy",1);var Ep;ph.LayerOptimalLinkLength=Ep=Ul.s(ph,"LayerOptimalLinkLength",0);var Ip;ph.LayerLongestPathSink=Ip=Ul.s(ph,"LayerLongestPathSink",1);var Rp;ph.LayerLongestPathSource=Rp=Ul.s(ph,"LayerLongestPathSource",2);var Gp;ph.InitDepthFirstOut=Gp=Ul.s(ph,"InitDepthFirstOut",0);var Vp;ph.InitDepthFirstIn=Vp=Ul.s(ph,"InitDepthFirstIn",1);var Hp;ph.InitNaive=Hp=Ul.s(ph,"InitNaive",2);var Kp;ph.AggressiveNone=Kp=Ul.s(ph,"AggressiveNone",0);var Up;ph.AggressiveLess=Up=Ul.s(ph,"AggressiveLess",1);var Yp;ph.AggressiveMore=Yp=Ul.s(ph,"AggressiveMore",2),ph.PackNone=0;var Jp;ph.PackExpand=Jp=1;var Wp;ph.PackStraighten=Wp=2;var Xp;ph.PackMedian=Xp=4;var Zp;ph.PackAll=Zp=7,Ul.Xd(Yh,{layer:!0,first:!0,Gd:!0,Be:!0,Vd:!0,index:!0,link:!0,Sh:!0}),Ul.Ga(Jh,ja),Ul.fa("LayeredDigraphNetwork",Jh),Jh.prototype.createVertex=function(){return new Wh},Jh.prototype.createEdge=function(){return new Xh},Ul.Ga(Wh,Fa),Ul.fa("LayeredDigraphVertex",Wh),Ul.Ga(Xh,za),Ul.fa("LayeredDigraphEdge",Xh),Ul.Ga(Zh,Sa),Ul.fa("TreeLayout",Zh),Zh.prototype.cloneProtected=function(t){Sa.prototype.cloneProtected.call(this,t),t.fr=this.fr,t.Wr=this.Wr,t.Cu=this.Cu,t.ph=this.ph,t.Yc=this.Yc,t.Uf.assign(this.Uf),t.qa.copyInheritedPropertiesFrom(this.qa),t.pa.copyInheritedPropertiesFrom(this.pa)},Zh.prototype.createNetwork=function(){return new Cl},Zh.prototype.makeNetwork=function(t){function i(t){if(t instanceof Ms)return!t.tf&&"Comment"!==t.Kc;if(t instanceof Bs){var i=t.W;return null===i||i.tf||"Comment"===i.Kc?!1:(t=t.ca,null===t||t.tf||"Comment"===t.Kc?!1:!0)}return!1}var e=this.createNetwork();return e.Qb=this,t instanceof Ge?(e.Gj(t.yg,!0,i),e.Gj(t.links,!0,i)):t instanceof xa?e.Gj(t.Mc,!1,i):e.Gj(t.i,!1,i),e},Zh.prototype.doLayout=function(t){null===t&&Ul.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.Gf!==xd&&(this.Ud=this.initialOrigin(this.Ud));var i=this.g;if(null===i&&t instanceof Ge&&(i=t),this.Af=this.path===Qp&&null!==i?i.qd?$p:_p:this.path===Qp?$p:this.path,0<this.network.vertexes.count){for(this.network.Qv(),t=this.network.vertexes.i;t.next();)i=t.value,i.initialized=!1,i.level=0,i.parent=null,i.children=[];if(0<this.nd.count){for(t=new f(jl),i=this.nd.i;i.next();){var e=i.value;e instanceof Ms?(e=this.network.Am(e),null!==e&&t.add(e)):e instanceof jl&&t.add(e)}this.nd=t}for(0===this.nd.count&&this.findRoots(),t=this.nd.copy().i;t.next();)i=t.value,i.initialized||(i.initialized=!0,Qh(this,i));for(t=this.nd.i;t.next();)i=t.value,i instanceof jl&&_h(this,i);for(t=this.nd.i;t.next();)i=t.value,i instanceof jl&&il(this,i);for(t=this.nd.i;t.next();)i=t.value,i instanceof jl&&el(this,i);if(this.Ny(),this.wz===Md){for(e=[],t=this.network.vertexes.i;t.next();){var n=t.value,i=n.parent;null==i&&(i=n);var i=0===i.angle||180===i.angle,r=e[n.level];void 0===r&&(r=0),e[n.level]=Math.max(r,i?n.width:n.height)}for(n=0;n<e.length;n++)void 0===e[n]&&(e[n]=0);for(this.BA=e,t=this.network.vertexes.i;t.next();)n=t.value,i=n.parent,null===i&&(i=n),0===i.angle||180===i.angle?(180===i.angle&&(n.Cs+=e[n.level]-n.width),n.width=e[n.level]):(270===i.angle&&(n.Ds+=e[n.level]-n.height),n.height=e[n.level])}else if(this.wz===kd)for(t=this.network.vertexes.i;t.next();){for(e=t.value,i=0===e.angle||180===e.angle,r=-1,n=0;n<e.children.length;n++)var o=e.children[n],r=Math.max(r,i?o.width:o.height);if(r>=0)for(n=0;n<e.children.length;n++)o=e.children[n],i?(180===e.angle&&(o.Cs+=r-o.width),o.width=r):(270===e.angle&&(o.Ds+=r-o.height),o.height=r)}for(t=this.nd.i;t.next();)i=t.value,i instanceof jl&&this.layoutTree(i);this.arrangeTrees(),this.updateParts()}this.network=null,this.nd=new f(Object),this.vf=!0},Zh.prototype.findRoots=function(){for(var t=this.network.vertexes.i;t.next();){var i=t.value;switch(this.Af){case $p:0===i.kc.count&&this.nd.add(i);break;case _p:0===i.bc.count&&this.nd.add(i);break;default:Ul.k("Unhandled path value "+this.Af.toString())}}if(0===this.nd.count){for(var t=999999,i=null,e=this.network.vertexes.i;e.next();){var n=e.value;switch(this.Af){case $p:n.kc.count<t&&(t=n.kc.count,i=n);break;case _p:n.bc.count<t&&(t=n.bc.count,i=n);break;default:Ul.k("Unhandled path value "+this.Af.toString())}}null!==i&&this.nd.add(i)}},Zh.prototype.removeChild=function(t,i){if(null!==t&&null!==i){for(var e=t.children,n=0,r=0;r<e.length;r++)e[r]===i&&n++;if(n>0){for(var n=Array(e.length-n),o=0,r=0;r<e.length;r++)e[r]!==i&&(n[o++]=e[r]);t.children=n}}},Zh.prototype.initializeTreeVertexValues=function(t){var i=tl(this,t);if(t.copyInheritedPropertiesFrom(i),null!==t.parent&&t.parent.alignment===ld){for(var i=t.angle,e=t.parent.children,n=0;n<e.length&&t!==e[n];)n++;0===n%2?n!==e.length-1&&(i=90===i?180:180===i?270:270===i?180:270):i=90===i?0:180===i?90:270===i?0:90,t.angle=i}t.initialized=!0},Zh.prototype.assignTreeVertexValues=function(){},Zh.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case td:break;case id:t.children.reverse();break;case ed:t.children.sort(t.comparer);break;case nd:t.children.sort(t.comparer),t.children.reverse();break;default:Ul.k("Unhandled sorting value "+t.sorting.toString())}},Zh.prototype.Ny=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},Zh.prototype.addComments=function(t){var i=t.angle,e=t.parent,n=0,r=od,r=!1;null!==e&&(n=e.angle,r=e.alignment,r=nl(r));var i=90===i||270===i,n=90===n||270===n,e=0===t.qm,o=0,s=0,a=0,h=t.commentSpacing;if(null!==t.Cc)for(var l=t.Cc.rD();l.next();){var u=l.value;"Comment"===u.Kc&&u.Ea()&&(null===t.comments&&(t.comments=[]),t.comments.push(u),u.pf(),u=u.Ba,i&&!e||!r&&!n&&e||r&&n&&e?(o=Math.max(o,u.width),s+=u.height+Math.abs(a)):(o+=u.width+Math.abs(a),s=Math.max(s,u.height)),a=h)}null!==t.comments&&(i&&!e||!r&&!n&&e||r&&n&&e?(o+=Math.abs(t.commentMargin),s=Math.max(0,s-t.height)):(s+=Math.abs(t.commentMargin),o=Math.max(0,o-t.width)),r=Ul.Vj(0,0,t.aa.width+o,t.aa.height+s),t.kb=r,Ul.ic(r))},Zh.prototype.layoutComments=function(t){if(null!==t.comments){var i=t.Cc.Ba,e=t.parent,n=t.angle,r=0,o=od,o=!1;null!==e&&(r=e.angle,o=e.alignment,o=nl(o));for(var e=90===n||270===n,n=90===r||270===r,s=0===t.qm,a=ol(t),h=0,l=t.comments,u=l.length,f=Ul.K(),c=0;u>c;c++){var p=l[c],d=p.Ba;if(e&&!s||!o&&!n&&s||o&&n&&s){if(r>135&&!o||n&&a)if(0<=t.commentMargin)for(f.m(t.aa.x-t.commentMargin-d.width,t.aa.y+h),p.move(f),p=p.og();p.next();){var y=p.value;y.vb=fu,y.xb=cu}else for(f.m(t.aa.x+2*t.M.x-t.commentMargin,t.aa.y+h),p.move(f),p=p.og();p.next();)y=p.value,y.vb=cu,y.xb=fu;else if(0<=t.commentMargin)for(f.m(t.aa.x+2*t.M.x+t.commentMargin,t.aa.y+h),p.move(f),p=p.og();p.next();)y=p.value,y.vb=cu,y.xb=fu;else for(f.m(t.aa.x+t.commentMargin-d.width,t.aa.y+h),p.move(f),p=p.og();p.next();)y=p.value,y.vb=fu,y.xb=cu;h=0<=t.commentSpacing?h+(d.height+t.commentSpacing):h+(t.commentSpacing-d.height)}else{if(r>135&&!o||!n&&a)if(0<=t.commentMargin)for(f.m(t.aa.x+h,t.aa.y-t.commentMargin-d.height),p.move(f),p=p.og();p.next();)y=p.value,y.vb=uu,y.xb=pu;else for(f.m(t.aa.x+h,t.aa.y+2*t.M.y-t.commentMargin),p.move(f),p=p.og();p.next();)y=p.value,y.vb=pu,y.xb=uu;else if(0<=t.commentMargin)for(f.m(t.aa.x+h,t.aa.y+2*t.M.y+t.commentMargin),p.move(f),p=p.og();p.next();)y=p.value,y.vb=pu,y.xb=uu;else for(f.m(t.aa.x+h,t.aa.y+t.commentMargin-d.height),p.move(f),p=p.og();p.next();)y=p.value,y.vb=uu,y.xb=pu;h=0<=t.commentSpacing?h+(d.width+t.commentSpacing):h+(t.commentSpacing-d.width)}}if(Ul.v(f),i=h-t.commentSpacing-(e?i.height:i.width),this.Af===$p)for(r=t.bc;r.next();)t=r.value.link,null===t||t.el||(t.Yk=i>0?i:0/0);else for(r=t.kc;r.next();)t=r.value.link,null===t||t.el||(t.vl=i>0?i:0/0)}},Zh.prototype.layoutTree=function(t){if(null!==t){for(var i=t.children,e=i.length,n=0;e>n;n++)this.layoutTree(i[n]);switch(t.compaction){case cd:sl(this,t);break;case pd:if(t.alignment===ld)sl(this,t);else if(0===t.qm){var n=t.parent,i=!1,e=0,r=od;null!==n&&(e=n.angle,r=n.alignment,i=nl(r)),n=ol(t),t.ia.m(0,0),t.Ya.m(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||i)&&!n?t.Ia.m(0,0):180===e&&!i||(90===e||270===e)&&n?t.Ia.m(t.width-2*t.M.x,0):t.Ia.m(0,t.height-2*t.M.y),t.Ss=null,t.jt=null}else{for(var o=Pl(t),i=90===o||270===o,s=0,a=t.children,h=a.length,l=0;h>l;l++)var u=a[l],s=Math.max(s,i?u.Ya.width:u.Ya.height);var f=t.alignment,n=f===sd,c=f===ad,p=nl(f),d=Math.max(0,t.breadthLimit),e=Tl(t),y=t.nodeSpacing,v=Sl(t),g=t.rowSpacing,m=0;(n||c||t.bp||t.cp&&1===t.maxGenerationCount)&&(m=Math.max(0,t.rowIndent));var n=t.width,r=t.height,b=0,x=0,w=0,k=null,M=null,P=0,T=0,S=0,C=0,j=0,N=0,D=0,A=0,u=0;if(p&&!rl(f)&&o>135&&a.reverse(),rl(f))if(h>1)for(l=0;h>l;l++)0===l%2&&l!==h-1?A=Math.max(A,i?a[l].Ya.width:a[l].Ya.height):0!==l%2&&(u=Math.max(u,i?a[l].Ya.width:a[l].Ya.height));else 1===h&&(A=i?a[0].Ya.width:a[0].Ya.height);if(p){switch(f){case hd:T=135>o?al(t,a,A,b,x):hl(t,a,A,b,x),A=T.x,b=T.width,x=T.height;break;case ud:for(l=0;h>l;l++){var u=a[l],L=u.Ya,k=0===N?0:g;i?(u.ia.m(s-L.width,C+k),b=Math.max(b,L.width),x=Math.max(x,C+k+L.height),C+=k+L.height):(u.ia.m(S+k,s-L.height),b=Math.max(b,S+k+L.width),x=Math.max(x,L.height),S+=k+L.width),N++}break;case fd:for(l=0;h>l;l++)u=a[l],L=u.Ya,k=0===N?0:g,i?(u.ia.m(y/2+t.M.x,C+k),b=Math.max(b,L.width),x=Math.max(x,C+k+L.height),C+=k+L.height):(u.ia.m(S+k,y/2+t.M.y),b=Math.max(b,S+k+L.width),x=Math.max(x,L.height),S+=k+L.width),N++}k=xl(this,2),M=xl(this,2),i?(k[0].m(0,0),k[1].m(0,x),M[0].m(b,0)):(k[0].m(0,0),k[1].m(b,0),M[0].m(0,x)),M[1].m(b,x)}else for(l=0;h>l;l++){if(u=a[l],L=u.Ya,i){d>0&&N>0&&S+y+L.width>d&&(s>S&&yl(t,f,s-S,0,D,l-1),j++,N=0,D=l,w=x,S=0,C=o>135?-x-g:x+g),gl(this,u,0,C);var F=0;if(0===N)k=u.Ss,M=u.jt,P=L.width,T=L.height,(null===k||null===M||o!==Pl(u))&&(k=xl(this,2),M=xl(this,2),k[0].m(0,0),k[1].m(0,T),M[0].m(P,0),M[1].m(P,T));else{var z=Ul.eb(),T=bl(this,t,u,k,M,P,T,z),F=T.x,k=z[0],M=z[1],P=T.width,T=T.height;Ul.ra(z),S<L.width&&0>F&&(vl(t,-F,0,D,l-1),ml(k,-F,0),ml(M,-F,0),F=0)}u.ia.m(F,C),b=Math.max(b,P),x=Math.max(x,w+(0===j?0:g)+L.height),S=P}else d>0&&N>0&&C+y+L.height>d&&(s>C&&yl(t,f,0,s-C,D,l-1),j++,N=0,D=l,w=b,C=0,S=o>135?-b-g:b+g),gl(this,u,S,0),F=0,0===N?(k=u.Ss,M=u.jt,P=L.width,T=L.height,(null===k||null===M||o!==Pl(u))&&(k=xl(this,2),M=xl(this,2),k[0].m(0,0),k[1].m(P,0),M[0].m(0,T),M[1].m(P,T))):(z=Ul.eb(),T=bl(this,t,u,k,M,P,T,z),F=T.x,k=z[0],M=z[1],P=T.width,T=T.height,Ul.ra(z),C<L.height&&0>F&&(vl(t,0,-F,D,l-1),ml(k,0,-F),ml(M,0,-F),F=0)),u.ia.m(S,F),x=Math.max(x,T),b=Math.max(b,w+(0===j?0:g)+L.width),C=T;N++}switch(j>0&&(i?(x+=Math.max(0,e),b>S&&yl(t,f,b-S,0,D,h-1),m>0&&(c||vl(t,m,0,0,h-1),b+=m)):(b+=Math.max(0,e),x>C&&yl(t,f,0,x-C,D,h-1),m>0&&(c||vl(t,0,m,0,h-1),x+=m))),c=s=0,f){case rd:i?s+=b/2-t.M.x-v/2:c+=x/2-t.M.y-v/2;break;case od:j>0?i?s+=b/2-t.M.x-v/2:c+=x/2-t.M.y-v/2:i?(l=a[0].ia.x+a[0].Ia.x,A=a[h-1].ia.x+a[h-1].Ia.x+2*a[h-1].M.x,s+=l+(A-l)/2-t.M.x-v/2):(l=a[0].ia.y+a[0].Ia.y,A=a[h-1].ia.y+a[h-1].Ia.y+2*a[h-1].M.y,c+=l+(A-l)/2-t.M.y-v/2);break;case sd:i?(s-=v,b+=v):(c-=v,x+=v);break;case ad:i?(s+=b-t.width+v,b+=v):(c+=x-t.height+v,x+=v);break;case hd:i?s=h>1?s+(A+y/2-t.M.x):s+(a[0].M.x-t.M.x+a[0].Ia.x):c=h>1?c+(A+y/2-t.M.y):c+(a[0].M.y-t.M.y+a[0].Ia.y);break;case ud:i?s+=b+y/2-t.M.x:c+=x+y/2-t.M.y;break;case fd:break;default:Ul.k("Unhandled alignment value "+f.toString())}for(l=0;h>l;l++)u=a[l],i?u.ia.m(u.ia.x+u.Ia.x-s,u.ia.y+(o>135?(p?-x:-u.Ya.height)+u.Ia.y-e:r+e+u.Ia.y)):u.ia.m(u.ia.x+(o>135?(p?-b:-u.Ya.width)+u.Ia.x-e:n+e+u.Ia.x),u.ia.y+u.Ia.y-c);if(h=a=0,p?i?(b=cl(t,b,s),0>s&&(s=0),o>135&&(c+=x+e),x+=r+e,f===fd&&(a+=y/2+t.M.x),h+=r+e):(o>135&&(s+=b+e),b+=n+e,x=pl(t,x,c),0>c&&(c=0),f===fd&&(h+=y/2+t.M.y),a+=n+e):i?(null===t.comments?n>b&&(f=dl(f,n-b,0),a=f.x,h=f.y,b=n,s=0):b=cl(t,b,s),0>s&&(a-=s,s=0),o>135&&(c+=x+e),x=Math.max(Math.max(x,r),x+r+e),h+=r+e):(o>135&&(s+=b+e),b=Math.max(Math.max(b,n),b+n+e),null===t.comments?r>x&&(f=dl(f,0,r-x),a=f.x,h=f.y,x=r,c=0):x=pl(t,x,c),0>c&&(h-=c,c=0),a+=n+e),j>0)o=xl(this,4),f=xl(this,4),i?(o[2].m(0,r+e),o[3].m(o[2].x,x),f[2].m(b,o[2].y),f[3].m(f[2].x,o[3].y)):(o[2].m(n+e,0),o[3].m(b,o[2].y),f[2].m(o[2].x,x),f[3].m(o[3].x,f[2].y));else{for(o=xl(this,k.length+2),f=xl(this,M.length+2),l=0;l<k.length;l++)p=k[l],o[l+2].m(p.x+a,p.y+h);for(l=0;l<M.length;l++)p=M[l],f[l+2].m(p.x+a,p.y+h)}i?(o[0].m(s,0),o[1].m(o[0].x,r),o[2].y<o[1].y&&(o[2].x>o[0].x?o[2].assign(o[1]):o[1].assign(o[2])),o[3].y<o[2].y&&(o[3].x>o[0].x?o[3].assign(o[2]):o[2].assign(o[3])),f[0].m(s+n,0),f[1].m(f[0].x,r),f[2].y<f[1].y&&(f[2].x<f[0].x?f[2].assign(f[1]):f[1].assign(f[2])),f[3].y<f[2].y&&(f[3].x<f[0].x?f[3].assign(f[2]):f[2].assign(f[3])),o[2].y-=e/2,f[2].y-=e/2):(o[0].m(0,c),o[1].m(n,o[0].y),o[2].x<o[1].x&&(o[2].y>o[0].y?o[2].assign(o[1]):o[1].assign(o[2])),o[3].x<o[2].x&&(o[3].y>o[0].y?o[3].assign(o[2]):o[2].assign(o[3])),f[0].m(0,c+r),f[1].m(n,f[0].y),f[2].x<f[1].x&&(f[2].y<f[0].y?f[2].assign(f[1]):f[1].assign(f[2])),f[3].x<f[2].x&&(f[3].y<f[0].y?f[3].assign(f[2]):f[2].assign(f[3])),o[2].x-=e/2,f[2].x-=e/2),wl(this,k),wl(this,M),t.Ss=o,t.jt=f,t.Ia.m(s,c),t.Ya.m(b,x)}break;default:Ul.k("Unhandled compaction value "+t.compaction.toString())}}},Zh.prototype.arrangeTrees=function(){if(this.Yc===xd)for(var t=this.nd.i;t.next();){var i=t.value;if(i instanceof jl){var e=i.Cc;if(null!==e){var n=e.position,e=n.x,n=n.y;isFinite(e)||(e=0),isFinite(n)||(n=0),kl(this,i,e,n)}}}else for(t=this.Ud,i=t.x,e=t.y,t=this.nd.i;t.next();)if(n=t.value,n instanceof jl)switch(kl(this,n,i+n.Ia.x,e+n.Ia.y),this.Yc){case md:e+=n.Ya.height+this.Uf.height;break;case bd:i+=n.Ya.width+this.Uf.width;break;default:Ul.k("Unhandled arrangement value "+this.Yc.toString())}},Zh.prototype.commitLayout=function(){this.cA(),this.commitNodes(),this.Sy(),this.Qs&&this.commitLinks()},Zh.prototype.commitNodes=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Zh.prototype.Sy=function(){if(this.wz===Md){for(var t=this.BA,i=[],e=null,n=this.network.vertexes.i;n.next();){var r=n.value;null===e?e=r.kb.copy():e.Th(r.kb);var o=i[r.level],o=void 0===o?Tl(r):Math.max(o,Tl(r));i[r.level]=o}for(n=0;n<i.length;n++)void 0===i[n]&&(i[n]=0);90===this.angle||270===this.angle?(e.Jf(this.nodeSpacing/2,this.layerSpacing),r=new m(-this.nodeSpacing/2,-this.layerSpacing/2)):(e.Jf(this.layerSpacing,this.nodeSpacing/2),r=new m(-this.layerSpacing/2,-this.nodeSpacing/2));var o=[],e=90===this.angle||270===this.angle?e.width:e.height,s=0;if(180===this.angle||270===this.angle)for(n=0;n<t.length;n++)s+=t[n]+i[n];for(n=0;n<t.length;n++){var a=t[n]+i[n];270===this.angle?(s-=a,o.push(new k(0,s,e,a))):90===this.angle?(o.push(new k(0,s,e,a)),s+=a):180===this.angle?(s-=a,o.push(new k(s,0,a,e))):(o.push(new k(s,0,a,e)),s+=a)}this.commitLayers(o,r)}},Zh.prototype.commitLayers=function(){},Zh.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},Zh.prototype.cA=function(){for(var t=this.nd.i;t.next();){var i=t.value;i instanceof jl&&Ml(this,i)}},Zh.prototype.setPortSpots=function(t){var i=t.alignment;if(nl(i)){var e,n=this.Af===$p,r=Pl(t);switch(r){case 0:e=cu;break;case 90:e=pu;break;case 180:e=fu;break;default:e=uu}var o=t.children,s=o.length;switch(i){case hd:case ld:for(i=0;s>i;i++){var a=o[i],a=(n?a.kc:a.bc).first();if(null!==a&&(a=a.link,null!==a)){var h=90===r||270===r?fu:uu;if(1===s||i===s-1&&1===s%2)switch(r){case 0:h=fu;break;case 90:h=uu;break;case 180:h=cu;break;default:h=pu}else 0===i%2&&(h=90===r||270===r?cu:pu);n?(t.setsPortSpot&&(a.vb=e),t.setsChildPortSpot&&(a.xb=h)):(t.setsPortSpot&&(a.vb=h),t.setsChildPortSpot&&(a.xb=e))}}break;case ud:for(h=90===r||270===r?cu:pu,r=n?t.bc:t.kc;r.next();)a=r.value.link,null!==a&&(n?(t.setsPortSpot&&(a.vb=e),t.setsChildPortSpot&&(a.xb=h)):(t.setsPortSpot&&(a.vb=h),t.setsChildPortSpot&&(a.xb=e)));break;case fd:for(h=90===r||270===r?fu:uu,r=n?t.bc:t.kc;r.next();)a=r.value.link,null!==a&&(n?(t.setsPortSpot&&(a.vb=e),t.setsChildPortSpot&&(a.xb=h)):(t.setsPortSpot&&(a.vb=h),t.setsChildPortSpot&&(a.xb=e)))}}else if(n=Pl(t),this.Af===$p){for(e=t.bc;e.next();)if(r=e.value.link,null!==r){if(t.setsPortSpot)if(t.portSpot.Lc())switch(n){case 0:r.vb=cu;break;case 90:r.vb=pu;break;case 180:r.vb=fu;break;default:r.vb=uu}else r.vb=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Lc())switch(n){case 0:r.xb=fu;break;case 90:r.xb=uu;break;case 180:r.xb=cu;break;default:r.xb=pu}else r.xb=t.childPortSpot}}else for(e=t.kc;e.next();)if(r=e.value.link,null!==r){if(t.setsPortSpot)if(t.portSpot.Lc())switch(n){case 0:r.xb=cu;break;case 90:r.xb=pu;break;case 180:r.xb=fu;break;default:r.xb=uu}else r.xb=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Lc())switch(n){case 0:r.vb=fu;break;case 90:r.vb=uu;break;case 180:r.vb=cu;break;default:r.vb=pu}else r.vb=t.childPortSpot}},Ul.defineProperty(Zh,{tK:"roots"},function(){return this.nd},function(t){this.nd!==t&&(Ul.C(t,f,Zh,"roots"),this.nd=t,this.H())}),Ul.defineProperty(Zh,{path:"path"},function(){return this.fr},function(t){this.fr!==t&&(Ul.rb(t,Zh,Zh,"path"),this.fr=t,this.H())}),Ul.defineProperty(Zh,{AI:"treeStyle"},function(){return this.Wr},function(t){this.Yc!==t&&(Ul.rb(t,Zh,Zh,"treeStyle"),t===dd||t===vd||t===yd||t===gd)&&(this.Wr=t,this.H())}),Ul.defineProperty(Zh,{wz:"layerStyle"},function(){return this.Cu},function(t){this.Yc!==t&&(Ul.rb(t,Zh,Zh,"layerStyle"),t===wd||t===kd||t===Md)&&(this.Cu=t,this.H())}),Ul.defineProperty(Zh,{comments:"comments"},function(){return this.ph},function(t){this.ph!==t&&(Ul.j(t,"boolean",Zh,"comments"),this.ph=t,this.H())}),Ul.defineProperty(Zh,{Gf:"arrangement"},function(){return this.Yc},function(t){this.Yc!==t&&(Ul.rb(t,Zh,Zh,"arrangement"),t===md||t===bd||t===xd)&&(this.Yc=t,this.H())}),Ul.defineProperty(Zh,{QC:"arrangementSpacing"},function(){return this.Uf},function(t){Ul.C(t,w,Zh,"arrangementSpacing"),this.Uf.L(t)||(this.Uf.assign(t),this.H())}),Ul.defineProperty(Zh,{sK:"rootDefaults"},function(){return this.qa},function(t){this.qa!==t&&(Ul.C(t,jl,Zh,"rootDefaults"),this.qa=t,this.H())}),Ul.defineProperty(Zh,{QI:"alternateDefaults"},function(){return this.pa},function(t){this.pa!==t&&(Ul.C(t,jl,Zh,"alternateDefaults"),this.pa=t,this.H())}),Ul.defineProperty(Zh,{sorting:"sorting"},function(){return this.qa.sorting},function(t){this.qa.sorting!==t&&(Ul.rb(t,Zh,Zh,"sorting"),t===td||t===id||t===ed||nd)&&(this.qa.sorting=t,this.H())}),Ul.defineProperty(Zh,{comparer:"comparer"},function(){return this.qa.comparer},function(t){this.qa.comparer!==t&&(Ul.j(t,"function",Zh,"comparer"),this.qa.comparer=t,this.H())}),Ul.defineProperty(Zh,{angle:"angle"},function(){return this.qa.angle},function(t){this.qa.angle!==t&&(Ul.j(t,"number",Zh,"angle"),0===t||90===t||180===t||270===t)&&(this.qa.angle=t,this.H())}),Ul.defineProperty(Zh,{alignment:"alignment"},function(){return this.qa.alignment},function(t){this.qa.alignment!==t&&(Ul.rb(t,Zh,Zh,"alignment"),this.qa.alignment=t,this.H())}),Ul.defineProperty(Zh,{nodeIndent:"nodeIndent"},function(){return this.qa.nodeIndent},function(t){this.qa.nodeIndent!==t&&(Ul.j(t,"number",Zh,"nodeIndent"),t>=0&&(this.qa.nodeIndent=t,this.H()))}),Ul.defineProperty(Zh,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.qa.nodeIndentPastParent},function(t){this.qa.nodeIndentPastParent!==t&&(Ul.j(t,"number",Zh,"nodeIndentPastParent"),t>=0&&1>=t&&(this.qa.nodeIndentPastParent=t,this.H()))}),Ul.defineProperty(Zh,{nodeSpacing:"nodeSpacing"},function(){return this.qa.nodeSpacing
},function(t){this.qa.nodeSpacing!==t&&(Ul.j(t,"number",Zh,"nodeSpacing"),this.qa.nodeSpacing=t,this.H())}),Ul.defineProperty(Zh,{layerSpacing:"layerSpacing"},function(){return this.qa.layerSpacing},function(t){this.qa.layerSpacing!==t&&(Ul.j(t,"number",Zh,"layerSpacing"),this.qa.layerSpacing=t,this.H())}),Ul.defineProperty(Zh,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.qa.layerSpacingParentOverlap},function(t){this.qa.layerSpacingParentOverlap!==t&&(Ul.j(t,"number",Zh,"layerSpacingParentOverlap"),t>=0&&1>=t&&(this.qa.layerSpacingParentOverlap=t,this.H()))}),Ul.defineProperty(Zh,{compaction:"compaction"},function(){return this.qa.compaction},function(t){this.qa.compaction!==t&&(Ul.rb(t,Zh,Zh,"compaction"),t===cd||t===pd)&&(this.qa.compaction=t,this.H())}),Ul.defineProperty(Zh,{breadthLimit:"breadthLimit"},function(){return this.qa.breadthLimit},function(t){this.qa.breadthLimit!==t&&(Ul.j(t,"number",Zh,"breadthLimit"),t>=0&&(this.qa.breadthLimit=t,this.H()))}),Ul.defineProperty(Zh,{rowSpacing:"rowSpacing"},function(){return this.qa.rowSpacing},function(t){this.qa.rowSpacing!==t&&(Ul.j(t,"number",Zh,"rowSpacing"),this.qa.rowSpacing=t,this.H())}),Ul.defineProperty(Zh,{rowIndent:"rowIndent"},function(){return this.qa.rowIndent},function(t){this.qa.rowIndent!==t&&(Ul.j(t,"number",Zh,"rowIndent"),t>=0&&(this.qa.rowIndent=t,this.H()))}),Ul.defineProperty(Zh,{commentSpacing:"commentSpacing"},function(){return this.qa.commentSpacing},function(t){this.qa.commentSpacing!==t&&(Ul.j(t,"number",Zh,"commentSpacing"),this.qa.commentSpacing=t,this.H())}),Ul.defineProperty(Zh,{commentMargin:"commentMargin"},function(){return this.qa.commentMargin},function(t){this.qa.commentMargin!==t&&(Ul.j(t,"number",Zh,"commentMargin"),this.qa.commentMargin=t,this.H())}),Ul.defineProperty(Zh,{setsPortSpot:"setsPortSpot"},function(){return this.qa.setsPortSpot},function(t){this.qa.setsPortSpot!==t&&(Ul.j(t,"boolean",Zh,"setsPortSpot"),this.qa.setsPortSpot=t,this.H())}),Ul.defineProperty(Zh,{portSpot:"portSpot"},function(){return this.qa.portSpot},function(t){Ul.C(t,D,Zh,"portSpot"),this.qa.portSpot.L(t)||(this.qa.portSpot=t,this.H())}),Ul.defineProperty(Zh,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.qa.setsChildPortSpot},function(t){this.qa.setsChildPortSpot!==t&&(Ul.j(t,"boolean",Zh,"setsChildPortSpot"),this.qa.setsChildPortSpot=t,this.H())}),Ul.defineProperty(Zh,{childPortSpot:"childPortSpot"},function(){return this.qa.childPortSpot},function(t){Ul.C(t,D,Zh,"childPortSpot"),this.qa.childPortSpot.L(t)||(this.qa.childPortSpot=t,this.H())}),Ul.defineProperty(Zh,{aJ:"alternateSorting"},function(){return this.pa.sorting},function(t){this.pa.sorting!==t&&(Ul.rb(t,Zh,Zh,"alternateSorting"),t===td||t===id||t===ed||nd)&&(this.pa.sorting=t,this.H())}),Ul.defineProperty(Zh,{OI:"alternateComparer"},function(){return this.pa.comparer},function(t){this.pa.comparer!==t&&(Ul.j(t,"function",Zh,"alternateComparer"),this.pa.comparer=t,this.H())}),Ul.defineProperty(Zh,{II:"alternateAngle"},function(){return this.pa.angle},function(t){this.pa.angle!==t&&(Ul.j(t,"number",Zh,"alternateAngle"),0===t||90===t||180===t||270===t)&&(this.pa.angle=t,this.H())}),Ul.defineProperty(Zh,{HI:"alternateAlignment"},function(){return this.pa.alignment},function(t){this.pa.alignment!==t&&(Ul.rb(t,Zh,Zh,"alternateAlignment"),this.pa.alignment=t,this.H())}),Ul.defineProperty(Zh,{TI:"alternateNodeIndent"},function(){return this.pa.nodeIndent},function(t){this.pa.nodeIndent!==t&&(Ul.j(t,"number",Zh,"alternateNodeIndent"),t>=0&&(this.pa.nodeIndent=t,this.H()))}),Ul.defineProperty(Zh,{UI:"alternateNodeIndentPastParent"},function(){return this.pa.nodeIndentPastParent},function(t){this.pa.nodeIndentPastParent!==t&&(Ul.j(t,"number",Zh,"alternateNodeIndentPastParent"),t>=0&&1>=t&&(this.pa.nodeIndentPastParent=t,this.H()))}),Ul.defineProperty(Zh,{VI:"alternateNodeSpacing"},function(){return this.pa.nodeSpacing},function(t){this.pa.nodeSpacing!==t&&(Ul.j(t,"number",Zh,"alternateNodeSpacing"),this.pa.nodeSpacing=t,this.H())}),Ul.defineProperty(Zh,{RI:"alternateLayerSpacing"},function(){return this.pa.layerSpacing},function(t){this.pa.layerSpacing!==t&&(Ul.j(t,"number",Zh,"alternateLayerSpacing"),this.pa.layerSpacing=t,this.H())}),Ul.defineProperty(Zh,{SI:"alternateLayerSpacingParentOverlap"},function(){return this.pa.layerSpacingParentOverlap},function(t){this.pa.layerSpacingParentOverlap!==t&&(Ul.j(t,"number",Zh,"alternateLayerSpacingParentOverlap"),t>=0&&1>=t&&(this.pa.layerSpacingParentOverlap=t,this.H()))}),Ul.defineProperty(Zh,{NI:"alternateCompaction"},function(){return this.pa.compaction},function(t){this.pa.compaction!==t&&(Ul.rb(t,Zh,Zh,"alternateCompaction"),t===cd||t===pd)&&(this.pa.compaction=t,this.H())}),Ul.defineProperty(Zh,{JI:"alternateBreadthLimit"},function(){return this.pa.breadthLimit},function(t){this.pa.breadthLimit!==t&&(Ul.j(t,"number",Zh,"alternateBreadthLimit"),t>=0&&(this.pa.breadthLimit=t,this.H()))}),Ul.defineProperty(Zh,{YI:"alternateRowSpacing"},function(){return this.pa.rowSpacing},function(t){this.pa.rowSpacing!==t&&(Ul.j(t,"number",Zh,"alternateRowSpacing"),this.pa.rowSpacing=t,this.H())}),Ul.defineProperty(Zh,{XI:"alternateRowIndent"},function(){return this.pa.rowIndent},function(t){this.pa.rowIndent!==t&&(Ul.j(t,"number",Zh,"alternateRowIndent"),t>=0&&(this.pa.rowIndent=t,this.H()))}),Ul.defineProperty(Zh,{MI:"alternateCommentSpacing"},function(){return this.pa.commentSpacing},function(t){this.pa.commentSpacing!==t&&(Ul.j(t,"number",Zh,"alternateCommentSpacing"),this.pa.commentSpacing=t,this.H())}),Ul.defineProperty(Zh,{LI:"alternateCommentMargin"},function(){return this.pa.commentMargin},function(t){this.pa.commentMargin!==t&&(Ul.j(t,"number",Zh,"alternateCommentMargin"),this.pa.commentMargin=t,this.H())}),Ul.defineProperty(Zh,{$I:"alternateSetsPortSpot"},function(){return this.pa.setsPortSpot},function(t){this.pa.setsPortSpot!==t&&(Ul.j(t,"boolean",Zh,"alternateSetsPortSpot"),this.pa.setsPortSpot=t,this.H())}),Ul.defineProperty(Zh,{WI:"alternatePortSpot"},function(){return this.pa.portSpot},function(t){Ul.C(t,D,Zh,"alternatePortSpot"),this.pa.portSpot.L(t)||(this.pa.portSpot=t,this.H())}),Ul.defineProperty(Zh,{ZI:"alternateSetsChildPortSpot"},function(){return this.pa.setsChildPortSpot},function(t){this.pa.setsChildPortSpot!==t&&(Ul.j(t,"boolean",Zh,"alternateSetsChildPortSpot"),this.pa.setsChildPortSpot=t,this.H())}),Ul.defineProperty(Zh,{KI:"alternateChildPortSpot"},function(){return this.pa.childPortSpot},function(t){Ul.C(t,D,Zh,"alternateChildPortSpot"),this.pa.childPortSpot.L(t)||(this.pa.childPortSpot=t,this.H())});var Qp;Zh.PathDefault=Qp=Ul.s(Zh,"PathDefault",-1);var $p;Zh.PathDestination=$p=Ul.s(Zh,"PathDestination",0);var _p;Zh.PathSource=_p=Ul.s(Zh,"PathSource",1);var td;Zh.SortingForwards=td=Ul.s(Zh,"SortingForwards",10);var id;Zh.SortingReverse=id=Ul.s(Zh,"SortingReverse",11);var ed;Zh.SortingAscending=ed=Ul.s(Zh,"SortingAscending",12);var nd;Zh.SortingDescending=nd=Ul.s(Zh,"SortingDescending",13);var rd;Zh.AlignmentCenterSubtrees=rd=Ul.s(Zh,"AlignmentCenterSubtrees",20);var od;Zh.AlignmentCenterChildren=od=Ul.s(Zh,"AlignmentCenterChildren",21);var sd;Zh.AlignmentStart=sd=Ul.s(Zh,"AlignmentStart",22);var ad;Zh.AlignmentEnd=ad=Ul.s(Zh,"AlignmentEnd",23);var hd;Zh.AlignmentBus=hd=Ul.s(Zh,"AlignmentBus",24);var ld;Zh.AlignmentBusBranching=ld=Ul.s(Zh,"AlignmentBusBranching",25);var ud;Zh.AlignmentTopLeftBus=ud=Ul.s(Zh,"AlignmentTopLeftBus",26);var fd;Zh.AlignmentBottomRightBus=fd=Ul.s(Zh,"AlignmentBottomRightBus",27);var cd;Zh.CompactionNone=cd=Ul.s(Zh,"CompactionNone",30);var pd;Zh.CompactionBlock=pd=Ul.s(Zh,"CompactionBlock",31);var dd;Zh.StyleLayered=dd=Ul.s(Zh,"StyleLayered",40);var yd;Zh.StyleLastParents=yd=Ul.s(Zh,"StyleLastParents",41);var vd;Zh.StyleAlternating=vd=Ul.s(Zh,"StyleAlternating",42);var gd;Zh.StyleRootOnly=gd=Ul.s(Zh,"StyleRootOnly",43);var md;Zh.ArrangementVertical=md=Ul.s(Zh,"ArrangementVertical",50);var bd;Zh.ArrangementHorizontal=bd=Ul.s(Zh,"ArrangementHorizontal",51);var xd;Zh.ArrangementFixedRoots=xd=Ul.s(Zh,"ArrangementFixedRoots",52);var wd;Zh.LayerIndividual=wd=Ul.s(Zh,"LayerIndividual",60);var kd;Zh.LayerSiblings=kd=Ul.s(Zh,"LayerSiblings",61);var Md;Zh.LayerUniform=Md=Ul.s(Zh,"LayerUniform",62),Ul.Ga(Cl,ja),Ul.fa("TreeNetwork",Cl),Cl.prototype.createVertex=function(){return new jl},Cl.prototype.createEdge=function(){return new Nl},Ul.Ga(jl,Fa),Ul.fa("TreeVertex",jl),jl.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.sorting=t.sorting,this.comparer=t.comparer,this.angle=t.angle,this.alignment=t.alignment,this.nodeIndent=t.nodeIndent,this.nodeIndentPastParent=t.nodeIndentPastParent,this.nodeSpacing=t.nodeSpacing,this.layerSpacing=t.layerSpacing,this.layerSpacingParentOverlap=t.layerSpacingParentOverlap,this.compaction=t.compaction,this.breadthLimit=t.breadthLimit,this.rowSpacing=t.rowSpacing,this.rowIndent=t.rowIndent,this.commentSpacing=t.commentSpacing,this.commentMargin=t.commentMargin,this.setsPortSpot=t.setsPortSpot,this.portSpot=t.portSpot,this.setsChildPortSpot=t.setsChildPortSpot,this.childPortSpot=t.childPortSpot)},Ul.u(jl,{qm:"childrenCount"},function(){return this.children.length}),Ul.defineProperty(jl,{rK:"relativePosition"},function(){return this.ia},function(t){this.ia.set(t)}),Ul.defineProperty(jl,{BK:"subtreeSize"},function(){return this.Ya},function(t){this.Ya.set(t)}),Ul.defineProperty(jl,{AK:"subtreeOffset"},function(){return this.Ia},function(t){this.Ia.set(t)}),Ul.Ga(Nl,za),Ul.fa("TreeEdge",Nl),Nl.prototype.commit=function(){var t=this.link;if(null!==t&&!t.el){var i=this.network.Qb,e=null,n=null;switch(i.Af){case $p:e=this.fromVertex,n=this.toVertex;break;case _p:e=this.toVertex,n=this.fromVertex;break;default:Ul.k("Unhandled path value "+i.Af.toString())}if(null!==e&&null!==n)if(i=this.nr,0!==i.x||0!==i.y||e.aI){var n=e.kb,r=Pl(e),o=Tl(e),s=e.rowSpacing;t.updateRoute();var a,h,l=t.Ve===Qc,u=t.dc,f=0;if(t.rl(),u||l){for(f=2;4<t.ka;)t.nE(2);a=t.l(1),h=t.l(2)}else{for(f=1;3<t.ka;)t.nE(1);a=t.l(0),h=t.l(t.ka-1)}var c=t.l(t.ka-1),p=0;0===r?(e.alignment===ad?(p=n.bottom+i.y,0===i.y&&a.y>c.y+e.rowIndent&&(p=Math.min(p,Math.max(a.y,p-Sl(e))))):e.alignment===sd?(p=n.top+i.y,0===i.y&&a.y<c.y-e.rowIndent&&(p=Math.max(p,Math.min(a.y,p+Sl(e))))):p=e.bp||e.cp&&1===e.maxGenerationCount?n.top-e.Ia.y+i.y:n.y+n.height/2+i.y,l?(t.w(f,a.x,p),f++,t.w(f,n.right+o,p),f++,t.w(f,n.right+o+(i.x-s)/3,p),f++,t.w(f,n.right+o+2*(i.x-s)/3,p),f++,t.w(f,n.right+o+(i.x-s),p),f++,t.w(f,h.x,p)):(u&&(t.w(f,n.right+o/2,a.y),f++),t.w(f,n.right+o/2,p),f++,t.w(f,n.right+o+i.x-(u?s/2:s),p),f++,u&&t.w(f,t.l(f-1).x,h.y))):90===r?(e.alignment===ad?(p=n.right+i.x,0===i.x&&a.x>c.x+e.rowIndent&&(p=Math.min(p,Math.max(a.x,p-Sl(e))))):e.alignment===sd?(p=n.left+i.x,0===i.x&&a.x<c.x-e.rowIndent&&(p=Math.max(p,Math.min(a.x,p+Sl(e))))):p=e.bp||e.cp&&1===e.maxGenerationCount?n.left-e.Ia.x+i.x:n.x+n.width/2+i.x,l?(t.w(f,p,a.y),f++,t.w(f,p,n.bottom+o),f++,t.w(f,p,n.bottom+o+(i.y-s)/3),f++,t.w(f,p,n.bottom+o+2*(i.y-s)/3),f++,t.w(f,p,n.bottom+o+(i.y-s)),f++,t.w(f,p,h.y)):(u&&(t.w(f,a.x,n.bottom+o/2),f++),t.w(f,p,n.bottom+o/2),f++,t.w(f,p,n.bottom+o+i.y-(u?s/2:s)),f++,u&&t.w(f,h.x,t.l(f-1).y))):180===r?(e.alignment===ad?(p=n.bottom+i.y,0===i.y&&a.y>c.y+e.rowIndent&&(p=Math.min(p,Math.max(a.y,p-Sl(e))))):e.alignment===sd?(p=n.top+i.y,0===i.y&&a.y<c.y-e.rowIndent&&(p=Math.max(p,Math.min(a.y,p+Sl(e))))):p=e.bp||e.cp&&1===e.maxGenerationCount?n.top-e.Ia.y+i.y:n.y+n.height/2+i.y,l?(t.w(f,a.x,p),f++,t.w(f,n.left-o,p),f++,t.w(f,n.left-o+(i.x+s)/3,p),f++,t.w(f,n.left-o+2*(i.x+s)/3,p),f++,t.w(f,n.left-o+(i.x+s),p),f++,t.w(f,h.x,p)):(u&&(t.w(f,n.left-o/2,a.y),f++),t.w(f,n.left-o/2,p),f++,t.w(f,n.left-o+i.x+(u?s/2:s),p),f++,u&&t.w(f,t.l(f-1).x,h.y))):270===r?(e.alignment===ad?(p=n.right+i.x,0===i.x&&a.x>c.x+e.rowIndent&&(p=Math.min(p,Math.max(a.x,p-Sl(e))))):e.alignment===sd?(p=n.left+i.x,0===i.x&&a.x<c.x-e.rowIndent&&(p=Math.max(p,Math.min(a.x,p+Sl(e))))):p=e.bp||e.cp&&1===e.maxGenerationCount?n.left-e.Ia.x+i.x:n.x+n.width/2+i.x,l?(t.w(f,p,a.y),f++,t.w(f,p,n.top-o),f++,t.w(f,p,n.top-o+(i.y+s)/3),f++,t.w(f,p,n.top-o+2*(i.y+s)/3),f++,t.w(f,p,n.top-o+(i.y+s)),f++,t.w(f,p,h.y)):(u&&(t.w(f,a.x,n.top-o/2),f++),t.w(f,p,n.top-o/2),f++,t.w(f,p,n.top-o+i.y+(u?s/2:s)),f++,u&&t.w(f,h.x,t.l(f-1).y))):Ul.k("Invalid angle "+r),t.Bi()}else r=e,o=n,t=this.link,e=Pl(r),e!==Pl(o)&&(i=Tl(r),n=r.kb,r=o.kb,0===e&&r.left-n.right<i+1||90===e&&r.top-n.bottom<i+1||180===e&&n.left-r.right<i+1||270===e&&n.top-r.bottom<i+1||(t.updateRoute(),r=t.Ve===Qc,o=t.dc,s=nl(this.fromVertex.alignment),t.rl(),0===e?(e=n.right+i/2,r?4===t.ka&&(i=t.l(3).y,t.V(1,e-20,t.l(1).y),t.w(2,e-20,i),t.w(3,e,i),t.w(4,e+20,i),t.V(5,t.l(5).x,i)):o?s?t.V(3,t.l(2).x,t.l(4).y):6===t.ka&&(t.V(2,e,t.l(2).y),t.V(3,e,t.l(3).y)):4===t.ka?t.w(2,e,t.l(2).y):3===t.ka?t.V(1,e,t.l(2).y):2===t.ka&&t.w(1,e,t.l(1).y)):90===e?(i=n.bottom+i/2,r?4===t.ka&&(e=t.l(3).x,t.V(1,t.l(1).x,i-20),t.w(2,e,i-20),t.w(3,e,i),t.w(4,e,i+20),t.V(5,e,t.l(5).y)):o?s?t.V(3,t.l(2).x,t.l(4).y):6===t.ka&&(t.V(2,t.l(2).x,i),t.V(3,t.l(3).x,i)):4===t.ka?t.w(2,t.l(2).x,i):3===t.ka?t.V(1,t.l(2).x,i):2===t.ka&&t.w(1,t.l(1).x,i)):180===e?(e=n.left-i/2,r?4===t.ka&&(i=t.l(3).y,t.V(1,e+20,t.l(1).y),t.w(2,e+20,i),t.w(3,e,i),t.w(4,e-20,i),t.V(5,t.l(5).x,i)):o?s?t.V(3,t.l(2).x,t.l(4).y):6===t.ka&&(t.V(2,e,t.l(2).y),t.V(3,e,t.l(3).y)):4===t.ka?t.w(2,e,t.l(2).y):3===t.ka?t.V(1,e,t.l(2).y):2===t.ka&&t.w(1,e,t.l(1).y)):270===e&&(i=n.top-i/2,r?4===t.ka&&(e=t.l(3).x,t.V(1,t.l(1).x,i+20),t.w(2,e,i+20),t.w(3,e,i),t.w(4,e,i-20),t.V(5,e,t.l(5).y)):o?s?t.V(3,t.l(2).x,t.l(4).y):6===t.ka&&(t.V(2,t.l(2).x,i),t.V(3,t.l(3).x,i)):4===t.ka?t.w(2,t.l(2).x,i):3===t.ka?t.V(1,t.l(2).x,i):2===t.ka&&t.w(1,t.l(1).x,i)),t.Bi()))}},Ul.defineProperty(Nl,{qK:"relativePoint"},function(){return this.nr},function(t){this.nr.set(t)}),Dl.prototype.Xr=function(t){var i=t.ua,e=t.va,n=t.F,r=t.G,o=Math.min(i,n),s=Math.min(e,r),i=Math.abs(n-i),e=Math.abs(r-e),r=new X(o,s);return r.Fa.add(new Z(Ru,o+i,s)),r.Fa.add(new Z(Ru,o+i,s+e)),r.Fa.add(new Z(Ru,o,s+e).close()),t.type=Bu,t.ub.add(r),t},Ul.Ga(Vl,Mr),Vl.prototype.cloneProtected=function(t){Mr.prototype.cloneProtected.call(this,t),t.element=this.Me.cloneNode(!0)},Vl.prototype.toString=function(){return"HTMLHost("+this.Me.toString()+")#"+Ul.Uc(this)},Vl.prototype.Mj=function(t,i){var e=this.Me;if(null!==e){var n=this.lb(ou);n.x-=this.ba.width/2,n.y-=this.ba.height/2,n.x-=this.ba.x,n.y-=this.ba.y;var n=i.VE(n),r=i.Vk;null===r||r.contains(e)||r.appendChild(e),r=this.transform,e.style.transform="matrix("+r.m11+","+r.m12+","+r.m21+","+r.m22+","+r.dx+","+r.dy+")",e.style.transformOrigin="0 0",r=n.y,e.style.left=n.x+"px",e.style.top=r+"px"}},Vl.prototype.Oo=function(t,i,e,n){var r=this.xa;isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(i=r.height);var r=this.af,o=this.vg;e=Math.max(e,o.width),n=Math.max(n,o.height),t=Math.min(r.width,t),i=Math.min(r.height,i),t=Math.max(e,t),i=Math.max(n,i),e=this.Me,null!==e&&(i=e.getBoundingClientRect(),t=i.width,i=i.height),M(this.Hc,t,i),Cr(this,0,0,t,i)},Vl.prototype.xi=function(t,i,e,n){Dr(this,t,i,e,n)},Ul.u(Vl,{Ha:"naturalBounds"},function(){return this.Hc}),Ul.defineProperty(Vl,{element:"element"},function(){return this.Me},function(t){var i=this.Me;i!==t&&(t instanceof HTMLElement||Ul.k("HTMLHost.element must be an instance of HTMLElement."),this.Me=t,t.className="HTMLHost",this.h("element",i,t),this.ma())}),Kl.version="1.5.10",t&&(t.module&&"object"==typeof t.module&&"object"==typeof t.module.exports?t.module.exports=Kl:t.define&&"function"==typeof t.define&&t.define.amd?(t.go=Kl,t.define(Kl)):t.go=Kl)}(window);