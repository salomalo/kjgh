(function(aA,aV){var aW=aA.extend,aj=aA.proxy,aS=aA.isFunction,aE=aA.isPlainObject,au=aA.isEmptyObject,aM=aA.isArray,ac=aA.grep,az=aA.ajax,aI,ak=aA.each,af=aA.noop,ay=window.kendo,a1=ay.Observable,a2=ay.Class,al=ay.data.Model,am=ay.data.ModelSet,ai="string",ao="create",ap="read",aX="update",aR="destroy",aB="change",aY="modelChange",ax="multiple",a0="single",aw="error",ah="requestStart",aZ=[ao,ap,aX,aR],an=function(a){return a},aH=ay.getter,aD=ay.stringify,aG=Math;var aF={selector:function(a){return aS(a)?a:aH(a)},asc:function(a){var b=this.selector(a);return function(c,d){c=b(c);d=b(d);return c>d?1:(c<d?-1:0)}},desc:function(a){var b=this.selector(a);return function(c,d){c=b(c);d=b(d);return c<d?1:(c>d?-1:0)}},create:function(a){return aF[a.dir.toLowerCase()](a.field)},combine:function(a){return function(c,d){var e=a[0](c,d),f,b;for(f=1,b=a.length;f<b;f++){e=e||a[f](c,d)}return e}}};aI=function(a,b){var d,c=a.length,e=new Array(c);for(d=0;d<c;d++){e[d]=b(a[d],d,a)}return e};var ad=(function(){var a=/^\/Date\((.*?)\)\/$/,c=/'/g;function b(h,f,g,d){var e;if(g!=aV){if(typeof g===ai){g=g.replace(c,"\\'");e=a.exec(g);if(e){g=new Date(+e[1])}else{if(d){g="'"+g.toLowerCase()+"'";f=f+".toLowerCase()"}else{g="'"+g+"'"}}}if(g.getTime){f+=".getTime()";g=g.getTime()}}return f+" "+h+" "+g}return{eq:function(e,f,d){return b("==",e,f,d)},neq:function(e,f,d){return b("!=",e,f,d)},gt:function(e,f,d){return b(">",e,f,d)},gte:function(e,f,d){return b(">=",e,f,d)},lt:function(e,f,d){return b("<",e,f,d)},lte:function(e,f,d){return b("<=",e,f,d)},startswith:function(e,f,d){if(d){e=e+".toLowerCase()";if(f){f=f.toLowerCase()}}return e+".lastIndexOf('"+f+"', 0) == 0"},endswith:function(e,f,d){if(d){e=e+".toLowerCase()";if(f){f=f.toLowerCase()}}return e+".lastIndexOf('"+f+"') == "+e+".length - "+(f||"").length},contains:function(e,f,d){if(d){e=e+".toLowerCase()";if(f){f=f.toLowerCase()}}return e+".indexOf('"+f+"') >= 0"}}})();function aq(a){this.data=a||[]}aq.normalizeFilter=aT;aq.filterExpr=function(d){var e=[],g={and:" && ",or:" || "},a,h,k,b,l=[],f=[],c,i,j=d.filters;for(a=0,h=j.length;a<h;a++){k=j[a];c=k.field;i=k.operator;if(k.filters){b=aq.filterExpr(k);k=b.expression.replace(/__o\[(\d+)\]/g,function(m,n){n=+n;return"__o["+(f.length+n)+"]"}).replace(/__f\[(\d+)\]/g,function(m,n){n=+n;return"__f["+(l.length+n)+"]"});f.push.apply(f,b.operators);l.push.apply(l,b.fields)}else{if(typeof c==="function"){b="__f["+l.length+"](d)";l.push(c)}else{b=ay.expr(c)}if(typeof i==="function"){k="__o["+f.length+"]("+b+", "+k.value+")";f.push(i)}else{k=ad[(i||"eq").toLowerCase()](b,k.value,k.ignoreCase!==aV?k.ignoreCase:true)}}e.push(k)}return{expression:"("+e.join(g[d.logic])+")",fields:l,operators:f}};function aL(a,d){if(a){var b=typeof a===ai?{field:a,dir:d}:a,c=aM(b)?b:(b!==aV?[b]:[]);return ac(c,function(e){return !!e.dir})}}var aN={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte"};function aP(a){var f,b,d,e,c=a.filters;if(c){for(f=0,b=c.length;f<b;f++){d=c[f];e=d.operator;if(e&&typeof e===ai){d.operator=aN[e.toLowerCase()]||e}aP(d)}}}function aT(a){if(a&&!au(a)){if(aM(a)||!a.filters){a={logic:"and",filters:aM(a)?a:[a]}}aP(a);return a}}function aK(a){return a=aM(a)?a:[a]}function a4(a,d){var b=typeof a===ai?{field:a,dir:d}:a,c=aM(b)?b:(b!==aV?[b]:[]);return aI(c,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}aq.prototype={toArray:function(){return this.data},range:function(b,a){return new aq(this.data.slice(b,b+a))},skip:function(a){return new aq(this.data.slice(a))},take:function(a){return new aq(this.data.slice(0,a))},select:function(a){return new aq(aI(this.data,a))},orderBy:function(b){var c=this.data.slice(0),a=aS(b)||!b?aF.asc(b):b.compare;return new aq(c.sort(a))},orderByDescending:function(a){return new aq(this.data.slice(0).sort(aF.desc(a)))},sort:function(a,e){var f,b,c=aL(a,e),d=[];if(c.length){for(f=0,b=c.length;f<b;f++){d.push(aF.create(c[f]))}return this.orderBy({compare:aF.combine(d)})}return this},filter:function(g){var c,e,j,d,b,h=this.data,f,i,a=[],k;g=aT(g);if(!g||g.filters.length===0){return this}d=aq.filterExpr(g);f=d.fields;i=d.operators;b=k=new Function("d, __f, __o","return "+d.expression);if(f.length||i.length){k=function(l){return b(l,f,i)}}for(c=0,j=h.length;c<j;c++){e=h[c];if(k(e)){a.push(e)}}return new aq(a)},group:function(d,b){d=a4(d||[]);b=b||this.data;var c=this,e=new aq(c.data),a;if(d.length>0){a=d[0];e=e.groupBy(a).select(function(f){var g=new aq(b).filter([{field:f.field,operator:"eq",value:f.value}]);return{field:f.field,value:f.value,items:d.length>1?new aq(f.items).group(d.slice(1),g.toArray()).toArray():f.items,hasSubgroups:d.length>1,aggregates:g.aggregate(a.aggregates)}})}return e},groupBy:function(k){if(au(k)||!this.data.length){return new aq([])}var f=k.field,g=this.sort(f,k.dir||"asc").toArray(),i=ay.accessor(f),b,j=i.get(g[0],f),d={field:f,value:j,items:[]},c,e,h,a=[d];for(e=0,h=g.length;e<h;e++){b=g[e];c=i.get(b,f);if(j!==c){j=c;d={field:f,value:j,items:[]};a.push(d)}d.items.push(b)}return new aq(a)},aggregate:function(a){var b,c,d={};if(a&&a.length){for(b=0,c=this.data.length;b<c;b++){aO(d,a,this.data[b],b,c)}}return d}};function aO(i,f,a,e,j){f=f||[];var b,h,d,k,g=f.length;for(b=0;b<g;b++){h=f[b];d=h.aggregate;var c=h.field;i[c]=i[c]||{};i[c][d]=aQ[d.toLowerCase()](i[c][d],a,ay.accessor(c),e,j)}}var aQ={sum:function(b,a,c){return b=(b||0)+c.get(a)},count:function(b,a,c){return(b||0)+1},average:function(d,a,e,c,b){d=(d||0)+e.get(a);if(c==b-1){d=d/b}return d},max:function(c,b,d){var c=(c||0),a=d.get(b);if(c<a){c=a}return c},min:function(c,b,d){var a=d.get(b),c=(c||a);if(c>a){c=a}return c}};function ae(g,a){var e=new aq(g),a=a||{},c=a.group,f=aL(a.sort||[]).concat(a4(c||[])),d,i=a.filter,b=a.skip,h=a.take;if(i){e=e.filter(i);d=e.toArray().length}if(f){e=e.sort(f);if(c){g=e.toArray()}}if(b!==aV&&h!==aV){e=e.range(b,h)}if(c){e=e.group(c,g)}return{total:d,data:e.toArray()}}function ar(b,e){var c=new aq(b),e=e||{},a=e.aggregate,d=e.filter;if(d){c=c.filter(d)}return c.aggregate(a)}var aU=a2.extend({init:function(a){this.data=a.data},read:function(a){a.success(this.data)},update:function(a){a.success(a.data)},create:af,destory:af});var aC=a2.extend({init:function(b){var a=this,c;b=a.options=aW({},a.options,b);ak(aZ,function(e,d){if(typeof b[d]===ai){b[d]={url:b[d]}}});a.cache=b.cache?a3.create(b.cache):{find:af,add:af};c=b.parameterMap;a.parameterMap=aS(c)?c:function(d){var e={};ak(d,function(g,f){if(g in c){g=c[g];if(aE(g)){f=g.value(f);g=g.key}}e[g]=f});return e}},options:{parameterMap:an},create:function(a){return az(this.setup(a,ao))},read:function(c){var b=this,a,d,f,e=b.cache;c=b.setup(c,ap);a=c.success||af;d=c.error||af;f=e.find(c.data);if(f!==aV){a(f)}else{c.success=function(g){e.add(c.data,g);a(g)};aA.ajax(c)}},update:function(a){return az(this.setup(a,aX))},destroy:function(a){return az(this.setup(a,aR))},setup:function(d,c){d=d||{};var b=this,e=b.options[c],a=aS(e.data)?e.data():e.data;d=aW(true,{},e,d);d.data=b.parameterMap(aW(a,d.data),c);return d}});a3.create=function(a){var b={inmemory:function(){return new a3()}};if(aE(a)&&aS(a.find)){return a}if(a===true){return new a3()}return b[a]()};function a3(){this._store={}}a3.prototype={add:function(b,a){if(b!==aV){this._store[aD(b)]=a}},find:function(a){return this._store[aD(a)]},clear:function(){this._store={}},remove:function(a){delete this._store[aD(a)]}};var aJ=a2.extend({init:function(b){var c=this,a,d;b=b||{};for(a in b){d=b[a];c[a]=typeof d===ai?aH(d):d}if(aE(c.model)){c.model=al.define(c.model)}},parse:an,data:an,total:function(a){return a.length},groups:an,status:function(a){return a.status},aggregates:function(){return{}}});var at=a1.extend({init:function(d){var c=this,a,e,b;d=c.options=aW({},c.options,d);aW(c,{_map:{},_prefetch:{},_data:[],_ranges:[],_view:[],_pageSize:d.pageSize,_page:d.page||(d.pageSize?1:aV),_sort:aL(d.sort),_filter:aT(d.filter),_group:a4(d.group),_aggregate:d.aggregate});a1.fn.init.call(c);b=d.transport;if(b){b.read=typeof b.read===ai?{url:b.read}:b.read;if(d.type){b=aW(true,{},ay.data.transports[d.type],b);d.schema=aW(true,{},ay.data.schemas[d.type],d.schema)}c.transport=aS(b.read)?b:new aC(b)}else{c.transport=new aU({data:d.data})}c.reader=new ay.data.readers[d.schema.type||"json"](d.schema);e=c.reader.model||{};a=e.id;if(al&&!au(e)){c._set=new am({model:e,data:c._data,reader:c.reader,batch:d.batch,sendAllFields:d.sendAllFields,transport:c.transport,change:function(){var f=c.data();c._total=c.reader.total(f);c._process(f)},modelChange:function(f){c.trigger(aY,f)},error:function(f){c.trigger(aw,f)}})}if(a){c.id=function(f){return a(f)}}c.bind([aw,aB,ao,aR,aX,ah,aY],d)},options:{data:[],schema:{},serverSorting:false,serverPaging:false,serverFiltering:false,serverGrouping:false,serverAggregates:false,sendAllFields:true,batch:false},get:function(a){return this._set.get(a)},sync:function(){this._set.sync()},add:function(a){return this._set.add(a)},insert:function(a,b){return this._set.insert(a,b)},cancelChanges:function(){this._set.cancelChanges()},read:function(b){var c=this,a=c._params(b);c._queueRequest(a,function(){c.trigger(ah);c._ranges=[];c.transport.read({data:a,success:aj(c.success,c),error:aj(c.error,c)})})},indexOf:function(a){return this._set.indexOf(a)},_params:function(a){var b=this;return aW({take:b.take(),skip:b.skip(),page:b.page(),pageSize:b.pageSize(),sort:b._sort,filter:b._filter,group:b._group,aggregate:b._aggregate},a)},_queueRequest:function(c,a){var b=this;if(!b._requestInProgress){b._requestInProgress=true;b._pending=aV;a()}else{b._pending={callback:aj(a,b),options:c}}},_dequeueRequest:function(){var a=this;a._requestInProgress=false;if(a._pending){a._queueRequest(a._pending.options,a._pending.callback)}},remove:function(a){this._set.remove(a)},error:function(){this.trigger(aw,arguments)},success:function(b){var c=this,e={},g,d=c.options.serverGrouping===true&&c._group&&c._group.length>0;b=c.reader.parse(b);c._total=c.reader.total(b);if(c._aggregate&&c.options.serverAggregates){c._aggregateResult=c.reader.aggregates(b)}if(d){b=c.reader.groups(b)}else{b=c.reader.data(b)}c._data=b;if(c._set){c._set.data(b)}var a=c._skip||0,f=a+b.length;c._ranges.push({start:a,end:f,data:b});c._ranges.sort(function(i,h){return i.start-h.start});c._dequeueRequest();c._process(b)},_process:function(a){var b=this,d={},e,c=b.options.serverGrouping===true&&b._group&&b._group.length>0;if(b.options.serverPaging!==true){d.skip=b._skip;d.take=b._take||b._pageSize;if(d.skip===aV&&b._page!==aV&&b._pageSize!==aV){d.skip=(b._page-1)*b._pageSize}}if(b.options.serverSorting!==true){d.sort=b._sort}if(b.options.serverFiltering!==true){d.filter=b._filter}if(b.options.serverGrouping!==true){d.group=b._group}if(b.options.serverAggregates!==true){d.aggregate=b._aggregate;b._aggregateResult=ar(a,d)}e=ae(a,d);b._view=e.data;if(e.total!==aV&&!b.options.serverFiltering){b._total=e.total}b.trigger(aB)},at:function(a){return this._data[a]},data:function(a){var b=this;if(a!==aV){b._data=a;if(b._set){b._set.data(a)}b._process(a)}else{return b._data}},view:function(){return this._view},query:function(c){var b=this,d,a=b.options.serverSorting||b.options.serverPaging||b.options.serverFiltering||b.options.serverGrouping||b.options.serverAggregates;if(c!==aV){b._pageSize=c.pageSize;b._page=c.page;b._sort=c.sort;b._filter=c.filter;b._group=c.group;b._aggregate=c.aggregate;b._skip=c.skip;b._take=c.take;if(b._skip===aV){b._skip=b.skip();c.skip=b.skip()}if(b._take===aV&&b._pageSize!==aV){b._take=b._pageSize;c.take=b._take}if(c.sort){b._sort=c.sort=aL(c.sort)}if(c.filter){b._filter=c.filter=aT(c.filter)}if(c.group){b._group=c.group=a4(c.group)}if(c.aggregate){b._aggregate=c.aggregate=aK(c.aggregate)}}if(a||(b._data===aV||b._data.length==0)){b.read(c)}else{b.trigger(ah);d=ae(b._data,c);if(!b.options.serverFiltering){if(d.total!==aV){b._total=d.total}else{b._total=b.reader.total(b._data)}}b._view=d.data;b._aggregateResult=ar(b._data,c);b.trigger(aB)}},fetch:function(a){var b=this;if(a&&aS(a)){b.one(aB,a)}b._query()},_query:function(b){var a=this;a.query(aW({},{page:a.page(),pageSize:a.pageSize(),sort:a.sort(),filter:a.filter(),group:a.group(),aggregate:a.aggregate()},b))},page:function(a){var b=this,c;if(a!==aV){a=aG.max(aG.min(aG.max(a,1),b.totalPages()),1);b._query({page:a});return}c=b.skip();return c!==aV?aG.round((c||0)/(b.take()||1))+1:aV},pageSize:function(a){var b=this;if(a!==aV){b._query({pageSize:a});return}return b.take()},sort:function(a){var b=this;if(a!==aV){b._query({sort:a});return}return b._sort},filter:function(a){var b=this;if(a===aV){return b._filter}b._query({filter:a})},group:function(a){var b=this;if(a!==aV){b._query({group:a});return}return b._group},total:function(){return this._total},aggregate:function(a){var b=this;if(a!==aV){b._query({aggregate:a});return}return b._aggregate},aggregates:function(){return this._aggregateResult},totalPages:function(){var a=this,b=a.pageSize()||a.total();return aG.ceil((a.total()||0)/b)},inRange:function(a,c){var b=this,d=aG.min(a+c,b.total());if(!b.options.serverPaging&&b.data.length>0){return true}return b._findRange(a,d).length>0},range:function(b,e){b=aG.min(b||0,this.total());var c=this,f=aG.max(aG.floor(b/e),0)*e,d=aG.min(f+e,c.total()),a;a=c._findRange(b,aG.min(b+e,c.total()));if(a.length){c._skip=b>c.skip()?aG.min(d,(c.totalPages()-1)*c.take()):f;c._take=e;var g=c.options.serverPaging;try{c.options.serverPaging=true;c._process(a)}finally{c.options.serverPaging=g}return}if(e!==aV){if(!c._rangeExists(f,d)){c.prefetch(f,e,function(){if(b>f&&d<c.total()&&!c._rangeExists(d,aG.min(d+e,c.total()))){c.prefetch(d,e,function(){c.range(b,e)})}else{c.range(b,e)}})}else{if(f<b){c.prefetch(d,e,function(){c.range(b,e)})}}}},_findRange:function(k,i){var d=this,j,l=d._ranges,f,h=[],c,a,b,g,j;for(c=0,j=l.length;c<j;c++){f=l[c];if(k>=f.start&&k<=f.end){var e=0;for(a=c;a<j;a++){f=l[a];if(f.data.length&&k+e>=f.start&&e+e<=f.end){b=0;if(k+e>f.start){b=(k+e)-f.start}g=f.data.length;if(f.end>i){g=g-(f.end-i)}e+=g-b;h=h.concat(f.data.slice(b,g));if(i<=f.end&&e==i-k){return h}}}break}}return[]},skip:function(){var a=this;if(a._skip===aV){return(a._page!==aV?(a._page-1)*(a.take()||1):aV)}return a._skip},take:function(){var a=this;return a._take||a._pageSize},prefetch:function(b,e,a){var c=this,d=aG.min(b+e,c.total()),g={start:b,end:d,data:[]},f={take:e,skip:b,page:b/e+1,pageSize:e,sort:c._sort,filter:c._filter,group:c._group,aggregate:c._aggregate};if(!c._rangeExists(b,d)){clearTimeout(c._timeout);c._timeout=setTimeout(function(){c._queueRequest(f,function(){c.transport.read({data:f,success:function(h){c._dequeueRequest();var i=false;for(var j=0,k=c._ranges.length;j<k;j++){if(c._ranges[j].start===b){i=true;g=c._ranges[j];break}}if(!i){c._ranges.push(g)}h=c.reader.parse(h);g.data=c.reader.data(h);g.end=g.start+g.data.length;c._ranges.sort(function(m,l){return m.start-l.start});if(a){a()}}})})},100)}else{if(a){a()}}},_rangeExists:function(a,d){var b=this,e=b._ranges,f,c;for(f=0,c=e.length;f<c;f++){if(e[f].start<=a&&e[f].end>=d){return true}}return false}});at.create=function(d){d=aM(d)?{data:d}:d;var a=d||{},b=a.data,e=a.fields,c=a.table,f=a.select;if(!b&&e&&!a.transport){if(c){b=ag(c,e)}else{if(f){b=av(f,e)}}}a.data=b;return a instanceof at?a:new at(a)};function av(c,d){var a=aA(c)[0].children,b,j,g=[],e,h=d[0],i=d[1],f;for(b=0,j=a.length;b<j;b++){e={};f=a[b];e[h.field]=f.text;e[i.field]=f.value;g.push(e)}return g}function ag(b,h){var k=aA(b)[0].tBodies[0],a=k?k.rows:[],g,m,d,e=h.length,l=[],c,j,f,i;for(g=0,m=a.length;g<m;g++){j={};i=true;c=a[g].cells;for(d=0;d<e;d++){f=c[d];if(f.nodeName.toLowerCase()!=="th"){i=false;j[h[d].field]=f.innerHTML}}if(!i){l.push(j)}}return l}aW(true,ay.data,{readers:{json:aJ},Query:aq,DataSource:at,LocalTransport:aU,RemoteTransport:aC,Cache:a3,DataReader:aJ})})(jQuery);