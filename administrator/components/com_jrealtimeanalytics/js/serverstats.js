(function(b){var a=function(d){var g=b("input[data-role=filter]");var e=b("button[data-role=reset-filter]");function c(i){var l=b(this).parents("div.accordion-group").find("table.adminlist");var k=parseInt(b(this).data("field"))-1;var j=b(i.target).val().toLowerCase();var m=0;b("tbody tr",l).each(function(n,p){var o=b(b("td",p).get(k)).filter(function(){return b("a.preview",this).length?false:true}).text().toLowerCase();if(!o){return true}if(o.indexOf(j)>=0){b(p).show();m++}else{b(p).hide()}});b(this).nextAll("span[data-role=label-occurrences]").remove();if(j){var h=m>0?"label-success":"label-important";b(this).nextAll("button.btn").after('<span data-role="label-occurrences" class="label '+h+' label-occurrences">'+COM_JREALTIME_NUMRESULTS+m+"</span>")}return false}(function f(){b("input[data-role=calendar]").datepicker({dateFormat:"yy-mm-dd",firstDay:1}).prev("span").on("click",function(){b(this).datepicker("show")});b("table.table-striped").tablesorter({cssHeader:""});b("*[data-bind=geomap]").vectorMap({map:"world_en",backgroundColor:"#FFFFFF",color:"#DEDEDE",hoverOpacity:0.7,selectedColor:"#666666",enableZoom:true,showTooltip:true,values:jrealtimeGeoMapData,scaleColors:["#B4D6E6","#4B97BA"],normalizeFunction:"polynomial",onLabelShow:function(j,i,h,k){i.text(h+": "+k)}});b(".preview").fancybox({width:"95%",height:"90%",autoScale:false,transitionOut:"none",type:"iframe",title:COM_JREALTIME_STATS_DETAILS});b("#open_visualmap").fancybox({width:580,height:350,autoScale:false,transitionOut:"none",type:"inline",title:COM_JREALTIME_VISUALMAP,onCleanup:function(k,h,j){var i=b("#fancybox_visualmap");i.appendTo("div.fancybox.geomap")}});b("div.rightgraph_stats.pie a.fancybox-image, div.rightgraph_stats.bar a.fancybox-image").fancybox({width:580,height:350,autoScale:false,transitionOut:"none",type:"image"});g.on("click",function(){return false}).on("keyup",c);e.on("click",function(h){b(this).prevAll("input").val("").trigger("keyup");return false});if("popover" in b.fn){}else{b.fn.popover=b.fn.jesPopover;b.fn.popover.Constructor=b.fn.jesPopover.Constructor}b("a.hasClickPopover").popover({trigger:"click",placement:"right",html:true,content:function(){var i=b(this).data("ip");var j=b(this).parents("tr").index();var h=i.replace(/\./g,"");h="jrealtimeip"+j+h;var l=this;if(b(this).data("jrealtime_iprequest")){return'<div id="'+h+'"></div>'}if(b(this).data("jrealtime_ipinfo")){var k=b(this).data("jrealtime_ipinfo");if(jrealtimeBackendHostInfo){var o=b(this).data("jrealtime_ipaddressinfo");if(o){k=k.replace("</ul>",o+"</ul>")}}return k}b(this).data("jrealtime_iprequest",true);if(jrealtimeGeolocationService=="geoiplookup"){var n="https://json.geoiplookup.io/"+i;var m="jsonp"}else{var n="https://ipapi.co/"+i+"/json";var m=null}b.get(n,function(p){var t=true;var s=0;if(p){var q='<ul class="jrealtime_ipgeolocation">';if(p.city){q+="<li>"+p.city+"</li>";t=false;s+=4}if(p.country_name){q+="<li>"+p.country_name+"</li>";t=false;s+=4}if(p.region){q+="<li>"+p.region+"</li>";t=false;s+=4}}else{q="-"}if(t){q="-";b(l).next("div.popover").css("margin-top",0)}else{b(l).next("div.popover").css("margin-top",-s);q+='</ul><span class="icon-location"></span>'}b("#"+h).html(q);b(l).data("jrealtime_ipinfo",q);b(l).data("jrealtime_iprequest",false);if(jrealtimeBackendHostInfo){var r=jrealtimeIpAddressServerStatsEndpoint+"?time="+(new Date().getTime())+"&ipaddress="+i;b.ajax({type:"GET",async:true,url:r,dataType:"text",success:function(u){var x="<li>"+u+"</li>";var v=b("ul.jrealtime_ipgeolocation","#"+h).height();var w=b("ul.jrealtime_ipgeolocation","#"+h).append(x).height();b(l).data("jrealtime_ipaddressinfo",x);var y=parseInt(b(l).next("div.popover").css("margin-top"));b(l).next("div.popover").css("margin-top",(y-parseInt((w-v)/2)))}})}},m);return'<div id="'+h+'"></div>'}}).on("shown.bs.popover",function(){setTimeout(function(h){b(h).addClass("active")},0,this)}).on("hidden.bs.popover",function(){b(this).removeClass("active")});b(document).on("click","body",function(h){if(!b(h.target).hasClass("hasClickPopover active")&&!b(h.target).hasClass("popover-content")){b("a.hasClickPopover.active").popover("hide")}})}).call(this)};b(function(){window.JRealtimeServerstats=new a()})})(jQuery);